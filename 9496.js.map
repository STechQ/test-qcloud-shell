{"version":3,"file":"9496.js","mappings":"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","sources":["webpack://qcloud_shell/./src/presentation/vue3/pages/systemuser/listusers.vue?d042","webpack://qcloud_shell/./src/presentation/vue3/pages/systemuser/listusers.vue?4912","webpack://qcloud_shell/./src/presentation/vue3/pages/systemuser/listusers.vue?4de0","webpack://qcloud_shell/./src/presentation/vue3/pages/systemuser/listusers.vue"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.content-area[data-v-cf47f5d4] {\\n    overflow-y: scroll;\\n    height: 100%;\\n}\\n.tables-area[data-v-cf47f5d4] {\\n    width: 70%;\\n    margin-left: 15%;\\n    margin-top: 10px;\\n}\\n.section-area[data-v-cf47f5d4] {\\n    margin-bottom: 25px;\\n}\\n.header-text[data-v-cf47f5d4] {\\n    font-weight: bold;\\n    margin-bottom: 5px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/presentation/vue3/pages/systemuser/listusers.vue\"],\"names\":[],\"mappings\":\";AAuHA;IACI,kBAAkB;IAClB,YAAY;AAChB;AAEA;IACI,UAAU;IACV,gBAAgB;IAChB,gBAAgB;AACpB;AAEA;IACI,mBAAmB;AACvB;AAEA;IACI,iBAAiB;IACjB,kBAAkB;AACtB\",\"sourcesContent\":[\"<script setup lang=\\\"ts\\\">\\nimport { CreatePromiseData } from \\\"@stechquick/algae/lib/helpers/createPromiseData\\\";\\nimport { IUser } from \\\"@stechquick/algae/lib/qCloudTemp/quickCloud\\\";\\nimport { defineAsyncComponent, onBeforeMount, onMounted, ref } from \\\"vue\\\";\\nimport { container } from \\\"../../../../domain/core/diContainer\\\";\\nimport { ILocalization } from \\\"../../../../domain/infrastructure/ILocalization\\\";\\nimport { IDialog } from \\\"../../../../domain/presentation/IDialog\\\";\\nimport { IRouter, routeDefinition } from \\\"../../../../domain/presentation/IRouter\\\";\\nimport { ISystemUserManagement } from \\\"../../../../domain/useCase/ISystemUserManagement\\\";\\nimport { IUseCaseExecutor } from \\\"../../../../domain/useCase/IUseCaseExecutor\\\";\\nimport { IUserUseCaseImpl } from \\\"../../../../domain/useCase/IUserUseCaseImpl\\\";\\n\\nrouteDefinition({ noAuth: true });\\n\\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\\nconst userUseCaseImpl = container.resolve<IUserUseCaseImpl>(IUserUseCaseImpl);\\nconst localization = container.resolve<ILocalization>(ILocalization);\\nconst router = container.resolve<IRouter>(IRouter);\\nconst systemUserManagement = container.resolve<ISystemUserManagement>(ISystemUserManagement);\\nconst dialog = container.resolve<IDialog>(IDialog);\\n\\nconst routerParams = router.getRouteParams<{ dbName?: string }>();\\nconst users = ref<Array<IUser>>([]);\\n\\nlet dtOptions: any = { month: '2-digit', day: '2-digit', year: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };\\nconst dtBaseOptions = {\\n    filterable: false, perPage: 10, perPageValues: [],\\n    sortIcon: { base: 'mdi', is: 'mdi mdi-unfold-less-horizontal', up: 'mdi mdi-arrow-up', down: 'mdi mdi-arrow-down' },\\n};\\nconst userDtOptions = {\\n    ...dtBaseOptions,\\n    headings: {\\n        ID: \\\"User ID\\\",\\n        name: \\\"User Name\\\",\\n        mailAddress: \\\"E-Mail\\\",\\n        createdBy: localization.get('applicationListcreatedByHeader'),\\n        createDate: localization.get('applicationListcreatedDateHeader'),\\n    }\\n};\\nconst usersDatatableColumns = ref(['ID', 'name', 'mailAddress', 'createdBy', 'createDate', \\\"actions\\\"]);\\nconst usersDataTable = ref(userDtOptions);\\n\\nasync function listUsers() {\\n    await executor.execute(async () => {\\n        users.value = await userUseCaseImpl.listUsers(routerParams.dbName);\\n    }, { loading: true });\\n}\\n\\nasync function deleteUser(userID: string, userName: string) {\\n    await executor.execute(async () => {\\n        await userUseCaseImpl.deleteUser(userID, userName, routerParams.dbName);\\n        await listUsers();\\n    }, { loading: true });\\n}\\n\\nconst checkUserProm = CreatePromiseData<void>();\\n\\nonBeforeMount(async () => {\\n    await executor.execute(async () => {\\n        await systemUserManagement.checkUser();\\n        checkUserProm.resolver();\\n    }, { loading: true });\\n});\\n\\nonMounted(async () => {\\n    await checkUserProm.promise;\\n    await listUsers();\\n});\\n\\nasync function createNewUser() {\\n    const closeCb = async (reason: \\\"close\\\" | \\\"outclick\\\" | \\\"component\\\") => {\\n        if (reason != \\\"component\\\") { return; }\\n        await listUsers();\\n    };\\n\\n    dialog.showDialog(defineAsyncComponent(\\n        () => import(`../../components/user/createUser.vue`)),\\n        { closable: true, title: \\\"Create User\\\", closeCb },\\n        { dbName: routerParams.dbName }\\n    );\\n}\\n\\nfunction gotoMainPage() {\\n    router.back();\\n}\\n\\n</script>\\n<template>\\n    <div class=\\\"content-area\\\">\\n        <div class=\\\"tables-area\\\">\\n            <div class=\\\"section-area\\\">\\n                <div>\\n                    <button @click=\\\"gotoMainPage()\\\">Back</button>\\n                </div>\\n            </div>\\n            <div class=\\\"section-area\\\">\\n                <div class=\\\"header-text\\\">\\n                    <button @click=\\\"createNewUser()\\\" class=\\\"btn-new-item\\\">Create New User</button>\\n                </div>\\n                <div>\\n                    <v-client-table ref='table' :data=\\\"users\\\" :columns=\\\"usersDatatableColumns\\\"\\n                        :options=\\\"usersDataTable\\\">\\n                        <template #createdDate=\\\"props\\\">\\n                            <span>{{ new Intl.DateTimeFormat(\\\"tr-TR\\\", dtOptions).format(new Date(props.row.createDate))\\n                            }}</span>\\n                        </template>\\n                        <template #actions=\\\"props\\\">\\n                            <div>\\n                                <button @click=\\\"deleteUser(props.row.ID, props.row.mailAddress)\\\">Delete</button>\\n                            </div>\\n                        </template>\\n                    </v-client-table>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</template>\\n\\n<style scoped>\\n.content-area {\\n    overflow-y: scroll;\\n    height: 100%;\\n}\\n\\n.tables-area {\\n    width: 70%;\\n    margin-left: 15%;\\n    margin-top: 10px;\\n}\\n\\n.section-area {\\n    margin-bottom: 25px;\\n}\\n\\n.header-text {\\n    font-weight: bold;\\n    margin-bottom: 5px;\\n}\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-cf47f5d4\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"content-area\" }\nconst _hoisted_2 = { class: \"tables-area\" }\nconst _hoisted_3 = { class: \"section-area\" }\nconst _hoisted_4 = { class: \"section-area\" }\nconst _hoisted_5 = { class: \"header-text\" }\nconst _hoisted_6 = [\"onClick\"]\n\nimport { CreatePromiseData } from \"@stechquick/algae/lib/helpers/createPromiseData\";\nimport { IUser } from \"@stechquick/algae/lib/qCloudTemp/quickCloud\";\nimport { defineAsyncComponent, onBeforeMount, onMounted, ref } from \"vue\";\nimport { container } from \"../../../../domain/core/diContainer\";\nimport { ILocalization } from \"../../../../domain/infrastructure/ILocalization\";\nimport { IDialog } from \"../../../../domain/presentation/IDialog\";\nimport { IRouter, routeDefinition } from \"../../../../domain/presentation/IRouter\";\nimport { ISystemUserManagement } from \"../../../../domain/useCase/ISystemUserManagement\";\nimport { IUseCaseExecutor } from \"../../../../domain/useCase/IUseCaseExecutor\";\nimport { IUserUseCaseImpl } from \"../../../../domain/useCase/IUserUseCaseImpl\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'listusers',\n  setup(__props) {\n\nrouteDefinition({ noAuth: true });\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst userUseCaseImpl = container.resolve<IUserUseCaseImpl>(IUserUseCaseImpl);\nconst localization = container.resolve<ILocalization>(ILocalization);\nconst router = container.resolve<IRouter>(IRouter);\nconst systemUserManagement = container.resolve<ISystemUserManagement>(ISystemUserManagement);\nconst dialog = container.resolve<IDialog>(IDialog);\n\nconst routerParams = router.getRouteParams<{ dbName?: string }>();\nconst users = ref<Array<IUser>>([]);\n\nlet dtOptions: any = { month: '2-digit', day: '2-digit', year: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };\nconst dtBaseOptions = {\n    filterable: false, perPage: 10, perPageValues: [],\n    sortIcon: { base: 'mdi', is: 'mdi mdi-unfold-less-horizontal', up: 'mdi mdi-arrow-up', down: 'mdi mdi-arrow-down' },\n};\nconst userDtOptions = {\n    ...dtBaseOptions,\n    headings: {\n        ID: \"User ID\",\n        name: \"User Name\",\n        mailAddress: \"E-Mail\",\n        createdBy: localization.get('applicationListcreatedByHeader'),\n        createDate: localization.get('applicationListcreatedDateHeader'),\n    }\n};\nconst usersDatatableColumns = ref(['ID', 'name', 'mailAddress', 'createdBy', 'createDate', \"actions\"]);\nconst usersDataTable = ref(userDtOptions);\n\nasync function listUsers() {\n    await executor.execute(async () => {\n        users.value = await userUseCaseImpl.listUsers(routerParams.dbName);\n    }, { loading: true });\n}\n\nasync function deleteUser(userID: string, userName: string) {\n    await executor.execute(async () => {\n        await userUseCaseImpl.deleteUser(userID, userName, routerParams.dbName);\n        await listUsers();\n    }, { loading: true });\n}\n\nconst checkUserProm = CreatePromiseData<void>();\n\nonBeforeMount(async () => {\n    await executor.execute(async () => {\n        await systemUserManagement.checkUser();\n        checkUserProm.resolver();\n    }, { loading: true });\n});\n\nonMounted(async () => {\n    await checkUserProm.promise;\n    await listUsers();\n});\n\nasync function createNewUser() {\n    const closeCb = async (reason: \"close\" | \"outclick\" | \"component\") => {\n        if (reason != \"component\") { return; }\n        await listUsers();\n    };\n\n    dialog.showDialog(defineAsyncComponent(\n        () => import(`../../components/user/createUser.vue`)),\n        { closable: true, title: \"Create User\", closeCb },\n        { dbName: routerParams.dbName }\n    );\n}\n\nfunction gotoMainPage() {\n    router.back();\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_client_table = _resolveComponent(\"v-client-table\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", null, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (gotoMainPage()))\n          }, \"Back\")\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (createNewUser())),\n            class: \"btn-new-item\"\n          }, \"Create New User\")\n        ]),\n        _createElementVNode(\"div\", null, [\n          _createVNode(_component_v_client_table, {\n            ref: \"table\",\n            data: users.value,\n            columns: usersDatatableColumns.value,\n            options: usersDataTable.value\n          }, {\n            createdDate: _withCtx((props) => [\n              _createElementVNode(\"span\", null, _toDisplayString(new Intl.DateTimeFormat(\"tr-TR\", _unref(dtOptions)).format(new Date(props.row.createDate))), 1 /* TEXT */)\n            ]),\n            actions: _withCtx((props) => [\n              _createElementVNode(\"div\", null, [\n                _createElementVNode(\"button\", {\n                  onClick: ($event: any) => (deleteUser(props.row.ID, props.row.mailAddress))\n                }, \"Delete\", 8 /* PROPS */, _hoisted_6)\n              ])\n            ]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"data\", \"columns\", \"options\"])\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./listusers.vue?vue&type=style&index=0&id=cf47f5d4&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./listusers.vue?vue&type=style&index=0&id=cf47f5d4&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import script from \"./listusers.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./listusers.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./listusers.vue?vue&type=style&index=0&id=cf47f5d4&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/QCloud-Shell/QCloud-Shell/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cf47f5d4\"]])\n\nexport default __exports__"],"names":["___CSS_LOADER_EXPORT___","push","module","id","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","__name","setup","__props","noAuth","executor","IUseCaseExecutor","userUseCaseImpl","IUserUseCaseImpl","localization","ILocalization","router","IRouter","systemUserManagement","ISystemUserManagement","dialog","IDialog","routerParams","getRouteParams","users","dtOptions","month","day","year","hour","minute","second","userDtOptions","filterable","perPage","perPageValues","sortIcon","base","is","up","down","headings","ID","name","mailAddress","createdBy","get","createDate","usersDatatableColumns","usersDataTable","async","listUsers","execute","value","dbName","loading","checkUserProm","checkUser","resolver","promise","_ctx","_cache","_component_v_client_table","_","onClick","$event","back","showDialog","closable","title","closeCb","reason","ref","data","columns","options","createdDate","props","Intl","DateTimeFormat","format","Date","row","actions","userID","userName","deleteUser","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement"],"sourceRoot":""}