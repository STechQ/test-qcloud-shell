{"version":3,"file":"9028.js","mappings":"6HASA,IAAIA,GAAe,EACnB,IAAIC,SAAcC,GAAOA,MAAOC,MAAK,IAAMH,GAAe,IACrC,oBAAf,WAA8BI,YACpC,MAAMC,GAAsC,IAAjBL,EAMpB,SAASM,EAAqBC,EAAkBC,EAAoC,CAAC,GAExF,IAAIC,EAA2CC,EAC3CC,EACJ,MAAMC,EAA6CL,IAC3CI,GAASE,aAAaF,GAC1BA,EAAQG,YAAW,KAAQJ,EAAO,IAAIK,MAAM,gDAAgDR,KAAW,GAAKA,EAA6B,EAO7I,OAJIA,GACAK,EAAWL,GAGR,CACHK,aACAI,QAAS,IAAIf,SAAW,CAACC,EAAKe,KAdT,IAACC,IAc8ChB,EAA5BO,EAdKJ,GAAsBG,EAAIW,eAAkBC,GAA8BN,YAAW,IAAMI,EAAGE,KAAUF,EAc3ER,EAASO,CAAG,IACtFR,WACAC,SAER,C,wGC/BA,SAASW,IACL,MAAMC,GAAO,SAEb,OADAR,YAAW,KAAQQ,EAAKb,UAAU,GAAI,KAC/Ba,EAAKN,OAChB,CAEOO,eAAeC,EAA6BC,EAAoBP,SAC7DQ,EAAiB,CAACD,IACxB,MAAME,EAAM,aAA8BF,SACpCP,EAAGS,EACb,CACOJ,eAAeG,EAAiBE,EAA6BV,GAChE,IAAIW,GAAM,EACV,MAAQA,GACJ,IACID,EAAaE,SAAQL,GAAc,aAAkBA,KACrDI,GAAM,C,CACR,MAAOE,SACCV,G,OAGRH,aAAE,EAAFA,IACV,C,4CCpBO,MAAMc,EAAUC,OAAOC,IAAI,WAI3B,SAASC,EAAgBC,GAEhC,C,2FCXA,MAAMC,EAAa,CAAC,OCEpB,GDI4B,QAAiB,CAC3CC,OAAQ,WACRC,MAAMC,GAEJ,MACMC,EADS,aAA2BT,EAAA,IACdU,iBAIhC,OAFI,QAAgB,CAAEC,QAAQ,IAEvB,CAACC,EAAUC,MACR,WAAc,QAAoB,MAAO,KAAM,EACrD,IAAAC,GAAoB,SAAU,CAC5BC,IANsB,6CAMC,QAAON,GAAcO,YAC5CC,MAAO,CAAC,MAAQ,OAAO,OAAS,UAC/B,KAAM,EAAeZ,KAG5B,G","sources":["webpack://qcloud_shell/./src/common/promiseHelper.ts","webpack://qcloud_shell/./src/domain/core/diContainer.ts","webpack://qcloud_shell/./src/domain/presentation/IRouter.ts","webpack://qcloud_shell/./src/presentation/vue3/pages/contents.vue?9276","webpack://qcloud_shell/./src/presentation/vue3/pages/contents.vue"],"sourcesContent":["export interface IPromiseData<T> {\n    promise: Promise<T>;\n    resolver: (value: T | PromiseLike<T>) => void;\n    reject: (reason?: any) => void;\n    startTimer: (timeout: number) => void;\n}\n\n//some platforms have syncronous resolve problem (ex: IOS JavascriptCore)\ndeclare var doNothing: any;\nlet syncResolved = false as boolean;\nnew Promise<void>(res => res()).then(() => syncResolved = true);\ntypeof(doNothing) != \"undefined\" && doNothing();\nconst syncResolveProblem = syncResolved === true; // platform has sync resolve problem or not\n\ntype ResolveFunc<T> = (value: T | PromiseLike<T>) => void;\n/**\n * @param timeout timeout time in ms, undefined if infinite\n */\nexport function createPromiseData<T>(timeout?: number, opt: { fixSyncResolve?: boolean } = {}): IPromiseData<T> {\n    const syncResolveFixer = (cb: ResolveFunc<T>) => syncResolveProblem && opt.fixSyncResolve ? (value: T | PromiseLike<T>) => setTimeout(() => cb(value)) : cb;\n    let resolver: ResolveFunc<T> = <any>undefined, reject: (reason?: any) => void = <any>undefined;\n    let timer: number;\n    const startTimer: IPromiseData<T>[\"startTimer\"] = (timeout: number) => {\n        if (timer) { clearTimeout(timer); }\n        timer = setTimeout(() => { reject(new Error(`The operation has timed out. timeoutValue  : ${timeout}`)); }, timeout) as unknown as number;\n    }\n\n    if (timeout) {\n        startTimer(timeout);\n    }\n\n    return {\n        startTimer,\n        promise: new Promise<T>((res, rej) => { resolver = syncResolveFixer(res); reject = rej; }),\n        resolver,\n        reject\n    };\n}","import { container, singleton, inject, injectable } from \"tsyringe\";\nimport { DependencyContainer } from \"tsyringe\";\nimport { createPromiseData } from \"../../common/promiseHelper\";\n\ninterface IDependencyContainer extends DependencyContainer { }; // for vite vs webpack :( remember\n\nfunction sleep() {\n    const prom = createPromiseData<void>();\n    setTimeout(() => { prom.resolver() }, 100);\n    return prom.promise;\n}\n\nexport async function delayWithResolve<TInterface>(dependency: symbol, cb: (dep: TInterface) => void | Promise<void>) {\n    await delayTillResolve([dependency]);\n    const dep = container.resolve<TInterface>(dependency);\n    await cb(dep);\n}\nexport async function delayTillResolve(dependencies: Array<symbol>, cb?: () => void | Promise<void>) {\n    let run = false;\n    while (!run) {\n        try {\n            dependencies.forEach(dependency => container.resolve(dependency));\n            run = true;\n        } catch (err) {\n            await sleep();\n        }\n    }\n    await cb?.();\n}\n\nexport { container, singleton, inject, injectable, IDependencyContainer }","export interface IRouter {\n    push(to: string | { path: string, params?: Record<string, any> }): Promise<void>;\n    back(): void;\n    getRouteParams<T extends Record<string, string | Array<string>>>(): T;\n    isBackOrForward(): boolean;\n    isRouteNoAuth(): boolean;\n}\n\nexport const IRouter = Symbol.for(\"IRouter\");\nexport interface IRouteDefinition {\n    noAuth?: boolean\n}\nexport function routeDefinition(definition: IRouteDefinition) {\n    // Nothing to do, this is for extract-routes\n}\nexport interface IRouteOptions {\n    transfer?: string;\n}\nexport function routeOptions(options: IRouteOptions) {\n    // Nothing to do, this is for extract-routes\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\n\nimport { ref } from \"vue\";\n    import { container } from \"../../../domain/core/diContainer\";\n    import { IRouter, routeDefinition } from \"../../../domain/presentation/IRouter\";\n    \nexport default /*#__PURE__*/_defineComponent({\n  __name: 'contents',\n  setup(__props) {\n\n    const router = container.resolve<IRouter>(IRouter);\n    const routerParams = router.getRouteParams<{ contentName: string }>();\n    const azureStorageUrl = \"https://ststudio.z6.web.core.windows.net/\";\n    routeDefinition({ noAuth: true });\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"iframe\", {\n      src: azureStorageUrl + _unref(routerParams).contentName,\n      style: {\"width\":\"100%\",\"height\":\"100vh\"}\n    }, null, 8 /* PROPS */, _hoisted_1)\n  ]))\n}\n}\n\n})","import script from \"./contents.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./contents.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["syncResolved","Promise","res","then","doNothing","syncResolveProblem","createPromiseData","timeout","opt","resolver","reject","timer","startTimer","clearTimeout","setTimeout","Error","promise","rej","cb","fixSyncResolve","value","sleep","prom","async","delayWithResolve","dependency","delayTillResolve","dep","dependencies","run","forEach","err","IRouter","Symbol","for","routeDefinition","definition","_hoisted_1","__name","setup","__props","routerParams","getRouteParams","noAuth","_ctx","_cache","_","src","contentName","style"],"sourceRoot":""}