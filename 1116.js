"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[1116],{11317:(e,n,o)=>{o.d(n,{Z:()=>s});var t=o(8375),a=o.n(t),l=o(7638),i=o.n(l)()(a());i.push([e.id,'\n.container[data-v-5104c410] {\n    width: 100%;\n    height: 100%;\n    max-width: 100%;\n    padding: 32px 20px 20px;\n    display: flex;\n    flex-direction: column;\n}\n.content-wrapper[data-v-5104c410] {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n}\n.bottom-section[data-v-5104c410] {\n    margin-top: auto;\n}\n.footer[data-v-5104c410] {\n    position: relative;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: end;\n    margin-top: 20px;\n}\n.cancel-button[data-v-5104c410] {\n    border-radius: 4px;\n    user-select: none;\n    font-style: normal;\n    font-weight: 500;\n    font-family: "ROBOTO";\n    font-size: 15px;\n    color: #757575;\n    padding: 10px 16px;\n    cursor: pointer;\n    margin-right: 4px;\n    border: none;\n    background: transparent;\n}\n.save-button[data-v-5104c410] {\n    background: #151233;\n    border-radius: 4px;\n    user-select: none;\n    font-weight: 500;\n    font-size: 15px;\n    color: #ffffff;\n    padding: 10px 16px;\n    cursor: pointer;\n    border: none;\n}\n.save-button[data-v-5104c410]:disabled {\n    color: #757575;\n    cursor: not-allowed;\n}\n.publish-info[data-v-5104c410] {\n    color: #757575;\n    font-size: 20px;\n    margin-left: 10px;\n}\n.select-environment[data-v-5104c410] {\n    width: 100%;\n    font-size: 15px;\n    height: 40px;\n    line-height: 40px;\n    margin-top: 4px;\n}\n',""]);const s=i},29307:(e,n,o)=>{o.d(n,{w:()=>t});const t=Symbol.for("IFileDisplayerUseCase")},62376:(e,n,o)=>{o.d(n,{q:()=>t});const t=Symbol.for("IListMultiModelVersions")},17379:(e,n,o)=>{o.d(n,{y:()=>t});const t=Symbol.for("IListMultiModuleVersions")},15772:(e,n,o)=>{o.d(n,{M:()=>t});const t=Symbol.for("IModelSelectionValidator")},83240:(e,n,o)=>{o.d(n,{e:()=>t});const t=Symbol.for("IModuleVersionUseCase")},71665:(e,n,o)=>{o.d(n,{n:()=>t});const t=Symbol.for("IWorkflowExportJobUseCase")},96691:(e,n,o)=>{o.r(n),o.d(n,{default:()=>z});var t=o(71093),a=o(66190),l=o(73843),i=o(5627),s=o(83487),r=o(88613),d=o(84874),u=o(56452),c=o(64740),p=o(28518),v=o(50419),m=o(36250),f=o(15772),y=o(28131),x=o(13348),g=o(71665);const h={class:"container"},b={class:"content-wrapper"},w={class:"bottom-section"},S={key:0,class:"info"},k={class:(0,a.normalizeClass)(["footer","export"])},I=["disabled"],C=(0,t.aZ)({__name:"workflowExportDialog",emits:["close"],setup(e,{emit:n}){const o=i.nC.resolve(r.J),a=i.nC.resolve(s.y),C=i.nC.resolve(d.B),F=i.nC.resolve(c.t),O=i.nC.resolve(v.L),T=i.nC.resolve(f.M),U=i.nC.resolve(g.n),D=(0,l.iH)([]),E=(0,l.iH)([]),A=(0,l.iH)(""),_=(0,l.iH)({backgroundColor:"#F5F5FA",color:"#373737",fontSize:"20px",iconColor:"#F3CA40",marginTop:"20px"}),M=(0,t.Fl)((()=>!(Z.value&&z.value&&j.value&&P.value&&K.value&&!q.value))),Z=(0,t.Fl)((()=>D.value.some((e=>e.checked||e.anyChildChecked)))),K=(0,t.Fl)((()=>T.checkVersionOfItems(D.value))),P=(0,t.Fl)((()=>T.validateRootQjsonForWF(E.value))),V=(0,t.Fl)((()=>function(){const e=T.checkWorkflowExecutionItems(E.value),n=e.wfExportValid;return{...e,allItemsOK:!n.wfExists||n.getUserOK&&n.notifyOK&&n.preFormOK&&n.iPaasEndPointOK}}())),j=(0,t.Fl)((()=>V.value.allItemsOK)),z=(0,l.iH)(!1),q=(0,t.Fl)((()=>T.checkSettingsFilesSelected())),W=(0,t.Fl)((()=>D.value.some((e=>{var n;return null===(n=e.parent)||void 0===n?void 0:n.newModuleVersionAvaliable})))),H=(0,t.Fl)((()=>Z.value?K.value?P.value?j.value?z.value?void 0:A.value:`${function(){let e="Please include the following items in your export selection: ";const n=V.value.wfExportValid,o=[];return n.getUserOK||o.push('"getUser"'),n.notifyOK||o.push('"notify"'),n.preFormOK||o.push('"TaskPreview"'),n.iPaasEndPointOK||o.push('"IPaaS_Endpoint"'),e+=o.join(", "),e}()}`:"Please make sure that the 'root' UI page is selected for export.":"There are no items ready to publish. At least one of your items must be ready to publish.":"Please select at least one item to export.")),B=(0,t.Fl)((()=>E.value.some((e=>{var n;return null===(n=null==e?void 0:e.parent)||void 0===n?void 0:n.unreleased}))));function L(){a.execute((async()=>{const e=await T.validateDependencies(D.value,"Export");A.value=e.dependencyErrorStr,z.value=e.validation}),{loading:!1})}function J(e,n){const o=D.value.findIndex((n=>n.id===e.id));-1!==o?D.value[o]={...e}:D.value.push({...e});const t=E.value.findIndex((n=>n.id===e.id));e.checked?-1!==t?E.value[t]=e:E.value.push(e):-1!==t&&E.value.splice(t,1),n&&L()}function N(){n("close")}return(0,t.bv)((()=>{L()})),(e,n)=>((0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("div",b,[(0,t.Wm)(y.Z,{screenType:"Export",onGetItem:J,searchable:!0})]),(0,t._)("div",w,[(0,l.SU)(M)?((0,t.wg)(),(0,t.iD)("div",S,[(0,l.SU)(q)?((0,t.wg)(),(0,t.j4)(m.Z,{key:0,customIconClass:"mdi mdi-alert",customStyle:_.value,isSlot:!0},{default:(0,t.w5)((()=>[(0,t.Uk)(" Some settings files in your application are currently unassigned. To continue, please navigate to the "),(0,t._)("span",{onClick:n[0]||(n[0]=e=>function(){N();const e=i.nC.resolve(x.y);a.execute((async()=>{await e.openAppSettingsUI()}),{loading:!0})}()),style:{"font-weight":"bold","text-decoration":"underline",cursor:"pointer"}}," Settings page "),(0,t.Uk)(" and assign all necessary files ")])),_:1},8,["customStyle"])):(0,t.kq)("v-if",!0),(0,l.SU)(M)&&(0,l.SU)(H)?((0,t.wg)(),(0,t.j4)(m.Z,{key:1,customIconClass:"mdi mdi-alert",infoText:(0,l.SU)(H),customStyle:_.value},null,8,["infoText","customStyle"])):(0,l.SU)(W)?((0,t.wg)(),(0,t.j4)(m.Z,{key:2,infoText:"A newer module version is available. Your export will be generated using the updated version.",customStyle:{..._.value,iconColor:"#151233"}},null,8,["infoText","customStyle"])):(0,t.kq)("v-if",!0)])):(0,t.kq)("v-if",!0),(0,l.SU)(B)?((0,t.wg)(),(0,t.j4)(m.Z,{key:1,customIconClass:"mdi mdi-alert",infoText:"You are about to export an unreleased version.",customStyle:_.value},null,8,["customStyle"])):(0,t.kq)("v-if",!0),(0,t._)("div",k,[(0,t._)("button",{class:"cancel-button",onClick:n[1]||(n[1]=e=>N())},"Cancel"),(0,t._)("button",{class:"save-button",disabled:(0,l.SU)(M),onClick:n[2]||(n[2]=e=>async function(){a.execute((async()=>{const e=function(){const e=Array();return E.value.forEach((n=>{const t=[{ID:(a=n).id,version:a.version||"latest"}];var a;t&&t.length>0&&(C.traverseAllItems((e=>("model"!=e.objectType||"workflow"!=e.modelType||t.some((n=>n.ID!=e.ID))||u.$.parseWorkflowModelBodyWFE(function(e){const n=F.extractRuntimeModel(e);return{appId:o.studio.appId,organizationId:o.user.selectedOrganization.id,modelID:p.x.embedIdType(e.ID,e.modelType),name:e.name,type:e.modelType,modelBody:n,updateDate:e.updateDate&&new Date(e.updateDate).valueOf(),version:e.version}}(e),"notification",(e=>{O.showNotification({text:e,type:"error"})})),"continue"))),Array.prototype.push.apply(e,t))})),e}(),n=Array.from(new Map(D.value.filter((e=>{var n,o;return"module"===(null===(n=e.parent)||void 0===n?void 0:n.type)&&(null===(o=e.parent)||void 0===o?void 0:o.imported)})).map((e=>[e.parent.id,{moduleId:e.parent.id,moduleName:e.parent.name,moduleStrategy:e.parent.updateStrategy||e.parent.importedVersion,moduleVersion:e.parent.version}]))).values());await U.createAppExportJob({items:e,updateStrategyInfos:n}),N()}),{loading:!0})}())},"DOWNLOAD",8,I)])])]))}});var F=o(17450),O=o.n(F),T=o(29530),U=o.n(T),D=o(16199),E=o.n(D),A=o(40458),_=o.n(A),M=o(62916),Z=o.n(M),K=o(92165),P=o.n(K),V=o(11317),j={};j.styleTagTransform=P(),j.setAttributes=_(),j.insert=E().bind(null,"head"),j.domAPI=U(),j.insertStyleElement=Z(),O()(V.Z,j),V.Z&&V.Z.locals&&V.Z.locals;const z=(0,o(32525).Z)(C,[["__scopeId","data-v-5104c410"]])}}]);