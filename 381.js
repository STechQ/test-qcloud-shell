"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[381],{51842:(e,n,o)=>{o.d(n,{Z:()=>d});var t=o(8375),i=o.n(t),l=o(7638),a=o.n(l)()(i());a.push([e.id,"\n.container[data-v-1be12645] {\n    padding: 32px 20px 20px;\n}\n.appitems-header[data-v-1be12645] {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin: 0 0 8px 0;\n}\n.switch-container[data-v-1be12645] {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    white-space: nowrap;\n    margin: 0 15px 13px 30px;\n}\n.switch-label[data-v-1be12645] {\n    font-size: 14px;\n    line-height: 16px;\n    color: #212121\n}\n.settings-container[data-v-1be12645] {\n    position: relative;\n    top: 0px;\n    left: 0px;\n}\n.custom-text[data-v-1be12645] {\n    /* position: absolute; */\n    font-family: 'Roboto';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 15px;\n    line-height: 18px;\n    /* left: 24px; */\n    color: #212121;\n}\n\n/* .custom-text.title{\n    top: 92px;\n}\n\n.custom-text.environment{\n    top: 174px;\n} */\n.radio-button[data-v-1be12645] {\n    position: absolute;\n    top: 60px;\n    left: 20px;\n    cursor: pointer;\n}\n.radio-text[data-v-1be12645] {\n    position: absolute;\n    top: 59px;\n    font: normal normal normal 14px/19px Roboto;\n    color: #212121;\n    user-select: none;\n    cursor: pointer;\n}\n.existing-app-url[data-v-1be12645] {\n    position: absolute;\n    width: 100%;\n    height: 40px;\n    top: 114px;\n    left: 20px;\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #bcbcbc;\n    border-radius: 4px;\n    font: normal normal normal 14px/19px Roboto;\n    letter-spacing: 0px;\n    padding: 10px 0px 10px 10px;\n}\n.url-error[data-v-1be12645] {\n    border: 1px solid red;\n}\n.url-disable[data-v-1be12645] {\n    opacity: 0.5;\n}\n.existing-app-url[data-v-1be12645]::placeholder {\n    color: #bcbcbc;\n    user-select: none;\n}\n.modules-selected-checkbox[data-v-1be12645] {\n    cursor: pointer;\n}\n.modules-selected-text[data-v-1be12645] {\n    font: normal normal normal 14px/19px Roboto;\n    color: #757575;\n    margin: 0 0 13px 30px;\n}\n\n/* .modules-selected-text.deploy {\n    top: 257px;\n} */\n.text-number[data-v-1be12645] {\n    font: normal normal bold 14px/19px Roboto;\n    color: #212121;\n}\n.modules-datatable[data-v-1be12645] {\n    width: 100%;\n    height: 100%;\n}\n.bulkSave-module-datatable[data-v-1be12645] {\n    overflow-y: auto;\n    max-height: 200px;\n}\n/* .modules-datatable.deploy {\n    top: 286px;\n} */\n.modules-datatable[data-v-1be12645]::-webkit-scrollbar {\n    width: 4px;\n}\n.modules-datatable[data-v-1be12645]::-webkit-scrollbar-thumb {\n    background: #bcbcbc 0% 0% no-repeat padding-box;\n    border-radius: 10px;\n}\n.modules-datatable[data-v-1be12645]::-webkit-scrollbar-thumb:hover {\n    background: #555;\n}\n.row-container[data-v-1be12645] {\n    width: 100%;\n    height: 36px;\n    position: relative;\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #e0e0e0;\n}\n.chevron[data-v-1be12645] {\n    position: absolute;\n    left: 4px;\n    color: #757575;\n    font-size: 24px;\n}\n.chevron.disabled[data-v-1be12645] {\n    pointer-events: none;\n    color: #D5D5D5;\n}\n.module-checkbox[data-v-1be12645] {\n    position: absolute;\n    top: 10px;\n    left: 43px;\n    cursor: pointer;\n}\n.module-name[data-v-1be12645] {\n    position: absolute;\n    top: 9px;\n    left: 69px;\n    font: normal normal normal 14px/19px Roboto;\n    color: #212121;\n}\n.module-name.imported[data-v-1be12645] {\n    top: 10px;\n    left: 87px;\n}\n.module-name.disabled[data-v-1be12645] {\n    color: #D5D5D5;\n}\n.model-checkbox[data-v-1be12645] {\n    position: absolute;\n    top: 10px;\n    left: 59px;\n    cursor: pointer;\n}\n.model-icon[data-v-1be12645] {\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    top: 6px;\n    left: 85px;\n}\n.app-tier-model-icon[data-v-1be12645] {\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    top: 6px;\n    left: 69px\n}\n.app-tier-model-name[data-v-1be12645] {\n    position: absolute;\n    top: 10px;\n    left: 87px;\n    font: normal normal normal 14px/19px Roboto;\n    color: #212121;\n}\n.app-tier-model-name.disabled[data-v-1be12645] {\n    color: #D5D5D5;\n}\n.model-name[data-v-1be12645] {\n    position: absolute;\n    top: 9px;\n    left: 103px;\n    font: normal normal normal 14px/19px Roboto;\n    color: #212121;\n}\n.model-name.disabled[data-v-1be12645] {\n    color: #D5D5D5;\n}\n.version-text[data-v-1be12645] {\n    margin: 10px 7px 10px auto;\n    display: table;\n    font: normal normal normal 12px/16px Roboto;\n    color: #757575;\n    cursor: pointer;\n    user-select: none;\n}\n.version-text.disabled[data-v-1be12645] {\n    pointer-events: none;\n    cursor: pointer;\n}\n.version-icon[data-v-1be12645] {\n    font: normal normal normal 16px/19px Material Design Icons;\n    color: #D5D5D5;\n}\n.version-icon.disabled[data-v-1be12645] {\n    font: normal normal normal 16px/19px Material Design Icons;\n    color: #EEEEEE;\n    pointer-events: none;\n    cursor: pointer;\n}\n.footer[data-v-1be12645] {\n    position: relative;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: end;\n}\n.footer.deploy[data-v-1be12645] {\n    position: relative;\n    width: 100%;\n}\n.footer.export[data-v-1be12645] {\n    margin: 50px 0 24px;\n}\n.cancel-button[data-v-1be12645] {\n    border-radius: 4px;\n    user-select: none;\n    font-style: normal;\n    font-weight: 500;\n    font-family: \"ROBOTO\";\n    font-size: 15px;\n    color: #757575;\n    padding: 10px 16px;\n    cursor: pointer;\n}\n.save-button[data-v-1be12645] {\n    background: #151233 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    user-select: none;\n    font-weight: 500;\n    font-size: 15px;\n    color: #ffffff;\n    padding: 10px 16px;\n    cursor: pointer;\n}\n.mobile-publish-text[data-v-1be12645],\n.web-publish-text[data-v-1be12645] {\n    padding: 5px 12px;\n    margin-bottom: 52px;\n    width: 100%;\n    color: #757575;\n    font-size: 14px;\n    background: #F5F5FA;\n    border-radius: 4px;\n    display: flex;\n    align-items: center;\n}\n.mobile-publish-text i[data-v-1be12645],\n.web-publish-text i[data-v-1be12645] {\n    font-size: 24px;\n    color: #151233;\n    margin-right: 4px;\n}\n.save-button.deploy[data-v-1be12645] {\n    padding: 10px 16px;\n}\n.button-disable .save-button[data-v-1be12645] {\n    color: #757575;\n    cursor: default;\n}\n.button-disable .save-button:hover+.button-tooltip[data-v-1be12645],\n.start-screen:hover .button-tooltip[data-v-1be12645],\n.row-container:hover .button-tooltip[data-v-1be12645],\n.publish-info:hover .button-tooltip[data-v-1be12645] {\n    visibility: visible;\n    transition: opacity 0.3s ease-out 1s;\n    opacity: 1;\n}\n.button-tooltip[data-v-1be12645] {\n    visibility: hidden;\n    position: absolute;\n    background: #757575;\n    color: #FFFFFF;\n    font-size: 11px;\n    font-family: 'Roboto';\n    text-align: center;\n    border-radius: 4px;\n    letter-spacing: 0.2px;\n    padding: 6px 8px 6px 8px;\n    top: 56px;\n    opacity: 0;\n}\n.publish-info[data-v-1be12645] {\n    color: #757575;\n    font-size: 20px;\n    margin-left: 10px;\n}\n.select-environment[data-v-1be12645] {\n    width: 100%;\n    font-size: 15px;\n    height: 40px;\n    line-height: 40px;\n    margin-top: 4px\n}\n",""]);const d=a},18884:(e,n,o)=>{o.d(n,{Z:()=>d});var t=o(8375),i=o.n(t),l=o(7638),a=o.n(l)()(i());a.push([e.id,"\n.selected-environment {\n    background-color: transparent;\n    border-radius: 4px;\n    border: 1px solid #BCBCBC;\n    color: #212121;\n    padding-left: 12px;\n}\n.custom-placeholder:empty:before {\n    color: #BCBCBC !important;\n    font-weight: 400;\n}\n.custom-select .items .option {\n    font-size: 14px;\n    padding-left: 12px;\n    line-height: 32px;\n}\n.custom-select .items .option:hover {\n    background-color: #EEEEEE;\n    color: #212121;\n}\n.custom-select .items .option.disabled:hover {\n    background-color: #FFFFFF;\n    color: #212121;\n}\n.custom-select.select-environment .items {\n    margin-top: 4px;\n    color: #212121;\n    border-radius: 4px;\n    border: 1px solid #E3E3E3;\n    overflow: hidden;\n    background-color: #FFFFFF;\n    box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.2);\n    position: static !important;\n}\n",""]);const d=a},30381:(e,n,o)=>{o.d(n,{Z:()=>de});var t=o(71093),i=o(66190),l=o(73843),a=o(46233),d=o(30647),s=o(5627),r=o(91056),p=o(62376),c=o(17379),u=o(83487),v=o(88613),m=o(54848),h=o(66354),f=o(86194),b=o(67457),y=o(29307),x=o(3329),g=o(29633),k=o(28820),T=o(13348),w=o(9595),D=o(51946);const C=e=>((0,t.dD)("data-v-1be12645"),e=e(),(0,t.Cn)(),e),S={style:{display:"flex","flex-direction":"column",flex:"1"}},I={class:"appitems-header"},E={class:"appitems-header-left"},U={class:"text-number"},M={class:"text-number"},F={key:0,class:"switch-container"},A=C((()=>(0,t._)("span",{class:"switch-label"},"Show modified items only",-1))),B={key:1},O={key:1,class:"mobile-publish-text"},H=C((()=>(0,t._)("i",{class:"mdi mdi-information"},null,-1))),z={key:2,style:{"margin-bottom":"102px"}},j=(0,t.uE)('<div style="display:flex;align-items:center;" data-v-1be12645><span class="custom-text environment" data-v-1be12645> Publish To </span><span class="publish-info" data-v-1be12645><i class="mdi mdi-information" data-v-1be12645></i><span class="button-tooltip" style="top:460px;left:96px;z-index:1;width:231px;" data-v-1be12645>Publish To options may change depending on the module type you choose.</span></span></div>',1),P={class:"save-button deploy"},V={key:0,class:"button-tooltip",style:{top:"-46px",right:"-14px","z-index":"1",width:"120px"}},_={key:1,class:"button-tooltip",style:{top:"-46px",right:"-15px","z-index":"1",width:"123px"}},Z={key:2,class:"button-tooltip",style:{top:"-46px",right:"-18px","z-index":"1",width:"135px"}},R={key:3,class:"button-tooltip",style:{top:"-46px",right:"-18px","z-index":"1",width:"135px"}},q={key:4,class:"button-tooltip",style:{top:"-46px",right:"-14px","z-index":"1",width:"120px"}},N=(0,t.aZ)({__name:"appItemsTable",props:{screenType:null,platformSelection:null,buttonCb:{type:Function},buttonDisableTooltip:null,maxHeight:null,hideVersionInfo:{type:Boolean},checkedPageIds:null,updateAppModels:{type:Function},versionType:null},emits:["close","getItem"],setup(e,{emit:n}){const C=e,N=s.nC.resolve(v.J),L=s.nC.resolve(m.B),Q=s.nC.resolve(r.u),$=s.nC.resolve(u.y),Y=s.nC.resolve(y.w),W=s.nC.resolve(g._),G=s.nC.resolve(k.H),K=(0,l.iH)([]),J=(0,l.iH)(!0),X=(0,l.iH)(""),ee=(0,l.iH)(),ne=(0,l.iH)(),oe=(0,l.iH)(),te=(0,l.iH)(),ie=(0,l.iH)(),le=(0,l.iH)(),ae=(0,l.iH)(),de=(0,l.iH)(""),se=((0,t.Fl)((()=>N.apps.find((e=>e.ID==N.studio.appId)))),(0,l.iH)(!1));let re=(0,l.iH)(!1);const pe=(0,l.iH)({backgroundColor:"#F5F5FA",color:"#373737",fontSize:"20px",iconColor:"#F3CA40",marginTop:"20px"}),ce={Export:"DOWNLOAD",Deploy:"PUBLISH",Release:"RELEASE",Create:"CREATE",Save:"SAVE",Update:"UPDATE",BulkSave:"SAVE CHANGES"};(0,t.bv)((async()=>{await $.execute((async()=>{if(await Promise.all([$.executeUseCase(p.q,{}).then((e=>oe.value=e)),$.executeUseCase(p.q,{historyType:"checkin"}).then((e=>te.value=e)),$.executeUseCase(c.y,{}).then((e=>ie.value=e))]),function(){const e=new Map,n=new Map;L.flatMapItems(N.studio.items,(e=>{var o,t,i,l;if("model"!=e.objectType)return;let a;if("module"==e.owner.objectType&&We(e.owner)){const n=null===(o=ie.value)||void 0===o?void 0:o.get(e.owner.ID),i=null===(t=e.owner.relatedApplications.find((e=>e.applicationID==N.studio.appId)))||void 0===t?void 0:t.importedVersion,l=null==n?void 0:n.filter((e=>e.version==i)).flatMap((e=>e.relatedModelHistories)).find((n=>n.modelID==e.ID));a=null==l?void 0:l.version}else{const o=Be(e);if(!o)return n.set(e.ID,e.dependentModels?e.dependentModels.map((e=>e.modelId)):Array());a=o}const d=null===(l=null===(i=oe.value)||void 0===i?void 0:i.get(e.ID))||void 0===l?void 0:l.find((e=>e.version==a));n.set(e.ID,(null==d?void 0:d.dependentModels)?null==d?void 0:d.dependentModels.map((e=>e.modelId)):Array())})),n.forEach(((o,t)=>{const i=Array();n.forEach(((e,n)=>{e.some((e=>e==t))&&i.push(n)})),e.set(t,{dependedBy:i,dependedTo:o})})),ae.value=e}(),Me(),se.value=G.hasEmptySettings(),"BulkSave"===C.screenType){const e=localStorage.getItem("itemsTableSwitchState");re.value=!!e&&"true"===e}"OnlyQjson"==C.screenType&&(K.value=K.value.filter((e=>"qjson"==e.type||"folder"==e.type||"module"==e.type))),"Deploy"==C.screenType&&_e(),J.value=De(),function(){const e=n=>{n.children&&n.children.length>0?n.children.forEach(e):n.checked&&Le(n)};K.value.filter((e=>!e.parent)).forEach(e)}(),me.value=K.value.filter((e=>!e.children&&e.checked)).length}),{loading:!0})})),(0,t.YP)((()=>C.versionType),((e,n)=>{"BulkSave"==C.screenType&&e!==n&&(K.value=[],Me())}));const ue=(0,t.Fl)((()=>{if("BulkSave"!==C.screenType||!0!==re.value)return new Set(K.value.map((e=>e.id)));const e=new Set;return K.value.forEach((n=>{if((e=>"module"!==e.type&&"folder"!==e.type)(n)&&(e=>!0===(null==e?void 0:e.isModified)||!0===(null==e?void 0:e.modified))(n))for(let o=n;o;o=o.parent)e.add(o.id)})),e})),ve=(0,t.Fl)((()=>K.value.some((e=>!e.children&&ue.value.has(e.id))))),me=(0,l.iH)(0),he=(0,t.Fl)((()=>K.value.filter((e=>!e.children)).length)),fe=(0,t.Fl)((()=>"Deploy"==C.screenType&&C.platformSelection.web&&""==X.value||!J.value||!K.value.some((e=>e.checked||e.anyChildChecked))||!Se()||!Ce()||C.buttonDisableTooltip||se.value)),be=(0,t.Fl)((()=>he.value==me.value||!(me.value>0)&&void 0)),ye=(0,t.Fl)((()=>function(){let e=!1;return K.value.forEach((n=>{var o;"module"==n.type?null===(o=n.children)||void 0===o||o.forEach((n=>{n.version&&(e=!0)})):n.version&&(e=!0)})),e}())),xe=(0,t.Fl)(Ce),ge=(0,t.Fl)(Se),ke=(0,l.iH)({}),Te=(0,t.Fl)((()=>re.value));function we(e){re.value=e,localStorage.setItem("itemsTableSwitchState",String(e))}function De(){let e=!0;const n=K.value.filter((e=>"module"==e.type&&e.anyChildChecked)),o=K.value.filter((e=>"qjson"==e.type&&e.checked));return le.value=N.studio.items.find((e=>{var n;return null===(n=e.additionals)||void 0===n?void 0:n.isRootPage})),!!le.value&&("Deploy"==C.screenType&&(n.length>0&&(e=n.map((e=>e.children)).filter((e=>!(null==e?void 0:e.find((e=>"entityDesigner"==e.type&&e.checked))))).length<=0),o.length>0&&(e=-1!=o.map((e=>N.studio.items.find((n=>n.ID==e.id)))).findIndex((e=>e.additionals.isRootPage)))),e)}function Ce(){var e,n;const o=new Map;K.value.forEach((e=>{"module"==e.type&&e.children&&e.children.length>0?e.children.forEach((e=>o.set(e.id,1==e.checked))):o.set(e.id,1==e.checked)}));const t=new Map;null===(e=ae.value)||void 0===e||e.forEach(((e,n)=>{o.get(n)&&e.dependedTo.forEach((e=>{if(!o.get(e))if(t.has(n)){const o=t.get(n);o.push(e),t.set(n,o)}else t.set(n,[e])}))}));const[i]=t.keys();if(i){const e=t.get(i),o=e?e.map(Ie).map((e=>null==e?void 0:e.name)).join(", "):"";de.value=`Select ${o} first. ${null===(n=Ie(i))||void 0===n?void 0:n.name} depends on ${o}.`}return 0==t.size}function Se(){var e;return null===(e=K.value.find((e=>{var n;return e.id==(null===(n=le.value)||void 0===n?void 0:n.ID)})))||void 0===e?void 0:e.checked}function Ie(e){for(const n of K.value){if("module"!=n.type&&n.id==e)return n;if("module"==n.type&&n.children&&n.children.length>0){const o=n.children.find((n=>n.id==e));if(o)return o}}}function Ee(e,n){e&&(ke.value[e]=n)}function Ue({newItem:e}){K.value.push(e),"BulkSave"==C.screenType&&(K.value=K.value.filter((e=>!e.isUnmodifiableTotal&&e.isCheckedOut)))}function Me(){if("OnlyQjson"!=C.screenType){const e=N.studio.items.find((e=>"App Settings"==e.name)),n=Be(e),o=e&&{id:e.ID,name:e.name,checked:"BulkSave"!=C.screenType||Ae(e),disabled:!1,type:e.modelType,version:n||"latest",isUnmodifiableTotal:e.isUnmodifiableTotal,isCheckedOut:e.checkedOut,nextVersionPreview:"BulkSave"==C.screenType&&C.versionType&&n?Oe(n,C.versionType):void 0,isModified:Ae(e)};e&&o&&Ue({newItem:o});const t=d.CryptoHelper.CreateGuid(),i=N.studio.items.filter((e=>"model"==e.objectType&&"appAssetList"==e.usageType)),l={id:t,collapsed:!0,name:"Styled Components",type:"module",imported:!1,anyChildChecked:!0,allChildChecked:!0,children:[{}]};i.length>0&&Ue({newItem:l}),l.children=i.map((e=>{const n=Be(e),o={id:e.ID,parent:l,name:e.name,type:e.modelType,checked:"BulkSave"!=C.screenType||Ae(e),usageType:null==e?void 0:e.usageType,version:n,level:2,isUnmodifiableTotal:e.isUnmodifiableTotal,isCheckedOut:e.checkedOut,nextVersionPreview:"BulkSave"==C.screenType&&C.versionType&&n?Oe(n,C.versionType):void 0,isModified:Ae(e)};return Ue({newItem:o}),o})),Ve(l,!1)}const e=Y.cloneFileExplorerTreeView({displayFilterer:(e,n)=>{switch(e.ID){case x.oA.uiAssetListID:case x.oA.uiSettingsID:return!1}switch(e.objectType){case"application":return!1;case"module":case"model":return!0;case"folder":return n}}}),n=(e,o)=>{var t,i,l,a,d,s,r,p,c,u,v,m,h,f;const b=e.externalData;if("application"==b.objectType)throw new Error("unexpected item type");let y,x=W.getFullPath(b,"self").split("/").length-1;switch(b.objectType){case"folder":y={id:b.ID,name:b.name,type:"folder",collapsed:!0,level:x,children:null===(t=e.children)||void 0===t?void 0:t.map((e=>n(e,{ownerModule:o.ownerModule}))),isCheckedOut:!0,path:b.path},null===(i=y.children)||void 0===i||i.forEach((e=>e.parent=y)),Ve(y,!1);break;case"model":if(o.ownerModule)if(y={id:b.ID,name:b.name,type:b.modelType,level:x},o.ownerModule.isImportedModule){const e=null===(d=o.ownerModule.relatedModelHistories)||void 0===d?void 0:d.find((e=>e.modelID==b.ID));y={...y,checked:"OnlyQjson"==C.screenType?C.checkedPageIds&&Fe(b.ID,C.checkedPageIds):!!Ye(b)||b.isUnmodifiableTotal,disabled:!1,version:null!==(s=null==e?void 0:e.version)&&void 0!==s?s:b.version,ownerName:b.owner.name,ownerType:b.owner.objectType,path:"appSettings"==b.usageType||"appAssetList"==b.usageType?"/":b.path,isUnmodifiableTotal:b.isUnmodifiableTotal,isCheckedOut:b.checkedOut,imported:!!e||"fromOuterOrg",isModified:!1}}else{const e=Be(b);y={...y,checked:"BulkSave"===C.screenType?!!(null===(l=b.modified)||void 0===l?void 0:l.model):"OnlyQjson"===C.screenType?C.checkedPageIds&&Fe(b.ID,C.checkedPageIds):!!(e&&"appSettings"!=b.usageType||Ye(b))||b.isUnmodifiableTotal,disabled:!("BulkSave"==C.screenType||"OnlyQjson"==C.screenType||e&&"appSettings"!=b.usageType||"appSettings"!=b.usageType||"css"==b.modelType||"container"==b.modelType||b.isUnmodifiableTotal),version:!o.ownerModule.isImportedModule&&b.isUnmodifiableTotal?"latest":e,ownerName:b.owner.name,ownerType:b.owner.objectType,path:"appSettings"==b.usageType||"appAssetList"==b.usageType?"/":b.path,isUnmodifiableTotal:b.isUnmodifiableTotal,isCheckedOut:b.checkedOut,nextVersionPreview:"BulkSave"==C.screenType&&C.versionType&&"latest"!==e?Oe(e||void 0,C.versionType):void 0,isModified:!!(null===(a=b.modified)||void 0===a?void 0:a.model)}}else{const e=Be(b);y={id:b.ID,name:b.name,checked:"BulkSave"===C.screenType?!!(null===(r=b.modified)||void 0===r?void 0:r.model):"OnlyQjson"===C.screenType?C.checkedPageIds&&Fe(b.ID,C.checkedPageIds):!!(e&&"appSettings"!=b.usageType||Ye(b))||b.isUnmodifiableTotal,disabled:!("BulkSave"==C.screenType||"OnlyQjson"==C.screenType||e&&"appSettings"!=b.usageType||"appSettings"!=b.usageType||"css"==b.modelType||"container"==b.modelType||b.isUnmodifiableTotal),type:b.modelType,version:b.isUnmodifiableTotal?"latest":e,ownerName:b.owner.name,ownerType:b.owner.objectType,level:x,path:"appSettings"==b.usageType||"appAssetList"==b.usageType?"/":b.path,isUnmodifiableTotal:b.isUnmodifiableTotal,isCheckedOut:b.checkedOut,nextVersionPreview:"BulkSave"==C.screenType&&C.versionType&&"latest"!==e?Oe(e||void 0,C.versionType):void 0,isModified:!!(null===(p=b.modified)||void 0===p?void 0:p.model)}}break;case"module":const g=We(b),k=null===(c=b.relatedApplications.find((e=>e.applicationID==N.studio.appId)))||void 0===c?void 0:c.importedVersion,T=g?null===(m=null===(v=null===(u=ie.value)||void 0===u?void 0:u.get(b.ID))||void 0===v?void 0:v.find((e=>e.version==k)))||void 0===m?void 0:m.relatedModelHistories:void 0;y={id:b.ID,collapsed:!0,name:b.name,type:"module",imported:g,version:k,isUnmodifiableTotal:g,isCheckedOut:!g,children:null===(h=e.children)||void 0===h?void 0:h.map((e=>n(e,{ownerModule:{isImportedModule:g,moduleVersion:k,relatedModelHistories:T}})))},null===(f=y.children)||void 0===f||f.forEach((e=>e.parent=y)),Ve(y,!1)}return y},o=e.map((e=>n(e,{}))),t=e=>{var n;Ue({newItem:e}),null===(n=e.children)||void 0===n||n.forEach(t)};o.forEach(t)}function Fe(e,n){return n.some((n=>n==e))}function Ae(e){var n;return"model"===(null==e?void 0:e.objectType)&&!0===(null===(n=e.modified)||void 0===n?void 0:n.model)}function Be(e){const n=function(e){var n,o,t;if("BulkSave"!==C.screenType){if(!(null===(n=oe.value)||void 0===n?void 0:n.has(e.ID)))return;const o=oe.value.get(e.ID);if(!o)return;return o}const i=[...(null===(o=oe.value)||void 0===o?void 0:o.get(e.ID))||[],...(null===(t=te.value)||void 0===t?void 0:t.get(e.ID))||[]];if(0!==i.length)return i}(e);if(n)return(e=>{const n=e.map((e=>{const n=e.split(".");return 10*parseInt(n[0])+1*parseInt(n[1])}));n.sort(((e,n)=>n-e));const o=n[0];return`${Math.floor(o/10)}.${o%10}`})(n.map((e=>e.version)))}function Oe(e,n){if(!e||"latest"===e)return"major"===n?"1.0":"0.1";const o=e.split(".").map((e=>parseInt(e)));let t=o[0]||0,i=o[1]||0;return"major"===n?(t++,i=0):"minor"===n&&i++,`${t}.${i}`}function He(e,n){var o;Le(e,n),null===(o=ke.value[e.name])||void 0===o||o.handleModuleCountCheckboxEvent()}function ze(e,n,o){var t;e.collapsed=void 0!==o?o:!e.collapsed,n&&(null===(t=e.children)||void 0===t||t.forEach((o=>{document.getElementById(o.id).style.display=e.collapsed?"none":"block",ze(o,n,e.collapsed)})))}function je(e,n){var o,t;if(e.disabled||e.checked)return;e.checked=!0,e.parent&&Ve(e.parent,n);const i=null===(t=null===(o=ae.value)||void 0===o?void 0:o.get(e.id))||void 0===t?void 0:t.dependedTo;i&&i.forEach((e=>{K.value.forEach((o=>{var t;if("module"==o.type&&!o.allChildChecked){const i=null===(t=o.children)||void 0===t?void 0:t.find((n=>!n.checked&&n.id==e));return i&&je(i,n),void Ve(o,n)}o.checked||o.id!=e||(je(o,n),o.parent&&Ve(o.parent,n))}))}))}function Pe(e){if(e.disabled||function(e){var n,o;if("BulkSave"==C.screenType){if("appSettings"===e.type)return!1;const n=L.findModel(e.id);if(n&&Ye(n))return!1;if("appAssetList"===(null==n?void 0:n.usageType))return!1}const t=null===(o=null===(n=ae.value)||void 0===n?void 0:n.get(e.id))||void 0===o?void 0:o.dependedBy;return!!t&&t.some((e=>K.value.some((n=>{var o;return"module"==n.type&&n.anyChildChecked?null===(o=n.children)||void 0===o?void 0:o.some((n=>n.checked&&n.id==e)):n.id==e&&n.checked}))))}(e))return;let n;"module"!=e.type&&"folder"!=e.type?e.checked?(e.checked=!1,n=!0,e.parent&&Ve(e.parent,!0)):(n=!1,je(e,!0)):e.children&&e.children.filter((e=>!e.disabled)).length>0?e.anyChildChecked?(e.children.filter((e=>!e.disabled)).forEach((e=>{const n=e.checked;e.checked=!1,He(e,n)})),e.checked=!1,Ve(e,!0)):(e.children.forEach((e=>{je(e,!0),He(e,!1)})),e.checked=!0):(e.checked=!e.checked,e.allChildChecked=!1),He(e,n),J.value=De(),"Deploy"==C.screenType&&_e()}function Ve(e,n){var o,t;e.disabled=e.children&&(0==e.children.length||!(null===(o=e.children)||void 0===o?void 0:o.some((e=>!e.disabled)))),e.allChildChecked=e.children&&e.children.length>0&&!e.children.some((e=>!e.checked||e.disabled)),e.anyChildChecked=null===(t=e.children)||void 0===t?void 0:t.some((e=>e.checked&&!e.disabled)),e.anyChildChecked||(e.checked=!1,He(e)),n&&e.parent&&Ve(e.parent,!0)}function _e(){var e,n,o,t;ne.value=[],ee.value=[];const i=null===(t=null===(o=null===(n=null===(e=N.user)||void 0===e?void 0:e.selectedOrganization)||void 0===n?void 0:n.actions)||void 0===o?void 0:o.publish)||void 0===t?void 0:t.targets;if(!i)return;if(!K.value.find((e=>e.anyChildChecked||e.checked))){ne.value=Object.entries(i).map((e=>Qe(e[0])));const e=Array();for(let n=0;n<ne.value.length;n++)e.push({index:n,cause:"You need to include items to publish."});return void(ee.value=e)}const l=function(e){const n=Array();return Object.keys(e).forEach((o=>{const t=o,i=e[t],l=Qe(t);if(!i)return n.push({optionName:l,cause:"You are not authorized to publish to this target."});switch(t){case"azure":const e=(n,o)=>{if(!o||0==o.length)return n;for(const t of o)if((t.checked||t.anyChildChecked)&&("module"==t.type&&(n=e(n,t.children)),"entityDesigner"==t.type||"bpmn"==t.type||"process"==t.type)){n=!1;break}return n};if(!e(!0,K.value))return n.push({optionName:l,cause:"Entity and process models cannot be published to this target."});break;case"plateauGCP":const o=K.value.filter((e=>"UI Settings"!=e.name)).find((e=>{var n,o;return"module"==e.type&&e.anyChildChecked&&(null===(n=e.children)||void 0===n?void 0:n.some((e=>e.checked&&("bpmn"==e.type||"process"==e.type))))&&!(null===(o=e.children)||void 0===o?void 0:o.some((e=>"entityDesigner"==e.type&&e.checked)))}));if(o)return n.push({optionName:l,cause:`This target not available. Selected module '${o.name}' has not any Data Model.`})}n.push({optionName:l})})),n}(i),a=l.sort(((e,n)=>!e.cause==!n.cause?0:e.cause?1:-1)),d=Array();for(let e=0;e<a.length;e++){const n=a[e].cause;n&&d.push({index:e,cause:n})}ee.value=d,ne.value=a.map((e=>e.optionName)),X.value=a[0].cause?"":a[0].optionName}function Ze(e,n){var o,t,i,l,a,d;const s=null===(o=ae.value)||void 0===o?void 0:o.get(n.id);null===(t=ae.value)||void 0===t||t.set(n.id,{dependedBy:(null==s?void 0:s.dependedBy)||Array(),dependedTo:(null===(d=null===(a=null===(l=null===(i=oe.value)||void 0===i?void 0:i.get(n.id))||void 0===l?void 0:l.find((n=>n.version==e)))||void 0===a?void 0:a.dependentModels)||void 0===d?void 0:d.map((e=>e.modelId)))||Array()})}function Re(e){var n,i;const l={id:e.id,state:{checked:e.checked},text:e.name,type:e.type,version:e.version},a=null===(n=oe.value)||void 0===n?void 0:n.has(e.id),d={clickedNode:l,cb:n=>{e.version=n,Ze(n,e),"BulkSave"==C.screenType&&C.versionType&&"latest"!==n?(e.nextVersionPreview=Oe(n,C.versionType),K.value=[],Me()):e.nextVersionPreview=void 0,C.updateAppModels&&l.state.checked&&C.updateAppModels(e)}};a&&(d.versions=null===(i=oe.value)||void 0===i?void 0:i.get(e.id)),Q.showDialog((0,t.RC)((()=>o.e(6583).then(o.bind(o,10531)))),{closable:!0,title:"Change Version",width:"1080px",maxHeight:"500px",overflow:"auto"},d)}function qe(e){var n;Q.showDialog((0,t.RC)((()=>o.e(6005).then(o.bind(o,45872)))),{closable:!0,title:"Change Version",width:"1080px",maxHeight:"500px",overflow:"auto"},{module:{ID:e.id},versions:null===(n=ie.value)||void 0===n?void 0:n.get(e.id),cb:n=>{var o;e.version=n.version,null===(o=e.children)||void 0===o||o.forEach((e=>{const o=n.relatedModelHistories.find((n=>n.modelID==e.id));e.version=null==o?void 0:o.version,Ze(null==o?void 0:o.version,e)}))}})}function Ne(){n("close")}function Le(e,o){["module","folder"].includes(e.type)||(null!=o&&o!=e.checked&&(e.checked?me.value++:me.value--),n("getItem",e))}function Qe(e,n=!1){const o={azure:"Public Cloud",plateauGCP:"Plateau Platform Playground"};return n?Object.keys(o).find((n=>{if(o[n]===e)return!0})):Object.keys(o).includes(e)?o[e]:void 0}function $e(e){X.value=e}function Ye(e){if("css"==e.modelType)return!0;const n=N.studio.items.filter((e=>"model"==e.objectType&&"appSettings"==e.modelType))[0].modelBody;return!!(n?n[0].model:"").includes(e.ID)}const We=e=>W.isModuleImported(e);return(e,o)=>((0,t.wg)(),(0,t.iD)("div",S,[(0,t._)("div",I,[(0,t._)("div",E,[(0,t.Wm)(b.Z,{class:(0,i.normalizeClass)(["modules-selected-checkbox","Deploy"==C.screenType?"deploy":""]),minus:0==(0,l.SU)(be),check:1==(0,l.SU)(be),onClick:o[0]||(o[0]=e=>{return n=null==(0,l.SU)(be),K.value.filter((e=>!e.disabled&&!e.parent&&ue.value.has(e.id))).forEach((e=>{e.checked!==n&&(e.checked=n,He(e)),(e.children||[]).filter((e=>!e.disabled&&ue.value.has(e.id))).forEach((e=>{e.checked!==n&&(e.checked=n,He(e))})),Ve(e,!0)})),J.value=De(),void("Deploy"===C.screenType&&_e());var n})},null,8,["class","minus","check"]),(0,t._)("div",{class:(0,i.normalizeClass)(["modules-selected-text","Deploy"==C.screenType?"deploy":""])},[(0,t._)("span",U,(0,i.toDisplayString)(me.value),1),(0,t.Uk)(" of "),(0,t._)("span",M,(0,i.toDisplayString)((0,l.SU)(he)),1),(0,t.Uk)(" items selected ")],2)]),"BulkSave"===C.screenType?((0,t.wg)(),(0,t.iD)("div",F,[(0,t.Wm)(D.Z,{onChange:we,value:(0,l.SU)(Te)},null,8,["value"]),A])):(0,t.kq)("v-if",!0)]),"BulkSave"!==C.screenType?((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,i.normalizeClass)(["modules-datatable","Deploy"==C.screenType?"deploy":""]),id:"module-container-div",style:(0,i.normalizeStyle)({maxHeight:C.maxHeight,overflow:C.maxHeight?"auto":""})},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(K.value,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.id},[(0,t.Wm)(h.Z,{handleItemCheckEvent:Pe,startScreen:le.value,versionDialog:Re,handleCollapse:ze,item:e,moduleVersionDialog:qe,hideVersionInfo:C.hideVersionInfo,ref_for:!0,ref:n=>Ee(e.name,n)},null,8,["startScreen","item","hideVersionInfo"])])))),128))],6)):(0,t.kq)("v-if",!0),"BulkSave"===C.screenType?((0,t.wg)(),(0,t.iD)("div",B,[!(0,l.SU)(Te)||(0,l.SU)(ve)?((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,i.normalizeClass)(["bulkSave-module-datatable",""]),id:"module-container-div",style:(0,i.normalizeStyle)({maxHeight:C.maxHeight,overflow:C.maxHeight?"auto":""})},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(K.value,(e=>(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",{key:e.id},[(0,t.Wm)(h.Z,{handleItemCheckEvent:Pe,startScreen:le.value,versionDialog:Re,handleCollapse:ze,item:e,moduleVersionDialog:qe,hideVersionInfo:C.hideVersionInfo,ref_for:!0,ref:n=>Ee(e.name,n)},null,8,["startScreen","item","hideVersionInfo"])])),[[a.vShow,(0,l.SU)(ue).has(e.id)]]))),128))],4)):((0,t.wg)(),(0,t.iD)("div",O,[H,(0,t.Uk)(" No modified items to show. ")]))])):(0,t.kq)("v-if",!0),"Deploy"==C.screenType?((0,t.wg)(),(0,t.iD)("div",z,[j,(0,t.Wm)(f.Z,{options:ne.value,onInput:$e,selectedOption:X.value,default:X.value,disabledOptions:ee.value,selectedClass:"selected-environment",placeholder:"Select the publish environment of your application",class:"select-environment"},null,8,["options","selectedOption","default","disabledOptions"])])):(0,t.kq)("v-if",!0),se.value?((0,t.wg)(),(0,t.j4)(w.Z,{key:3,customIconClass:"mdi mdi-alert",customStyle:pe.value,style:{"margin-top":"20px"},isSlot:!0},{default:(0,t.w5)((()=>[(0,t.Uk)(" Some settings files in your application are currently unassigned. To continue, please navigate to the "),(0,t._)("span",{onClick:o[1]||(o[1]=e=>function(){n("close"),Q.closeAllDialogs();const e=s.nC.resolve(T.y);$.execute((async()=>{await e.openAppSettingsUI()}),{loading:!0})}()),style:{"font-weight":"bold","text-decoration":"underline",cursor:"pointer"}}," Settings page "),(0,t.Uk)(" and assign all necessary files ")])),_:1},8,["customStyle"])):(0,t.kq)("v-if",!0),["OnlyQjson","BulkSave"].includes(C.screenType)?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)("div",{key:4,class:(0,i.normalizeClass)(["footer","Deploy"==C.screenType?"deploy":"export"])},[(0,t._)("div",{class:(0,i.normalizeClass)(["cancel-button","Deploy"==C.screenType?"deploy":""]),onClick:Ne},"Cancel",2),(0,t._)("div",{class:(0,i.normalizeClass)([(0,l.SU)(fe)?" button-disable":""]),onClick:o[2]||(o[2]=e=>!(0,l.SU)(fe)&&C.buttonCb&&C.buttonCb())},[(0,t._)("span",P,(0,i.toDisplayString)(ce[C.screenType]),1),(0,l.SU)(ge)?"Deploy"!=C.screenType||X.value?(0,l.SU)(ye)?(0,l.SU)(xe)?C.buttonDisableTooltip?((0,t.wg)(),(0,t.iD)("span",q,(0,i.toDisplayString)(C.buttonDisableTooltip),1)):(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)("span",R,(0,i.toDisplayString)(de.value),1)):((0,t.wg)(),(0,t.iD)("span",Z,"There are no items ready to publish. At least one of your items must be ready to publish.")):((0,t.wg)(),(0,t.iD)("span",_,"You need to select a publish environment.")):((0,t.wg)(),(0,t.iD)("span",V,"You need to include your start screen."))],2)],2))]))}});var L=o(17450),Q=o.n(L),$=o(29530),Y=o.n($),W=o(16199),G=o.n(W),K=o(40458),J=o.n(K),X=o(62916),ee=o.n(X),ne=o(92165),oe=o.n(ne),te=o(51842),ie={};ie.styleTagTransform=oe(),ie.setAttributes=J(),ie.insert=G().bind(null,"head"),ie.domAPI=Y(),ie.insertStyleElement=ee(),Q()(te.Z,ie),te.Z&&te.Z.locals&&te.Z.locals;var le=o(18884),ae={};ae.styleTagTransform=oe(),ae.setAttributes=J(),ae.insert=G().bind(null,"head"),ae.domAPI=Y(),ae.insertStyleElement=ee(),Q()(le.Z,ae),le.Z&&le.Z.locals&&le.Z.locals;const de=(0,o(32525).Z)(N,[["__scopeId","data-v-1be12645"]])}}]);