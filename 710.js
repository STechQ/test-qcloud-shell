"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[710],{51474:(e,n,a)=>{a.d(n,{Z:()=>d});var t=a(8375),o=a.n(t),i=a(7638),l=a.n(i),r=a(79240),s=l()(o());s.i(r.Z),s.push([e.id,"\n.module-tab-div[data-v-ae83a344] {\n    margin-top: 12px;\n}\n.no-module-text[data-v-ae83a344] {\n    font-size: 14px;\n    color: #757575\n}\n.ghost-img[data-v-ae83a344] {\n    margin-right: 12px;\n    width: 22px;\n}\n.no-data-div[data-v-ae83a344] {\n    justify-content: center;\n    display: flex;\n    margin: 24px 0;\n    align-items: center;\n}\n.module-tabs[data-v-ae83a344] {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid var(--grey-lighten-1, #BDBDBD);\n}\n.tab-item[data-v-ae83a344] {\n    height: 36px;\n    padding: 10px 54px 10px 54px;\n    font-family: Roboto;\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 16px;\n    letter-spacing: 0em;\n    text-align: center;\n    color: #A1A1A1;\n}\n.active-category[data-v-ae83a344] {\n    color: #151233;\n    border-bottom: 2px solid;\n    font-family: Roboto;\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 16px;\n    letter-spacing: 0em;\n    text-align: center;\n}\n.container[data-v-ae83a344] {\n    padding: 32px 20px 20px;\n}\n.table-name[data-v-ae83a344] {\n    color: #151233;\n    font-size: 16px;\n    font-weight: 500;\n    line-height: 18px;\n    margin-bottom: 12px;\n}\n.select-module-btn[data-v-ae83a344] {\n    border: none;\n    background: none;\n    color: #212121;\n    font-size: 20px;\n}\n.back-button[data-v-ae83a344] {\n    font-size: 28px;\n    color: #151233;\n    cursor: pointer;\n    margin-right: 16px;\n}\n.module-name-div[data-v-ae83a344] {\n    display: flex;\n    align-items: center;\n    margin-bottom: 16px;\n}\n.module-name[data-v-ae83a344] {\n    color: #151233;\n    font-size: 16px;\n    font-weight: 500;\n}\n.remove-module[data-v-ae83a344] {\n    background: none;\n    border: none;\n    font-size: 20px;\n    color: #212121;\n    width: 100%;\n    display: flex;\n    justify-content: end;\n    align-items: center;\n}\n.imported-version[data-v-ae83a344] {\n    color: #2C5A86;\n    font-size: 14px;\n    font-weight: 500;\n    margin-right: 22px;\n    cursor: pointer;\n}\n.import-btn[data-v-ae83a344] {\n    background: none;\n    border: none;\n    font-size: 14px;\n    font-weight: 500;\n    color: #2C5A86;\n    cursor: pointer;\n}\n.add-ref-module-btn[data-v-ae83a344] {\n    font-size: 13px;\n    text-align: center;\n    color: #FFFFFF;\n    background: #151233;\n    display: flex;\n    align-items: center;\n    padding: 4px 8px;\n    border-radius: 4px;\n    border: none;\n}\n.remove-module:hover .button-tooltip[data-v-ae83a344] {\n    opacity: 1;\n    visibility: visible;\n}\n.button-tooltip[data-v-ae83a344] {\n    visibility: hidden;\n    position: absolute;\n    background: #757575;\n    color: #FFFFFF;\n    font-size: 9px;\n    font-family: 'Roboto';\n    text-align: center;\n    border-radius: 4px;\n    letter-spacing: 0.2px;\n    padding: 6px 8px 6px 8px;\n    opacity: 0;\n}\n",""]);const d=s},81166:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"160ecac2aab009efd6381a6c36c32a71.svg"},10710:(e,n,a)=>{a.r(n),a.d(n,{default:()=>xe});var t=a(71093),o=a(66190),i=a(46233),l=a(81166),r=a(73843),s=a(5627),d=a(70985),p=a(83240),c=a(29633),u=a(6488),v=a(83487),m=a(88613),g=a(19508),w=a(54848),D=a(24153);const y=e=>((0,t.dD)("data-v-ae83a344"),e=e(),(0,t.Cn)(),e),f={class:"container vue-table"},h={key:0},b={class:"module-tabs"},x={key:0},I={key:0,class:"module-tab-div"},_={style:{display:"flex","align-items":"center"}},A=["onClick"],k=y((()=>(0,t._)("i",{class:"mdi mdi-pencil",style:{"font-size":"16px","margin-right":"4px"}},null,-1))),z=["onClick"],C=[y((()=>(0,t._)("i",{class:"mdi mdi-close-circle-outline"},null,-1))),y((()=>(0,t._)("span",{class:"button-tooltip",style:{right:"48px","z-index":"1",width:"80px"}},"Remove Module",-1)))],S={key:1,class:"no-data-div"},O=[y((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),y((()=>(0,t._)("span",{style:{"font-size":"14px",color:"#757575"}},"No modules imported yet.",-1)))],N={key:1},F={key:0,class:"module-tab-div"},T={style:{display:"flex","align-items":"center"}},H=["onClick"],M=y((()=>(0,t._)("i",{class:"mdi mdi-pencil",style:{"font-size":"16px","margin-right":"4px"}},null,-1))),Z=["onClick"],R=[y((()=>(0,t._)("i",{class:"mdi mdi-close-circle-outline"},null,-1))),y((()=>(0,t._)("span",{class:"button-tooltip",style:{right:"48px","z-index":"1",width:"80px"}},"Remove Module",-1)))],B={key:1,class:"no-data-div"},G=[y((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),y((()=>(0,t._)("span",{style:{"font-size":"14px",color:"#757575"}},"No modules imported yet.",-1)))],V={class:"module-tabs"},P={key:2},W={key:0,class:"module-tab-div"},q=["onClick"],E=[y((()=>(0,t._)("i",{class:"mdi mdi-chevron-right"},null,-1)))],j=["onClick"],J={key:1,class:"no-data-div"},U=[y((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),y((()=>(0,t._)("span",{class:"no-module-text"},"No available module yet.",-1)))],K={key:3,class:"module-tab-div"},L={key:0,class:"module-tab-div"},Q=["onClick"],X=[y((()=>(0,t._)("i",{class:"mdi mdi-chevron-right"},null,-1)))],Y=["onClick"],$={key:1,class:"no-data-div"},ee=[y((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),y((()=>(0,t._)("span",{class:"no-module-text"},"No available module yet.",-1)))],ne={key:1},ae={class:"module-name-div"},te={class:"module-name"},oe=y((()=>(0,t._)("div",null,[(0,t._)("span",{style:{color:"#212121","font-size":"14px"}},"Choose the module version you want to import.")],-1))),ie={key:0,class:"import-btn",style:{color:"#D5D5D5",cursor:"default"}},le=["onClick"],re=(0,t.aZ)({__name:"attachModuleToApp",setup(e){var n,a,l,y;const re=s.nC.resolve(m.J),se=s.nC.resolve(v.y),de=s.nC.resolve(d.w),pe=s.nC.resolve(c._),ce=s.nC.resolve(u.c),ue=s.nC.resolve(p.e),ve=s.nC.resolve(g.h),me=s.nC.resolve(w.B),ge=(s.nC.resolve(D.b),(0,r.iH)([])),we=(0,r.iH)([]),De=(0,r.iH)([]),ye=(0,r.iH)([]),fe=(0,r.iH)(!1),he=(0,r.iH)(),be=(0,r.iH)([]),xe=(0,r.iH)(["name","description","ownerApp","relatedAppNames","createdBy","createDate","actions"]),Ie=(0,r.iH)({filterable:!0,perPage:5,perPageValues:[],headings:{name:de.get("moduleName"),description:de.get("description"),ownerApp:de.get("ownerApp"),relatedAppNames:de.get("relatedApplications"),createdBy:de.get("createdBy"),createDate:de.get("createDate"),shareType:de.get("shareType"),actions:""},resizableColumns:!1,skin:"import-module",texts:{count:"",noResults:"No matching records",filterPlaceholder:"Search"}}),_e=(0,r.iH)(["version","description","createdBy","createDate","state"]),Ae=(0,r.iH)("Organization"),ke=(0,r.iH)("Organization"),ze=(0,r.iH)(null===(n=re.user.selectedOrganizationGroup)||void 0===n?void 0:n.organizationGroup),Ce=(0,r.iH)(null===(y=null===(l=null===(a=re.user.selectedOrganizationGroup)||void 0===a?void 0:a.organizationApplications)||void 0===l?void 0:l.find((e=>{var n;return e.organizationId==(null===(n=ze.value)||void 0===n?void 0:n.mainOrganizationId)})))||void 0===y?void 0:y.modules),Se=(0,r.iH)({filterable:!1,perPage:5,perPageValues:[],headings:{version:de.get("version"),description:de.get("description"),createdBy:de.get("createdBy"),createDate:de.get("createDate"),state:""},resizableColumns:!1,skin:"module-versions",texts:{count:"",noResults:"No matching records"}}),Oe={month:"2-digit",day:"2-digit",year:"numeric"};function Ne(){function e(e,n){e.ownerApp=e.mainOwner?n[e.mainOwner]:"";const a=e.relatedApplications.map((e=>n[e.applicationID])).filter((n=>n!=e.ownerApp));e.relatedAppNames=a.join(", ")}se.execute((async()=>{const n=await pe.listModules(),a=await pe.getGroupModules(),t={};re.apps.forEach((e=>t[e.ID]=e.name)),n.forEach((n=>{e(n,t);const a=He(n);a&&n.mainOwner&&n.mainOwner!=re.studio.appId?(!ge.value.some((e=>e.ID==n.ID))&&ge.value.push(n),De.value=De.value.filter((e=>e.ID!=n.ID))):a||(!De.value.some((e=>e.ID==n.ID))&&De.value.push(n),ge.value=ge.value.filter((e=>e.ID!=n.ID)))})),null==a||a.forEach((n=>{e(n,t),He(n)?(!we.value.some((e=>e.ID==n.ID))&&we.value.push(n),ye.value=ye.value.filter((e=>e.ID!=n.ID))):(!ye.value.some((e=>e.ID==n.ID))&&ye.value.push(n),we.value=we.value.filter((e=>e.ID!=n.ID)))}))}),{loading:!0})}function Fe(e,n){var a,t;const o=null===(a=Ce.value)||void 0===a?void 0:a.find((n=>n.ID==e.ID)),i=re.studio.appId,l=o?we:ge,r=o?ye:De,s=o?null===(t=ze.value)||void 0===t?void 0:t.mainOrganizationId:void 0;se.execute((async()=>{if(n){if(He(e)){await ce.detachModuleFromApplication(e,i,!0,e.currentVersion,s);const n=l.value.find((n=>n.ID==e.ID));n.relatedApplications=n.relatedApplications.filter((e=>e.applicationID!=i))}await ce.attachModuletoApplication(e,i,{outerOrgId:s,version:n}),await async function(){var e;const n=me.findApplication(re.studio.appName),a=null!==(e=null==n?void 0:n.copyApp)&&void 0!==e?e:{},t={ID:re.studio.appId,name:re.studio.appName,copyApp:{...a,missingModules:[]}};await ve.updateApplication(t)}();const a=r.value.find((n=>n.ID==e.ID));null==a||a.relatedApplications.push({applicationID:i,importedVersion:n}),be.value.find((e=>e.version==n)).relatedApplications.push({applicationID:i,importedVersion:n}),he.value.currentVersion=n}else await ce.attachModuletoApplication(e,i,{}),r.value.find((n=>n.ID==e.ID)).relatedApplications.push({applicationID:i});Ne()}),{loading:!0})}function Te(e,n){var a,t;const o=null===(a=Ce.value)||void 0===a?void 0:a.find((n=>n.ID==e.ID)),i=o?we:ge,l=o?null===(t=ze.value)||void 0===t?void 0:t.mainOrganizationId:void 0;se.execute((async()=>{const a=re.studio.appId;await ce.detachModuleFromApplication(e,a,!1,n,l);const t=i.value.find((n=>n.ID==e.ID));t.relatedApplications=t.relatedApplications.filter((e=>e.applicationID!=a));const o=be.value.find((e=>e.version==n));o&&(o.relatedApplications=t.relatedApplications.filter((e=>e.applicationID!=a))),Ne()}),{loading:!0})}function He(e){var n;const a=re.studio.appId;return!!(null===(n=e.relatedApplications)||void 0===n?void 0:n.some((e=>e.applicationID==a)))}function Me(e){var n;n=e.ID,se.execute((async()=>{var e,a;const t=(null===(e=Ce.value)||void 0===e?void 0:e.find((e=>e.ID==n)))?null===(a=ze.value)||void 0===a?void 0:a.mainOrganizationId:void 0;be.value=(await ue.listModuleVersions(n,t)).reverse()}),{loading:!0}),he.value=e,he.value.currentVersion=Ze(e),fe.value=!0}function Ze(e){var n;const a=re.studio.appId;return null===(n=e.relatedApplications.find((e=>a==e.applicationID)))||void 0===n?void 0:n.importedVersion}function Re(){var e;return null===(e=he.value)||void 0===e?void 0:e.currentVersion}return Ne(),(e,n)=>{var a;const l=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)("div",f,[fe.value?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("div",b,[(0,t._)("div",{onClick:n[0]||(n[0]=e=>Ae.value="Organization"),class:(0,o.normalizeClass)(["tab-item","Organization"==Ae.value?"active-category":""])},"Imported Organization Modules ",2),(0,t._)("div",{onClick:n[1]||(n[1]=e=>Ae.value="Group"),class:(0,o.normalizeClass)(["tab-item","Group"==Ae.value?"active-category":""])}," Imported Organization Group Modules",2)]),"Organization"==Ae.value?((0,t.wg)(),(0,t.iD)("div",x,[ge.value.length>0?((0,t.wg)(),(0,t.iD)("div",I,[(0,t.Wm)(l,{ref:"table",data:ge.value,columns:xe.value,options:Ie.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Oe).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t._)("div",_,[(0,t.wy)((0,t._)("div",{class:"imported-version",onClick:n=>Me(e.row)},[k,(0,t._)("span",null,(0,o.toDisplayString)(Ze(e.row)),1)],8,A),[[i.vShow,Ze(e.row)]]),(0,t._)("button",{class:"remove-module",onClick:n=>Te(e.row,Ze(e.row))},C,8,z)])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",S,O))])):((0,t.wg)(),(0,t.iD)("div",N,[we.value.length>0?((0,t.wg)(),(0,t.iD)("div",F,[(0,t.Wm)(l,{ref:"table",data:we.value,columns:xe.value,options:Ie.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Oe).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t._)("div",T,[(0,t.wy)((0,t._)("div",{class:"imported-version",onClick:n=>Me(e.row)},[M,(0,t._)("span",null,(0,o.toDisplayString)(Ze(e.row)),1)],8,H),[[i.vShow,Ze(e.row)]]),(0,t._)("button",{class:"remove-module",onClick:n=>Te(e.row,Ze(e.row))},R,8,Z)])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",B,G))])),(0,t._)("div",V,[(0,t._)("div",{onClick:n[2]||(n[2]=e=>ke.value="Organization"),class:(0,o.normalizeClass)(["tab-item","Organization"==ke.value?"active-category":""])}," Organization Modules ",2),(0,t._)("div",{onClick:n[3]||(n[3]=e=>ke.value="Group"),class:(0,o.normalizeClass)(["tab-item","Group"==ke.value?"active-category":""])}," Organization Group Modules",2)]),"Organization"==ke.value?((0,t.wg)(),(0,t.iD)("div",P,[De.value.length>0?((0,t.wg)(),(0,t.iD)("div",W,[(0,t.Wm)(l,{ref:"table",data:De.value,columns:xe.value,options:Ie.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Oe).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t.wy)((0,t._)("button",{class:"select-module-btn",onClick:n=>Me(e.row)},E,8,q),[[i.vShow,"version"==e.row.shareType]]),(0,t.wy)((0,t._)("button",{class:"add-ref-module-btn",onClick:n=>Fe(e.row)},"ADD",8,j),[[i.vShow,"reference"==e.row.shareType]])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",J,U))])):((0,t.wg)(),(0,t.iD)("div",K,[ye.value.length>0?((0,t.wg)(),(0,t.iD)("div",L,[(0,t.Wm)(l,{ref:"table",data:ye.value,columns:xe.value,options:Ie.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Oe).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t.wy)((0,t._)("button",{class:"select-module-btn",onClick:n=>Me(e.row)},X,8,Q),[[i.vShow,"version"==e.row.shareType]]),(0,t.wy)((0,t._)("button",{class:"add-ref-module-btn",onClick:n=>Fe(e.row)},"ADD",8,Y),[[i.vShow,"reference"==e.row.shareType]])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",$,ee))]))])),fe.value?((0,t.wg)(),(0,t.iD)("div",ne,[(0,t._)("div",ae,[(0,t._)("i",{class:"mdi mdi-arrow-left-box back-button",onClick:n[4]||(n[4]=e=>{fe.value=!1})}),(0,t._)("span",te,(0,o.toDisplayString)(null===(a=he.value)||void 0===a?void 0:a.name),1)]),oe,(0,t.Wm)(l,{ref:"table",data:be.value,columns:_e.value,options:Se.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,o.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Oe).format(new Date(e.row.createDate))),1)])),state:(0,t.w5)((e=>[e.row.version==Re()?((0,t.wg)(),(0,t.iD)("button",ie,"Imported")):((0,t.wg)(),(0,t.iD)("button",{key:1,class:"import-btn",onClick:n=>Fe(he.value,e.row.version)},"Import",8,le))])),_:1},8,["data","columns","options"]),(0,t.Uk)(", ")])):(0,t.kq)("v-if",!0)])}}});var se=a(17450),de=a.n(se),pe=a(29530),ce=a.n(pe),ue=a(16199),ve=a.n(ue),me=a(40458),ge=a.n(me),we=a(62916),De=a.n(we),ye=a(92165),fe=a.n(ye),he=a(51474),be={};be.styleTagTransform=fe(),be.setAttributes=ge(),be.insert=ve().bind(null,"head"),be.domAPI=ce(),be.insertStyleElement=De(),de()(he.Z,be),he.Z&&he.Z.locals&&he.Z.locals;const xe=(0,a(32525).Z)(re,[["__scopeId","data-v-ae83a344"]])}}]);