"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[3715],{94039:(e,n,t)=>{t.d(n,{Z:()=>l});var o=t(34663),a=t.n(o),i=t(7638),r=t.n(i)()(a());r.push([e.id,"\n*[data-v-3f06114e] {\n    font-family: \"Roboto\";\n}\n.container[data-v-3f06114e] {\n      padding: 20px;\n}\nul[data-v-3f06114e] {\n    list-style-type: none;\n}\n.release-info-up[data-v-3f06114e]{\n      display: flex;\n      font-family: 'Material Design Icons';\n      font-style: normal;\n      font-weight: 400;\n      font-size: 24px;\n      line-height: 24px;\n      color: #151233;\n}\n.release-info-icon-up[data-v-3f06114e] {\n      width: 24px;\n      height: 24px;\n      font-family: 'Material Design Icons';\n      font-style: normal;\n      font-weight: 400;\n      font-size: 24px;\n      line-height: 24px;\n      text-align: center;\n      color: #151233;\n      flex: none;\n      order: 0;\n      flex-grow: 0;\n}\n.check-in-definition-text[data-v-3f06114e]{\n      margin-left:8px;\n      font-family: 'Roboto';\n      font-style: normal;\n      font-size: 14px;\n      color: #757575;\n}\n.check-in-info-div[data-v-3f06114e]{\n    margin: 20px 0px;\n      padding: 12px;\n      gap: 8px;\n      width: 570px;\n    height: 72px;\n      background: #F5F5FA;\n      border-radius: 4px;\n}\n.createLi[data-v-3f06114e] {\n    cursor: pointer;\n}\n.move-to-item[data-v-3f06114e] {\n    padding-top: 1px;\n    padding-right: 20px;\n}\n.move-to-item[data-v-3f06114e]:not(.item-disabled):hover {\n    background: #D5D5D5;\n}\n.item-disabled[data-v-3f06114e] {\n    opacity: 0.5;\n}\n.buttons-div[data-v-3f06114e] {\n      display: flex;\n      justify-content: end;\n      margin-top: 52px;\n      padding: 0 20px;\n}\n.cancel-button[data-v-3f06114e] {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #757575;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      margin-right: 4px;\n      border: none;\n      background: transparent;\n}\n.move-button[data-v-3f06114e] {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #FFFFFF;\n      background: #151233;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      border: none;\n}\n.move-button[data-v-3f06114e]:disabled {\n      color: #757575;\n}\n\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/moveItem.vue"],names:[],mappings:";AAmHE;IACE,qBAAqB;AACvB;AACA;MACI,aAAa;AAEjB;AACA;IACE,qBAAqB;AACvB;AACA;MACI,aAAa;MACb,oCAAoC;MACpC,kBAAkB;MAClB,gBAAgB;MAChB,eAAe;MACf,iBAAiB;MACjB,cAAc;AAClB;AAEA;MACI,WAAW;MACX,YAAY;MACZ,oCAAoC;MACpC,kBAAkB;MAClB,gBAAgB;MAChB,eAAe;MACf,iBAAiB;MACjB,kBAAkB;MAClB,cAAc;MACd,UAAU;MACV,QAAQ;MACR,YAAY;AAChB;AACA;MACI,eAAe;MACf,qBAAqB;MACrB,kBAAkB;MAClB,eAAe;MACf,cAAc;AAClB;AACA;IACE,gBAAgB;MACd,aAAa;MACb,QAAQ;MACR,YAAY;IACd,YAAY;MACV,mBAAmB;MACnB,kBAAkB;AACtB;AACA;IACE,eAAe;AACjB;AAEA;IACE,gBAAgB;IAChB,mBAAmB;AACrB;AAEA;IACE,mBAAmB;AACrB;AAEA;IACE,YAAY;AACd;AACA;MACI,aAAa;MACb,oBAAoB;MACpB,gBAAgB;MAChB,eAAe;AACnB;AACA;MACI,gBAAgB;MAChB,eAAe;MACf,kBAAkB;MAClB,cAAc;MACd,aAAa;MACb,mBAAmB;MACnB,iBAAiB;MACjB,kBAAkB;MAClB,iBAAiB;MACjB,YAAY;MACZ,uBAAuB;AAC3B;AACA;MACI,gBAAgB;MAChB,eAAe;MACf,kBAAkB;MAClB,cAAc;MACd,mBAAmB;MACnB,aAAa;MACb,mBAAmB;MACnB,iBAAiB;MACjB,kBAAkB;MAClB,YAAY;AAChB;AACA;MACI,cAAc;AAClB",sourcesContent:['<script setup lang="ts">\nimport { onUnmounted, ref, onMounted } from "vue";\nimport { PathHelper } from "../../../../../../common/helpers/pathHelper";\nimport { container } from \'../../../../domain/core/diContainer\';\nimport { IMoveItemInline } from \'../../../../domain/presentation/dialogs/IMoveItemProps\';\nimport { ITreeItem, ITreeView } from "../../../../domain/presentation/ITreeView";\nimport { FileDisplayerExternalData, IFileDisplayerUseCase } from "../../../../domain/useCase/IFileDisplayerUseCase";\nimport { FileExplorerConstants, IFileExplorer } from "../../../../domain/useCase/IFileExplorer";\nimport { IMoveTargetRequired, IMoveUseCase } from \'../../../../domain/useCase/IMoveUseCase\';\nimport { IUseCaseExecutor } from \'../../../../domain/useCase/IUseCaseExecutor\';\nimport { IViewModel } from \'../../../../domain/viewModel/IViewModel\';\nimport { IViewModelManager } from "../../../../domain/viewModel/IViewModelManager";\nimport { IQJsonAdditionals } from "../../../../../../common/qCloudTemp/quickCloud";\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst moveUseCase = container.resolve<IMoveUseCase>(IMoveUseCase);\nconst param = defineProps<{ param: IMoveItemInline }>();\nconst props = param.param;\nconst viewModel = container.resolve<IViewModel>(IViewModel);\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\nconst emit = defineEmits(["close"]);\nconst rootDiv = ref<HTMLDivElement>();\nconst fileDisplayerUC = container.resolve<IFileDisplayerUseCase>(IFileDisplayerUseCase);\nconst fileExplorer = container.resolve<IFileExplorer>(IFileExplorer);\n\nlet selected: ITreeItem<FileDisplayerExternalData> | undefined = undefined;\nlet treeView: ITreeView<FileDisplayerExternalData>;\nconst selectedIsRootPage = ref<boolean>(false);\nonMounted(() => {\n  const app = viewModelManager.getCurrentApplication()!;\n  if (props.itemToBeMoved.objectType == "folder") {\n    fileExplorer.cloneFilterFolderItems(props.itemToBeMoved.ID, (item) => {\n      if (selectedIsRootPage.value) { return false; }\n      if (item.externalData.objectType != "model") { return true; }\n      if ((item.externalData.additionals as IQJsonAdditionals | undefined)?.isRootPage) { selectedIsRootPage.value = true; }\n      return false;\n    });\n  } else {\n    selectedIsRootPage.value = (props.itemToBeMoved.additionals as IQJsonAdditionals | undefined)?.isRootPage || false;\n  }\n  treeView = fileDisplayerUC.createFileExplorerClone(rootDiv.value!,\n  {\n    displayFilterer: item => {\n      if (selectedIsRootPage.value && item.objectType == "module") { return false; }\n      if (item.objectType == "module" && item.shareType == "version" && item.mainOwner != app.ID) { return false; } // can not move to version imported modules\n      if (item.objectType == "model"){ return false; }\n      if (item.ID == FileExplorerConstants.uiSettingsID) { return false; }\n      return true;\n    },\n    cb: { select: item => selected = item },\n    additionalRoot: { externalData: app, id: app.ID, name: app.name },\n  });\n});\n\nonUnmounted(() => {\n  treeView.reset();\n});\n\nasync function move() {\n  await executor.execute(async () => {\n    if (!selected) { return; }\n    let target: Partial<IMoveTargetRequired>;\n    switch (selected.externalData.objectType) {\n      case "model": throw new Error("unexpected target");\n      case "folder":\n        const folder = selected.externalData;\n        target = {\n          address: { name: props.itemToBeMoved.name, path: PathHelper.join(folder.path , folder.name) },\n          owner: folder.owner.ID != props.itemToBeMoved.owner.ID ? { id: folder.owner.ID, type: folder.owner.objectType } : undefined,\n        };\n        break;\n      case "module":\n        const module = selected.externalData;\n        target = { owner: { id: module.ID, type: "module" }, address: { path: "/", name: "" } };\n        break;\n      case "application":\n        const application = selected.externalData;\n        target = { owner: { id: application.ID, type: "application" }, address: { path: "/", name: "" } };\n        break;\n    }\n    moveUseCase.checkMergeable(props.itemToBeMoved, target)\n    \n    emit("close");\n  }, { loading: true });\n}\n\nfunction close() {\n  emit("close");\n}\n\n<\/script> \n\n<template>\n  <div class="container">\n    <div v-if="selectedIsRootPage" class="check-in-info-div">\n        <span class="release-info-up">\n            <i class="mdi mdi-information release-info-icon-up" /> \n            <span class="check-in-definition-text">\n              Selected items contains the start screen page. <br>\n              Modules are hidden because they cannot contain the start screen page.\n            </span>\n        </span>\n    </div>\n    <div id="content-area" class="popover__content">\n      <div ref="rootDiv" style="height: 100%" class="errorDiv"></div>\n      <div class="buttons-div">\n        <button class="cancel-button" @click="close()">Cancel</button>\n        <button class="move-button" @click="move()">MOVE</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<style scoped>\n  * {\n    font-family: "Roboto";\n  }\n  .container {\n      padding: 20px;\n      \n  }\n  ul {\n    list-style-type: none;\n  }\n  .release-info-up{\n      display: flex;\n      font-family: \'Material Design Icons\';\n      font-style: normal;\n      font-weight: 400;\n      font-size: 24px;\n      line-height: 24px;\n      color: #151233;\n  }\n\n  .release-info-icon-up {\n      width: 24px;\n      height: 24px;\n      font-family: \'Material Design Icons\';\n      font-style: normal;\n      font-weight: 400;\n      font-size: 24px;\n      line-height: 24px;\n      text-align: center;\n      color: #151233;\n      flex: none;\n      order: 0;\n      flex-grow: 0;\n  }\n  .check-in-definition-text{\n      margin-left:8px;\n      font-family: \'Roboto\';\n      font-style: normal;\n      font-size: 14px;\n      color: #757575;\n  }\n  .check-in-info-div{\n    margin: 20px 0px;\n      padding: 12px;\n      gap: 8px;\n      width: 570px;\n    height: 72px;\n      background: #F5F5FA;\n      border-radius: 4px;\n  }\n  .createLi {\n    cursor: pointer;\n  }\n\n  .move-to-item {\n    padding-top: 1px;\n    padding-right: 20px;\n  }\n\n  .move-to-item:not(.item-disabled):hover {\n    background: #D5D5D5;\n  }\n\n  .item-disabled {\n    opacity: 0.5;\n  }\n  .buttons-div {\n      display: flex;\n      justify-content: end;\n      margin-top: 52px;\n      padding: 0 20px;\n  }\n  .cancel-button {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #757575;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      margin-right: 4px;\n      border: none;\n      background: transparent;\n  }\n  .move-button {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #FFFFFF;\n      background: #151233;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      border: none;\n  }\n  .move-button:disabled {\n      color: #757575;\n  }\n\n</style>\n\n'],sourceRoot:""}]);const l=r},23715:(e,n,t)=>{t.r(n),t.d(n,{default:()=>U});var o=t(71093),a=t(73843),i=t(80338),r=t(5627),l=t(29307),s=t(3329),d=t(64288),A=t(83487),c=t(88613),p=t(54848);const m={class:"container"},f={key:0,class:"check-in-info-div"},u=[(e=>((0,o.dD)("data-v-3f06114e"),e=e(),(0,o.Cn)(),e))((()=>(0,o._)("span",{class:"release-info-up"},[(0,o._)("i",{class:"mdi mdi-information release-info-icon-up"}),(0,o._)("span",{class:"check-in-definition-text"},[(0,o.Uk)(" Selected items contains the start screen page. "),(0,o._)("br"),(0,o.Uk)(" Modules are hidden because they cannot contain the start screen page. ")])],-1)))],v={id:"content-area",class:"popover__content"},C={class:"buttons-div"},g=(0,o.aZ)({__name:"moveItem",props:{param:null},emits:["close"],setup(e,{emit:n}){const t=e,g=r.nC.resolve(A.y),x=r.nC.resolve(d.E),B=t.param,M=(r.nC.resolve(c.J),r.nC.resolve(p.B)),I=(0,a.iH)(),h=r.nC.resolve(l.w),b=r.nC.resolve(s.g2);let y,D;const w=(0,a.iH)(!1);return(0,o.bv)((()=>{var e;const n=M.getCurrentApplication();"folder"==B.itemToBeMoved.objectType?b.cloneFilterFolderItems(B.itemToBeMoved.ID,(e=>{var n;return!(w.value||"model"==e.externalData.objectType&&((null===(n=e.externalData.additionals)||void 0===n?void 0:n.isRootPage)&&(w.value=!0),1))})):w.value=(null===(e=B.itemToBeMoved.additionals)||void 0===e?void 0:e.isRootPage)||!1,D=h.createFileExplorerClone(I.value,{displayFilterer:e=>!(w.value&&"module"==e.objectType||"module"==e.objectType&&"version"==e.shareType&&e.mainOwner!=n.ID||"model"==e.objectType||e.ID==s.oA.uiSettingsID),cb:{select:e=>y=e},additionalRoot:{externalData:n,id:n.ID,name:n.name}})})),(0,o.Ah)((()=>{D.reset()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",m,[w.value?((0,o.wg)(),(0,o.iD)("div",f,u)):(0,o.kq)("v-if",!0),(0,o._)("div",v,[(0,o._)("div",{ref_key:"rootDiv",ref:I,style:{height:"100%"},class:"errorDiv"},null,512),(0,o._)("div",C,[(0,o._)("button",{class:"cancel-button",onClick:t[0]||(t[0]=e=>{n("close")})},"Cancel"),(0,o._)("button",{class:"move-button",onClick:t[1]||(t[1]=e=>async function(){await g.execute((async()=>{if(!y)return;let e;switch(y.externalData.objectType){case"model":throw new Error("unexpected target");case"folder":const n=y.externalData;e={address:{name:B.itemToBeMoved.name,path:i.I.join(n.path,n.name)},owner:n.owner.ID!=B.itemToBeMoved.owner.ID?{id:n.owner.ID,type:n.owner.objectType}:void 0};break;case"module":e={owner:{id:y.externalData.ID,type:"module"},address:{path:"/",name:""}};break;case"application":e={owner:{id:y.externalData.ID,type:"application"},address:{path:"/",name:""}}}x.checkMergeable(B.itemToBeMoved,e),n("close")}),{loading:!0})}())},"MOVE")])])]))}});var x=t(17450),B=t.n(x),M=t(29530),I=t.n(M),h=t(16199),b=t.n(h),y=t(40458),D=t.n(y),w=t(62916),k=t.n(w),F=t(92165),T=t.n(F),E=t(94039),j={};j.styleTagTransform=T(),j.setAttributes=D(),j.insert=b().bind(null,"head"),j.domAPI=I(),j.insertStyleElement=k(),B()(E.Z,j),E.Z&&E.Z.locals&&E.Z.locals;const U=(0,t(32525).Z)(g,[["__scopeId","data-v-3f06114e"]])}}]);
//# sourceMappingURL=3715.js.map?ver=0.0.311_1710940434866