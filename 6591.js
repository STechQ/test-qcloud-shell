"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[6591],{94587:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(34663),a=t.n(o),r=t(7638),i=t.n(r)()(a());i.push([e.id,'\n*[data-v-5a6574b6] {\n    font-family: "Roboto";\n}\n.container[data-v-5a6574b6] {\n      padding: 32px 0px 20px;\n}\nul[data-v-5a6574b6] {\n    list-style-type: none;\n}\n  /* .move-to-target {\n      margin: 0;\n      color: #151233;\n      font-weight: 400;\n      font-size: 14px;\n      letter-spacing: 0px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n    } */\n    /* .move-to-target .mdi {\n      font-size: 24px;\n      margin-right: 10px;\n    } */\n.createLi[data-v-5a6574b6] {\n    cursor: pointer;\n}\n.move-to-item[data-v-5a6574b6] {\n    padding-top: 1px;\n    padding-right: 20px;\n}\n.move-to-item[data-v-5a6574b6]:not(.item-disabled):hover {\n    background: #D5D5D5;\n}\n.item-disabled[data-v-5a6574b6] {\n    opacity: 0.5;\n}\n.buttons-div[data-v-5a6574b6] {\n      display: flex;\n      justify-content: end;\n      margin-top: 52px;\n      padding: 0 20px;\n}\n.cancel-button[data-v-5a6574b6] {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #757575;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      margin-right: 4px;\n      border: none;\n      background: transparent;\n}\n.move-button[data-v-5a6574b6] {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #FFFFFF;\n      background: #151233;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      border: none;\n}\n.move-button[data-v-5a6574b6]:disabled {\n      color: #757575;\n}\n\n',"",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/moveItem.vue"],names:[],mappings:";AAsFE;IACE,qBAAqB;AACvB;AACA;MACI,sBAAsB;AAC1B;AACA;IACE,qBAAqB;AACvB;EACA;;;;;;;;;OASK;IACH;;;OAGG;AACL;IACE,eAAe;AACjB;AAEA;IACE,gBAAgB;IAChB,mBAAmB;AACrB;AAEA;IACE,mBAAmB;AACrB;AAEA;IACE,YAAY;AACd;AACA;MACI,aAAa;MACb,oBAAoB;MACpB,gBAAgB;MAChB,eAAe;AACnB;AACA;MACI,gBAAgB;MAChB,eAAe;MACf,kBAAkB;MAClB,cAAc;MACd,aAAa;MACb,mBAAmB;MACnB,iBAAiB;MACjB,kBAAkB;MAClB,iBAAiB;MACjB,YAAY;MACZ,uBAAuB;AAC3B;AACA;MACI,gBAAgB;MAChB,eAAe;MACf,kBAAkB;MAClB,cAAc;MACd,mBAAmB;MACnB,aAAa;MACb,mBAAmB;MACnB,iBAAiB;MACjB,kBAAkB;MAClB,YAAY;AAChB;AACA;MACI,cAAc;AAClB",sourcesContent:['<script setup lang="ts">\nimport { onUnmounted, ref, onMounted } from "vue";\nimport { PathHelper } from "../../../../../../common/helpers/pathHelper";\nimport { container } from \'../../../../domain/core/diContainer\';\nimport { IMoveItemInline } from \'../../../../domain/presentation/dialogs/IMoveItemProps\';\nimport { ITreeItem, ITreeView } from "../../../../domain/presentation/ITreeView";\nimport { FileDisplayerExternalData, IFileDisplayerUseCase } from "../../../../domain/useCase/IFileDisplayerUseCase";\nimport { FileExplorerConstants } from "../../../../domain/useCase/IFileExplorer";\nimport { IMoveTargetRequired, IMoveUseCase } from \'../../../../domain/useCase/IMoveUseCase\';\nimport { IUseCaseExecutor } from \'../../../../domain/useCase/IUseCaseExecutor\';\nimport { IViewModel } from \'../../../../domain/viewModel/IViewModel\';\nimport { IViewModelManager } from "../../../../domain/viewModel/IViewModelManager";\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst moveUseCase = container.resolve<IMoveUseCase>(IMoveUseCase);\nconst param = defineProps<{ param: IMoveItemInline }>();\nconst props = param.param;\nconst viewModel = container.resolve<IViewModel>(IViewModel);\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\nconst emit = defineEmits(["close"]);\nconst rootDiv = ref<HTMLDivElement>();\nconst fileDisplayer = container.resolve<IFileDisplayerUseCase>(IFileDisplayerUseCase);\n\nlet selected: ITreeItem<FileDisplayerExternalData> | undefined = undefined;\nlet treeView: ITreeView<FileDisplayerExternalData>;\nonMounted(() => {\n  const app = viewModelManager.getCurrentApplication()!;\n  treeView = fileDisplayer.createFileExplorerClone(rootDiv.value!,\n  {\n    displayFilterer: item => item.objectType != "model" && item.ID != FileExplorerConstants.uiSettingsID,\n    cb: { select: item => selected = item },\n    additionalRoot: { externalData: app, id: app.ID, name: app.name },\n  });\n});\n\nonUnmounted(() => {\n  treeView.reset();\n});\n\nasync function move() {\n  await executor.execute(async () => {\n    if (!selected) { return; }\n    let target: Partial<IMoveTargetRequired>;\n    switch (selected.externalData.objectType) {\n      case "model": throw new Error("unexpected target");\n      case "folder":\n        const folder = selected.externalData;\n        target = {\n          address: { name: props.itemToBeMoved.name, path: PathHelper.join(folder.path , folder.name) },\n          owner: folder.owner.ID != props.itemToBeMoved.owner.ID ? { id: folder.owner.ID, type: folder.owner.objectType } : undefined,\n        };\n        break;\n      case "module":\n        const module = selected.externalData;\n        target = { owner: { id: module.ID, type: "module" }, address: { path: "/", name: "" } };\n        break;\n      case "application":\n        const application = selected.externalData;\n        target = { owner: { id: application.ID, type: "application" }, address: { path: "/", name: "" } };\n        break;\n    }\n    await moveUseCase.moveItem(props.itemToBeMoved, target);\n    emit("close");\n  }, { loading: true });\n}\n\nfunction close() {\n  emit("close");\n}\n\n<\/script> \n\n<template>\n  <div class="container">\n    <div id="content-area" class="popover__content">\n      <div ref="rootDiv" style="height: 100%" class="errorDiv"></div>\n      <div class="buttons-div">\n        <button class="cancel-button" @click="close()">Cancel</button>\n        <button class="move-button" @click="move()">MOVE</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<style scoped>\n  * {\n    font-family: "Roboto";\n  }\n  .container {\n      padding: 32px 0px 20px;\n  }\n  ul {\n    list-style-type: none;\n  }\n  /* .move-to-target {\n      margin: 0;\n      color: #151233;\n      font-weight: 400;\n      font-size: 14px;\n      letter-spacing: 0px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n    } */\n    /* .move-to-target .mdi {\n      font-size: 24px;\n      margin-right: 10px;\n    } */\n  .createLi {\n    cursor: pointer;\n  }\n\n  .move-to-item {\n    padding-top: 1px;\n    padding-right: 20px;\n  }\n\n  .move-to-item:not(.item-disabled):hover {\n    background: #D5D5D5;\n  }\n\n  .item-disabled {\n    opacity: 0.5;\n  }\n  .buttons-div {\n      display: flex;\n      justify-content: end;\n      margin-top: 52px;\n      padding: 0 20px;\n  }\n  .cancel-button {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #757575;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      margin-right: 4px;\n      border: none;\n      background: transparent;\n  }\n  .move-button {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #FFFFFF;\n      background: #151233;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      border: none;\n  }\n  .move-button:disabled {\n      color: #757575;\n  }\n\n</style>\n\n'],sourceRoot:""}]);const s=i},66591:(e,n,t)=>{t.r(n),t.d(n,{default:()=>T});var o=t(71093),a=t(73843),r=t(80338),i=t(5627),s=t(29307),l=t(3329),d=t(64288),p=t(83487),c=t(88613),A=t(54848);const m={class:"container"},v={id:"content-area",class:"popover__content"},u={class:"buttons-div"},g=(0,o.aZ)({__name:"moveItem",props:{param:null},emits:["close"],setup(e,{emit:n}){const t=e,g=i.nC.resolve(p.y),C=i.nC.resolve(d.E),x=t.param,b=(i.nC.resolve(c.J),i.nC.resolve(A.B)),B=(0,a.iH)(),I=i.nC.resolve(s.w);let f,M;return(0,o.bv)((()=>{const e=b.getCurrentApplication();M=I.createFileExplorerClone(B.value,{displayFilterer:e=>"model"!=e.objectType&&e.ID!=l.oA.uiSettingsID,cb:{select:e=>f=e},additionalRoot:{externalData:e,id:e.ID,name:e.name}})})),(0,o.Ah)((()=>{M.reset()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("div",v,[(0,o._)("div",{ref_key:"rootDiv",ref:B,style:{height:"100%"},class:"errorDiv"},null,512),(0,o._)("div",u,[(0,o._)("button",{class:"cancel-button",onClick:t[0]||(t[0]=e=>{n("close")})},"Cancel"),(0,o._)("button",{class:"move-button",onClick:t[1]||(t[1]=e=>async function(){await g.execute((async()=>{if(!f)return;let e;switch(f.externalData.objectType){case"model":throw new Error("unexpected target");case"folder":const n=f.externalData;e={address:{name:x.itemToBeMoved.name,path:r.I.join(n.path,n.name)},owner:n.owner.ID!=x.itemToBeMoved.owner.ID?{id:n.owner.ID,type:n.owner.objectType}:void 0};break;case"module":e={owner:{id:f.externalData.ID,type:"module"},address:{path:"/",name:""}};break;case"application":e={owner:{id:f.externalData.ID,type:"application"},address:{path:"/",name:""}}}await C.moveItem(x.itemToBeMoved,e),n("close")}),{loading:!0})}())},"MOVE")])])]))}});var C=t(17450),x=t.n(C),b=t(29530),B=t.n(b),I=t(16199),f=t.n(I),M=t(40458),w=t.n(M),y=t(62916),D=t.n(y),h=t(92165),E=t.n(h),k=t(94587),F={};F.styleTagTransform=E(),F.setAttributes=w(),F.insert=f().bind(null,"head"),F.domAPI=B(),F.insertStyleElement=D(),x()(k.Z,F),k.Z&&k.Z.locals&&k.Z.locals;const T=(0,t(32525).Z)(g,[["__scopeId","data-v-5a6574b6"]])}}]);
//# sourceMappingURL=6591.js.map?ver=0.0.285_1702563552726