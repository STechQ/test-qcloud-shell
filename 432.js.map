{"version":3,"file":"432.js","mappings":"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","sources":["webpack://qcloud_shell/./src/presentation/vue3/pages/superuser.vue?3fc6","webpack://qcloud_shell/./src/presentation/vue3/pages/superuser.vue?e42e","webpack://qcloud_shell/./src/presentation/vue3/pages/superuser.vue?a755","webpack://qcloud_shell/./src/presentation/vue3/pages/superuser.vue"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.content-area[data-v-7a86d4bf] {\\n  overflow-y: scroll;\\n  height: 100%;\\n}\\n.tables-area[data-v-7a86d4bf] {\\n  width: 70%;\\n  margin-left: 15%;\\n  margin-top: 10px;\\n}\\n.section-area[data-v-7a86d4bf] {\\n  margin-bottom: 25px;\\n}\\n.header-text[data-v-7a86d4bf] {\\n  font-weight: bold;\\n  margin-bottom: 5px;\\n}\\n\\n/* .btn-new-item {\\n  float: right;\\n} */\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/presentation/vue3/pages/superuser.vue\"],\"names\":[],\"mappings\":\";AAkOA;EACE,kBAAkB;EAClB,YAAY;AACd;AAEA;EACE,UAAU;EACV,gBAAgB;EAChB,gBAAgB;AAClB;AAEA;EACE,mBAAmB;AACrB;AAEA;EACE,iBAAiB;EACjB,kBAAkB;AACpB;;AAEA;;GAEG\",\"sourcesContent\":[\"<script setup lang=\\\"ts\\\">\\nimport { defineAsyncComponent, onMounted, ref } from \\\"vue\\\";\\nimport { AuthenticationType, IDomain, ITenantUser } from '@stechquick/algae/lib/qCloudTemp/quickCloud';\\nimport { container } from '../../../domain/core/diContainer';\\nimport { routeDefinition } from '../../../domain/presentation/IRouter';\\nimport { ISystemUserManagement } from '../../../domain/useCase/ISystemUserManagement';\\nimport { IUseCaseExecutor } from '../../../domain/useCase/IUseCaseExecutor';\\nimport { ILocalization } from \\\"../../../domain/infrastructure/ILocalization\\\";\\nimport { IDialog } from \\\"../../../domain/presentation/IDialog\\\";\\n\\ninterface IInitOptions {\\n  domains?: boolean;\\n  tenants?: boolean;\\n}\\n\\ninterface ITenantDomainRelation {\\n  domainID: string;\\n  tenantID: string;\\n  domainName: string;\\n  tenantName: string;\\n  loginType: AuthenticationType;\\n}\\n\\nrouteDefinition({ noAuth: true });\\n\\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\\nconst systemUserManagement = container.resolve<ISystemUserManagement>(ISystemUserManagement);\\nconst localization = container.resolve<ILocalization>(ILocalization);\\nconst dialog = container.resolve<IDialog>(IDialog);\\n\\nconst domains = ref<Array<IDomain>>([]);\\nconst tenants = ref<Array<ITenantUser>>([]);\\nconst relations = ref<Array<ITenantDomainRelation>>([]);\\n\\nfunction fillRelationTableData(domains: Array<IDomain>, tenants: Array<ITenantUser>) {\\n  const items: Array<ITenantDomainRelation> = [];\\n\\n  tenants.forEach(tenant => {\\n    const relations = tenant.tenantRelations;\\n    if (!relations) { return; }\\n\\n    relations.forEach(relation => {\\n      const domain = domains.find(i => i.ID == relation.tenantID)!;\\n      const item: ITenantDomainRelation = {\\n        domainID: relation.tenantID,\\n        domainName: domain.name,\\n        tenantID: tenant.ID,\\n        tenantName: tenant.name,\\n        loginType: relation.loginType,\\n      }\\n      items.push(item);\\n    });\\n  });\\n\\n  relations.value = items;\\n}\\n\\nasync function getData(options: IInitOptions) {\\n  await executor.execute(async () => {\\n    const domainsProm = options.domains ? systemUserManagement.listDomains() : (async () => domains.value)();\\n    const tenantsProm = options.tenants ? systemUserManagement.listTenants() : (async () => tenants.value)();\\n\\n    [domains.value, tenants.value] = await Promise.all([domainsProm, tenantsProm]);\\n\\n    if (options.tenants) {\\n      fillRelationTableData(domains.value, tenants.value);\\n    }\\n  }, { loading: true });\\n}\\n\\nonMounted(async () => {\\n  await getData({ domains: true, tenants: true });\\n});\\n\\nconst dtBasicOptions = {\\n  filterable: false, perPage: 10, perPageValues: [],\\n  sortIcon: { base: 'mdi', is: 'mdi mdi-unfold-less-horizontal', up: 'mdi mdi-arrow-up', down: 'mdi mdi-arrow-down' },\\n};\\n\\nconst domainsDtOptions = {\\n  ...dtBasicOptions,\\n  headings: {\\n    ID: \\\"Domain ID\\\",\\n    name: \\\"Domain Name\\\",\\n    dbName: \\\"Database Name\\\",\\n    createdBy: localization.get('applicationListcreatedByHeader'),\\n    createDate: localization.get('applicationListcreatedDateHeader'),\\n  }\\n};\\n\\nconst tenantsDtOptions = {\\n  ...dtBasicOptions,\\n  headings: {\\n    ID: \\\"Tenant ID\\\",\\n    name: \\\" Tenant Name\\\",\\n    createdBy: localization.get('applicationListcreatedByHeader'),\\n    createDate: localization.get('applicationListcreatedDateHeader'),\\n  }\\n};\\n\\nconst relationsDtOptions = {\\n  ...dtBasicOptions,\\n  headings: {\\n    domainID: \\\"Domain ID\\\",\\n    domainName: \\\"Domain Name\\\",\\n    tenantID: \\\"Tenant ID\\\",\\n    tenantName: \\\"Tenant Name\\\",\\n    loginType: \\\"Login Type\\\",\\n  }\\n};\\n\\nlet dtOptions: any = { month: '2-digit', day: '2-digit', year: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };\\nconst domainsDatatableColumns = ref(['ID', 'name', 'dbName', 'createdBy', 'createDate', \\\"actions\\\"]);\\nconst tenantsDatatableColumns = ref(['ID', 'name', 'createdBy', 'createDate', \\\"actions\\\"]);\\nconst relationsDatatableColumns = ref(['domainID', 'domainName', 'tenantID', 'tenantName', \\\"loginType\\\", \\\"actions\\\"]);\\nconst domainsDataTable = ref(domainsDtOptions);\\nconst tenantsDataTable = ref(tenantsDtOptions);\\nconst relationsDataTable = ref(relationsDtOptions);\\n\\nasync function createNewDomian() {\\n  const closeCb = async (reason: \\\"close\\\" | \\\"outclick\\\" | \\\"component\\\") => {\\n    if (reason != \\\"component\\\") { return; }\\n    await getData({ domains: true });\\n  };\\n\\n  dialog.showDialog(defineAsyncComponent(() => import(`../components/dialogs/superuser/createDomain.vue`)), { closable: true, title: \\\"Create Domain\\\", closeCb }, {});\\n}\\n\\nasync function createNewTenant() {\\n  const closeCb = async (reason: \\\"close\\\" | \\\"outclick\\\" | \\\"component\\\") => {\\n    if (reason != \\\"component\\\") { return; }\\n    await getData({ tenants: true });\\n  };\\n\\n  dialog.showDialog(defineAsyncComponent(() => import(`../components/dialogs/superuser/createTenant.vue`)), { closable: true, title: \\\"Create Tenant\\\", closeCb }, {});\\n}\\n\\nasync function createNewRelation() {\\n  const closeCb = async (reason: \\\"close\\\" | \\\"outclick\\\" | \\\"component\\\") => {\\n    if (reason != \\\"component\\\") { return; }\\n    await getData({ domains: true, tenants: true });\\n  };\\n\\n  const domainOptions = domains.value.map(i => { return { text: i.name, value: i.ID } });\\n  const tenantOptions = tenants.value.map(i => { return { text: i.name, value: i.ID } });\\n\\n  dialog.showDialog(defineAsyncComponent(\\n    () => import(`../components/dialogs/superuser/attachDomainToTenant.vue`)),\\n    { closable: true, title: \\\"Attach Domain To Tenant\\\", closeCb },\\n    { domainOptions, tenantOptions },\\n  );\\n}\\n\\nasync function deleteDomian(domainID: string) {\\n  await executor.execute(async () => {\\n\\n  }, { loading: true });\\n}\\n\\nasync function deleteTenant(tenantID: string) {\\n  await executor.execute(async () => {\\n\\n  }, { loading: true });\\n}\\n\\nasync function removeRelation(domainID: string, tenantID: string) {\\n  await executor.execute(async () => {\\n    await systemUserManagement.detachDomainFromTenant(domainID, tenantID);\\n    await getData({ tenants: true });\\n  }, { loading: true });\\n}\\n\\n</script>\\n<template>\\n  <div class=\\\"content-area\\\">\\n    <div class=\\\"tables-area\\\">\\n      <div class=\\\"section-area\\\">\\n        <div class=\\\"header-text\\\">Domains <button @click=\\\"createNewDomian()\\\" class=\\\"btn-new-item\\\">Create New\\n            Domain</button></div>\\n        <div>\\n          <v-client-table ref='table' :data=\\\"domains\\\" :columns=\\\"domainsDatatableColumns\\\" :options=\\\"domainsDataTable\\\">\\n            <template #createdDate=\\\"props\\\">\\n              <span>{{ new Intl.DateTimeFormat(\\\"tr-TR\\\", dtOptions).format(new Date(props.row.createDate)) }}</span>\\n            </template>\\n            <template #actions=\\\"props\\\">\\n              <div>\\n                <button @click=\\\"deleteDomian(props.row.ID)\\\">Delete</button>\\n              </div>\\n            </template>\\n          </v-client-table>\\n        </div>\\n      </div>\\n      <div class=\\\"section-area\\\">\\n        <div class=\\\"header-text\\\">Tenants <button @click=\\\"createNewTenant()\\\">Create New Tenant</button></div>\\n        <div>\\n          <v-client-table ref='table' :data=\\\"tenants\\\" :columns=\\\"tenantsDatatableColumns\\\" :options=\\\"tenantsDataTable\\\">\\n            <template #createdDate=\\\"props\\\">\\n              <span>{{ new Intl.DateTimeFormat(\\\"tr-TR\\\", dtOptions).format(new Date(props.row.createDate)) }}</span>\\n            </template>\\n            <template #actions=\\\"props\\\">\\n              <div>\\n                <button @click=\\\"deleteTenant(props.row.ID)\\\">Delete</button>\\n              </div>\\n            </template>\\n          </v-client-table>\\n        </div>\\n      </div>\\n      <div class=\\\"section-area\\\">\\n        <div class=\\\"header-text\\\">Tenant & Domain Relations <button @click=\\\"createNewRelation()\\\">Add New\\n            Relation</button></div>\\n        <div>\\n          <v-client-table ref='table' :data=\\\"relations\\\" :columns=\\\"relationsDatatableColumns\\\"\\n            :options=\\\"relationsDataTable\\\">\\n            <template #actions=\\\"props\\\">\\n              <div>\\n                <button @click=\\\"removeRelation(props.row.domainID, props.row.tenantID)\\\">Remove</button>\\n              </div>\\n            </template>\\n          </v-client-table>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<style scoped>\\n.content-area {\\n  overflow-y: scroll;\\n  height: 100%;\\n}\\n\\n.tables-area {\\n  width: 70%;\\n  margin-left: 15%;\\n  margin-top: 10px;\\n}\\n\\n.section-area {\\n  margin-bottom: 25px;\\n}\\n\\n.header-text {\\n  font-weight: bold;\\n  margin-bottom: 5px;\\n}\\n\\n/* .btn-new-item {\\n  float: right;\\n} */\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7a86d4bf\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"content-area\" }\nconst _hoisted_2 = { class: \"tables-area\" }\nconst _hoisted_3 = { class: \"section-area\" }\nconst _hoisted_4 = { class: \"header-text\" }\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"Domains \")\nconst _hoisted_6 = [\"onClick\"]\nconst _hoisted_7 = { class: \"section-area\" }\nconst _hoisted_8 = { class: \"header-text\" }\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"Tenants \")\nconst _hoisted_10 = [\"onClick\"]\nconst _hoisted_11 = { class: \"section-area\" }\nconst _hoisted_12 = { class: \"header-text\" }\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\"Tenant & Domain Relations \")\nconst _hoisted_14 = [\"onClick\"]\n\nimport { defineAsyncComponent, onMounted, ref } from \"vue\";\nimport { AuthenticationType, IDomain, ITenantUser } from '@stechquick/algae/lib/qCloudTemp/quickCloud';\nimport { container } from '../../../domain/core/diContainer';\nimport { routeDefinition } from '../../../domain/presentation/IRouter';\nimport { ISystemUserManagement } from '../../../domain/useCase/ISystemUserManagement';\nimport { IUseCaseExecutor } from '../../../domain/useCase/IUseCaseExecutor';\nimport { ILocalization } from \"../../../domain/infrastructure/ILocalization\";\nimport { IDialog } from \"../../../domain/presentation/IDialog\";\n\ninterface IInitOptions {\n  domains?: boolean;\n  tenants?: boolean;\n}\n\ninterface ITenantDomainRelation {\n  domainID: string;\n  tenantID: string;\n  domainName: string;\n  tenantName: string;\n  loginType: AuthenticationType;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'superuser',\n  setup(__props) {\n\nrouteDefinition({ noAuth: true });\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst systemUserManagement = container.resolve<ISystemUserManagement>(ISystemUserManagement);\nconst localization = container.resolve<ILocalization>(ILocalization);\nconst dialog = container.resolve<IDialog>(IDialog);\n\nconst domains = ref<Array<IDomain>>([]);\nconst tenants = ref<Array<ITenantUser>>([]);\nconst relations = ref<Array<ITenantDomainRelation>>([]);\n\nfunction fillRelationTableData(domains: Array<IDomain>, tenants: Array<ITenantUser>) {\n  const items: Array<ITenantDomainRelation> = [];\n\n  tenants.forEach(tenant => {\n    const relations = tenant.tenantRelations;\n    if (!relations) { return; }\n\n    relations.forEach(relation => {\n      const domain = domains.find(i => i.ID == relation.tenantID)!;\n      const item: ITenantDomainRelation = {\n        domainID: relation.tenantID,\n        domainName: domain.name,\n        tenantID: tenant.ID,\n        tenantName: tenant.name,\n        loginType: relation.loginType,\n      }\n      items.push(item);\n    });\n  });\n\n  relations.value = items;\n}\n\nasync function getData(options: IInitOptions) {\n  await executor.execute(async () => {\n    const domainsProm = options.domains ? systemUserManagement.listDomains() : (async () => domains.value)();\n    const tenantsProm = options.tenants ? systemUserManagement.listTenants() : (async () => tenants.value)();\n\n    [domains.value, tenants.value] = await Promise.all([domainsProm, tenantsProm]);\n\n    if (options.tenants) {\n      fillRelationTableData(domains.value, tenants.value);\n    }\n  }, { loading: true });\n}\n\nonMounted(async () => {\n  await getData({ domains: true, tenants: true });\n});\n\nconst dtBasicOptions = {\n  filterable: false, perPage: 10, perPageValues: [],\n  sortIcon: { base: 'mdi', is: 'mdi mdi-unfold-less-horizontal', up: 'mdi mdi-arrow-up', down: 'mdi mdi-arrow-down' },\n};\n\nconst domainsDtOptions = {\n  ...dtBasicOptions,\n  headings: {\n    ID: \"Domain ID\",\n    name: \"Domain Name\",\n    dbName: \"Database Name\",\n    createdBy: localization.get('applicationListcreatedByHeader'),\n    createDate: localization.get('applicationListcreatedDateHeader'),\n  }\n};\n\nconst tenantsDtOptions = {\n  ...dtBasicOptions,\n  headings: {\n    ID: \"Tenant ID\",\n    name: \" Tenant Name\",\n    createdBy: localization.get('applicationListcreatedByHeader'),\n    createDate: localization.get('applicationListcreatedDateHeader'),\n  }\n};\n\nconst relationsDtOptions = {\n  ...dtBasicOptions,\n  headings: {\n    domainID: \"Domain ID\",\n    domainName: \"Domain Name\",\n    tenantID: \"Tenant ID\",\n    tenantName: \"Tenant Name\",\n    loginType: \"Login Type\",\n  }\n};\n\nlet dtOptions: any = { month: '2-digit', day: '2-digit', year: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };\nconst domainsDatatableColumns = ref(['ID', 'name', 'dbName', 'createdBy', 'createDate', \"actions\"]);\nconst tenantsDatatableColumns = ref(['ID', 'name', 'createdBy', 'createDate', \"actions\"]);\nconst relationsDatatableColumns = ref(['domainID', 'domainName', 'tenantID', 'tenantName', \"loginType\", \"actions\"]);\nconst domainsDataTable = ref(domainsDtOptions);\nconst tenantsDataTable = ref(tenantsDtOptions);\nconst relationsDataTable = ref(relationsDtOptions);\n\nasync function createNewDomian() {\n  const closeCb = async (reason: \"close\" | \"outclick\" | \"component\") => {\n    if (reason != \"component\") { return; }\n    await getData({ domains: true });\n  };\n\n  dialog.showDialog(defineAsyncComponent(() => import(`../components/dialogs/superuser/createDomain.vue`)), { closable: true, title: \"Create Domain\", closeCb }, {});\n}\n\nasync function createNewTenant() {\n  const closeCb = async (reason: \"close\" | \"outclick\" | \"component\") => {\n    if (reason != \"component\") { return; }\n    await getData({ tenants: true });\n  };\n\n  dialog.showDialog(defineAsyncComponent(() => import(`../components/dialogs/superuser/createTenant.vue`)), { closable: true, title: \"Create Tenant\", closeCb }, {});\n}\n\nasync function createNewRelation() {\n  const closeCb = async (reason: \"close\" | \"outclick\" | \"component\") => {\n    if (reason != \"component\") { return; }\n    await getData({ domains: true, tenants: true });\n  };\n\n  const domainOptions = domains.value.map(i => { return { text: i.name, value: i.ID } });\n  const tenantOptions = tenants.value.map(i => { return { text: i.name, value: i.ID } });\n\n  dialog.showDialog(defineAsyncComponent(\n    () => import(`../components/dialogs/superuser/attachDomainToTenant.vue`)),\n    { closable: true, title: \"Attach Domain To Tenant\", closeCb },\n    { domainOptions, tenantOptions },\n  );\n}\n\nasync function deleteDomian(domainID: string) {\n  await executor.execute(async () => {\n\n  }, { loading: true });\n}\n\nasync function deleteTenant(tenantID: string) {\n  await executor.execute(async () => {\n\n  }, { loading: true });\n}\n\nasync function removeRelation(domainID: string, tenantID: string) {\n  await executor.execute(async () => {\n    await systemUserManagement.detachDomainFromTenant(domainID, tenantID);\n    await getData({ tenants: true });\n  }, { loading: true });\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_client_table = _resolveComponent(\"v-client-table\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (createNewDomian())),\n            class: \"btn-new-item\"\n          }, \"Create New Domain\")\n        ]),\n        _createElementVNode(\"div\", null, [\n          _createVNode(_component_v_client_table, {\n            ref: \"table\",\n            data: domains.value,\n            columns: domainsDatatableColumns.value,\n            options: domainsDataTable.value\n          }, {\n            createdDate: _withCtx((props) => [\n              _createElementVNode(\"span\", null, _toDisplayString(new Intl.DateTimeFormat(\"tr-TR\", _unref(dtOptions)).format(new Date(props.row.createDate))), 1 /* TEXT */)\n            ]),\n            actions: _withCtx((props) => [\n              _createElementVNode(\"div\", null, [\n                _createElementVNode(\"button\", {\n                  onClick: ($event: any) => (deleteDomian(props.row.ID))\n                }, \"Delete\", 8 /* PROPS */, _hoisted_6)\n              ])\n            ]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"data\", \"columns\", \"options\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"div\", _hoisted_8, [\n          _hoisted_9,\n          _createElementVNode(\"button\", {\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (createNewTenant()))\n          }, \"Create New Tenant\")\n        ]),\n        _createElementVNode(\"div\", null, [\n          _createVNode(_component_v_client_table, {\n            ref: \"table\",\n            data: tenants.value,\n            columns: tenantsDatatableColumns.value,\n            options: tenantsDataTable.value\n          }, {\n            createdDate: _withCtx((props) => [\n              _createElementVNode(\"span\", null, _toDisplayString(new Intl.DateTimeFormat(\"tr-TR\", _unref(dtOptions)).format(new Date(props.row.createDate))), 1 /* TEXT */)\n            ]),\n            actions: _withCtx((props) => [\n              _createElementVNode(\"div\", null, [\n                _createElementVNode(\"button\", {\n                  onClick: ($event: any) => (deleteTenant(props.row.ID))\n                }, \"Delete\", 8 /* PROPS */, _hoisted_10)\n              ])\n            ]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"data\", \"columns\", \"options\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"button\", {\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (createNewRelation()))\n          }, \"Add New Relation\")\n        ]),\n        _createElementVNode(\"div\", null, [\n          _createVNode(_component_v_client_table, {\n            ref: \"table\",\n            data: relations.value,\n            columns: relationsDatatableColumns.value,\n            options: relationsDataTable.value\n          }, {\n            actions: _withCtx((props) => [\n              _createElementVNode(\"div\", null, [\n                _createElementVNode(\"button\", {\n                  onClick: ($event: any) => (removeRelation(props.row.domainID, props.row.tenantID))\n                }, \"Remove\", 8 /* PROPS */, _hoisted_14)\n              ])\n            ]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"data\", \"columns\", \"options\"])\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./superuser.vue?vue&type=style&index=0&id=7a86d4bf&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./superuser.vue?vue&type=style&index=0&id=7a86d4bf&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import script from \"./superuser.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./superuser.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./superuser.vue?vue&type=style&index=0&id=7a86d4bf&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/QCloud-Shell/QCloud-Shell/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7a86d4bf\"]])\n\nexport default __exports__"],"names":["___CSS_LOADER_EXPORT___","push","module","id","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","__name","setup","__props","noAuth","executor","IUseCaseExecutor","systemUserManagement","ISystemUserManagement","localization","ILocalization","dialog","IDialog","domains","tenants","relations","async","getData","options","execute","domainsProm","listDomains","value","tenantsProm","listTenants","Promise","all","items","forEach","tenant","tenantRelations","relation","domain","find","i","ID","tenantID","item","domainID","domainName","name","tenantName","loginType","fillRelationTableData","loading","dtBasicOptions","filterable","perPage","perPageValues","sortIcon","base","is","up","down","domainsDtOptions","headings","dbName","createdBy","get","createDate","tenantsDtOptions","relationsDtOptions","dtOptions","month","day","year","hour","minute","second","domainsDatatableColumns","tenantsDatatableColumns","relationsDatatableColumns","domainsDataTable","tenantsDataTable","relationsDataTable","_ctx","_cache","_component_v_client_table","_","onClick","$event","showDialog","closable","title","closeCb","reason","ref","data","columns","createdDate","props","Intl","DateTimeFormat","format","Date","row","actions","domainOptions","map","text","tenantOptions","detachDomainFromTenant","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement"],"sourceRoot":""}