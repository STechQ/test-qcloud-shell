{"version":3,"file":"169.js","mappings":"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","sources":["webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?c662","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?f20e","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?d26f","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?d99d","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?8693","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\nul[data-v-1eee829a] {\\n    list-style-type: none;\\n}\\n.new-module-text .mdi[data-v-1eee829a] {\\n    font-size: 24px; \\n    margin-right: 10px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/presentation/vue3/components/dialogs/moveItem.vue\"],\"names\":[],\"mappings\":\";AAuJA;IACI,qBAAqB;AACzB;AAEA;IACI,eAAe;IACf,kBAAkB;AACtB\",\"sourcesContent\":[\"<script setup lang=\\\"ts\\\">\\nimport { container } from '../../../../domain/core/diContainer';\\nimport { IUseCaseExecutor } from '../../../../domain/useCase/IUseCaseExecutor';\\nimport { IViewModel } from '../../../../domain/viewModel/IViewModel';\\nimport { IMoveItemProps } from '../../../../domain/presentation/dialogs/IMoveItemProps';\\nimport { IObjectUseCase } from '../../../../domain/useCase/IObjectUseCase';\\nimport { ITreeItem } from '../../../../domain/presentation/ITreeView';\\nimport { ITreeView } from '../../../../domain/presentation/ITreeView';\\nimport { IModel, IModule } from '../../../../domain/model/models';\\nimport { IFileExplorer } from '../../../../domain/useCase/IFileExplorer';\\nimport { IViewModelManager } from '../../../../domain/viewModel/IViewModelManager';\\n\\ninterface IMoveItemInline extends IMoveItemProps {\\n    id: string;\\n    name: string;\\n    description?: string;\\n    type:  \\\"module\\\" | \\\"model\\\";\\n    prefix?: string;\\n    treeItems: Array<ITreeItem>;\\n}\\n\\nasync function refreshTreeItems(itemId: string, itemPath: Array<String>) {\\n  const fileExplorer = await executor.resolveUseCase<IFileExplorer>(IFileExplorer);\\n  let item = viewModel.studio.items.find(item => item.ID == props.id);\\n  if(!item) return;\\n  fileExplorer.removeItem(props.id)\\n  fileExplorer.addNewItem(item, itemId);\\n  let children = getChildren(props.id);\\n  children.forEach(async child => {\\n    fileExplorer.removeItem(child.ID)\\n    fileExplorer.addNewItem(child, child.path ? child.path[child.path.length - 1].toString() : undefined);\\n  });\\n}\\n\\nasync function updateChildrenPaths(itemId: string, itemPath: Array<String>, objectUseCase: IObjectUseCase){\\n  let children = getChildren(props.id);  \\n  children.forEach(async child => {\\n    let updatedPath = updatePath(props.id, child.path ?? [], itemPath);\\n    await objectUseCase.updateObject(props.id, {name: props.name, path: updatedPath});\\n  });\\n}\\n\\nfunction updatePath(updatedItemId: string, existingItemPath: Array<String>, updatedPath: Array<String>) {\\n    const index = existingItemPath.indexOf(updatedItemId);\\n    if (index !== -1) {\\n        return [...updatedPath, ...existingItemPath.slice(index + 1)];\\n    }\\n    return existingItemPath;\\n}\\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\\nconst treeview = container.resolve<ITreeView>(ITreeView);\\nconst props = defineProps<IMoveItemInline>();\\nconst viewModel = container.resolve<IViewModel>(IViewModel);\\nconst emit = defineEmits([\\\"close\\\"]);\\nfunction move(itemPath: Array<String>, itemId: String) {\\nconsole.log(\\\"move\\\")\\n    executor.execute(async () => {\\n        itemPath.push(itemId.toString());\\n        const objectUseCase = container.resolve<IObjectUseCase>(IObjectUseCase);\\n        await objectUseCase.updateObject(props.id, {name: props.name, path: itemPath});\\n        await updateChildrenPaths(itemId.toString(), itemPath, objectUseCase);\\n        await refreshTreeItems(itemId.toString(), itemPath);\\n        emit(\\\"close\\\");\\n    }, { loading: true });\\n}\\nlet actions: { path: Array<String>; icon: string; label: string; indent: number; id: String }[] = []\\nactions.push({ path: [], icon: \\\"mdi mdi-vector-polyline\\\", label: viewModel.studio.appName, indent: 0, id: viewModel.studio.appId })\\nlet treeItems = viewModel.studio.items;\\nconst modelItems = treeItems.filter(item => item.objectType === \\\"model\\\") as IModel[];\\nconst moduleItems = treeItems.filter(item => item.objectType === \\\"module\\\") as IModule[];\\n\\nconsole.log(\\\"ooops\\\", treeItems)\\n\\nmodelItems.sort((a, b) => {\\n  let aPath = a.path ?? [];\\n  let bPath = b.path ?? [];\\n    if (aPath.length !== bPath.length) {\\n        return aPath.length - bPath.length;\\n    }\\n    \\n    return 0;\\n});\\n\\nfunction getChildren(parentId: string) {\\n  return modelItems.filter(item => (item.path ? item.path[item.path.length - 1] === parentId.toString() : false) || (item.parent ? item.parent.ID == parentId : false));\\n}\\n\\nfunction sortItems(parentId: string) {\\n  const result :IModel [] = [];\\n\\n  const directChildren = getChildren(parentId);\\n  for (const child of directChildren) {\\n    result.push(child);\\n    result.push(...sortItems(child.ID));\\n  }\\n\\n  return result;\\n}\\n\\nconst sortedItems = modelItems.filter(item => item.path ? item.path.length === 0 : true)\\n  .reduce<IModel[]>((acc, rootItem) => {\\n    acc.push(rootItem);\\n    acc.push(...sortItems(rootItem.ID));\\n    return acc;\\n  }, []);\\n\\n\\nconsole.log(\\\"ooops1\\\", sortedItems)\\n\\n\\n\\n\\n\\n\\nfor (let modelItem of sortedItems) {\\n    if (modelItem.modelType == \\\"placeholder\\\") {\\n        let indentCalculated = modelItem.path ? (modelItem.path.length * 20 + 20) : 20;\\n        actions.push({ path: modelItem.path ?? [], icon: \\\"mdi mdi-folder-open\\\", label: modelItem.name, indent: indentCalculated, id: modelItem.ID })\\n    }\\n}\\nfor (let moduleItem of moduleItems){\\n    actions.push({ path: moduleItem.path ?? [], icon: \\\"mdi mdi-puzzle\\\", label: moduleItem.name, indent: 20, id: moduleItem.ID })\\n}\\n\\n</script> \\n\\n<template>\\n    <div class=\\\"moveDiv\\\">\\n        <div id=\\\"content-area\\\" class=\\\"popover__content\\\">\\n            <div style=\\\"height: 100%\\\" class=\\\"errorDiv\\\">\\n                <ul style=\\\"padding-left: 0px; margin-bottom: 0px\\\">\\n                    <li v-for=\\\"action in actions\\\" \\n                        :key=\\\"action.label\\\" \\n                        @click=\\\"move(action.path, action.id)\\\" \\n                        style=\\\"padding-top: 1px\\\" \\n                        :style=\\\"{ 'padding-left': action.indent + 'px' }\\\">\\n                        <div class=\\\"createLi\\\">\\n                            <p class=\\\"new-module-text\\\">\\n                                <i :class=\\\"action.icon\\\" style=\\\"margin-right: 10px;\\\"></i>{{ action.label }}\\n                            </p>\\n                        </div>\\n                    </li>\\n                </ul>\\n            </div>\\n        </div>\\n    </div>\\n</template>\\n\\n\\n<style scoped>\\nul {\\n    list-style-type: none;\\n}\\n\\n.new-module-text .mdi {\\n    font-size: 24px; \\n    margin-right: 10px; \\n}\\n</style>\\n\\n\\n \\n\\n<style scoped>\\n.new-module-text {\\n  margin: 0;\\n  color: #151233;\\n  font-weight: 400;\\n  font-size: 14px;\\n  letter-spacing: 0px;\\n  opacity: 1;\\n  font-family: \\\"ROBOTO\\\";\\n}\\n\\n.createLi {\\n  cursor: pointer;\\n}\\n.moveDiv {\\n    margin-top: 5px;\\n    margin-left: 20px;\\n    margin-right: 20px;\\n    margin-bottom: 10px;\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.new-module-text[data-v-1eee829a] {\\n  margin: 0;\\n  color: #151233;\\n  font-weight: 400;\\n  font-size: 14px;\\n  letter-spacing: 0px;\\n  opacity: 1;\\n  font-family: \\\"ROBOTO\\\";\\n}\\n.createLi[data-v-1eee829a] {\\n  cursor: pointer;\\n}\\n.moveDiv[data-v-1eee829a] {\\n    margin-top: 5px;\\n    margin-left: 20px;\\n    margin-right: 20px;\\n    margin-bottom: 10px;\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/presentation/vue3/components/dialogs/moveItem.vue\"],\"names\":[],\"mappings\":\";AAqKA;EACE,SAAS;EACT,cAAc;EACd,gBAAgB;EAChB,eAAe;EACf,mBAAmB;EACnB,UAAU;EACV,qBAAqB;AACvB;AAEA;EACE,eAAe;AACjB;AACA;IACI,eAAe;IACf,iBAAiB;IACjB,kBAAkB;IAClB,mBAAmB;AACvB\",\"sourcesContent\":[\"<script setup lang=\\\"ts\\\">\\nimport { container } from '../../../../domain/core/diContainer';\\nimport { IUseCaseExecutor } from '../../../../domain/useCase/IUseCaseExecutor';\\nimport { IViewModel } from '../../../../domain/viewModel/IViewModel';\\nimport { IMoveItemProps } from '../../../../domain/presentation/dialogs/IMoveItemProps';\\nimport { IObjectUseCase } from '../../../../domain/useCase/IObjectUseCase';\\nimport { ITreeItem } from '../../../../domain/presentation/ITreeView';\\nimport { ITreeView } from '../../../../domain/presentation/ITreeView';\\nimport { IModel, IModule } from '../../../../domain/model/models';\\nimport { IFileExplorer } from '../../../../domain/useCase/IFileExplorer';\\nimport { IViewModelManager } from '../../../../domain/viewModel/IViewModelManager';\\n\\ninterface IMoveItemInline extends IMoveItemProps {\\n    id: string;\\n    name: string;\\n    description?: string;\\n    type:  \\\"module\\\" | \\\"model\\\";\\n    prefix?: string;\\n    treeItems: Array<ITreeItem>;\\n}\\n\\nasync function refreshTreeItems(itemId: string, itemPath: Array<String>) {\\n  const fileExplorer = await executor.resolveUseCase<IFileExplorer>(IFileExplorer);\\n  let item = viewModel.studio.items.find(item => item.ID == props.id);\\n  if(!item) return;\\n  fileExplorer.removeItem(props.id)\\n  fileExplorer.addNewItem(item, itemId);\\n  let children = getChildren(props.id);\\n  children.forEach(async child => {\\n    fileExplorer.removeItem(child.ID)\\n    fileExplorer.addNewItem(child, child.path ? child.path[child.path.length - 1].toString() : undefined);\\n  });\\n}\\n\\nasync function updateChildrenPaths(itemId: string, itemPath: Array<String>, objectUseCase: IObjectUseCase){\\n  let children = getChildren(props.id);  \\n  children.forEach(async child => {\\n    let updatedPath = updatePath(props.id, child.path ?? [], itemPath);\\n    await objectUseCase.updateObject(props.id, {name: props.name, path: updatedPath});\\n  });\\n}\\n\\nfunction updatePath(updatedItemId: string, existingItemPath: Array<String>, updatedPath: Array<String>) {\\n    const index = existingItemPath.indexOf(updatedItemId);\\n    if (index !== -1) {\\n        return [...updatedPath, ...existingItemPath.slice(index + 1)];\\n    }\\n    return existingItemPath;\\n}\\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\\nconst treeview = container.resolve<ITreeView>(ITreeView);\\nconst props = defineProps<IMoveItemInline>();\\nconst viewModel = container.resolve<IViewModel>(IViewModel);\\nconst emit = defineEmits([\\\"close\\\"]);\\nfunction move(itemPath: Array<String>, itemId: String) {\\nconsole.log(\\\"move\\\")\\n    executor.execute(async () => {\\n        itemPath.push(itemId.toString());\\n        const objectUseCase = container.resolve<IObjectUseCase>(IObjectUseCase);\\n        await objectUseCase.updateObject(props.id, {name: props.name, path: itemPath});\\n        await updateChildrenPaths(itemId.toString(), itemPath, objectUseCase);\\n        await refreshTreeItems(itemId.toString(), itemPath);\\n        emit(\\\"close\\\");\\n    }, { loading: true });\\n}\\nlet actions: { path: Array<String>; icon: string; label: string; indent: number; id: String }[] = []\\nactions.push({ path: [], icon: \\\"mdi mdi-vector-polyline\\\", label: viewModel.studio.appName, indent: 0, id: viewModel.studio.appId })\\nlet treeItems = viewModel.studio.items;\\nconst modelItems = treeItems.filter(item => item.objectType === \\\"model\\\") as IModel[];\\nconst moduleItems = treeItems.filter(item => item.objectType === \\\"module\\\") as IModule[];\\n\\nconsole.log(\\\"ooops\\\", treeItems)\\n\\nmodelItems.sort((a, b) => {\\n  let aPath = a.path ?? [];\\n  let bPath = b.path ?? [];\\n    if (aPath.length !== bPath.length) {\\n        return aPath.length - bPath.length;\\n    }\\n    \\n    return 0;\\n});\\n\\nfunction getChildren(parentId: string) {\\n  return modelItems.filter(item => (item.path ? item.path[item.path.length - 1] === parentId.toString() : false) || (item.parent ? item.parent.ID == parentId : false));\\n}\\n\\nfunction sortItems(parentId: string) {\\n  const result :IModel [] = [];\\n\\n  const directChildren = getChildren(parentId);\\n  for (const child of directChildren) {\\n    result.push(child);\\n    result.push(...sortItems(child.ID));\\n  }\\n\\n  return result;\\n}\\n\\nconst sortedItems = modelItems.filter(item => item.path ? item.path.length === 0 : true)\\n  .reduce<IModel[]>((acc, rootItem) => {\\n    acc.push(rootItem);\\n    acc.push(...sortItems(rootItem.ID));\\n    return acc;\\n  }, []);\\n\\n\\nconsole.log(\\\"ooops1\\\", sortedItems)\\n\\n\\n\\n\\n\\n\\nfor (let modelItem of sortedItems) {\\n    if (modelItem.modelType == \\\"placeholder\\\") {\\n        let indentCalculated = modelItem.path ? (modelItem.path.length * 20 + 20) : 20;\\n        actions.push({ path: modelItem.path ?? [], icon: \\\"mdi mdi-folder-open\\\", label: modelItem.name, indent: indentCalculated, id: modelItem.ID })\\n    }\\n}\\nfor (let moduleItem of moduleItems){\\n    actions.push({ path: moduleItem.path ?? [], icon: \\\"mdi mdi-puzzle\\\", label: moduleItem.name, indent: 20, id: moduleItem.ID })\\n}\\n\\n</script> \\n\\n<template>\\n    <div class=\\\"moveDiv\\\">\\n        <div id=\\\"content-area\\\" class=\\\"popover__content\\\">\\n            <div style=\\\"height: 100%\\\" class=\\\"errorDiv\\\">\\n                <ul style=\\\"padding-left: 0px; margin-bottom: 0px\\\">\\n                    <li v-for=\\\"action in actions\\\" \\n                        :key=\\\"action.label\\\" \\n                        @click=\\\"move(action.path, action.id)\\\" \\n                        style=\\\"padding-top: 1px\\\" \\n                        :style=\\\"{ 'padding-left': action.indent + 'px' }\\\">\\n                        <div class=\\\"createLi\\\">\\n                            <p class=\\\"new-module-text\\\">\\n                                <i :class=\\\"action.icon\\\" style=\\\"margin-right: 10px;\\\"></i>{{ action.label }}\\n                            </p>\\n                        </div>\\n                    </li>\\n                </ul>\\n            </div>\\n        </div>\\n    </div>\\n</template>\\n\\n\\n<style scoped>\\nul {\\n    list-style-type: none;\\n}\\n\\n.new-module-text .mdi {\\n    font-size: 24px; \\n    margin-right: 10px; \\n}\\n</style>\\n\\n\\n \\n\\n<style scoped>\\n.new-module-text {\\n  margin: 0;\\n  color: #151233;\\n  font-weight: 400;\\n  font-size: 14px;\\n  letter-spacing: 0px;\\n  opacity: 1;\\n  font-family: \\\"ROBOTO\\\";\\n}\\n\\n.createLi {\\n  cursor: pointer;\\n}\\n.moveDiv {\\n    margin-top: 5px;\\n    margin-left: 20px;\\n    margin-right: 20px;\\n    margin-bottom: 10px;\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1eee829a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"moveDiv\" }\nconst _hoisted_2 = {\n  id: \"content-area\",\n  class: \"popover__content\"\n}\nconst _hoisted_3 = {\n  style: {\"height\":\"100%\"},\n  class: \"errorDiv\"\n}\nconst _hoisted_4 = { style: {\"padding-left\":\"0px\",\"margin-bottom\":\"0px\"} }\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"createLi\" }\nconst _hoisted_7 = { class: \"new-module-text\" }\n\nimport { container } from '../../../../domain/core/diContainer';\nimport { IUseCaseExecutor } from '../../../../domain/useCase/IUseCaseExecutor';\nimport { IViewModel } from '../../../../domain/viewModel/IViewModel';\nimport { IMoveItemProps } from '../../../../domain/presentation/dialogs/IMoveItemProps';\nimport { IObjectUseCase } from '../../../../domain/useCase/IObjectUseCase';\nimport { ITreeItem } from '../../../../domain/presentation/ITreeView';\nimport { ITreeView } from '../../../../domain/presentation/ITreeView';\nimport { IModel, IModule } from '../../../../domain/model/models';\nimport { IFileExplorer } from '../../../../domain/useCase/IFileExplorer';\nimport { IViewModelManager } from '../../../../domain/viewModel/IViewModelManager';\n\ninterface IMoveItemInline extends IMoveItemProps {\n    id: string;\n    name: string;\n    description?: string;\n    type:  \"module\" | \"model\";\n    prefix?: string;\n    treeItems: Array<ITreeItem>;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'moveItem',\n  props: {\n    id: null,\n    name: null,\n    description: null,\n    type: null,\n    prefix: null,\n    treeItems: null\n  },\n  emits: [\"close\"],\n  setup(__props: any, { emit }) {\n\nconst props = __props as {\n    id: string;\n    name: string;\n    description?: string;\n    type:  \"module\" | \"model\";\n    prefix?: string;\n    treeItems: Array<ITreeItem>;\n};\n\nasync function refreshTreeItems(itemId: string, itemPath: Array<String>) {\n  const fileExplorer = await executor.resolveUseCase<IFileExplorer>(IFileExplorer);\n  let item = viewModel.studio.items.find(item => item.ID == props.id);\n  if(!item) return;\n  fileExplorer.removeItem(props.id)\n  fileExplorer.addNewItem(item, itemId);\n  let children = getChildren(props.id);\n  children.forEach(async child => {\n    fileExplorer.removeItem(child.ID)\n    fileExplorer.addNewItem(child, child.path ? child.path[child.path.length - 1].toString() : undefined);\n  });\n}\n\nasync function updateChildrenPaths(itemId: string, itemPath: Array<String>, objectUseCase: IObjectUseCase){\n  let children = getChildren(props.id);  \n  children.forEach(async child => {\n    let updatedPath = updatePath(props.id, child.path ?? [], itemPath);\n    await objectUseCase.updateObject(props.id, {name: props.name, path: updatedPath});\n  });\n}\n\nfunction updatePath(updatedItemId: string, existingItemPath: Array<String>, updatedPath: Array<String>) {\n    const index = existingItemPath.indexOf(updatedItemId);\n    if (index !== -1) {\n        return [...updatedPath, ...existingItemPath.slice(index + 1)];\n    }\n    return existingItemPath;\n}\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst treeview = container.resolve<ITreeView>(ITreeView);\n\nconst viewModel = container.resolve<IViewModel>(IViewModel);\n\nfunction move(itemPath: Array<String>, itemId: String) {\nconsole.log(\"move\")\n    executor.execute(async () => {\n        itemPath.push(itemId.toString());\n        const objectUseCase = container.resolve<IObjectUseCase>(IObjectUseCase);\n        await objectUseCase.updateObject(props.id, {name: props.name, path: itemPath});\n        await updateChildrenPaths(itemId.toString(), itemPath, objectUseCase);\n        await refreshTreeItems(itemId.toString(), itemPath);\n        emit(\"close\");\n    }, { loading: true });\n}\nlet actions: { path: Array<String>; icon: string; label: string; indent: number; id: String }[] = []\nactions.push({ path: [], icon: \"mdi mdi-vector-polyline\", label: viewModel.studio.appName, indent: 0, id: viewModel.studio.appId })\nlet treeItems = viewModel.studio.items;\nconst modelItems = treeItems.filter(item => item.objectType === \"model\") as IModel[];\nconst moduleItems = treeItems.filter(item => item.objectType === \"module\") as IModule[];\n\nconsole.log(\"ooops\", treeItems)\n\nmodelItems.sort((a, b) => {\n  let aPath = a.path ?? [];\n  let bPath = b.path ?? [];\n    if (aPath.length !== bPath.length) {\n        return aPath.length - bPath.length;\n    }\n    \n    return 0;\n});\n\nfunction getChildren(parentId: string) {\n  return modelItems.filter(item => (item.path ? item.path[item.path.length - 1] === parentId.toString() : false) || (item.parent ? item.parent.ID == parentId : false));\n}\n\nfunction sortItems(parentId: string) {\n  const result :IModel [] = [];\n\n  const directChildren = getChildren(parentId);\n  for (const child of directChildren) {\n    result.push(child);\n    result.push(...sortItems(child.ID));\n  }\n\n  return result;\n}\n\nconst sortedItems = modelItems.filter(item => item.path ? item.path.length === 0 : true)\n  .reduce<IModel[]>((acc, rootItem) => {\n    acc.push(rootItem);\n    acc.push(...sortItems(rootItem.ID));\n    return acc;\n  }, []);\n\n\nconsole.log(\"ooops1\", sortedItems)\n\n\n\n\n\n\nfor (let modelItem of sortedItems) {\n    if (modelItem.modelType == \"placeholder\") {\n        let indentCalculated = modelItem.path ? (modelItem.path.length * 20 + 20) : 20;\n        actions.push({ path: modelItem.path ?? [], icon: \"mdi mdi-folder-open\", label: modelItem.name, indent: indentCalculated, id: modelItem.ID })\n    }\n}\nfor (let moduleItem of moduleItems){\n    actions.push({ path: moduleItem.path ?? [], icon: \"mdi mdi-puzzle\", label: moduleItem.name, indent: 20, id: moduleItem.ID })\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"ul\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(actions), (action) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              key: action.label,\n              onClick: ($event: any) => (move(action.path, action.id)),\n              style: _normalizeStyle([{\"padding-top\":\"1px\"}, { 'padding-left': action.indent + 'px' }])\n            }, [\n              _createElementVNode(\"div\", _hoisted_6, [\n                _createElementVNode(\"p\", _hoisted_7, [\n                  _createElementVNode(\"i\", {\n                    class: _normalizeClass(action.icon),\n                    style: {\"margin-right\":\"10px\"}\n                  }, null, 2 /* CLASS */),\n                  _createTextVNode(_toDisplayString(action.label), 1 /* TEXT */)\n                ])\n              ])\n            ], 12 /* STYLE, PROPS */, _hoisted_5))\n          }), 128 /* KEYED_FRAGMENT */))\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./moveItem.vue?vue&type=style&index=0&id=1eee829a&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./moveItem.vue?vue&type=style&index=0&id=1eee829a&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./moveItem.vue?vue&type=style&index=1&id=1eee829a&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./moveItem.vue?vue&type=style&index=1&id=1eee829a&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import script from \"./moveItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./moveItem.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./moveItem.vue?vue&type=style&index=0&id=1eee829a&scoped=true&lang=css\"\nimport \"./moveItem.vue?vue&type=style&index=1&id=1eee829a&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/studio/studio/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1eee829a\"]])\n\nexport default __exports__"],"names":["___CSS_LOADER_EXPORT___","push","module","id","_hoisted_1","class","_hoisted_2","_hoisted_3","style","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","__name","props","name","description","type","prefix","treeItems","emits","setup","__props","emit","IViewModelManager","executor","IUseCaseExecutor","viewModel","ITreeView","IViewModel","actions","path","icon","label","studio","appName","indent","appId","items","modelItems","filter","item","objectType","moduleItems","getChildren","parentId","length","toString","parent","ID","sortItems","result","directChildren","child","console","log","sort","a","b","aPath","bPath","sortedItems","reduce","acc","rootItem","modelItem","modelType","indentCalculated","moduleItem","_ctx","_cache","_","action","key","onClick","$event","itemPath","itemId","execute","async","objectUseCase","IObjectUseCase","updateObject","forEach","updatedPath","updatedItemId","existingItemPath","index","indexOf","slice","updatePath","updateChildrenPaths","fileExplorer","resolveUseCase","IFileExplorer","find","removeItem","addNewItem","undefined","refreshTreeItems","loading","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement"],"sourceRoot":""}