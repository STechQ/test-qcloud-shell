"use strict";(self.webpackChunkqcloud_shell=self.webpackChunkqcloud_shell||[]).push([[458],{4567:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(1864),r=t.n(o),i=t(352),a=t.n(i)()(r());a.push([e.id,"\n.deploy-setting-container[data-v-79436c2f] {\n    padding: 16px 20px 20px 20px;\n    height: 495px;\n    overflow-y: auto;\n}\n.previous-button[data-v-79436c2f] {\n    width: 68px;\n    height: 32px;\n    border: none;\n    background: #f5f5f500 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    font-family: \"Roboto\";\n    font-weight: bold;\n    color: #607d8b;\n    text-align: center;\n    margin-right: 8px;\n    float: right;\n}\n.save-button[data-v-79436c2f] {\n    width: 74px;\n    height: 32px;\n    border: none;\n    background: #151233 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    font-family: \"Roboto\";\n    color: #ffffff;\n    text-align: center;\n    float: right;\n}\n.VueTables__heading[data-v-79436c2f] {\n    font-family: 'Roboto';\n    font-size: 13px;\n    font-weight: bold;\n    letter-spacing: 0px;\n    color: #616161;\n}\n.title[data-v-79436c2f] {\n    font-family: 'Roboto';\n    font-size: 20px;\n    font-weight: bold;\n    color: #151233;\n}\n.product-title[data-v-79436c2f] {\n    font-family: 'Roboto';\n    font-weight: bold;\n    font-size: 14px;\n    color: #151233;\n    margin-left: 6px;\n    margin-top: 20px;\n}\n.product-input-container[data-v-79436c2f] {\n    position: relative;\n    max-width: max-content;\n}\n.input-container[data-v-79436c2f] {\n    position: relative;\n    max-width: max-content;\n    margin-left: 20px;\n}\n.icon-container[data-v-79436c2f] {\n    position: absolute;\n    right: 24px;\n    top: 7px;\n}\ninput[data-v-79436c2f] {\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #a1a1a1;\n    border-radius: 4px;\n    padding: 5px 0px 6px 12px;\n    font-family: \"Roboto\";\n    font-size: 14px;\n}\ninput[data-v-79436c2f]:disabled {\n    background-color: rgba(59, 59, 59, 0.3);\n}\n.module-input[data-v-79436c2f] {\n    width: 154px;\n    height: 30px;\n}\n.product-input[data-v-79436c2f] {\n    width: 230px;\n    height: 30px;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/deploySettings.vue"],names:[],mappings:";AA2lBA;IACI,4BAA4B;IAC5B,aAAa;IACb,gBAAgB;AACpB;AACA;IACI,WAAW;IACX,YAAY;IACZ,YAAY;IACZ,iDAAiD;IACjD,kBAAkB;IAClB,qBAAqB;IACrB,iBAAiB;IACjB,cAAc;IACd,kBAAkB;IAClB,iBAAiB;IACjB,YAAY;AAChB;AACA;IACI,WAAW;IACX,YAAY;IACZ,YAAY;IACZ,+CAA+C;IAC/C,kBAAkB;IAClB,qBAAqB;IACrB,cAAc;IACd,kBAAkB;IAClB,YAAY;AAChB;AAEA;IACI,qBAAqB;IACrB,eAAe;IACf,iBAAiB;IACjB,mBAAmB;IACnB,cAAc;AAClB;AAEA;IACI,qBAAqB;IACrB,eAAe;IACf,iBAAiB;IACjB,cAAc;AAClB;AAEA;IACI,qBAAqB;IACrB,iBAAiB;IACjB,eAAe;IACf,cAAc;IACd,gBAAgB;IAChB,gBAAgB;AACpB;AAEA;IACI,kBAAkB;IAClB,sBAAsB;AAC1B;AAEA;IACI,kBAAkB;IAClB,sBAAsB;IACtB,iBAAiB;AACrB;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,QAAQ;AACZ;AAEA;IACI,+CAA+C;IAC/C,yBAAyB;IACzB,kBAAkB;IAClB,yBAAyB;IACzB,qBAAqB;IACrB,eAAe;AACnB;AACA;IACI,uCAAuC;AAC3C;AAEA;IACI,YAAY;IACZ,YAAY;AAChB;AAEA;IACI,YAAY;IACZ,YAAY;AAChB",sourcesContent:['<script setup lang="ts">\nimport { onBeforeMount, ref } from "vue";\nimport { container } from "tsyringe";\nimport { IViewModel } from "../../../../domain/viewModel/IViewModel";\nimport { IModule, IModuleSettingsItem, IApplicationSettingsItem, IModuleDeployParameters } from "../../../../domain/model/models";\nimport { ILocalization } from "../../../../domain/infrastructure/ILocalization";\nimport { IGitProject } from "../../../../domain/infrastructure/IProviderApi";\nimport { IUseCaseExecutor } from "../../../../domain/useCase/IUseCaseExecutor";\nimport { IDebounce } from "../../../../domain/infrastructure/IDebounce";\nimport { IApplicationSettings } from "../../../../domain/useCase/IApplicationSettings";\nimport { INotification } from "../../../../domain/presentation/INotification";\nimport Spinner from "../spinner.vue"\n\nonBeforeMount(() => {\n    fillDatatableRow();\n    getGitGroupsFromProvider();\n    getProductsFromProvider();\n});\n\ninterface IProduct {\n    products: Array<IGitProject>;\n    disabled: boolean;\n    loaded: boolean;\n}\n\ninterface IGroup {\n    value: IGitProject;\n    microservicesCache: Array<IGitProject>;\n    requestedBefore: boolean;\n}\n\ninterface IGitGroup {\n    groups: Array<IGroup>;\n    disabled: boolean;\n    loaded: boolean;\n}\n\ninterface IModuleDataTableRow {\n    moduleID: IModule["ID"];\n    moduleName: IModule["name"];\n    gitGroupName: string;\n    gitGroupID: number;\n    microservices: Array<IGitProject>;\n    microservicesDisable: boolean;\n    microserviceLoading: boolean;\n    microserviceName: string;\n    microserviceID: number;\n}\n\ninterface IAppDataTableRow {\n    appID: IModule["ID"];\n    appName: IModule["name"];\n    microservices: Array<IGitProject>;\n    microservicesDisable: boolean;\n}\n\nconst emit = defineEmits(["close"]);\n\nconst localization = container.resolve<ILocalization>(ILocalization);\nconst viewModel = container.resolve<IViewModel>(IViewModel);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst notification = container.resolve<INotification>(INotification);\nconst appSettingsUseCase = container.resolve<IApplicationSettings>(IApplicationSettings);\nconst debouncer = container.resolve<IDebounce>(IDebounce);\n\nconst gitProducts = ref({ products: [], disabled: false, loaded: false } as IProduct);\nconst gitGroups = ref({ groups: [], disabled: false, loaded: false } as IGitGroup);\nconst currentApp = ref(viewModel.apps.find((app) => app.ID == viewModel.studio.appId));\nconst appSettings = ref({ product: { ID: 0, name: "" }, gitGroup: { ID: 0, name: "" }, microservice: { ID: 0, name: "", loading: false } });\nconst modulesDataTableRows = ref(Array<IModuleDataTableRow>());\nconst appDataTableRows = ref(Array<IAppDataTableRow>());\n\nconst modulesAppDatatableColumns = ref(["moduleName", "gitGroup", "service"]);\nconst appAppDatatableColumns = ref(["appName", "gitGroup", "service"]);\nconst modulesOptionsDataTable = ref({\n    resizableColumns: false,\n    filterable: false,\n    perPage: 3,\n    perPageValues: [],\n    headings: {\n        moduleName: localization.get("moduleName"),\n        gitGroup: localization.get("gitGroup"),\n        microservice: localization.get("service"),\n    },\n    sortable: [],\n    texts: {\n        count: "",\n    },\n});\n\nconst appOptionsDataTable = ref({\n    resizableColumns: false,\n    filterable: false,\n    perPage: 1,\n    perPageValues: [],\n    headings: {\n        appName: localization.get("appName"),\n        gitGroup: localization.get("gitGroup"),\n        microservice: localization.get("service"),\n    },\n    sortable: [],\n    texts: {\n        count: "",\n    },\n});\n\nfunction fillDatatableRow() {\n    modulesDataTableRows.value = viewModel.studio.items\n        .filter((item) => item.objectType === "module")\n        .map<IModuleDataTableRow>((item) => {\n            const module: IModuleDataTableRow = {\n                moduleID: item.ID,\n                moduleName: item.name,\n                gitGroupName: "",\n                gitGroupID: (item as IModule).deployParameters?.gitGroupId || 0,\n                microservices: [],\n                microservicesDisable: true,\n                microserviceLoading: false,\n                microserviceName: "",\n                microserviceID: (item as IModule).deployParameters?.gitServiceRepoId || 0,\n            };\n            return module;\n        });\n    appDataTableRows.value.push({\n        appID: currentApp.value!.ID,\n        appName: currentApp.value!.name,\n        microservices: [],\n        microservicesDisable: true,\n    });\n}\n\nfunction getProductsFromProvider() {\n    appSettingsUseCase\n        .getProjectsOfProduct()\n        .then(res => {\n            gitProducts.value.products = res.data.items;\n            gitProducts.value.loaded = true;\n            gitProducts.value.disabled = false;\n            setSelectedProduct();\n        })\n        .catch(() => {\n            gitProducts.value.loaded = true;\n            gitProducts.value.disabled = true;\n            notification.showNotification({ text: "Error while fetching products", type: "error" });\n        });\n}\n\nfunction setSelectedProduct() {\n    if (currentApp.value) {\n        if (currentApp.value.deployParameters) {\n            const currentProduct = gitProducts.value.products.find((product) => currentApp.value!.deployParameters!.gitProductRepoId == product.id);\n            if (currentProduct) {\n                appSettings.value.product = {\n                    name: currentProduct.name,\n                    ID: currentProduct.id,\n                };\n            }\n        }\n    }\n}\n\nasync function getGitGroupsFromProvider() {\n    appSettingsUseCase\n        .getGroupNamesWithId()\n        .then((res) => {\n            res.data.items.forEach((fetchedGroup) =>\n                gitGroups.value.groups.push({\n                    value: fetchedGroup,\n                    microservicesCache: [],\n                    requestedBefore: false,\n                })\n            );\n            gitGroups.value.loaded = true;\n            gitGroups.value.disabled = false;\n            setModulesSelectedGitGroups();\n            setAppSelectedGitGroup();\n        })\n        .catch(() =>{\n            gitGroups.value.loaded = true;\n            gitGroups.value.disabled = true;\n\n            notification.showNotification({\n                text: "Error while fetching git groups",\n                type: "error",\n            })\n        }\n        );\n}\n\nfunction setModulesSelectedGitGroups() {\n    modulesDataTableRows.value.forEach((row) => {\n        if (row.gitGroupID !== 0) {\n            const group = gitGroups.value.groups.find((group) => group.value.id == row.gitGroupID);\n            if (group) {\n                row.gitGroupName = group.value.name;\n            } else {\n                row.gitGroupID = 0;\n            }\n        }\n    });\n    setModulesSelectedMicroservices();\n}\n\nfunction setAppSelectedGitGroup() {\n    if (currentApp.value) {\n        if (currentApp.value.deployParameters) {\n            const currentGitGroup = gitGroups.value.groups.find((group) => currentApp.value!.deployParameters!.gitGroupId == group.value.id);\n            if (currentGitGroup) {\n                appSettings.value.gitGroup = {\n                    name: currentGitGroup.value.name,\n                    ID: currentGitGroup.value.id,\n                };\n            }\n        }\n    }\n\n    if (appSettings.value.gitGroup.ID !== 0) {\n        const group = gitGroups.value.groups.find((group) => group.value.id == appSettings.value.gitGroup.ID);\n        if (group) {\n            appSettings.value.gitGroup.name = group.value.name;\n        } else {\n            appSettings.value.gitGroup.ID = 0;\n        }\n    }\n    setAppSelectedMicroservice();\n}\n\nfunction setModulesSelectedMicroservices() {\n    const groupIdList: Array<number> = modulesDataTableRows.value\n        .map((row) => row.gitGroupID)\n        .filter((id, index, self) => id !== 0 && self.indexOf(id) === index);\n\n    groupIdList.forEach((id) => {\n        modulesDataTableRows.value.forEach(row => {\n            if(row.gitGroupID == id) {\n                row.microserviceLoading = true;\n                row.microservicesDisable = false;\n            }\n        })\n        appSettingsUseCase\n            .getProjectsByGroupId(id)\n            .then((res) => {\n                let data = res.data.items;\n                const group = gitGroups.value.groups.find((group) => group.value.id == id);\n                if (group) {\n                    group.microservicesCache = data;\n                    group.requestedBefore = true;\n                    modulesDataTableRows.value.forEach((row) => {\n                        if (row.gitGroupID === id) {\n                            row.microservices = data;\n                            row.microserviceLoading = false;\n                            if(row.microservices.length == 0) {\n                                row.microservicesDisable = true;\n                            }\n                            if (row.microserviceID !== 0) {\n                                const microservice = data.find((service) => service.id == row.microserviceID);\n                                if (microservice) {\n                                    row.microserviceName = microservice.name;\n                                    row.microservicesDisable = false;\n                                } else {\n                                    row.microserviceID = 0;\n                                    row.microservicesDisable = true;\n                                }\n                            }\n                        }\n                    });\n                }\n            })\n            .catch(() =>\n                notification.showNotification({\n                    text: "Error while fetching projects",\n                    type: "error",\n                })\n            );\n    });\n}\n\nfunction setAppSelectedMicroservice() {\n    if (appSettings.value.gitGroup.ID != 0) {\n        appDataTableRows.value[0].microservicesDisable = false;\n        appSettings.value.microservice.loading = true;\n        appSettingsUseCase\n            .getProjectsByGroupId(appSettings.value.gitGroup.ID)\n            .then((res) => {\n                let data = res.data.items; \n                const group = gitGroups.value.groups.find((group) => group.value.id == appSettings.value.gitGroup.ID);\n                if (group) {\n                    group.microservicesCache = data;\n                    group.requestedBefore = true;\n                    appDataTableRows.value[0].microservices = data;\n                    appSettings.value.microservice.loading = false;\n                    if (currentApp.value) {\n                        if (currentApp.value.deployParameters) {\n                            const microservice = data.find((service) => service.id == currentApp.value?.deployParameters?.gitServiceRepoId);\n                            if (microservice) {\n                                appSettings.value.microservice.name = microservice.name;\n                                appSettings.value.microservice.ID = microservice.id;\n                                appDataTableRows.value[0].microservicesDisable = false;\n                            } else {\n                                appSettings.value.microservice.ID = 0;\n                            }\n                        }\n                    }\n                }\n            })\n            .catch(() =>\n                notification.showNotification({\n                    text: "Error while fetching projects",\n                    type: "error",\n                })\n            );\n    }\n}\n\nfunction handleProductSelect() {\n    const product = gitProducts.value.products.find((product) => product.name === appSettings.value.product.name);\n    if (product) {\n        appSettings.value.product.ID = product.id;\n    } else {\n        appSettings.value.product.name = "";\n        appSettings.value.product.ID = 0;\n    }\n}\n\nasync function handleModulesGitGroupInput(selectedRow: IModuleDataTableRow) {\n    debouncer.resetTimer();\n    const selectedGitGroup = gitGroups.value.groups.find((gitGroup) => gitGroup.value.name === selectedRow.gitGroupName);\n    const currentRow = modulesDataTableRows.value.find((row) => row.moduleID == selectedRow.moduleID)!;\n    currentRow.microservicesDisable = true;\n    currentRow.microservices = [];\n    currentRow.microserviceName = "";\n    currentRow.microserviceID = 0;\n\n    if (selectedGitGroup) {\n        currentRow.gitGroupID = selectedGitGroup.value.id;\n        currentRow.gitGroupName = selectedGitGroup.value.name;\n\n        if (!selectedGitGroup.requestedBefore) {\n            debouncer.debounce(getModuleMicroservicesByGroupID, 500, selectedGitGroup, currentRow);\n        } else {\n            currentRow.microservices = selectedGitGroup.microservicesCache;\n            currentRow.microservicesDisable = !currentRow.microservices.length;\n        }\n    } else {\n        currentRow.gitGroupName = selectedRow.gitGroupName;\n        currentRow.gitGroupID = 0;\n    }\n}\n\nasync function handleAppGitGroupInput(selectedRow: IAppDataTableRow) {\n    debouncer.resetTimer();\n    const selectedGitGroup = gitGroups.value.groups.find((gitGroup) => gitGroup.value.name === appSettings.value.gitGroup.name);\n    const currentRow = appDataTableRows.value.find((row) => row.appID == selectedRow.appID)!;\n    currentRow.microservicesDisable = true;\n    currentRow.microservices = [];\n    appSettings.value.microservice.name = "";\n    appSettings.value.microservice.ID = 0;\n\n    if (selectedGitGroup) {\n        appSettings.value.gitGroup.ID = selectedGitGroup.value.id;\n        appSettings.value.gitGroup.name = selectedGitGroup.value.name;\n\n        if (!selectedGitGroup.requestedBefore) {\n            debouncer.debounce(getAppMicroservicesByGroupID, 500, selectedGitGroup, currentRow);\n        } else {\n            currentRow.microservices = selectedGitGroup.microservicesCache;\n            currentRow.microservicesDisable = !currentRow.microservices.length;\n        }\n    } else {\n        appSettings.value.gitGroup.ID = 0;\n    }\n}\n\nasync function getModuleMicroservicesByGroupID(selectedGitGroup: IGroup, currentRow: IModuleDataTableRow) {\n    currentRow.microserviceLoading = true;\n    currentRow.microservicesDisable = false;\n    currentRow.microservices = await appSettingsUseCase.getProjectsByGroupId(selectedGitGroup.value.id).then(res => res.data.items);\n    selectedGitGroup.microservicesCache = currentRow.microservices;\n    selectedGitGroup.requestedBefore = true;\n    currentRow.microservicesDisable = !currentRow.microservices.length;\n    currentRow.microserviceLoading = false;\n}\n\nasync function getAppMicroservicesByGroupID(selectedGitGroup: IGroup, currentRow: IAppDataTableRow) {\n    appSettings.value.microservice.loading = true;\n    currentRow.microservicesDisable = false;\n    currentRow.microservices = await appSettingsUseCase.getProjectsByGroupId(selectedGitGroup.value.id).then(res => res.data.items);\n    selectedGitGroup.microservicesCache = currentRow.microservices;\n    selectedGitGroup.requestedBefore = true;\n    currentRow.microservicesDisable = !currentRow.microservices.length;\n    appSettings.value.microservice.loading = false;\n}\n\nasync function handleModulesGitGroupChange(selectedRow: IModuleDataTableRow) {\n    const selectedGitGroup = gitGroups.value.groups.find((gitGroup) => gitGroup.value.name === selectedRow.gitGroupName);\n    const currentRow = modulesDataTableRows.value.find((row) => row.moduleID == selectedRow.moduleID)!;\n    currentRow.gitGroupID = selectedGitGroup?.value?.id || 0;\n    currentRow.gitGroupName = selectedGitGroup?.value?.name || "";\n    if (!currentRow.gitGroupID) {\n        currentRow.microservices = [];\n        currentRow.microservicesDisable = true;\n        currentRow.microserviceName = "";\n        currentRow.microserviceID = 0;\n    }\n}\n\nasync function handleAppGitGroupChange(selectedRow: IAppDataTableRow) {\n    const selectedGitGroup = gitGroups.value.groups.find((gitGroup) => gitGroup.value.name === appSettings.value.gitGroup.name);\n    const currentRow = appDataTableRows.value.find((row) => row.appID == selectedRow.appID)!;\n    appSettings.value.gitGroup.ID = selectedGitGroup?.value?.id || 0;\n    appSettings.value.gitGroup.name = selectedGitGroup?.value?.name || "";\n    if (!selectedGitGroup) {\n        currentRow.microservices = [];\n        currentRow.microservicesDisable = true;\n        appSettings.value.microservice.name = "";\n        appSettings.value.microservice.ID = 0;\n    }\n}\n\nfunction handleModulesMicroServiceChange(selectedRow: IModuleDataTableRow) {\n    const selectedMicroservice = selectedRow.microservices.find((microservice) => microservice.name === selectedRow.microserviceName);\n    const currentRow = modulesDataTableRows.value.find((row) => row.moduleID == selectedRow.moduleID)!;\n    currentRow.microserviceName = selectedMicroservice?.name || "";\n    currentRow.microserviceID = selectedMicroservice?.id || 0;\n}\n\nfunction handleAppMicroServiceChange(selectedRow: IAppDataTableRow) {\n    const selectedMicroservice = selectedRow.microservices.find((microservice) => microservice.name === appSettings.value.microservice.name);\n    appSettings.value.microservice.name = selectedMicroservice?.name || "";\n    appSettings.value.microservice.ID = selectedMicroservice?.id || 0;\n}\n\nasync function onSave() {\n    if (currentApp.value) {\n        let settings = {};\n        const modulesSettings: Array<IModuleSettingsItem> = modulesDataTableRows.value\n            .filter(\n                (row) =>\n                    row.microserviceID !=\n                    (viewModel.studio.items.find((item) => item.ID == row.moduleID) as IModule).deployParameters?.gitServiceRepoId\n            )\n            .map((row) => ({\n                moduleID: row.moduleID,\n                deployParameters: {\n                    gitGroupId: row.gitGroupID,\n                    gitServiceRepoId: row.microserviceID,\n                },\n            }));\n\n        const applicationSettings: IApplicationSettingsItem = {\n            applicationID: currentApp.value!.ID,\n            deployParameters: {\n                gitProductRepoId: appSettings.value.product.ID,\n                gitGroupId: appSettings.value.gitGroup.ID,\n                gitServiceRepoId: appSettings.value.microservice.ID,\n            },\n        };\n\n        settings = { modulesSettings };\n\n        if (\n            currentApp.value.deployParameters?.gitProductRepoId != appSettings.value.product.ID ||\n            currentApp.value.deployParameters?.gitServiceRepoId != appSettings.value.microservice.ID\n        ) {\n            settings = { ...settings, applicationSettings };\n        }\n\n        await executor.execute(\n            async () => {\n                await appSettingsUseCase.update(settings);\n            },\n            { loading: true }\n        );\n        emit("close");\n    }\n}\n\n<\/script>\n\n<template>\n    <div class="deploy-setting-container">\n        <div class="title">{{ localization.get("deploySettings_appSettings") }}</div>\n        <label for="product-input" class="product-title">{{ localization.get("product") }}</label>\n        <div class="product-input-container">\n            <input\n                class="product-input"\n                list="products"\n                id="product-input"\n                placeholder="Select Product"\n                v-model="appSettings.product.name"\n                @change="handleProductSelect"\n                :disabled="gitProducts.disabled"\n            />\n            <div class="icon-container" v-if="!gitProducts.loaded">\n                <Spinner/>\n            </div>\n        </div>\n        <datalist id="products">\n            <option value="" disabled selected>Select Product for Application</option>\n            <option v-for="product in gitProducts.products">\n                {{ product.name }}\n            </option>\n        </datalist>\n        <v-client-table ref="table" :data="appDataTableRows" :columns="appAppDatatableColumns" :options="appOptionsDataTable">\n            <template #appName="props">\n                <span>{{ props.row.appName }}</span>\n            </template>\n            <template #gitGroup="props">\n                <div class="input-container">\n                    <input\n                        class="module-input"\n                        list="app-git-groups"\n                        id="app-git-group-input"\n                        placeholder="Select Git Group"\n                        v-model="appSettings.gitGroup.name"\n                        @input="handleAppGitGroupInput(props.row)"\n                        @change="handleAppGitGroupChange(props.row)"\n                        :disabled="gitGroups.disabled"\n                    />\n                    <div class="icon-container" v-if="!gitGroups.loaded">\n                        <Spinner/>\n                    </div>\n                </div>\n                <datalist id="app-git-groups">\n                    <option v-for="gitGroup in gitGroups.groups" :value="gitGroup.value.name"></option>\n                </datalist>\n            </template>\n            <template #service="props">\n                <div class="input-container">\n                    <input\n                        class="module-input"\n                        :list="props.row.appID"\n                        id="app-microservice-input"\n                        placeholder="Select Microservice"\n                        v-model="appSettings.microservice.name"\n                        @change="handleAppMicroServiceChange(props.row)"\n                        :disabled="props.row.microservicesDisable"\n                    />\n                    <div class="icon-container" v-if="appSettings.microservice.loading">\n                        <Spinner/>\n                    </div>\n                </div>\n\n                <datalist :id="props.row.appID">\n                    <option v-for="microservice in props.row.microservices" :value="microservice.name"></option>\n                </datalist>\n            </template>\n        </v-client-table>\n\n        <div class="title">{{ localization.get("deploySettings_moduleSettings") }}</div>\n        <v-client-table ref="table" :data="modulesDataTableRows" :columns="modulesAppDatatableColumns" :options="modulesOptionsDataTable">\n            <template #moduleName="props">\n                <span>{{ props.row.moduleName }}</span>\n            </template>\n            <template #gitGroup="props">\n                <div class="input-container">\n                    <input\n                        class="module-input"\n                        list="git-groups"\n                        id="git-group-input"\n                        placeholder="Select Git Group"\n                        v-model="props.row.gitGroupName"\n                        @input="handleModulesGitGroupInput(props.row)"\n                        @change="handleModulesGitGroupChange(props.row)"\n                        :disabled="gitGroups.disabled"\n                    />\n                    <div class="icon-container" v-if="!gitGroups.loaded">\n                        <Spinner/>\n                    </div>\n                </div>\n                <datalist id="git-groups">\n                    <option v-for="gitGroup in gitGroups.groups" :value="gitGroup.value.name"></option>\n                </datalist>\n            </template>\n            <template #service="props">\n                <div class="input-container">\n                    <input\n                        class="module-input"\n                        :list="props.row.moduleID"\n                        id="microservice-input"\n                        placeholder="Select Microservice"\n                        v-model="props.row.microserviceName"\n                        @change="handleModulesMicroServiceChange(props.row)"\n                        :disabled="props.row.microservicesDisable"\n                    />\n                    <div class="icon-container" v-if="props.row.microserviceLoading">\n                        <Spinner/>\n                    </div>\n                </div>\n                <datalist :id="props.row.moduleID">\n                    <option v-for="microservice in props.row.microservices" :value="microservice.name"></option>\n                </datalist>\n            </template>\n        </v-client-table>\n        <hr />\n        <button class="save-button" @click="onSave">{{ localization.get("save") }}</button>\n        <button class="previous-button" data-v-33a93b5b="" @click="() => emit(\'close\')">\n            {{ localization.get("cancel") }}\n        </button>\n    </div>\n</template>\n\n<style scoped>\n.deploy-setting-container {\n    padding: 16px 20px 20px 20px;\n    height: 495px;\n    overflow-y: auto;\n}\n.previous-button {\n    width: 68px;\n    height: 32px;\n    border: none;\n    background: #f5f5f500 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    font-family: "Roboto";\n    font-weight: bold;\n    color: #607d8b;\n    text-align: center;\n    margin-right: 8px;\n    float: right;\n}\n.save-button {\n    width: 74px;\n    height: 32px;\n    border: none;\n    background: #151233 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    font-family: "Roboto";\n    color: #ffffff;\n    text-align: center;\n    float: right;\n}\n\n.VueTables__heading {\n    font-family: \'Roboto\';\n    font-size: 13px;\n    font-weight: bold;\n    letter-spacing: 0px;\n    color: #616161;\n}\n\n.title {\n    font-family: \'Roboto\';\n    font-size: 20px;\n    font-weight: bold;\n    color: #151233;\n}\n\n.product-title {\n    font-family: \'Roboto\';\n    font-weight: bold;\n    font-size: 14px;\n    color: #151233;\n    margin-left: 6px;\n    margin-top: 20px;\n}\n\n.product-input-container {\n    position: relative;\n    max-width: max-content;\n}\n\n.input-container {\n    position: relative;\n    max-width: max-content;\n    margin-left: 20px;\n}\n\n.icon-container {\n    position: absolute;\n    right: 24px;\n    top: 7px;\n}\n\ninput {\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #a1a1a1;\n    border-radius: 4px;\n    padding: 5px 0px 6px 12px;\n    font-family: "Roboto";\n    font-size: 14px;\n}\ninput:disabled {\n    background-color: rgba(59, 59, 59, 0.3);\n}\n\n.module-input {\n    width: 154px;\n    height: 30px;\n}\n\n.product-input {\n    width: 230px;\n    height: 30px;\n}\n</style>\n<style>\ntable[class="VueTables__table table table-striped table-bordered table-hover"],\ntr,\ntd {\n    border-left: hidden;\n    border-right: hidden;\n    --bs-table-striped-bg: white;\n    padding: 14px 0px 14px 0px!important;\n}\n\ntable[class="VueTables__table table table-striped table-bordered table-hover"] > thead,\nth {\n    border-style: hidden;\n    padding-left: 0px !important;\n    padding-bottom: 4px !important;\n}\n\ntable[class="VueTables__table table table-striped table-bordered table-hover"] > thead > tr > th > span {\n    font-family: \'Roboto\';\n    font-size: 13px;\n    font-weight: bold;\n    color: #616161;\n    padding-left: 20px;\n}\n\ntable[class="VueTables__table table table-striped table-bordered table-hover"] > tbody > tr > td > span {\n    font-family: \'Roboto\';\n    font-size: \'14px\';\n    color: #212121;\n    vertical-align: middle;\n    margin-left: 20px;\n}\n</style>\n'],sourceRoot:""}]);const s=a},2:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(1864),r=t.n(o),i=t(352),a=t.n(i)()(r());a.push([e.id,'\ntable[class="VueTables__table table table-striped table-bordered table-hover"],\ntr,\ntd {\n    border-left: hidden;\n    border-right: hidden;\n    --bs-table-striped-bg: white;\n    padding: 14px 0px 14px 0px!important;\n}\ntable[class="VueTables__table table table-striped table-bordered table-hover"] > thead,\nth {\n    border-style: hidden;\n    padding-left: 0px !important;\n    padding-bottom: 4px !important;\n}\ntable[class="VueTables__table table table-striped table-bordered table-hover"] > thead > tr > th > span {\n    font-family: \'Roboto\';\n    font-size: 13px;\n    font-weight: bold;\n    color: #616161;\n    padding-left: 20px;\n}\ntable[class="VueTables__table table table-striped table-bordered table-hover"] > tbody > tr > td > span {\n    font-family: \'Roboto\';\n    font-size: \'14px\';\n    color: #212121;\n    vertical-align: middle;\n    margin-left: 20px;\n}\n',"",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/deploySettings.vue"],names:[],mappings:";AAyrBA;;;IAGI,mBAAmB;IACnB,oBAAoB;IACpB,4BAA4B;IAC5B,oCAAoC;AACxC;AAEA;;IAEI,oBAAoB;IACpB,4BAA4B;IAC5B,8BAA8B;AAClC;AAEA;IACI,qBAAqB;IACrB,eAAe;IACf,iBAAiB;IACjB,cAAc;IACd,kBAAkB;AACtB;AAEA;IACI,qBAAqB;IACrB,iBAAiB;IACjB,cAAc;IACd,sBAAsB;IACtB,iBAAiB;AACrB",sourcesContent:['<script setup lang="ts">\nimport { onBeforeMount, ref } from "vue";\nimport { container } from "tsyringe";\nimport { IViewModel } from "../../../../domain/viewModel/IViewModel";\nimport { IModule, IModuleSettingsItem, IApplicationSettingsItem, IModuleDeployParameters } from "../../../../domain/model/models";\nimport { ILocalization } from "../../../../domain/infrastructure/ILocalization";\nimport { IGitProject } from "../../../../domain/infrastructure/IProviderApi";\nimport { IUseCaseExecutor } from "../../../../domain/useCase/IUseCaseExecutor";\nimport { IDebounce } from "../../../../domain/infrastructure/IDebounce";\nimport { IApplicationSettings } from "../../../../domain/useCase/IApplicationSettings";\nimport { INotification } from "../../../../domain/presentation/INotification";\nimport Spinner from "../spinner.vue"\n\nonBeforeMount(() => {\n    fillDatatableRow();\n    getGitGroupsFromProvider();\n    getProductsFromProvider();\n});\n\ninterface IProduct {\n    products: Array<IGitProject>;\n    disabled: boolean;\n    loaded: boolean;\n}\n\ninterface IGroup {\n    value: IGitProject;\n    microservicesCache: Array<IGitProject>;\n    requestedBefore: boolean;\n}\n\ninterface IGitGroup {\n    groups: Array<IGroup>;\n    disabled: boolean;\n    loaded: boolean;\n}\n\ninterface IModuleDataTableRow {\n    moduleID: IModule["ID"];\n    moduleName: IModule["name"];\n    gitGroupName: string;\n    gitGroupID: number;\n    microservices: Array<IGitProject>;\n    microservicesDisable: boolean;\n    microserviceLoading: boolean;\n    microserviceName: string;\n    microserviceID: number;\n}\n\ninterface IAppDataTableRow {\n    appID: IModule["ID"];\n    appName: IModule["name"];\n    microservices: Array<IGitProject>;\n    microservicesDisable: boolean;\n}\n\nconst emit = defineEmits(["close"]);\n\nconst localization = container.resolve<ILocalization>(ILocalization);\nconst viewModel = container.resolve<IViewModel>(IViewModel);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst notification = container.resolve<INotification>(INotification);\nconst appSettingsUseCase = container.resolve<IApplicationSettings>(IApplicationSettings);\nconst debouncer = container.resolve<IDebounce>(IDebounce);\n\nconst gitProducts = ref({ products: [], disabled: false, loaded: false } as IProduct);\nconst gitGroups = ref({ groups: [], disabled: false, loaded: false } as IGitGroup);\nconst currentApp = ref(viewModel.apps.find((app) => app.ID == viewModel.studio.appId));\nconst appSettings = ref({ product: { ID: 0, name: "" }, gitGroup: { ID: 0, name: "" }, microservice: { ID: 0, name: "", loading: false } });\nconst modulesDataTableRows = ref(Array<IModuleDataTableRow>());\nconst appDataTableRows = ref(Array<IAppDataTableRow>());\n\nconst modulesAppDatatableColumns = ref(["moduleName", "gitGroup", "service"]);\nconst appAppDatatableColumns = ref(["appName", "gitGroup", "service"]);\nconst modulesOptionsDataTable = ref({\n    resizableColumns: false,\n    filterable: false,\n    perPage: 3,\n    perPageValues: [],\n    headings: {\n        moduleName: localization.get("moduleName"),\n        gitGroup: localization.get("gitGroup"),\n        microservice: localization.get("service"),\n    },\n    sortable: [],\n    texts: {\n        count: "",\n    },\n});\n\nconst appOptionsDataTable = ref({\n    resizableColumns: false,\n    filterable: false,\n    perPage: 1,\n    perPageValues: [],\n    headings: {\n        appName: localization.get("appName"),\n        gitGroup: localization.get("gitGroup"),\n        microservice: localization.get("service"),\n    },\n    sortable: [],\n    texts: {\n        count: "",\n    },\n});\n\nfunction fillDatatableRow() {\n    modulesDataTableRows.value = viewModel.studio.items\n        .filter((item) => item.objectType === "module")\n        .map<IModuleDataTableRow>((item) => {\n            const module: IModuleDataTableRow = {\n                moduleID: item.ID,\n                moduleName: item.name,\n                gitGroupName: "",\n                gitGroupID: (item as IModule).deployParameters?.gitGroupId || 0,\n                microservices: [],\n                microservicesDisable: true,\n                microserviceLoading: false,\n                microserviceName: "",\n                microserviceID: (item as IModule).deployParameters?.gitServiceRepoId || 0,\n            };\n            return module;\n        });\n    appDataTableRows.value.push({\n        appID: currentApp.value!.ID,\n        appName: currentApp.value!.name,\n        microservices: [],\n        microservicesDisable: true,\n    });\n}\n\nfunction getProductsFromProvider() {\n    appSettingsUseCase\n        .getProjectsOfProduct()\n        .then(res => {\n            gitProducts.value.products = res.data.items;\n            gitProducts.value.loaded = true;\n            gitProducts.value.disabled = false;\n            setSelectedProduct();\n        })\n        .catch(() => {\n            gitProducts.value.loaded = true;\n            gitProducts.value.disabled = true;\n            notification.showNotification({ text: "Error while fetching products", type: "error" });\n        });\n}\n\nfunction setSelectedProduct() {\n    if (currentApp.value) {\n        if (currentApp.value.deployParameters) {\n            const currentProduct = gitProducts.value.products.find((product) => currentApp.value!.deployParameters!.gitProductRepoId == product.id);\n            if (currentProduct) {\n                appSettings.value.product = {\n                    name: currentProduct.name,\n                    ID: currentProduct.id,\n                };\n            }\n        }\n    }\n}\n\nasync function getGitGroupsFromProvider() {\n    appSettingsUseCase\n        .getGroupNamesWithId()\n        .then((res) => {\n            res.data.items.forEach((fetchedGroup) =>\n                gitGroups.value.groups.push({\n                    value: fetchedGroup,\n                    microservicesCache: [],\n                    requestedBefore: false,\n                })\n            );\n            gitGroups.value.loaded = true;\n            gitGroups.value.disabled = false;\n            setModulesSelectedGitGroups();\n            setAppSelectedGitGroup();\n        })\n        .catch(() =>{\n            gitGroups.value.loaded = true;\n            gitGroups.value.disabled = true;\n\n            notification.showNotification({\n                text: "Error while fetching git groups",\n                type: "error",\n            })\n        }\n        );\n}\n\nfunction setModulesSelectedGitGroups() {\n    modulesDataTableRows.value.forEach((row) => {\n        if (row.gitGroupID !== 0) {\n            const group = gitGroups.value.groups.find((group) => group.value.id == row.gitGroupID);\n            if (group) {\n                row.gitGroupName = group.value.name;\n            } else {\n                row.gitGroupID = 0;\n            }\n        }\n    });\n    setModulesSelectedMicroservices();\n}\n\nfunction setAppSelectedGitGroup() {\n    if (currentApp.value) {\n        if (currentApp.value.deployParameters) {\n            const currentGitGroup = gitGroups.value.groups.find((group) => currentApp.value!.deployParameters!.gitGroupId == group.value.id);\n            if (currentGitGroup) {\n                appSettings.value.gitGroup = {\n                    name: currentGitGroup.value.name,\n                    ID: currentGitGroup.value.id,\n                };\n            }\n        }\n    }\n\n    if (appSettings.value.gitGroup.ID !== 0) {\n        const group = gitGroups.value.groups.find((group) => group.value.id == appSettings.value.gitGroup.ID);\n        if (group) {\n            appSettings.value.gitGroup.name = group.value.name;\n        } else {\n            appSettings.value.gitGroup.ID = 0;\n        }\n    }\n    setAppSelectedMicroservice();\n}\n\nfunction setModulesSelectedMicroservices() {\n    const groupIdList: Array<number> = modulesDataTableRows.value\n        .map((row) => row.gitGroupID)\n        .filter((id, index, self) => id !== 0 && self.indexOf(id) === index);\n\n    groupIdList.forEach((id) => {\n        modulesDataTableRows.value.forEach(row => {\n            if(row.gitGroupID == id) {\n                row.microserviceLoading = true;\n                row.microservicesDisable = false;\n            }\n        })\n        appSettingsUseCase\n            .getProjectsByGroupId(id)\n            .then((res) => {\n                let data = res.data.items;\n                const group = gitGroups.value.groups.find((group) => group.value.id == id);\n                if (group) {\n                    group.microservicesCache = data;\n                    group.requestedBefore = true;\n                    modulesDataTableRows.value.forEach((row) => {\n                        if (row.gitGroupID === id) {\n                            row.microservices = data;\n                            row.microserviceLoading = false;\n                            if(row.microservices.length == 0) {\n                                row.microservicesDisable = true;\n                            }\n                            if (row.microserviceID !== 0) {\n                                const microservice = data.find((service) => service.id == row.microserviceID);\n                                if (microservice) {\n                                    row.microserviceName = microservice.name;\n                                    row.microservicesDisable = false;\n                                } else {\n                                    row.microserviceID = 0;\n                                    row.microservicesDisable = true;\n                                }\n                            }\n                        }\n                    });\n                }\n            })\n            .catch(() =>\n                notification.showNotification({\n                    text: "Error while fetching projects",\n                    type: "error",\n                })\n            );\n    });\n}\n\nfunction setAppSelectedMicroservice() {\n    if (appSettings.value.gitGroup.ID != 0) {\n        appDataTableRows.value[0].microservicesDisable = false;\n        appSettings.value.microservice.loading = true;\n        appSettingsUseCase\n            .getProjectsByGroupId(appSettings.value.gitGroup.ID)\n            .then((res) => {\n                let data = res.data.items; \n                const group = gitGroups.value.groups.find((group) => group.value.id == appSettings.value.gitGroup.ID);\n                if (group) {\n                    group.microservicesCache = data;\n                    group.requestedBefore = true;\n                    appDataTableRows.value[0].microservices = data;\n                    appSettings.value.microservice.loading = false;\n                    if (currentApp.value) {\n                        if (currentApp.value.deployParameters) {\n                            const microservice = data.find((service) => service.id == currentApp.value?.deployParameters?.gitServiceRepoId);\n                            if (microservice) {\n                                appSettings.value.microservice.name = microservice.name;\n                                appSettings.value.microservice.ID = microservice.id;\n                                appDataTableRows.value[0].microservicesDisable = false;\n                            } else {\n                                appSettings.value.microservice.ID = 0;\n                            }\n                        }\n                    }\n                }\n            })\n            .catch(() =>\n                notification.showNotification({\n                    text: "Error while fetching projects",\n                    type: "error",\n                })\n            );\n    }\n}\n\nfunction handleProductSelect() {\n    const product = gitProducts.value.products.find((product) => product.name === appSettings.value.product.name);\n    if (product) {\n        appSettings.value.product.ID = product.id;\n    } else {\n        appSettings.value.product.name = "";\n        appSettings.value.product.ID = 0;\n    }\n}\n\nasync function handleModulesGitGroupInput(selectedRow: IModuleDataTableRow) {\n    debouncer.resetTimer();\n    const selectedGitGroup = gitGroups.value.groups.find((gitGroup) => gitGroup.value.name === selectedRow.gitGroupName);\n    const currentRow = modulesDataTableRows.value.find((row) => row.moduleID == selectedRow.moduleID)!;\n    currentRow.microservicesDisable = true;\n    currentRow.microservices = [];\n    currentRow.microserviceName = "";\n    currentRow.microserviceID = 0;\n\n    if (selectedGitGroup) {\n        currentRow.gitGroupID = selectedGitGroup.value.id;\n        currentRow.gitGroupName = selectedGitGroup.value.name;\n\n        if (!selectedGitGroup.requestedBefore) {\n            debouncer.debounce(getModuleMicroservicesByGroupID, 500, selectedGitGroup, currentRow);\n        } else {\n            currentRow.microservices = selectedGitGroup.microservicesCache;\n            currentRow.microservicesDisable = !currentRow.microservices.length;\n        }\n    } else {\n        currentRow.gitGroupName = selectedRow.gitGroupName;\n        currentRow.gitGroupID = 0;\n    }\n}\n\nasync function handleAppGitGroupInput(selectedRow: IAppDataTableRow) {\n    debouncer.resetTimer();\n    const selectedGitGroup = gitGroups.value.groups.find((gitGroup) => gitGroup.value.name === appSettings.value.gitGroup.name);\n    const currentRow = appDataTableRows.value.find((row) => row.appID == selectedRow.appID)!;\n    currentRow.microservicesDisable = true;\n    currentRow.microservices = [];\n    appSettings.value.microservice.name = "";\n    appSettings.value.microservice.ID = 0;\n\n    if (selectedGitGroup) {\n        appSettings.value.gitGroup.ID = selectedGitGroup.value.id;\n        appSettings.value.gitGroup.name = selectedGitGroup.value.name;\n\n        if (!selectedGitGroup.requestedBefore) {\n            debouncer.debounce(getAppMicroservicesByGroupID, 500, selectedGitGroup, currentRow);\n        } else {\n            currentRow.microservices = selectedGitGroup.microservicesCache;\n            currentRow.microservicesDisable = !currentRow.microservices.length;\n        }\n    } else {\n        appSettings.value.gitGroup.ID = 0;\n    }\n}\n\nasync function getModuleMicroservicesByGroupID(selectedGitGroup: IGroup, currentRow: IModuleDataTableRow) {\n    currentRow.microserviceLoading = true;\n    currentRow.microservicesDisable = false;\n    currentRow.microservices = await appSettingsUseCase.getProjectsByGroupId(selectedGitGroup.value.id).then(res => res.data.items);\n    selectedGitGroup.microservicesCache = currentRow.microservices;\n    selectedGitGroup.requestedBefore = true;\n    currentRow.microservicesDisable = !currentRow.microservices.length;\n    currentRow.microserviceLoading = false;\n}\n\nasync function getAppMicroservicesByGroupID(selectedGitGroup: IGroup, currentRow: IAppDataTableRow) {\n    appSettings.value.microservice.loading = true;\n    currentRow.microservicesDisable = false;\n    currentRow.microservices = await appSettingsUseCase.getProjectsByGroupId(selectedGitGroup.value.id).then(res => res.data.items);\n    selectedGitGroup.microservicesCache = currentRow.microservices;\n    selectedGitGroup.requestedBefore = true;\n    currentRow.microservicesDisable = !currentRow.microservices.length;\n    appSettings.value.microservice.loading = false;\n}\n\nasync function handleModulesGitGroupChange(selectedRow: IModuleDataTableRow) {\n    const selectedGitGroup = gitGroups.value.groups.find((gitGroup) => gitGroup.value.name === selectedRow.gitGroupName);\n    const currentRow = modulesDataTableRows.value.find((row) => row.moduleID == selectedRow.moduleID)!;\n    currentRow.gitGroupID = selectedGitGroup?.value?.id || 0;\n    currentRow.gitGroupName = selectedGitGroup?.value?.name || "";\n    if (!currentRow.gitGroupID) {\n        currentRow.microservices = [];\n        currentRow.microservicesDisable = true;\n        currentRow.microserviceName = "";\n        currentRow.microserviceID = 0;\n    }\n}\n\nasync function handleAppGitGroupChange(selectedRow: IAppDataTableRow) {\n    const selectedGitGroup = gitGroups.value.groups.find((gitGroup) => gitGroup.value.name === appSettings.value.gitGroup.name);\n    const currentRow = appDataTableRows.value.find((row) => row.appID == selectedRow.appID)!;\n    appSettings.value.gitGroup.ID = selectedGitGroup?.value?.id || 0;\n    appSettings.value.gitGroup.name = selectedGitGroup?.value?.name || "";\n    if (!selectedGitGroup) {\n        currentRow.microservices = [];\n        currentRow.microservicesDisable = true;\n        appSettings.value.microservice.name = "";\n        appSettings.value.microservice.ID = 0;\n    }\n}\n\nfunction handleModulesMicroServiceChange(selectedRow: IModuleDataTableRow) {\n    const selectedMicroservice = selectedRow.microservices.find((microservice) => microservice.name === selectedRow.microserviceName);\n    const currentRow = modulesDataTableRows.value.find((row) => row.moduleID == selectedRow.moduleID)!;\n    currentRow.microserviceName = selectedMicroservice?.name || "";\n    currentRow.microserviceID = selectedMicroservice?.id || 0;\n}\n\nfunction handleAppMicroServiceChange(selectedRow: IAppDataTableRow) {\n    const selectedMicroservice = selectedRow.microservices.find((microservice) => microservice.name === appSettings.value.microservice.name);\n    appSettings.value.microservice.name = selectedMicroservice?.name || "";\n    appSettings.value.microservice.ID = selectedMicroservice?.id || 0;\n}\n\nasync function onSave() {\n    if (currentApp.value) {\n        let settings = {};\n        const modulesSettings: Array<IModuleSettingsItem> = modulesDataTableRows.value\n            .filter(\n                (row) =>\n                    row.microserviceID !=\n                    (viewModel.studio.items.find((item) => item.ID == row.moduleID) as IModule).deployParameters?.gitServiceRepoId\n            )\n            .map((row) => ({\n                moduleID: row.moduleID,\n                deployParameters: {\n                    gitGroupId: row.gitGroupID,\n                    gitServiceRepoId: row.microserviceID,\n                },\n            }));\n\n        const applicationSettings: IApplicationSettingsItem = {\n            applicationID: currentApp.value!.ID,\n            deployParameters: {\n                gitProductRepoId: appSettings.value.product.ID,\n                gitGroupId: appSettings.value.gitGroup.ID,\n                gitServiceRepoId: appSettings.value.microservice.ID,\n            },\n        };\n\n        settings = { modulesSettings };\n\n        if (\n            currentApp.value.deployParameters?.gitProductRepoId != appSettings.value.product.ID ||\n            currentApp.value.deployParameters?.gitServiceRepoId != appSettings.value.microservice.ID\n        ) {\n            settings = { ...settings, applicationSettings };\n        }\n\n        await executor.execute(\n            async () => {\n                await appSettingsUseCase.update(settings);\n            },\n            { loading: true }\n        );\n        emit("close");\n    }\n}\n\n<\/script>\n\n<template>\n    <div class="deploy-setting-container">\n        <div class="title">{{ localization.get("deploySettings_appSettings") }}</div>\n        <label for="product-input" class="product-title">{{ localization.get("product") }}</label>\n        <div class="product-input-container">\n            <input\n                class="product-input"\n                list="products"\n                id="product-input"\n                placeholder="Select Product"\n                v-model="appSettings.product.name"\n                @change="handleProductSelect"\n                :disabled="gitProducts.disabled"\n            />\n            <div class="icon-container" v-if="!gitProducts.loaded">\n                <Spinner/>\n            </div>\n        </div>\n        <datalist id="products">\n            <option value="" disabled selected>Select Product for Application</option>\n            <option v-for="product in gitProducts.products">\n                {{ product.name }}\n            </option>\n        </datalist>\n        <v-client-table ref="table" :data="appDataTableRows" :columns="appAppDatatableColumns" :options="appOptionsDataTable">\n            <template #appName="props">\n                <span>{{ props.row.appName }}</span>\n            </template>\n            <template #gitGroup="props">\n                <div class="input-container">\n                    <input\n                        class="module-input"\n                        list="app-git-groups"\n                        id="app-git-group-input"\n                        placeholder="Select Git Group"\n                        v-model="appSettings.gitGroup.name"\n                        @input="handleAppGitGroupInput(props.row)"\n                        @change="handleAppGitGroupChange(props.row)"\n                        :disabled="gitGroups.disabled"\n                    />\n                    <div class="icon-container" v-if="!gitGroups.loaded">\n                        <Spinner/>\n                    </div>\n                </div>\n                <datalist id="app-git-groups">\n                    <option v-for="gitGroup in gitGroups.groups" :value="gitGroup.value.name"></option>\n                </datalist>\n            </template>\n            <template #service="props">\n                <div class="input-container">\n                    <input\n                        class="module-input"\n                        :list="props.row.appID"\n                        id="app-microservice-input"\n                        placeholder="Select Microservice"\n                        v-model="appSettings.microservice.name"\n                        @change="handleAppMicroServiceChange(props.row)"\n                        :disabled="props.row.microservicesDisable"\n                    />\n                    <div class="icon-container" v-if="appSettings.microservice.loading">\n                        <Spinner/>\n                    </div>\n                </div>\n\n                <datalist :id="props.row.appID">\n                    <option v-for="microservice in props.row.microservices" :value="microservice.name"></option>\n                </datalist>\n            </template>\n        </v-client-table>\n\n        <div class="title">{{ localization.get("deploySettings_moduleSettings") }}</div>\n        <v-client-table ref="table" :data="modulesDataTableRows" :columns="modulesAppDatatableColumns" :options="modulesOptionsDataTable">\n            <template #moduleName="props">\n                <span>{{ props.row.moduleName }}</span>\n            </template>\n            <template #gitGroup="props">\n                <div class="input-container">\n                    <input\n                        class="module-input"\n                        list="git-groups"\n                        id="git-group-input"\n                        placeholder="Select Git Group"\n                        v-model="props.row.gitGroupName"\n                        @input="handleModulesGitGroupInput(props.row)"\n                        @change="handleModulesGitGroupChange(props.row)"\n                        :disabled="gitGroups.disabled"\n                    />\n                    <div class="icon-container" v-if="!gitGroups.loaded">\n                        <Spinner/>\n                    </div>\n                </div>\n                <datalist id="git-groups">\n                    <option v-for="gitGroup in gitGroups.groups" :value="gitGroup.value.name"></option>\n                </datalist>\n            </template>\n            <template #service="props">\n                <div class="input-container">\n                    <input\n                        class="module-input"\n                        :list="props.row.moduleID"\n                        id="microservice-input"\n                        placeholder="Select Microservice"\n                        v-model="props.row.microserviceName"\n                        @change="handleModulesMicroServiceChange(props.row)"\n                        :disabled="props.row.microservicesDisable"\n                    />\n                    <div class="icon-container" v-if="props.row.microserviceLoading">\n                        <Spinner/>\n                    </div>\n                </div>\n                <datalist :id="props.row.moduleID">\n                    <option v-for="microservice in props.row.microservices" :value="microservice.name"></option>\n                </datalist>\n            </template>\n        </v-client-table>\n        <hr />\n        <button class="save-button" @click="onSave">{{ localization.get("save") }}</button>\n        <button class="previous-button" data-v-33a93b5b="" @click="() => emit(\'close\')">\n            {{ localization.get("cancel") }}\n        </button>\n    </div>\n</template>\n\n<style scoped>\n.deploy-setting-container {\n    padding: 16px 20px 20px 20px;\n    height: 495px;\n    overflow-y: auto;\n}\n.previous-button {\n    width: 68px;\n    height: 32px;\n    border: none;\n    background: #f5f5f500 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    font-family: "Roboto";\n    font-weight: bold;\n    color: #607d8b;\n    text-align: center;\n    margin-right: 8px;\n    float: right;\n}\n.save-button {\n    width: 74px;\n    height: 32px;\n    border: none;\n    background: #151233 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    font-family: "Roboto";\n    color: #ffffff;\n    text-align: center;\n    float: right;\n}\n\n.VueTables__heading {\n    font-family: \'Roboto\';\n    font-size: 13px;\n    font-weight: bold;\n    letter-spacing: 0px;\n    color: #616161;\n}\n\n.title {\n    font-family: \'Roboto\';\n    font-size: 20px;\n    font-weight: bold;\n    color: #151233;\n}\n\n.product-title {\n    font-family: \'Roboto\';\n    font-weight: bold;\n    font-size: 14px;\n    color: #151233;\n    margin-left: 6px;\n    margin-top: 20px;\n}\n\n.product-input-container {\n    position: relative;\n    max-width: max-content;\n}\n\n.input-container {\n    position: relative;\n    max-width: max-content;\n    margin-left: 20px;\n}\n\n.icon-container {\n    position: absolute;\n    right: 24px;\n    top: 7px;\n}\n\ninput {\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #a1a1a1;\n    border-radius: 4px;\n    padding: 5px 0px 6px 12px;\n    font-family: "Roboto";\n    font-size: 14px;\n}\ninput:disabled {\n    background-color: rgba(59, 59, 59, 0.3);\n}\n\n.module-input {\n    width: 154px;\n    height: 30px;\n}\n\n.product-input {\n    width: 230px;\n    height: 30px;\n}\n</style>\n<style>\ntable[class="VueTables__table table table-striped table-bordered table-hover"],\ntr,\ntd {\n    border-left: hidden;\n    border-right: hidden;\n    --bs-table-striped-bg: white;\n    padding: 14px 0px 14px 0px!important;\n}\n\ntable[class="VueTables__table table table-striped table-bordered table-hover"] > thead,\nth {\n    border-style: hidden;\n    padding-left: 0px !important;\n    padding-bottom: 4px !important;\n}\n\ntable[class="VueTables__table table table-striped table-bordered table-hover"] > thead > tr > th > span {\n    font-family: \'Roboto\';\n    font-size: 13px;\n    font-weight: bold;\n    color: #616161;\n    padding-left: 20px;\n}\n\ntable[class="VueTables__table table table-striped table-bordered table-hover"] > tbody > tr > td > span {\n    font-family: \'Roboto\';\n    font-size: \'14px\';\n    color: #212121;\n    vertical-align: middle;\n    margin-left: 20px;\n}\n</style>\n'],sourceRoot:""}]);const s=a},9567:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(1864),r=t.n(o),i=t(352),a=t.n(i)()(r());a.push([e.id,'\n@keyframes top-right-and-bottom-left-6fc7b8b6 {\n0%,\n    5% {\n        transform: rotate(-45deg);\n        height: 16px;\n        margin-top: 0px;\n}\n15% {\n        transform: rotate(-90deg);\n        height: 3px;\n        margin-top: 6px;\n}\n25% {\n        transform: rotate(-90deg);\n        height: 0px;\n        margin-top: 6px;\n}\n60%,\n    65% {\n        transform: rotate(-270deg);\n        height: 0px;\n        margin-top: 6px;\n}\n67% {\n        transform: rotate(-250deg);\n        height: 0px;\n        margin-top: 6px;\n}\n80%,\n    100% {\n        height: 16px;\n        margin-top: 0px;\n        transform: rotate(-135deg);\n}\n}\n@keyframes top-left-and-bottom-right-6fc7b8b6 {\n0% {\n        transform: rotate(-45deg);\n}\n15% {\n        transform: rotate(-180deg);\n        width: 0px;\n        margin-left: 6px;\n}\n25% {\n        transform: rotate(-180deg);\n        width: 0px;\n        margin-left: 6px;\n}\n60%,\n    65% {\n        transform: rotate(-360deg);\n        width: 0px;\n        margin-left: 6px;\n}\n67% {\n        transform: rotate(-340deg);\n        width: 0px;\n        margin-left: 6px;\n}\n83% {\n        transform: rotate(-175deg);\n        width: 7px;\n        margin-left: 4px;\n}\n90%, 100% {\n        width: 16px;\n        margin-left: 0px;\n        transform: rotate(-135deg);\n}\n}\n.top-right[data-v-6fc7b8b6]::after {\n    content: "";\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 16px;\n    border-color: transparent;\n    border-width: 2px;\n    border-style: solid;\n    border-right-color: #14adfc;\n    transform: rotate(-45deg);\n}\n.top-right[data-v-6fc7b8b6]::after {\n    animation: top-right-and-bottom-left-6fc7b8b6 3s infinite 0.3s;\n}\n.bottom-right[data-v-6fc7b8b6]::after {\n    content: "";\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 16px;\n    border-color: transparent;\n    border-width: 2px;\n    border-style: solid;\n    border-bottom-color: #14adfc;\n    transform: rotate(-45deg);\n    margin-top:0px;\n}\n.bottom-right[data-v-6fc7b8b6]::after {\n    animation: top-left-and-bottom-right-6fc7b8b6 3s infinite 0.3s;\n}\n.top-left[data-v-6fc7b8b6]::after {\n    content: "";\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 16px;\n    border-color: transparent;\n    border-width: 2px;\n    border-style: solid;\n    border-top-color: #14adfc;\n    transform: rotate(-45deg);\n}\n.top-left[data-v-6fc7b8b6]::after {\n    animation: top-left-and-bottom-right-6fc7b8b6 3s infinite 0.3s;\n}\n.bottom-left[data-v-6fc7b8b6]::after {\n    content: "";\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 16px;\n    border-color: transparent;\n    border-width: 2px;\n    border-style: solid;\n    border-left-color: #14adfc;\n    transform: rotate(-45deg);\n        margin-top:0px;\n}\n.bottom-left[data-v-6fc7b8b6]::after {\n    animation: top-right-and-bottom-left-6fc7b8b6 3s infinite 0.3s;\n}\n',"",{version:3,sources:["webpack://./src/presentation/vue3/components/spinner.vue"],names:[],mappings:";AAYA;AACI;;QAEI,yBAAyB;QACzB,YAAY;QACZ,eAAe;AACnB;AACA;QACI,yBAAyB;QACzB,WAAW;QACX,eAAe;AACnB;AACA;QACI,yBAAyB;QACzB,WAAW;QACX,eAAe;AACnB;AACA;;QAEI,0BAA0B;QAC1B,WAAW;QACX,eAAe;AACnB;AACA;QACI,0BAA0B;QAC1B,WAAW;QACX,eAAe;AACnB;AACA;;QAEI,YAAY;QACZ,eAAe;QACf,0BAA0B;AAC9B;AACJ;AAEA;AACI;QACI,yBAAyB;AAC7B;AACA;QACI,0BAA0B;QAC1B,UAAU;QACV,gBAAgB;AACpB;AACA;QACI,0BAA0B;QAC1B,UAAU;QACV,gBAAgB;AACpB;AACA;;QAEI,0BAA0B;QAC1B,UAAU;QACV,gBAAgB;AACpB;AACA;QACI,0BAA0B;QAC1B,UAAU;QACV,gBAAgB;AACpB;AACA;QACI,0BAA0B;QAC1B,UAAU;QACV,gBAAgB;AACpB;AACA;QACI,WAAW;QACX,gBAAgB;QAChB,0BAA0B;AAC9B;AACJ;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,mBAAmB;IACnB,yBAAyB;IACzB,iBAAiB;IACjB,mBAAmB;IACnB,2BAA2B;IAC3B,yBAAyB;AAC7B;AAEA;IACI,8DAAqD;AACzD;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,mBAAmB;IACnB,yBAAyB;IACzB,iBAAiB;IACjB,mBAAmB;IACnB,4BAA4B;IAC5B,yBAAyB;IACzB,cAAc;AAClB;AAEA;IACI,8DAAqD;AACzD;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,mBAAmB;IACnB,yBAAyB;IACzB,iBAAiB;IACjB,mBAAmB;IACnB,yBAAyB;IACzB,yBAAyB;AAC7B;AAEA;IACI,8DAAqD;AACzD;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,mBAAmB;IACnB,yBAAyB;IACzB,iBAAiB;IACjB,mBAAmB;IACnB,0BAA0B;IAC1B,yBAAyB;QACrB,cAAc;AACtB;AAEA;IACI,8DAAqD;AACzD",sourcesContent:['<script setup lang="ts"><\/script>\n\n<template>\n<div style="position:relative">\n        <div class="top-right"></div>\n        <div class="bottom-right"></div>\n        <div class="top-left"></div>\n        <div class="bottom-left"></div>\n        </div>\n</template>\n\n<style scoped>\n@keyframes top-right-and-bottom-left {\n    0%,\n    5% {\n        transform: rotate(-45deg);\n        height: 16px;\n        margin-top: 0px;\n    }\n    15% {\n        transform: rotate(-90deg);\n        height: 3px;\n        margin-top: 6px;\n    }\n    25% {\n        transform: rotate(-90deg);\n        height: 0px;\n        margin-top: 6px;\n    }\n    60%,\n    65% {\n        transform: rotate(-270deg);\n        height: 0px;\n        margin-top: 6px;\n    }\n    67% {\n        transform: rotate(-250deg);\n        height: 0px;\n        margin-top: 6px;\n    }\n    80%,\n    100% {\n        height: 16px;\n        margin-top: 0px;\n        transform: rotate(-135deg);\n    }\n}\n\n@keyframes top-left-and-bottom-right {\n    0% {\n        transform: rotate(-45deg);\n    }\n    15% {\n        transform: rotate(-180deg);\n        width: 0px;\n        margin-left: 6px;\n    }\n    25% {\n        transform: rotate(-180deg);\n        width: 0px;\n        margin-left: 6px;\n    }\n    60%,\n    65% {\n        transform: rotate(-360deg);\n        width: 0px;\n        margin-left: 6px;\n    }\n    67% {\n        transform: rotate(-340deg);\n        width: 0px;\n        margin-left: 6px;\n    }\n    83% {\n        transform: rotate(-175deg);\n        width: 7px;\n        margin-left: 4px;\n    }\n    90%, 100% {\n        width: 16px;\n        margin-left: 0px;\n        transform: rotate(-135deg);\n    }\n}\n\n.top-right::after {\n    content: "";\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 16px;\n    border-color: transparent;\n    border-width: 2px;\n    border-style: solid;\n    border-right-color: #14adfc;\n    transform: rotate(-45deg);\n}\n\n.top-right::after {\n    animation: top-right-and-bottom-left 3s infinite 0.3s;\n}\n\n.bottom-right::after {\n    content: "";\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 16px;\n    border-color: transparent;\n    border-width: 2px;\n    border-style: solid;\n    border-bottom-color: #14adfc;\n    transform: rotate(-45deg);\n    margin-top:0px;\n}\n\n.bottom-right::after {\n    animation: top-left-and-bottom-right 3s infinite 0.3s;\n}\n\n.top-left::after {\n    content: "";\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 16px;\n    border-color: transparent;\n    border-width: 2px;\n    border-style: solid;\n    border-top-color: #14adfc;\n    transform: rotate(-45deg);\n}\n\n.top-left::after {\n    animation: top-left-and-bottom-right 3s infinite 0.3s;\n}\n\n.bottom-left::after {\n    content: "";\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    border-radius: 16px;\n    border-color: transparent;\n    border-width: 2px;\n    border-style: solid;\n    border-left-color: #14adfc;\n    transform: rotate(-45deg);\n        margin-top:0px;\n}\n\n.bottom-left::after {\n    animation: top-right-and-bottom-left 3s infinite 0.3s;\n}\n</style>\n'],sourceRoot:""}]);const s=a},8458:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ae});var o=t(2068),r=t(9045),i=t(1407),a=t(1705),s=t(4217),l=t(7422),c=t(6595),p=t(664),u=t(8038),d=t(7620),m=t(9166);const v=e=>((0,o.dD)("data-v-6fc7b8b6"),e=e(),(0,o.Cn)(),e),g={style:{position:"relative"}},A=[v((()=>(0,o._)("div",{class:"top-right"},null,-1))),v((()=>(0,o._)("div",{class:"bottom-right"},null,-1))),v((()=>(0,o._)("div",{class:"top-left"},null,-1))),v((()=>(0,o._)("div",{class:"bottom-left"},null,-1)))];var f=t(5701),b=t.n(f),I=t(8236),w=t.n(I),G=t(6080),h=t.n(G),D=t(6850),B=t.n(D),C=t(7182),x=t.n(C),R=t(9213),y=t.n(R),S=t(9567),P={};P.styleTagTransform=y(),P.setAttributes=B(),P.insert=h().bind(null,"head"),P.domAPI=w(),P.insertStyleElement=x(),b()(S.Z,P),S.Z&&S.Z.locals&&S.Z.locals;var M=t(1419);const N={},T=(0,M.Z)(N,[["render",function(e,n){return(0,o.wg)(),(0,o.iD)("div",g,A)}],["__scopeId","data-v-6fc7b8b6"]]),_=e=>((0,o.dD)("data-v-79436c2f"),e=e(),(0,o.Cn)(),e),z={class:"deploy-setting-container"},E={class:"title"},k={for:"product-input",class:"product-title"},q={class:"product-input-container"},j=["disabled"],U={key:0,class:"icon-container"},W={id:"products"},V=_((()=>(0,o._)("option",{value:"",disabled:"",selected:""},"Select Product for Application",-1))),Q={class:"input-container"},Y=["onInput","onChange","disabled"],L={key:0,class:"icon-container"},Z={id:"app-git-groups"},X=["value"],H={class:"input-container"},O=["list","onChange","disabled"],F={key:0,class:"icon-container"},K=["id"],J=["value"],$={class:"title"},ee={class:"input-container"},ne=["onUpdate:modelValue","onInput","onChange","disabled"],te={key:0,class:"icon-container"},oe={id:"git-groups"},re=["value"],ie={class:"input-container"},ae=["list","onUpdate:modelValue","onChange","disabled"],se={key:0,class:"icon-container"},le=["id"],ce=["value"],pe=_((()=>(0,o._)("hr",null,null,-1))),ue=(0,o.aZ)({__name:"deploySettings",emits:["close"],setup(e,{emit:n}){(0,o.wF)((()=>{D.value=v.studio.items.filter((e=>"module"===e.objectType)).map((e=>{var n,t;return{moduleID:e.ID,moduleName:e.name,gitGroupName:"",gitGroupID:(null===(n=e.deployParameters)||void 0===n?void 0:n.gitGroupId)||0,microservices:[],microservicesDisable:!0,microserviceLoading:!1,microserviceName:"",microserviceID:(null===(t=e.deployParameters)||void 0===t?void 0:t.gitServiceRepoId)||0}})),B.value.push({appID:G.value.ID,appName:G.value.name,microservices:[],microservicesDisable:!0}),async function(){f.getGroupNamesWithId().then((e=>{e.data.items.forEach((e=>w.value.groups.push({value:e,microservicesCache:[],requestedBefore:!1}))),w.value.loaded=!0,w.value.disabled=!1,D.value.forEach((e=>{if(0!==e.gitGroupID){const n=w.value.groups.find((n=>n.value.id==e.gitGroupID));n?e.gitGroupName=n.value.name:e.gitGroupID=0}})),D.value.map((e=>e.gitGroupID)).filter(((e,n,t)=>0!==e&&t.indexOf(e)===n)).forEach((e=>{D.value.forEach((n=>{n.gitGroupID==e&&(n.microserviceLoading=!0,n.microservicesDisable=!1)})),f.getProjectsByGroupId(e).then((n=>{let t=n.data.items;const o=w.value.groups.find((n=>n.value.id==e));o&&(o.microservicesCache=t,o.requestedBefore=!0,D.value.forEach((n=>{if(n.gitGroupID===e&&(n.microservices=t,n.microserviceLoading=!1,0==n.microservices.length&&(n.microservicesDisable=!0),0!==n.microserviceID)){const e=t.find((e=>e.id==n.microserviceID));e?(n.microserviceName=e.name,n.microservicesDisable=!1):(n.microserviceID=0,n.microservicesDisable=!0)}})))})).catch((()=>A.showNotification({text:"Error while fetching projects",type:"error"})))})),function(){if(G.value&&G.value.deployParameters){const e=w.value.groups.find((e=>G.value.deployParameters.gitGroupId==e.value.id));e&&(h.value.gitGroup={name:e.value.name,ID:e.value.id})}if(0!==h.value.gitGroup.ID){const e=w.value.groups.find((e=>e.value.id==h.value.gitGroup.ID));e?h.value.gitGroup.name=e.value.name:h.value.gitGroup.ID=0}0!=h.value.gitGroup.ID&&(B.value[0].microservicesDisable=!1,h.value.microservice.loading=!0,f.getProjectsByGroupId(h.value.gitGroup.ID).then((e=>{let n=e.data.items;const t=w.value.groups.find((e=>e.value.id==h.value.gitGroup.ID));if(t&&(t.microservicesCache=n,t.requestedBefore=!0,B.value[0].microservices=n,h.value.microservice.loading=!1,G.value&&G.value.deployParameters)){const e=n.find((e=>{var n,t;return e.id==(null===(t=null===(n=G.value)||void 0===n?void 0:n.deployParameters)||void 0===t?void 0:t.gitServiceRepoId)}));e?(h.value.microservice.name=e.name,h.value.microservice.ID=e.id,B.value[0].microservicesDisable=!1):h.value.microservice.ID=0}})).catch((()=>A.showNotification({text:"Error while fetching projects",type:"error"}))))}()})).catch((()=>{w.value.loaded=!0,w.value.disabled=!0,A.showNotification({text:"Error while fetching git groups",type:"error"})}))}(),f.getProjectsOfProduct().then((e=>{I.value.products=e.data.items,I.value.loaded=!0,I.value.disabled=!1,function(){if(G.value&&G.value.deployParameters){const e=I.value.products.find((e=>G.value.deployParameters.gitProductRepoId==e.id));e&&(h.value.product={name:e.name,ID:e.id})}}()})).catch((()=>{I.value.loaded=!0,I.value.disabled=!0,A.showNotification({text:"Error while fetching products",type:"error"})}))}));const t=s.nC.resolve(c.w),v=s.nC.resolve(l.J),g=s.nC.resolve(p.y),A=s.nC.resolve(m.L),f=s.nC.resolve(d.R),b=s.nC.resolve(u.P),I=(0,i.iH)({products:[],disabled:!1,loaded:!1}),w=(0,i.iH)({groups:[],disabled:!1,loaded:!1}),G=(0,i.iH)(v.apps.find((e=>e.ID==v.studio.appId))),h=(0,i.iH)({product:{ID:0,name:""},gitGroup:{ID:0,name:""},microservice:{ID:0,name:"",loading:!1}}),D=(0,i.iH)(Array()),B=(0,i.iH)(Array()),C=(0,i.iH)(["moduleName","gitGroup","service"]),x=(0,i.iH)(["appName","gitGroup","service"]),R=(0,i.iH)({resizableColumns:!1,filterable:!1,perPage:3,perPageValues:[],headings:{moduleName:t.get("moduleName"),gitGroup:t.get("gitGroup"),microservice:t.get("service")},sortable:[],texts:{count:""}}),y=(0,i.iH)({resizableColumns:!1,filterable:!1,perPage:1,perPageValues:[],headings:{appName:t.get("appName"),gitGroup:t.get("gitGroup"),microservice:t.get("service")},sortable:[],texts:{count:""}});function S(){const e=I.value.products.find((e=>e.name===h.value.product.name));e?h.value.product.ID=e.id:(h.value.product.name="",h.value.product.ID=0)}async function P(e,n){n.microserviceLoading=!0,n.microservicesDisable=!1,n.microservices=await f.getProjectsByGroupId(e.value.id).then((e=>e.data.items)),e.microservicesCache=n.microservices,e.requestedBefore=!0,n.microservicesDisable=!n.microservices.length,n.microserviceLoading=!1}async function M(e,n){h.value.microservice.loading=!0,n.microservicesDisable=!1,n.microservices=await f.getProjectsByGroupId(e.value.id).then((e=>e.data.items)),e.microservicesCache=n.microservices,e.requestedBefore=!0,n.microservicesDisable=!n.microservices.length,h.value.microservice.loading=!1}async function N(){var e,t;if(G.value){let o={};const r=D.value.filter((e=>{var n;return e.microserviceID!=(null===(n=v.studio.items.find((n=>n.ID==e.moduleID)).deployParameters)||void 0===n?void 0:n.gitServiceRepoId)})).map((e=>({moduleID:e.moduleID,deployParameters:{gitGroupId:e.gitGroupID,gitServiceRepoId:e.microserviceID}}))),i={applicationID:G.value.ID,deployParameters:{gitProductRepoId:h.value.product.ID,gitGroupId:h.value.gitGroup.ID,gitServiceRepoId:h.value.microservice.ID}};o={modulesSettings:r},(null===(e=G.value.deployParameters)||void 0===e?void 0:e.gitProductRepoId)==h.value.product.ID&&(null===(t=G.value.deployParameters)||void 0===t?void 0:t.gitServiceRepoId)==h.value.microservice.ID||(o={...o,applicationSettings:i}),await g.execute((async()=>{await f.update(o)}),{loading:!0}),n("close")}}return(e,s)=>{const l=(0,o.up)("v-client-table");return(0,o.wg)(),(0,o.iD)("div",z,[(0,o._)("div",E,(0,r.toDisplayString)((0,i.SU)(t).get("deploySettings_appSettings")),1),(0,o._)("label",k,(0,r.toDisplayString)((0,i.SU)(t).get("product")),1),(0,o._)("div",q,[(0,o.wy)((0,o._)("input",{class:"product-input",list:"products",id:"product-input",placeholder:"Select Product","onUpdate:modelValue":s[0]||(s[0]=e=>h.value.product.name=e),onChange:S,disabled:I.value.disabled},null,40,j),[[a.vModelText,h.value.product.name]]),I.value.loaded?(0,o.kq)("v-if",!0):((0,o.wg)(),(0,o.iD)("div",U,[(0,o.Wm)(T)]))]),(0,o._)("datalist",W,[V,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(I.value.products,(e=>((0,o.wg)(),(0,o.iD)("option",null,(0,r.toDisplayString)(e.name),1)))),256))]),(0,o.Wm)(l,{ref:"table",data:B.value,columns:x.value,options:y.value},{appName:(0,o.w5)((e=>[(0,o._)("span",null,(0,r.toDisplayString)(e.row.appName),1)])),gitGroup:(0,o.w5)((e=>[(0,o._)("div",Q,[(0,o.wy)((0,o._)("input",{class:"module-input",list:"app-git-groups",id:"app-git-group-input",placeholder:"Select Git Group","onUpdate:modelValue":s[1]||(s[1]=e=>h.value.gitGroup.name=e),onInput:n=>async function(e){b.resetTimer();const n=w.value.groups.find((e=>e.value.name===h.value.gitGroup.name)),t=B.value.find((n=>n.appID==e.appID));t.microservicesDisable=!0,t.microservices=[],h.value.microservice.name="",h.value.microservice.ID=0,n?(h.value.gitGroup.ID=n.value.id,h.value.gitGroup.name=n.value.name,n.requestedBefore?(t.microservices=n.microservicesCache,t.microservicesDisable=!t.microservices.length):b.debounce(M,500,n,t)):h.value.gitGroup.ID=0}(e.row),onChange:n=>async function(e){var n,t;const o=w.value.groups.find((e=>e.value.name===h.value.gitGroup.name)),r=B.value.find((n=>n.appID==e.appID));h.value.gitGroup.ID=(null===(n=null==o?void 0:o.value)||void 0===n?void 0:n.id)||0,h.value.gitGroup.name=(null===(t=null==o?void 0:o.value)||void 0===t?void 0:t.name)||"",o||(r.microservices=[],r.microservicesDisable=!0,h.value.microservice.name="",h.value.microservice.ID=0)}(e.row),disabled:w.value.disabled},null,40,Y),[[a.vModelText,h.value.gitGroup.name]]),w.value.loaded?(0,o.kq)("v-if",!0):((0,o.wg)(),(0,o.iD)("div",L,[(0,o.Wm)(T)]))]),(0,o._)("datalist",Z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(w.value.groups,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.value.name},null,8,X)))),256))])])),service:(0,o.w5)((e=>[(0,o._)("div",H,[(0,o.wy)((0,o._)("input",{class:"module-input",list:e.row.appID,id:"app-microservice-input",placeholder:"Select Microservice","onUpdate:modelValue":s[2]||(s[2]=e=>h.value.microservice.name=e),onChange:n=>function(e){const n=e.microservices.find((e=>e.name===h.value.microservice.name));h.value.microservice.name=(null==n?void 0:n.name)||"",h.value.microservice.ID=(null==n?void 0:n.id)||0}(e.row),disabled:e.row.microservicesDisable},null,40,O),[[a.vModelText,h.value.microservice.name]]),h.value.microservice.loading?((0,o.wg)(),(0,o.iD)("div",F,[(0,o.Wm)(T)])):(0,o.kq)("v-if",!0)]),(0,o._)("datalist",{id:e.row.appID},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.row.microservices,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.name},null,8,J)))),256))],8,K)])),_:1},8,["data","columns","options"]),(0,o._)("div",$,(0,r.toDisplayString)((0,i.SU)(t).get("deploySettings_moduleSettings")),1),(0,o.Wm)(l,{ref:"table",data:D.value,columns:C.value,options:R.value},{moduleName:(0,o.w5)((e=>[(0,o._)("span",null,(0,r.toDisplayString)(e.row.moduleName),1)])),gitGroup:(0,o.w5)((e=>[(0,o._)("div",ee,[(0,o.wy)((0,o._)("input",{class:"module-input",list:"git-groups",id:"git-group-input",placeholder:"Select Git Group","onUpdate:modelValue":n=>e.row.gitGroupName=n,onInput:n=>async function(e){b.resetTimer();const n=w.value.groups.find((n=>n.value.name===e.gitGroupName)),t=D.value.find((n=>n.moduleID==e.moduleID));t.microservicesDisable=!0,t.microservices=[],t.microserviceName="",t.microserviceID=0,n?(t.gitGroupID=n.value.id,t.gitGroupName=n.value.name,n.requestedBefore?(t.microservices=n.microservicesCache,t.microservicesDisable=!t.microservices.length):b.debounce(P,500,n,t)):(t.gitGroupName=e.gitGroupName,t.gitGroupID=0)}(e.row),onChange:n=>async function(e){var n,t;const o=w.value.groups.find((n=>n.value.name===e.gitGroupName)),r=D.value.find((n=>n.moduleID==e.moduleID));r.gitGroupID=(null===(n=null==o?void 0:o.value)||void 0===n?void 0:n.id)||0,r.gitGroupName=(null===(t=null==o?void 0:o.value)||void 0===t?void 0:t.name)||"",r.gitGroupID||(r.microservices=[],r.microservicesDisable=!0,r.microserviceName="",r.microserviceID=0)}(e.row),disabled:w.value.disabled},null,40,ne),[[a.vModelText,e.row.gitGroupName]]),w.value.loaded?(0,o.kq)("v-if",!0):((0,o.wg)(),(0,o.iD)("div",te,[(0,o.Wm)(T)]))]),(0,o._)("datalist",oe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(w.value.groups,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.value.name},null,8,re)))),256))])])),service:(0,o.w5)((e=>[(0,o._)("div",ie,[(0,o.wy)((0,o._)("input",{class:"module-input",list:e.row.moduleID,id:"microservice-input",placeholder:"Select Microservice","onUpdate:modelValue":n=>e.row.microserviceName=n,onChange:n=>function(e){const n=e.microservices.find((n=>n.name===e.microserviceName)),t=D.value.find((n=>n.moduleID==e.moduleID));t.microserviceName=(null==n?void 0:n.name)||"",t.microserviceID=(null==n?void 0:n.id)||0}(e.row),disabled:e.row.microservicesDisable},null,40,ae),[[a.vModelText,e.row.microserviceName]]),e.row.microserviceLoading?((0,o.wg)(),(0,o.iD)("div",se,[(0,o.Wm)(T)])):(0,o.kq)("v-if",!0)]),(0,o._)("datalist",{id:e.row.moduleID},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.row.microservices,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.name},null,8,ce)))),256))],8,le)])),_:1},8,["data","columns","options"]),pe,(0,o._)("button",{class:"save-button",onClick:N},(0,r.toDisplayString)((0,i.SU)(t).get("save")),1),(0,o._)("button",{class:"previous-button","data-v-33a93b5b":"",onClick:s[3]||(s[3]=()=>n("close"))},(0,r.toDisplayString)((0,i.SU)(t).get("cancel")),1)])}}});var de=t(4567),me={};me.styleTagTransform=y(),me.setAttributes=B(),me.insert=h().bind(null,"head"),me.domAPI=w(),me.insertStyleElement=x(),b()(de.Z,me),de.Z&&de.Z.locals&&de.Z.locals;var ve=t(2),ge={};ge.styleTagTransform=y(),ge.setAttributes=B(),ge.insert=h().bind(null,"head"),ge.domAPI=w(),ge.insertStyleElement=x(),b()(ve.Z,ge),ve.Z&&ve.Z.locals&&ve.Z.locals;const Ae=(0,M.Z)(ue,[["__scopeId","data-v-79436c2f"]])}}]);
//# sourceMappingURL=458.js.map