"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[9658],{97933:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(8375),a=t.n(o),l=t(7638),i=t.n(l)()(a());i.push([e.id,'\n.container[data-v-122e9980] {\n    width: 100%;\n    height: 100%;\n    max-width: 100%;\n    padding: 32px 20px 20px;\n    display: flex;\n    flex-direction: column;\n}\n.content-wrapper[data-v-122e9980] {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n}\n.bottom-section[data-v-122e9980] {\n    margin-top: auto;\n}\n.footer[data-v-122e9980] {\n    position: relative;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: end;\n    margin-top: 20px;\n}\n.cancel-button[data-v-122e9980] {\n    border-radius: 4px;\n    user-select: none;\n    font-style: normal;\n    font-weight: 500;\n    font-family: "ROBOTO";\n    font-size: 15px;\n    color: #757575;\n    padding: 10px 16px;\n    cursor: pointer;\n    margin-right: 4px;\n    border: none;\n    background: transparent;\n}\n.save-button[data-v-122e9980] {\n    background: #151233;\n    border-radius: 4px;\n    user-select: none;\n    font-weight: 500;\n    font-size: 15px;\n    color: #ffffff;\n    padding: 10px 16px;\n    cursor: pointer;\n    border: none;\n}\n.save-button[data-v-122e9980]:disabled {\n    color: #757575;\n    cursor: not-allowed;\n}\n.publish-info[data-v-122e9980] {\n    color: #757575;\n    font-size: 20px;\n    margin-left: 10px;\n}\n.select-environment[data-v-122e9980] {\n    width: 100%;\n    font-size: 15px;\n    height: 40px;\n    line-height: 40px;\n    margin-top: 4px;\n}\n',""]);const s=i},29307:(e,n,t)=>{t.d(n,{w:()=>o});const o=Symbol.for("IFileDisplayerUseCase")},62376:(e,n,t)=>{t.d(n,{q:()=>o});const o=Symbol.for("IListMultiModelVersions")},17379:(e,n,t)=>{t.d(n,{y:()=>o});const o=Symbol.for("IListMultiModuleVersions")},15772:(e,n,t)=>{t.d(n,{M:()=>o});const o=Symbol.for("IModelSelectionValidator")},83240:(e,n,t)=>{t.d(n,{e:()=>o});const o=Symbol.for("IModuleVersionUseCase")},71665:(e,n,t)=>{t.d(n,{n:()=>o});const o=Symbol.for("IWorkflowExportJobUseCase")},69048:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z});var o=t(71093),a=t(66190),l=t(73843),i=t(5627),s=t(83487),r=t(88613),u=t(84874),d=t(56452),c=t(64740),p=t(28518),v=t(50419),m=t(36250),f=t(15772),y=t(11547),x=t(13348),h=t(71665);const g={class:"container"},b={class:"content-wrapper"},w={class:"bottom-section"},S={class:"info"},I={class:(0,a.normalizeClass)(["footer","export"])},k=["disabled"],C=(0,o.aZ)({__name:"workflowExportDialog",emits:["close"],setup(e,{emit:n}){const t=i.nC.resolve(r.J),a=i.nC.resolve(s.y),C=i.nC.resolve(u.B),F=i.nC.resolve(c.t),O=i.nC.resolve(v.L),T=i.nC.resolve(f.M),U=i.nC.resolve(h.n),E=(0,l.iH)([]),D=(0,l.iH)([]),_=(0,l.iH)(""),A=(0,l.iH)({backgroundColor:"#F5F5FA",color:"#373737",fontSize:"20px",iconColor:"#F3CA40",marginTop:"20px"}),M=(0,o.Fl)((()=>!(Z.value&&z.value&&j.value&&P.value&&K.value&&!W.value))),Z=(0,o.Fl)((()=>E.value.some((e=>e.checked||e.anyChildChecked)))),K=(0,o.Fl)((()=>T.checkVersionOfItems(E.value))),P=(0,o.Fl)((()=>T.validateRootQjsonForWF(D.value))),V=(0,o.Fl)((()=>function(){const e=T.checkWorkflowExecutionItems(D.value),n=e.wfExportValid;return{...e,allItemsOK:!n.wfExists||n.getUserOK&&n.notifyOK&&n.preFormOK&&n.iPaasEndPointOK}}())),j=(0,o.Fl)((()=>V.value.allItemsOK)),z=(0,l.iH)(!1),W=(0,o.Fl)((()=>T.checkSettingsFilesSelected())),q=(0,o.Fl)((()=>E.value.some((e=>function(e){let n=e.parent;for(;n;){if(n.newModuleVersionAvaliable)return!0;n=n.parent}return!1}(e))))),H=(0,o.Fl)((()=>Z.value?K.value?P.value?j.value?z.value?void 0:_.value:`${function(){let e="Please include the following items in your export selection: ";const n=V.value.wfExportValid,t=[];return n.getUserOK||t.push('"getUser"'),n.notifyOK||t.push('"notify"'),n.preFormOK||t.push('"TaskPreview"'),n.iPaasEndPointOK||t.push('"IPaaS_Endpoint"'),e+=t.join(", "),e}()}`:"Please make sure that the 'root' UI page is selected for export.":"There are no items ready to publish. At least one of your items must be ready to publish.":"Please select at least one item to export.")),B=(0,o.Fl)((()=>D.value.some((e=>{var n;return null===(n=null==e?void 0:e.parent)||void 0===n?void 0:n.unreleased}))));function L(){a.execute((async()=>{const e=await T.validateDependencies(E.value,"Export");_.value=e.dependencyErrorStr,z.value=e.validation}),{loading:!1})}function J(e,n){const t=E.value.findIndex((n=>n.id===e.id));-1!==t?E.value[t]={...e}:E.value.push({...e});const o=D.value.findIndex((n=>n.id===e.id));e.checked?-1!==o?D.value[o]=e:D.value.push(e):-1!==o&&D.value.splice(o,1),n&&L()}function N(e){const n=new Set(e);E.value=E.value.filter((e=>n.has(e.id))),D.value=D.value.filter((e=>n.has(e.id)))}function R(){n("close")}return(0,o.bv)((()=>{L()})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",b,[(0,o.Wm)(y.Z,{screenType:"Export",onGetItem:J,onSyncItems:N,searchable:!0})]),(0,o._)("div",w,[(0,o._)("div",S,[(0,l.SU)(W)?((0,o.wg)(),(0,o.j4)(m.Z,{key:0,customIconClass:"mdi mdi-alert",customStyle:A.value,isSlot:!0},{default:(0,o.w5)((()=>[(0,o.Uk)(" Some settings files in your application are currently unassigned. To continue, please navigate to the "),(0,o._)("span",{onClick:n[0]||(n[0]=e=>function(){R();const e=i.nC.resolve(x.y);a.execute((async()=>{await e.openAppSettingsUI()}),{loading:!0})}()),style:{"font-weight":"bold","text-decoration":"underline",cursor:"pointer"}}," Settings page "),(0,o.Uk)(" and assign all necessary files ")])),_:1},8,["customStyle"])):(0,l.SU)(M)&&(0,l.SU)(H)?((0,o.wg)(),(0,o.j4)(m.Z,{key:1,customIconClass:"mdi mdi-alert",infoText:(0,l.SU)(H),customStyle:A.value},null,8,["infoText","customStyle"])):(0,l.SU)(q)?((0,o.wg)(),(0,o.j4)(m.Z,{key:2,infoText:"A newer module version is available. Your export will be generated using the updated version.",customStyle:{...A.value,iconColor:"#151233"}},null,8,["infoText","customStyle"])):(0,o.kq)("v-if",!0),(0,l.SU)(B)?((0,o.wg)(),(0,o.j4)(m.Z,{key:3,customIconClass:"mdi mdi-alert",infoText:"You are about to export an unreleased version.",customStyle:A.value},null,8,["customStyle"])):(0,o.kq)("v-if",!0)]),(0,o._)("div",I,[(0,o._)("button",{class:"cancel-button",onClick:n[1]||(n[1]=e=>R())},"Cancel"),(0,o._)("button",{class:"save-button",disabled:(0,l.SU)(M),onClick:n[2]||(n[2]=e=>async function(){a.execute((async()=>{const e=function(){const e=Array();return D.value.forEach((n=>{const o=[{ID:(a=n).id,version:a.version||"latest"}];var a;o&&o.length>0&&(C.traverseAllItems((e=>("model"!=e.objectType||"workflow"!=e.modelType||o.some((n=>n.ID!=e.ID))||d.$.parseWorkflowModelBodyWFE(function(e){const n=F.extractRuntimeModel(e);return{appId:t.studio.appId,organizationId:t.user.selectedOrganization.id,modelID:p.x.embedIdType(e.ID,e.modelType),name:e.name,type:e.modelType,modelBody:n,updateDate:e.updateDate&&new Date(e.updateDate).valueOf(),version:e.version}}(e),"notification",(e=>{O.showNotification({text:e,type:"error"})})),"continue"))),Array.prototype.push.apply(e,o))})),e}(),n=Array.from(new Map(E.value.filter((e=>{var n,t;return"module"===(null===(n=e.parent)||void 0===n?void 0:n.type)&&(null===(t=e.parent)||void 0===t?void 0:t.imported)})).map((e=>[e.parent.id,{moduleId:e.parent.id,moduleName:e.parent.name,moduleStrategy:e.parent.updateStrategy||e.parent.importedVersion,moduleVersion:e.parent.version}]))).values());await U.createAppExportJob({items:e,updateStrategyInfos:n}),R()}),{loading:!0})}())},"DOWNLOAD",8,k)])])]))}});var F=t(17450),O=t.n(F),T=t(29530),U=t.n(T),E=t(16199),D=t.n(E),_=t(40458),A=t.n(_),M=t(62916),Z=t.n(M),K=t(92165),P=t.n(K),V=t(97933),j={};j.styleTagTransform=P(),j.setAttributes=A(),j.insert=D().bind(null,"head"),j.domAPI=U(),j.insertStyleElement=Z(),O()(V.Z,j),V.Z&&V.Z.locals&&V.Z.locals;const z=(0,t(32525).Z)(C,[["__scopeId","data-v-122e9980"]])}}]);