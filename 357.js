"use strict";(self.webpackChunkqcloud_shell=self.webpackChunkqcloud_shell||[]).push([[357],{2205:(n,e,t)=>{t.d(e,{Z:()=>s});var i=t(1864),l=t.n(i),o=t(352),a=t.n(o)()(l());a.push([n.id,"\n.fileInputDiv[data-v-adecc440] {\n    margin-left: 20px;\n    margin-top: 20px;\n    margin-right: 20px;\n}\n.selectedItems[data-v-adecc440] {\n    margin-left: 10px;\n    margin-top: 10px;\n    height: 226px;\n    overflow: auto;\n}\n.selectedItems[data-v-adecc440]::-webkit-scrollbar-thumb {\n    background-color: #D0D1E9;\n    border-radius: 16px;\n}\n.selectedItems[data-v-adecc440]::-webkit-scrollbar {\n    width: 12px;\n}\n.selectedItems[data-v-adecc440]::-webkit-scrollbar-track {\n    background: transparent;\n}\n.importBtn[data-v-adecc440] {\n    border-radius: 4px;\n    border: none;\n    opacity: 1;\n    color: white;\n    width: 97px;\n    height: 40px;\n    font-style: normal;\n    font-size: 20px;\n    font-weight: 500;\n    letter-spacing: 0px;\n    font-family: 'ROBOTO';\n}\n.importBtnDiv[data-v-adecc440] {\n    text-align: end;\n    margin-right: 20px;\n    margin-top: 30px;\n}\n.removeIcon[data-v-adecc440] {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n.loading[data-v-adecc440] {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n[data-v-adecc440]::-webkit-file-upload-button {\n    background: #2F3160;\n    color: white;\n    border-radius: 4px;\n    width: 120px;\n    height: 48px;\n}\n.fileUploadDiv[data-v-adecc440] {\n    cursor: pointer;\n}\n.filesValue[data-v-adecc440] {\n    margin-top: 10px;\n    background-color: #F5F5FA;\n    color: #000000;\n    display: flex;\n    border-radius: 4px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    letter-spacing: 0px;\n    opacity: 1;\n    font-family: 'ROBOTO';\n    margin-left: 10px;\n    width: 561px;\n    text-align: start;\n}\n.uploadFilesText[data-v-adecc440] {\n    color: #616161;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 10px;\n    font-family: \"ROBOTO\";\n}\n.fileTypeQjson[data-v-adecc440] {\n    color: #449DD1;\n    font-size: 18px;\n    padding-left: 5px;\n}\n.fileTypeEntity[data-v-adecc440] {\n    color: rgb(233, 114, 76);\n    font-size: 18px;\n    padding-left: 5px;\n}\n.fileTypeBpmn[data-v-adecc440] {\n    color: rgb(0, 124, 119);\n    font-size: 18px;\n    padding-left: 5px;\n}\n.fileTypeProcess[data-v-adecc440] {\n    color: rgb(0, 124, 119);\n    font-size: 18px;\n    padding-left: 5px;\n}\n.uploadArea[data-v-adecc440] {\n    text-align: center;\n    padding-top: 25px;\n    border: 1px dashed #a1a1a1;\n    height: 100px;\n}\n.cancelBtn[data-v-adecc440] {\n    background: none;\n    border: none;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 20px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 50px;\n    font-family: \"ROBOTO\";\n    margin-right: 10px;\n    color: #757575;\n    letter-spacing: 0.02px;\n}\n.loader[data-v-adecc440] {\n    border: 3px solid #f3f3f3;\n    border-radius: 70%;\n    border-top: 3px solid #3498db;\n    width: 12px;\n    height: 12px;\n    -webkit-animation: spin-adecc440 1s linear infinite;\n    animation: spin-adecc440 1s linear infinite;\n}\n\n/* Safari */\n@-webkit-keyframes spin-adecc440 {\n0% {\n        -webkit-transform: rotate(0deg);\n}\n100% {\n        -webkit-transform: rotate(360deg);\n}\n}\n@keyframes spin-adecc440 {\n0% {\n        transform: rotate(0deg);\n}\n100% {\n        transform: rotate(360deg);\n}\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/importModelDialog.vue"],names:[],mappings:";AA0OA;IACI,iBAAiB;IACjB,gBAAgB;IAChB,kBAAkB;AACtB;AAEA;IACI,iBAAiB;IACjB,gBAAgB;IAChB,aAAa;IACb,cAAc;AAClB;AAEA;IACI,yBAAyB;IACzB,mBAAmB;AACvB;AAEA;IACI,WAAW;AACf;AAEA;IACI,uBAAuB;AAC3B;AAEA;IACI,kBAAkB;IAClB,YAAY;IACZ,UAAU;IACV,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,mBAAmB;IACnB,qBAAqB;AACzB;AAEA;IACI,eAAe;IACf,kBAAkB;IAClB,gBAAgB;AACpB;AAEA;IACI,eAAe;IACf,cAAc;IACd,mBAAmB;IACnB,kBAAkB;IAClB,eAAe;IACf,mBAAmB;IACnB,UAAU;AACd;AAEA;IACI,eAAe;IACf,cAAc;IACd,mBAAmB;IACnB,kBAAkB;IAClB,eAAe;IACf,mBAAmB;IACnB,UAAU;AACd;AAEA;IACI,mBAAmB;IACnB,YAAY;IACZ,kBAAkB;IAClB,YAAY;IACZ,YAAY;AAChB;AAEA;IACI,eAAe;AACnB;AAEA;IACI,gBAAgB;IAChB,yBAAyB;IACzB,cAAc;IACd,aAAa;IACb,kBAAkB;IAClB,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;IACf,mBAAmB;IACnB,UAAU;IACV,qBAAqB;IACrB,iBAAiB;IACjB,YAAY;IACZ,iBAAiB;AACrB;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;IACf,mBAAmB;IACnB,UAAU;IACV,iBAAiB;IACjB,qBAAqB;AACzB;AAEA;IACI,cAAc;IACd,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,wBAAwB;IACxB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,uBAAuB;IACvB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,uBAAuB;IACvB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,kBAAkB;IAClB,iBAAiB;IACjB,0BAA0B;IAC1B,aAAa;AAEjB;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;IACf,mBAAmB;IACnB,UAAU;IACV,iBAAiB;IACjB,qBAAqB;IACrB,kBAAkB;IAClB,cAAc;IACd,sBAAsB;AAC1B;AAEA;IACI,yBAAyB;IACzB,kBAAkB;IAClB,6BAA6B;IAC7B,WAAW;IACX,YAAY;IACZ,mDAA0C;IAC1C,2CAAkC;AACtC;;AAEA,WAAW;AACX;AACI;QACI,+BAA+B;AACnC;AAEA;QACI,iCAAiC;AACrC;AACJ;AAEA;AACI;QACI,uBAAuB;AAC3B;AAEA;QACI,yBAAyB;AAC7B;AACJ",sourcesContent:["<script setup lang=\"ts\">\nimport { IUseCaseExecutor } from '../../../../domain/useCase/IUseCaseExecutor';\nimport { container } from '../../../../domain/core/diContainer';\nimport { ICreateModel, ICreateModelParam } from '../../../../domain/useCase/ICreateModel';\nimport { IApplication, IFolder, IModel, IModule } from '../../../../domain/model/models';\nimport { IStudio } from '../../../../domain/useCase/IStudio';\nimport { INewItemProps } from '../../../../domain/presentation/dialogs/INewItemProps';\nimport { onMounted, ref } from '@vue/runtime-dom';\nimport { computed } from '@vue/reactivity';\nimport { TooltipImpl } from '../../impls/tooltipImpl';\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst studio = container.resolve<IStudio>(IStudio);\nconst tooltip = container.resolve<TooltipImpl>(TooltipImpl);\n\ninterface IImportFile {\n    name: string;\n    content: string; \n    isDuplicate: boolean;\n    type: \"entity\" | \"qjson\" | \"process\" | \"bpmn\";\n}\n\n\n\ninterface INewItemPropsInline extends INewItemProps {\n    parent: IModule | IFolder | IApplication ;\n}\n\ndebugger\nconst props = defineProps<INewItemPropsInline>();\n\nconst fileItems = ref<Array<IImportFile>>([])\n\nconst loadingIcon = ref(false)\nconst emit = defineEmits([\"close\"]);\nconst entityNumber = ref(0);\n\nconst hasEntity = ref(props.parent?.children?.some(i => i.objectType == 'model' && i.modelType == 'entityDesigner') == true);\n\n\n\nfunction checkDuplicate(name: string, type: IImportFile[\"type\"]) {\n    debugger\nconst isDuplicate = props.parent?.children?.some(i => i.name == name.split('.').slice(0, -1).join('.') && (i.objectType == \"model\" && i.modelType == type))\nreturn isDuplicate == true\n\n}\n\nfunction checkExtension(file: string) {\n    const extension = file.split('.')[1]\n    return extension as IImportFile[\"type\"];\n}\n\nasync function selectedFiles() {\n    var item = document.getElementById('fileInput') as HTMLInputElement | null;\n    for (var i = 0; i < item?.files?.length!; i++) {\n        const file = item?.files?.item(i)\n        const isExist = fileItems.value.some(i => i.name == file?.name)\n        if (!isExist) {\n            const text = await file!.text();\n            const extensionOfFile = checkExtension(file!.name)\n            const isDuplicate = checkDuplicate(file!.name, extensionOfFile)\n            fileItems.value.push({ name: file!.name, content: text, isDuplicate, type: extensionOfFile });\n            if (extensionOfFile == \"entity\") {\n                entityNumber.value = entityNumber.value + 1;\n            }\n        }\n\n    }\n    tooltip.startTooltip()\n}\nasync function importSelectedModels() {\n    loadingIcon.value = true;\n    fileItems.value.forEach(async item => {\n        if (item.isDuplicate) { return; }\n\n        const createObject: ICreateModelParam = {\n            name: item.name.split('.').slice(0, -1).join('.'),\n            parentObjectId: props.parent.ID,\n            \n            modelBody: [{ key: item.type, model: item!.content }],\n            modelType: \"qjson\",\n            modelAdditionals: { qjsonType: 'qjson' },\n        }\n\n        switch (item.type) {\n            case 'qjson':\n                createObject.modelType = \"qjson\";\n                createObject.modelAdditionals = { qjsonType: 'qjson' };\n                break;\n            case 'entity':\n                if (isEntityRuleBlock(item)) { return; }\n                createObject.modelType = \"entityDesigner\";\n                createObject.modelAdditionals = {};\n                break;\n            case 'bpmn':\n                createObject.modelType = \"bpmn\";\n                createObject.modelAdditionals = {};\n                break;\n\n            case 'process':\n                createObject.modelType = \"process\";\n                createObject.modelAdditionals = {};\n                break;\n        }\n\n        await executor.executeUseCase<ICreateModel>(ICreateModel, createObject);\n        loadingIcon.value = false;\n        emit('close');\n    });\n\n}\n\nfunction computedIcon(fileType: string) {\n    switch (fileType) {\n        case 'qjson':\n            return 'mdi mdi-palette fileTypeQjson'\n        case 'entity':\n            return 'mdi mdi-database fileTypeEntity'\n        case 'bpmn':\n            return 'mdi mdi-vector-polyline fileTypeBpmn'\n        case 'process':\n            return 'mdi mdi-auto-fix fileTypeProcess'\n        default:\n    }\n}\n\nfunction removeItem(file: IImportFile, selectedFiles: Array<any>) {\n    if (file.type == 'entity') {\n        entityNumber.value = entityNumber.value - 1\n    }\n    const index = selectedFiles.indexOf(file)\n    selectedFiles.splice(index, 1)\n    tooltip.startTooltip()\n}\n\nfunction isEntityRuleBlock(item: IImportFile) {\n    if (item.type != \"entity\") { return false; }\n\n    const isEntityRuleBlock = hasEntity.value || entityNumber.value > 1;\n    return isEntityRuleBlock;\n}\n\nfunction anyNotDuplicateItem() {\n    const retVal = fileItems.value.some(i => i.type != \"entity\" && i.isDuplicate == false);\n    return retVal;\n}\n\n\nconst isButtonDisabled = computed(() => {\n    if (fileItems.value.length == 0) { return true; }\n\n    if (fileItems.value.length > entityNumber.value && anyNotDuplicateItem()) {\n        return false;\n    }\n\n    if (fileItems.value.some(i => i.type != \"entity\")) {\n        return true;\n    }\n\n    const isEntityRuleBlock = entityNumber.value > 1 || (hasEntity.value && entityNumber.value > 0);\n    return isEntityRuleBlock;\n});\n\n<\/script> \n\n<template>\n    <div class=\"fileInputDiv\">\n        <div class='fileUploadDiv col-12' onclick=\"document.getElementById('fileInput').click()\">\n            <div class='col-12 uploadArea' style=\"display:flex; padding-left: 150px; padding-top: 35px;\">\n                <div class=\"mdi mdi-cloud-upload-outline\"\n                    style=\"text-align: center; font-size: 25px; color:#A1A1A1; padding-right:10px; margin-top: -7px;\">\n                </div>\n                <span style=\"font-weight:bold\">Click</span><span style=\"padding-left:10px\">here to upload your\n                    files.</span>\n            </div>\n        </div>\n        <input style=\"display: none;\" type=\"file\" id=\"fileInput\" multiple @change=\"selectedFiles()\"\n            :accept=\"props.parent.objectType=='application' ? '.qjson':'.qjson,.entity,.bpmn,.process'\">\n\n    </div>\n    <div id=\"selectedFiles\" class=\"selectedItems\">\n\n        <div v-if=\"fileItems.length > 0\">\n            <div class='uploadFilesText'>Selected Files <span> ({{ fileItems.length }})</span></div>\n            <div v-for=\"fileValues in fileItems\">\n                <div v-if=\"!fileValues.isDuplicate && !isEntityRuleBlock(fileValues)\" class='filesValue'>\n                    <div><i :class='computedIcon(fileValues.type)'></i></div>\n                    <div class=\"col-10\" style=\"margin-left: 10px;\">\n                        {{ fileValues.name.split('.').slice(0, -1).join('.') }}\n                    </div>\n\n                    <div class=\"col-1\" style=\"text-align: end; padding-left: 30px;\">\n                        <i v-if=\"fileValues && !loadingIcon\" class='mdi mdi-delete-outline removeIcon'\n                            @click='removeItem(fileValues, fileItems)'></i>\n\n                        <div v-if=\"loadingIcon\" style=\" padding-top: 7px;\" class=\"loader\"></div>\n                    </div>\n\n                </div>\n\n                <div v-if=\"fileValues.isDuplicate || isEntityRuleBlock(fileValues)\" class='filesValue'\n                    style=\"border:1px solid red\">\n                    <div><i :class='computedIcon(fileValues.type)'></i></div>\n                    <div class=\"col-10\" data-toggle=\"tooltip\"\n                        :title=\"isEntityRuleBlock(fileValues) ? 'Only one entity file is allowed' : 'This file is already imported'\"\n                        placement='bottom' style=\"margin-left: 10px;\">\n                        {{ fileValues.name.split('.').slice(0, -1).join('.') }}\n                    </div>\n\n                    <div class=\"col-1\" style=\"text-align: end; padding-left: 30px;\">\n                        <i v-if=\"fileValues && !loadingIcon\" class='mdi mdi-delete-outline removeIcon'\n                            @click='removeItem(fileValues, fileItems)'></i>\n\n                        <div v-if=\"!fileValues.isDuplicate && !isEntityRuleBlock(fileValues) && loadingIcon\"\n                            style=\" padding-top: 7px;\" class=\"loader\"></div>\n                    </div>\n\n                </div>\n\n            </div>\n\n\n        </div>\n    </div>\n    <div class='importBtnDiv'>\n        <button class='cancelBtn' @click=\"emit('close')\">Cancel</button>\n        <button class='importBtn' :disabled=\"isButtonDisabled\"\n            :style=\"{ backgroundColor: isButtonDisabled ? '#37373733' : '#151233' }\"\n            @click=\"importSelectedModels()\">IMPORT</button>\n    </div>\n</template> \n\n<style scoped>\n.fileInputDiv {\n    margin-left: 20px;\n    margin-top: 20px;\n    margin-right: 20px;\n}\n\n.selectedItems {\n    margin-left: 10px;\n    margin-top: 10px;\n    height: 226px;\n    overflow: auto;\n}\n\n.selectedItems::-webkit-scrollbar-thumb {\n    background-color: #D0D1E9;\n    border-radius: 16px;\n}\n\n.selectedItems::-webkit-scrollbar {\n    width: 12px;\n}\n\n.selectedItems::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n.importBtn {\n    border-radius: 4px;\n    border: none;\n    opacity: 1;\n    color: white;\n    width: 97px;\n    height: 40px;\n    font-style: normal;\n    font-size: 20px;\n    font-weight: 500;\n    letter-spacing: 0px;\n    font-family: 'ROBOTO';\n}\n\n.importBtnDiv {\n    text-align: end;\n    margin-right: 20px;\n    margin-top: 30px;\n}\n\n.removeIcon {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n\n.loading {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n\n::-webkit-file-upload-button {\n    background: #2F3160;\n    color: white;\n    border-radius: 4px;\n    width: 120px;\n    height: 48px;\n}\n\n.fileUploadDiv {\n    cursor: pointer;\n}\n\n.filesValue {\n    margin-top: 10px;\n    background-color: #F5F5FA;\n    color: #000000;\n    display: flex;\n    border-radius: 4px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    letter-spacing: 0px;\n    opacity: 1;\n    font-family: 'ROBOTO';\n    margin-left: 10px;\n    width: 561px;\n    text-align: start;\n}\n\n.uploadFilesText {\n    color: #616161;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 10px;\n    font-family: \"ROBOTO\";\n}\n\n.fileTypeQjson {\n    color: #449DD1;\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.fileTypeEntity {\n    color: rgb(233, 114, 76);\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.fileTypeBpmn {\n    color: rgb(0, 124, 119);\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.fileTypeProcess {\n    color: rgb(0, 124, 119);\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.uploadArea {\n    text-align: center;\n    padding-top: 25px;\n    border: 1px dashed #a1a1a1;\n    height: 100px;\n\n}\n\n.cancelBtn {\n    background: none;\n    border: none;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 20px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 50px;\n    font-family: \"ROBOTO\";\n    margin-right: 10px;\n    color: #757575;\n    letter-spacing: 0.02px;\n}\n\n.loader {\n    border: 3px solid #f3f3f3;\n    border-radius: 70%;\n    border-top: 3px solid #3498db;\n    width: 12px;\n    height: 12px;\n    -webkit-animation: spin 1s linear infinite;\n    animation: spin 1s linear infinite;\n}\n\n/* Safari */\n@-webkit-keyframes spin {\n    0% {\n        -webkit-transform: rotate(0deg);\n    }\n\n    100% {\n        -webkit-transform: rotate(360deg);\n    }\n}\n\n@keyframes spin {\n    0% {\n        transform: rotate(0deg);\n    }\n\n    100% {\n        transform: rotate(360deg);\n    }\n}\n</style>"],sourceRoot:""}]);const s=a},3735:(n,e,t)=>{t.r(e),t.d(e,{default:()=>Q});var i=t(2068),l=t(9045),o=t(1407),a=t(664),s=t(3734),r=t(9388),d=t(3900),p=t(4611);const c={class:"fileInputDiv"},A=(n=>((0,i.dD)("data-v-adecc440"),n=n(),(0,i.Cn)(),n))((()=>(0,i._)("div",{class:"fileUploadDiv col-12",onclick:"document.getElementById('fileInput').click()"},[(0,i._)("div",{class:"col-12 uploadArea",style:{display:"flex","padding-left":"150px","padding-top":"35px"}},[(0,i._)("div",{class:"mdi mdi-cloud-upload-outline",style:{"text-align":"center","font-size":"25px",color:"#A1A1A1","padding-right":"10px","margin-top":"-7px"}}),(0,i._)("span",{style:{"font-weight":"bold"}},"Click"),(0,i._)("span",{style:{"padding-left":"10px"}},"here to upload your files.")])],-1))),m=["accept"],u={id:"selectedFiles",class:"selectedItems"},f={key:0},I={class:"uploadFilesText"},y=(0,i.Uk)("Selected Files "),B={key:0,class:"filesValue"},g={class:"col-10",style:{"margin-left":"10px"}},v={class:"col-1",style:{"text-align":"end","padding-left":"30px"}},x=["onClick"],C={key:1,style:{"padding-top":"7px"},class:"loader"},b={key:1,class:"filesValue",style:{border:"1px solid red"}},k=["title"],h={class:"col-1",style:{"text-align":"end","padding-left":"30px"}},w=["onClick"],T={key:1,style:{"padding-top":"7px"},class:"loader"},D={class:"importBtnDiv"},E=["disabled"],j=(0,i.aZ)({__name:"importModelDialog",props:{parent:null},emits:["close"],setup(n,{emit:e}){var t,j;const O=n,q=s.nC.resolve(a.y),F=(s.nC.resolve(d.c),s.nC.resolve(p.O)),z=(0,o.iH)([]),V=(0,o.iH)(!1),_=(0,o.iH)(0),U=(0,o.iH)(1==(null===(j=null===(t=O.parent)||void 0===t?void 0:t.children)||void 0===j?void 0:j.some((n=>"model"==n.objectType&&"entityDesigner"==n.modelType))));function R(n,e){var t,i;return 1==(null===(i=null===(t=O.parent)||void 0===t?void 0:t.children)||void 0===i?void 0:i.some((t=>t.name==n.split(".").slice(0,-1).join(".")&&"model"==t.objectType&&t.modelType==e)))}function Y(n){return n.split(".")[1]}function M(n){switch(n){case"qjson":return"mdi mdi-palette fileTypeQjson";case"entity":return"mdi mdi-database fileTypeEntity";case"bpmn":return"mdi mdi-vector-polyline fileTypeBpmn";case"process":return"mdi mdi-auto-fix fileTypeProcess"}}function S(n,e){"entity"==n.type&&(_.value=_.value-1);const t=e.indexOf(n);e.splice(t,1),F.startTooltip()}function N(n){return"entity"==n.type&&(U.value||_.value>1)}const P=(0,o.Fl)((()=>0==z.value.length||!(z.value.length>_.value&&z.value.some((n=>"entity"!=n.type&&0==n.isDuplicate)))&&(!!z.value.some((n=>"entity"!=n.type))||(_.value>1||U.value&&_.value>0))));return(n,t)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",c,[A,(0,i._)("input",{style:{display:"none"},type:"file",id:"fileInput",multiple:"",onChange:t[0]||(t[0]=n=>async function(){for(var n,e,t=document.getElementById("fileInput"),i=0;i<(null===(n=null==t?void 0:t.files)||void 0===n?void 0:n.length);i++){const n=null===(e=null==t?void 0:t.files)||void 0===e?void 0:e.item(i),l=z.value.some((e=>e.name==(null==n?void 0:n.name)));if(!l){const e=await n.text(),t=Y(n.name),i=R(n.name,t);z.value.push({name:n.name,content:e,isDuplicate:i,type:t}),"entity"==t&&(_.value=_.value+1)}}F.startTooltip()}()),accept:"application"==O.parent.objectType?".qjson":".qjson,.entity,.bpmn,.process"},null,40,m)]),(0,i._)("div",u,[z.value.length>0?((0,i.wg)(),(0,i.iD)("div",f,[(0,i._)("div",I,[y,(0,i._)("span",null," ("+(0,l.toDisplayString)(z.value.length)+")",1)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(z.value,(n=>((0,i.wg)(),(0,i.iD)("div",null,[n.isDuplicate||N(n)?(0,i.kq)("v-if",!0):((0,i.wg)(),(0,i.iD)("div",B,[(0,i._)("div",null,[(0,i._)("i",{class:(0,l.normalizeClass)(M(n.type))},null,2)]),(0,i._)("div",g,(0,l.toDisplayString)(n.name.split(".").slice(0,-1).join(".")),1),(0,i._)("div",v,[n&&!V.value?((0,i.wg)(),(0,i.iD)("i",{key:0,class:"mdi mdi-delete-outline removeIcon",onClick:e=>S(n,z.value)},null,8,x)):(0,i.kq)("v-if",!0),V.value?((0,i.wg)(),(0,i.iD)("div",C)):(0,i.kq)("v-if",!0)])])),n.isDuplicate||N(n)?((0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("div",null,[(0,i._)("i",{class:(0,l.normalizeClass)(M(n.type))},null,2)]),(0,i._)("div",{class:"col-10","data-toggle":"tooltip",title:N(n)?"Only one entity file is allowed":"This file is already imported",placement:"bottom",style:{"margin-left":"10px"}},(0,l.toDisplayString)(n.name.split(".").slice(0,-1).join(".")),9,k),(0,i._)("div",h,[n&&!V.value?((0,i.wg)(),(0,i.iD)("i",{key:0,class:"mdi mdi-delete-outline removeIcon",onClick:e=>S(n,z.value)},null,8,w)):(0,i.kq)("v-if",!0),n.isDuplicate||N(n)||!V.value?(0,i.kq)("v-if",!0):((0,i.wg)(),(0,i.iD)("div",T))])])):(0,i.kq)("v-if",!0)])))),256))])):(0,i.kq)("v-if",!0)]),(0,i._)("div",D,[(0,i._)("button",{class:"cancelBtn",onClick:t[1]||(t[1]=n=>e("close"))},"Cancel"),(0,i._)("button",{class:"importBtn",disabled:(0,o.SU)(P),style:(0,l.normalizeStyle)({backgroundColor:(0,o.SU)(P)?"#37373733":"#151233"}),onClick:t[2]||(t[2]=n=>async function(){V.value=!0,z.value.forEach((async n=>{if(n.isDuplicate)return;const t={name:n.name.split(".").slice(0,-1).join("."),parentObjectId:O.parent.ID,modelBody:[{key:n.type,model:n.content}],modelType:"qjson",modelAdditionals:{qjsonType:"qjson"}};switch(n.type){case"qjson":t.modelType="qjson",t.modelAdditionals={qjsonType:"qjson"};break;case"entity":if(N(n))return;t.modelType="entityDesigner",t.modelAdditionals={};break;case"bpmn":t.modelType="bpmn",t.modelAdditionals={};break;case"process":t.modelType="process",t.modelAdditionals={}}await q.executeUseCase(r.E,t),V.value=!1,e("close")}))}())},"IMPORT",12,E)])],64))}});var O=t(5701),q=t.n(O),F=t(8236),z=t.n(F),V=t(6080),_=t.n(V),U=t(6850),R=t.n(U),Y=t(7182),M=t.n(Y),S=t(9213),N=t.n(S),P=t(2205),Z={};Z.styleTagTransform=N(),Z.setAttributes=R(),Z.insert=_().bind(null,"head"),Z.domAPI=z(),Z.insertStyleElement=M(),q()(P.Z,Z),P.Z&&P.Z.locals&&P.Z.locals;const Q=(0,t(1419).Z)(j,[["__scopeId","data-v-adecc440"]])}}]);
//# sourceMappingURL=357.js.map