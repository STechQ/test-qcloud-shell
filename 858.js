"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[858],{93678:(n,t,e)=>{e.d(t,{Z:()=>l});var o=e(34663),i=e.n(o),a=e(7638),s=e.n(a)()(i());s.push([n.id,"\n.step-row[data-v-6fffa140] {\n  display: inline-block;\n  width: 1302px;\n  height: 40px;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  /* UI Properties */\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  opacity: 1;\n}\n.step-row-info[data-v-6fffa140] {\n  cursor: pointer;\n}\n.step-icon[data-v-6fffa140] {\n  margin-left: 20px;\n  width: 32px;\n  float: left;\n}\n#play-icon[data-v-6fffa140] {\n  color: #BCBCBC;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  cursor: pointer;\n}\n.log-container[data-v-6fffa140] {\n  display: block;\n  margin-left: 52px;\n  height: 88px;\n  width: 883px;\n  overflow: auto;\n}\n.log-container[data-v-6fffa140]::-webkit-scrollbar {\n  display: none;\n}\n.log-text[data-v-6fffa140] {\n  display: block;\n  width: 883px;\n  font-size: smaller;\n  font-weight: 600;\n  font-family: monospace;\n}\n.pipeline-started-container[data-v-6fffa140] {\n  align-content: center;\n  display: grid;\n  height: 69px;\n  margin-top: 8px;\n  padding-left: 20px;\n  background: white;\n}\n.deployment-completed-container[data-v-6fffa140] {\n  height: 114px;\n  margin-top: 8px;\n  padding-left: 20px;\n  background: white;\n}\n.pipeline-started-text[data-v-6fffa140] {\n  display: block;\n  width: 883px;\n  font: normal normal normal 14/20px Roboto;\n  letter-spacing: 0px;\n  color: #616161;\n  padding-left: 30px;\n}\n.mdi-timer-sand[data-v-6fffa140] {\n  color: #A1A1A1;\n}\n.mdi-arrow-up-circle-outline[data-v-6fffa140] {\n  color: #449DD1;\n}\n.mdi-check-circle-outline[data-v-6fffa140] {\n  color: #149911;\n}\n.mdi-close-circle-outline[data-v-6fffa140] {\n  color: #DF2935;\n}\n.deployment-complete-info-btn[data-v-6fffa140] {\n  display: inline-flex;\n  height: 48px;\n  padding: 8px 12px;\n  align-items: center;\n  gap: 4px;\n  flex-shrink: 0;\n  cursor: pointer;\n  border-radius: 4px;\n  background: var(--grey-lighten-4, #EEE);\n}\n.deployment-complete-info-btn > i > span[data-v-6fffa140] {\n  color: var(--text-color, #212121);\n  text-align: center;\n  font-family: Roboto;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: normal;\n  text-transform: capitalize;\n}\n.grid-container[data-v-6fffa140] {\n  display: grid;\n  grid-template-columns: auto auto auto;\n  justify-content: start;\n  align-items: center;\n}\n.grid-item[data-v-6fffa140] {\n  padding: 15px;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/publish/components/rowInformationContainer.vue"],names:[],mappings:";AAsKA;EACE,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;EACnB,kBAAkB;EAClB,+CAA+C;EAC/C,UAAU;AACZ;AACA;EACE,eAAe;AACjB;AACA;EACE,iBAAiB;EACjB,WAAW;EACX,WAAW;AACb;AAEA;EACE,cAAc;EACd,iBAAiB;EACjB,oBAAoB;EACpB,eAAe;AACjB;AAEA;EACE,cAAc;EACd,iBAAiB;EACjB,YAAY;EACZ,YAAY;EACZ,cAAc;AAChB;AAEA;EACE,aAAa;AACf;AAEA;EACE,cAAc;EACd,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;AACxB;AAEA;EACE,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,eAAe;EACf,kBAAkB;EAClB,iBAAiB;AACnB;AAEA;EACE,aAAa;EACb,eAAe;EACf,kBAAkB;EAClB,iBAAiB;AACnB;AAEA;EACE,cAAc;EACd,YAAY;EACZ,yCAAyC;EACzC,mBAAmB;EACnB,cAAc;EACd,kBAAkB;AACpB;AAGA;EACE,cAAc;AAChB;AAEA;EACE,cAAc;AAChB;AAEA;EACE,cAAc;AAChB;AAEA;EACE,cAAc;AAChB;AAEA;EACE,oBAAoB;EACpB,YAAY;EACZ,iBAAiB;EACjB,mBAAmB;EACnB,QAAQ;EACR,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,uCAAuC;AACzC;AAEA;EACE,iCAAiC;EACjC,kBAAkB;EAClB,mBAAmB;EACnB,eAAe;EACf,kBAAkB;EAClB,gBAAgB;EAChB,mBAAmB;EACnB,0BAA0B;AAC5B;AAEA;EACE,aAAa;EACb,qCAAqC;EACrC,sBAAsB;EACtB,mBAAmB;AACrB;AAEA;EACE,aAAa;AACf",sourcesContent:['<script setup lang="ts">\nimport { defineAsyncComponent, ref } from \'vue\';\nimport { DeployType, IBuildJobData, IExportJobHistoryDbItem, StatusType } from \'../../../../../../../../common/qCloudTemp/exporter\';\nimport { container } from "../../../../../../domain/core/diContainer";\nimport { IQCloudApi, IlistExportJobStepLogsResponse } from \'../../../../../../domain/infrastructure/IQCloudApi\';\nimport { IUseCaseExecutor } from \'../../../../../../domain/useCase/IUseCaseExecutor\';\nimport { IDialog } from \'../../../../../../domain/presentation/IDialog\';\n\ninterface IStep {\n  ID: string;\n  name: string;\n  status: StatusType;\n  groupID: string;\n  appID: string;\n  cloudProvider: IExportJobHistoryDbItem["cloudProvider"];\n}\n\ninterface IDeployedPackageUrl {\n  name: string,\n  type: DeployType,\n  url: string\n}\n\nconst qcloudApi = container.resolve<IQCloudApi>(IQCloudApi);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst dialog = container.resolve<IDialog>(IDialog);\nconst showLog = ref(false);\nconst logs = ref(Array<string>());\nconst props = defineProps<IStep>();\nconst hosts = ref(Array<IDeployedPackageUrl>());\nconst customSteps = ["Pipeline Started", "Deployment Completed"]\nconst isUsingIAM = ref(false);\n\n\nasync function changeShowLog() {\n  if (props.status == "waiting" || (props.name == "Deployment Completed" && props.status != \'success\'))\n    return\n\n  if (!showLog.value) {\n    await executor.execute(\n      async () => {\n        let resp: IlistExportJobStepLogsResponse = await qcloudApi.listExportJobStepLogs(props.ID);\n        if (resp.logs) {\n          logs.value = resp.logs\n        }\n      },\n      { loading: true }\n    );\n  }\n\n  if (props.name == "Deployment Completed"){\n    hosts.value = await getDeploymentResult();\n  }\n\n  showLog.value = !showLog.value\n}\n\nfunction calculateRowHeight() {\n  if (!showLog.value)\n    return "40px";\n\n  switch (props.name) {\n    case "Pipeline Started":\n      return "109px";\n    case "Deployment Completed":\n      return "152px";\n    default:\n      return "126px";\n  }\n}\n\nasync function getDeploymentResult() {\n  let hosts = Array<IDeployedPackageUrl>();\n  await executor.execute(async () => {\n    const application = await qcloudApi.getApplication(props.appID);\n\n    if(props.cloudProvider == "azure" && application.cloud?.azure){\n      hosts.push({url: application.cloud.azure.dnsEndpoint!, name: application.name, "type": "application" })\n      return\n    }\n\n    if (props.cloudProvider == "plateauGCP" && application.cloud?.plateauGCP){\n      const jobs = await qcloudApi.getExportJobsByGroupId({ groupID: props.groupID }).then(res => res.jobs);\n\n      const buildPackages = jobs.filter(e => e.layer == 1).map(e => (e.jobData as IBuildJobData).package);\n\n      const gcpHosts = application.cloud.plateauGCP.hosts\n      if (!gcpHosts) return;\n\n      hosts.push({name:\'ui\', type: \'application\', url:`http://${gcpHosts.find(e => e.startsWith(\'ui.\'))}`  })\n\n      buildPackages.forEach(buildPack => {\n        const url = gcpHosts.find(gcpHosts => gcpHosts.startsWith(`${buildPack.name}.`))\n        if(url)\n          hosts.push({ name: buildPack.name, type: buildPack.type, url: `http://${url}/swagger-ui.html#/`})\n      })\n\n      isUsingIAM.value = gcpHosts.some(hosts => hosts.startsWith(\'identity-provider.\'));\n    }\n  }, { loading: true });\n\n  return hosts;\n}\n\nfunction openInNewTab(url: string) {\n    window.open(url, \'_blank\', \'noreferrer\');\n}\n\nfunction openPlaygroundUserCredentialsDialog() {\n    dialog.showDialog(\n        defineAsyncComponent(() => import(`../userCredentialsDialog.vue`)),\n        { closable: true, title: "Playground User Credentials", width: "700px", height: "450px" }\n    );\n}\n<\/script>\n<template>\n  <div class="step-row" :style="{ background: (showLog ? \'#EEEEEE\' : \'#FFFFFF\'), height: calculateRowHeight() }">\n    <div @click="changeShowLog()" class="step-row-info">\n      <span class="step-icon">\n        <i id="play-icon" class="mdi mdi-play" v-if="!showLog"></i>\n        <i id="play-icon" class="mdi mdi-menu-down" v-else></i>\n      </span>\n      <span style="margin-right: 4px;">\n        <i class="mdi mdi-timer-sand" v-if="props.status == \'waiting\'"></i>\n        <i class="mdi mdi-arrow-up-circle-outline" v-else-if="props.status == \'running\'"></i>\n        <i class="mdi mdi-check-circle-outline" v-else-if="props.status == \'success\'"></i>\n        <i class="mdi mdi-close-circle-outline" v-else-if="props.status == \'failed\'"></i>\n      </span>\n      <span>{{ props.name }}</span>\n    </div>\n    <div style="background-color: white; margin-top: 8px;">\n      <div class="log-container" v-if="showLog && !customSteps.includes(props.name)">\n        <span class="log-text" v-for="log in logs" :key="log">{{ log }}</span>\n      </div>\n    </div>\n    <div class="pipeline-started-container" v-if="showLog && props.name == \'Pipeline Started\'">\n      <span  class="pipeline-started-text">\n        You can see the pipeline status by going to this link.\n        <a href="http://jenkins.rally.softtech/job/deploy-gke-V2-3-0/" target="_blank" rel="noreferrer"> GO TO LINK</a>\n      </span>\n    </div>\n    <div v-if="showLog && props.name == \'Deployment Completed\'" class="deployment-completed-container">\n      <div class="grid-container">\n        <div class="grid-item" v-if="isUsingIAM">\n          <span class="deployment-complete-info-btn" @click="openPlaygroundUserCredentialsDialog">\n            <i style="display: flex;flex-direction: column;justify-content: center;align-items: center;gap: 10px;" class="mdi mdi-card-account-details-outline"></i>\n                <span>\n                    Playground User Credentials\n                </span>\n          </span>\n        </div>\n        <div v-for="host in hosts">\n          <div class="grid-item" style="padding-top: 12px;">\n            <span class="deployment-complete-info-btn" style="background: white;" @click="openInNewTab(host.url)">\n              <i style="display: flex;flex-direction: column;justify-content: center;align-items: center;gap: 10px;" class="mdi mdi-link-variant"></i>\n              <span :href="host.url" target="_blank" rel="noreferrer">{{ host.name.toLocaleUpperCase() }} {{ host.type== "application" ? "Application" : "Service" }}</span>\n            </span>\n          </div>\n        </div>\n        <tr>\n        </tr>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped>\n.step-row {\n  display: inline-block;\n  width: 1302px;\n  height: 40px;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  /* UI Properties */\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  opacity: 1;\n}\n.step-row-info {\n  cursor: pointer;\n}\n.step-icon {\n  margin-left: 20px;\n  width: 32px;\n  float: left;\n}\n\n#play-icon {\n  color: #BCBCBC;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  cursor: pointer;\n}\n\n.log-container {\n  display: block;\n  margin-left: 52px;\n  height: 88px;\n  width: 883px;\n  overflow: auto;\n}\n\n.log-container::-webkit-scrollbar {\n  display: none;\n}\n\n.log-text {\n  display: block;\n  width: 883px;\n  font-size: smaller;\n  font-weight: 600;\n  font-family: monospace;\n}\n\n.pipeline-started-container {\n  align-content: center;\n  display: grid;\n  height: 69px;\n  margin-top: 8px;\n  padding-left: 20px;\n  background: white;\n}\n\n.deployment-completed-container {\n  height: 114px;\n  margin-top: 8px;\n  padding-left: 20px;\n  background: white;\n}\n\n.pipeline-started-text {\n  display: block;\n  width: 883px;\n  font: normal normal normal 14/20px Roboto;\n  letter-spacing: 0px;\n  color: #616161;\n  padding-left: 30px;\n}\n\n\n.mdi-timer-sand {\n  color: #A1A1A1;\n}\n\n.mdi-arrow-up-circle-outline {\n  color: #449DD1;\n}\n\n.mdi-check-circle-outline {\n  color: #149911;\n}\n\n.mdi-close-circle-outline {\n  color: #DF2935;\n}\n\n.deployment-complete-info-btn {\n  display: inline-flex;\n  height: 48px;\n  padding: 8px 12px;\n  align-items: center;\n  gap: 4px;\n  flex-shrink: 0;\n  cursor: pointer;\n  border-radius: 4px;\n  background: var(--grey-lighten-4, #EEE);\n}\n\n.deployment-complete-info-btn > i > span {\n  color: var(--text-color, #212121);\n  text-align: center;\n  font-family: Roboto;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: normal;\n  text-transform: capitalize;\n}\n\n.grid-container {\n  display: grid;\n  grid-template-columns: auto auto auto;\n  justify-content: start;\n  align-items: center;\n}\n\n.grid-item {\n  padding: 15px;\n}\n</style>\n'],sourceRoot:""}]);const l=s},58868:(n,t,e)=>{e.d(t,{Z:()=>l});var o=e(34663),i=e.n(o),a=e(7638),s=e.n(a)()(i());s.push([n.id,'\n.content-header[data-v-5870f4ff] {\n  /* Layout Properties */\n  display: flex;\n  margin-top: 96px;\n  margin-left: auto;\n  margin-right: auto;\n  width: 90%;\n  height: 120px;\n  /* UI Properties */\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  border: 1px solid #BCBCBC;\n  border-radius: 4px;\n  opacity: 1;\n}\n.tabs[data-v-5870f4ff] {\n  margin-top: 12px;\n  margin-left: auto;\n  margin-right: auto;\n  width: 90%;\n  height: 90%;\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  border: 1px solid #BCBCBC;\n  border-radius: 4px;\n  opacity: 1;\n}\n.prev-button[data-v-5870f4ff] {\n  margin-left: 17px;\n  opacity: 1;\n  cursor: pointer;\n}\n.app-name[data-v-5870f4ff] {\n  margin-left: 9px;\n  text-align: left;\n  font: normal normal normal 15px/20px Roboto;\n  letter-spacing: 0px;\n  color: #616161;\n  opacity: 1;\n}\n.progress-details-text[data-v-5870f4ff] {\n  /* UI Properties */\n  padding-left: 12px;\n  font-style: normal;\n  font-weight: 500;\n  ;\n  font-family: Roboto;\n  letter-spacing: 0;\n  color: #212121;\n  text-align: left;\n  opacity: 1;\n}\n\n/* tab */\n.bar[data-v-5870f4ff] {\n  margin-top: 32px;\n  margin-left: 32px;\n  margin-bottom: 20px;\n}\n.bar input[type="radio"][data-v-5870f4ff] {\n  opacity: 0;\n  position: fixed;\n  width: 93px;\n  height: 21px;\n  cursor: pointer;\n}\n.bar label[data-v-5870f4ff] {\n  text-align: left;\n  font: normal normal medium 16px/21px Roboto;\n  font-weight: 500;\n  letter-spacing: 0px;\n  color: #A1A1A1;\n  opacity: 1;\n  margin-right: 28px;\n}\n.bar input[type="radio"]:checked+label[data-v-5870f4ff] {\n  color: #151233;\n  border-bottom: solid;\n  border-bottom-color: #151233;\n}\n\n/* tab content */\n.tab-content[data-v-5870f4ff] {\n  padding: 10px 56px 0;\n}\n.refresh-table-button[data-v-5870f4ff] {\n  display: flex;\n  width: 150px;\n  height: 32px;\n  background: #CBCBCB;\n  color: #212121;\n  border-radius: 4px;\n  opacity: 1;\n  border: none;\n  font-family: \'ROBOTO\';\n  font-style: normal;\n  font-size: 14px;\n  font-weight: 500;\n  letter-spacing: 0.02px;\n  text-transform: uppercase;\n  padding-top: 6px;\n  padding-left: 12px;\n}\n\n/* table */\n.data-table[data-v-5870f4ff] {\n  padding-top: 18px;\n  height: 311px;\n}\n.table-header-text[data-v-5870f4ff] {\n  padding-top: 11px;\n  color: #373737;\n  font-size: 13px;\n  font-family: "Roboto";\n  font-weight: 500;\n  width: 100%;\n}\n.table-header[data-v-5870f4ff] {\n  display: flex;\n  /* position: absolute; */\n  /* width: 100%; */\n  height: 40px;\n  background: #e3e3e3 0% 0% no-repeat padding-box;\n  /* grid-template-columns: 423px 230px 223px 152px 200px;\n  z-index: 1; */\n}\n.table-body[data-v-5870f4ff] {\n  /* min-height: 291px;\n  max-height: 612px; */\n  overflow-y: auto;\n  overflow-x: hidden;\n  height: 100%;\n}\n.table-body[data-v-5870f4ff]::-webkit-scrollbar {\n  display: none;\n}\n.table-row[data-v-5870f4ff] {\n  /* display: grid; */\n  display: inline-block;\n  width: 100%;\n  opacity: 1;\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  border: 1px solid #E3E3E3;\n  /* grid-template-columns: 423px 230px 219px 20px 136px 200px 39px; */\n}\n.table-row-info[data-v-5870f4ff] {\n  cursor: pointer;\n}\n.table-row-text[data-v-5870f4ff] {\n  padding-top: 13px;\n  padding-bottom: 13px;\n  color: #212121;\n  font-size: 14px;\n  font-family: "Roboto";\n  font-weight: 300;\n}\n.download-artifact-text[data-v-5870f4ff] {\n  color: #616161;\n  font-size: 14px;\n  font-family: "Roboto";\n  font-weight: 300;\n}\n.row-down-icon[data-v-5870f4ff] {\n  width: 2%;\n  display: flex;\n  cursor: pointer;\n}\n.icon-container[data-v-5870f4ff] {\n  margin: 30px 20px 30px 30px;\n  width: 60px;\n  height: 60px;\n  border: 1px solid #ECEFF1;\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  border-radius: 50%;\n  opacity: 1;\n  display: flex;\n}\n.icon-container.small[data-v-5870f4ff] {\n  width: 18px;\n  height: 18px;\n  margin: 0px;\n  margin-left: 36px;\n}\n.content-header-text-container[data-v-5870f4ff] {\n  padding: 30px;\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: column;\n}\n\n/* #top-label, #bottom-label {\n    position:absolute;\n} */\n#top-label[data-v-5870f4ff] {\n\n  display: flex;\n  flex-direction: row;\n  text-align: left;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 24px;\n  font-family: Roboto;\n  letter-spacing: 0px;\n  color: #212121;\n  opacity: 1;\n}\n#bottom-label[data-v-5870f4ff] {\n  font-style: normal;\n  font-weight: 500;\n  font-size: 20px;\n  font-family: Roboto;\n  text-align: left;\n  letter-spacing: 0px;\n  color: #757575;\n  opacity: 1;\n}\n.row-information-container[data-v-5870f4ff] {\n  display: block;\n  height: auto;\n  width: 1304px;\n}\n.table-row-status-icon[data-v-5870f4ff] {\n  height: 13px;\n  width: 13px;\n}\n.table-row-status[data-v-5870f4ff] {\n  margin-top: 12px;\n}\n.mdi-timer-sand[data-v-5870f4ff] {\n  color: #A1A1A1;\n}\n.mdi-arrow-up-circle-outline[data-v-5870f4ff] {\n  color: #449DD1;\n}\n.mdi-check-circle-outline[data-v-5870f4ff] {\n  color: #149911;\n}\n.mdi-close-circle-outline[data-v-5870f4ff] {\n  color: #DF2935;\n}\n.chevronIcon[data-v-5870f4ff] {\n  cursor: pointer;\n}\n.profile-icon[data-v-5870f4ff] {\n  color: #909090;\n}\n.dropdown[data-v-5870f4ff] {\n  position: relative;\n  display: inline-block;\n}\n.artifactDownloadBtn[data-v-5870f4ff] {\n  display: inline-flex;\n  background-color: #151233;\n  width: 138px;\n  height: 32px;\n  border-radius: 4px;\n  opacity: 1;\n  color: white;\n}\n.dropdown-content[data-v-5870f4ff] {\n  display: block;\n  position: absolute;\n  background-color: #FFFFFF;\n  min-width: 138px;\n  height: 32px;\n  z-index: 1;\n  left: 230px;\n  border: 1px solid #A1A1A1;\n  box-shadow: 2px 2px 4px #00000029;\n  border-radius: 4px;\n}\n.dropdown-content span[data-v-5870f4ff] {\n  height: 30px;\n  display: block;\n  padding-left: 10px;\n  padding-top: 3px;\n  cursor: pointer;\n}\n.dropdown-content span[data-v-5870f4ff]:hover {\n  background-color: #ECEFF1;\n}\n.artifactIcons[data-v-5870f4ff] {\n  padding-right: 8px;\n  cursor: pointer;\n}\n.mdi-monitor[data-v-5870f4ff]::before {\n  font-size: 18px;\n  line-height: initial;\n}\n.mdi-apple-ios[data-v-5870f4ff]::before {\n  font-size: 18px;\n  line-height: initial;\n}\n.mdi-android[data-v-5870f4ff]::before {\n  font-size: 18px;\n  line-height: initial;\n}\n',"",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/publish/publishHistory.vue"],names:[],mappings:"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",sourcesContent:['<script setup lang="ts">\nimport { ref, reactive, watch, onMounted, onUnmounted } from "vue";\nimport RowInformationContainer from "./components/rowInformationContainer.vue"\nimport { container } from "../../../../../domain/core/diContainer";\nimport { IQCloudApi } from "../../../../../domain/infrastructure/IQCloudApi";\nimport { IViewModel } from "../../../../../domain/viewModel/IViewModel";\nimport { IExportJobHistoryDbItem, IPlatformSelection, StatusType } from "../../../../../../../common/qCloudTemp/exporter";\nimport { IUseCaseExecutor } from "../../../../../domain/useCase/IUseCaseExecutor";\nimport { IExportJobArtifactInfoItem } from "../../../../../domain/model/models";\nimport { IConfig } from "../../../../../domain/infrastructure/IConfig";\nimport { INetwork } from "../../../../../domain/infrastructure/INetwork";\n\ninterface IPublisHistoryProps {\n  showingTab: "publish" | "download";\n}\n\ninterface Step {\n  ID: string;\n  name: string;\n  status: StatusType;\n}\ninterface PublishHistoryTableRow {\n  title: string;\n  createDate: string;\n  createdBy: string;\n  status: string;\n  platform: IPlatformSelection;\n  steps: Array<Step>;\n  showInformation: boolean;\n  isMultiStepJob: boolean;\n  cloudProvider: IExportJobHistoryDbItem["cloudProvider"];\n}\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst config = container.resolve<IConfig>(IConfig);\nconst network = container.resolve<INetwork>(INetwork);\nconst qcloudApi = container.resolve<IQCloudApi>(IQCloudApi);\nconst viewModel = container.resolve<IViewModel>(IViewModel);\n\nconst props = defineProps<IPublisHistoryProps>()\nconst showingTab = ref(props.showingTab || "publish");\nconst tableData = ref<Array<PublishHistoryTableRow>>();\nconst tableHeaders = [\n  { name: "Title", style: "padding-left:20px; width: 25%" },\n  { name: "Create Date", style: "width: 20%" },\n  { name: "Created By", style: "width: 20%" },\n  { name: "Status", style: "width: 13%" },\n  { name: "Platform", style: "width: 20%" },\n];\nconst artifactListVisible = ref(false)\nconst artifactsMap = reactive(new Map<string, Array<IExportJobArtifactInfoItem>>());\n\nwatch(() => showingTab.value, (_new, _old) => {\n  getApplicationJobHistory();\n})\n\nonMounted(() => {\n    arrangeHeights();\n    window.addEventListener("resize", arrangeHeights);\n})\nonUnmounted(() => {\n  window.removeEventListener("resize", arrangeHeights);\n})\nfunction arrangeHeights() {\n  document.getElementById("job-history-tabs")!.style.height = (window.innerHeight - 246).toString() + \'px\';\n  document.getElementById("job-history-data-table")!.style.height = (window.innerHeight - 430).toString() + \'px\';\n}\nconst getApplicationJobHistory = async () => {\n  executor.execute(\n    async () => {\n      let historyList: Array<IExportJobHistoryDbItem> = await qcloudApi.listApplicationJobHistory({ applicationID: viewModel.studio.appId, type: showingTab.value });\n      let openedRows: Map<string, Array<Step>> = new Map();\n\n      let currentlyOpenedRows = tableData.value?.filter(e => e.showInformation);\n      if (currentlyOpenedRows)\n        for await (const e of currentlyOpenedRows) {\n          let steps = await getListExportJobSteps(e.title, e.isMultiStepJob);\n          openedRows.set(e.title, steps)\n        }\n\n      tableData.value = historyList.map(e => {\n        const isRowOpened = openedRows.has(e.ID);\n\n        return {\n          title: e.ID,\n          createDate: dateFormat(new Date(e.createDate)),\n          createdBy: e.createdBy,\n          status: e.status,\n          platform: e.status == "success" ? e.platform : undefined,\n          steps: isRowOpened ? openedRows.get(e.ID) : [],\n          showInformation: isRowOpened,\n          isMultiStepJob: e.isMultiStep,\n          cloudProvider: e.cloudProvider\n        } as PublishHistoryTableRow\n      })\n    },\n    { loading: true }\n  );\n}\n\ngetApplicationJobHistory();\n\nfunction dateFormat(date: Date) {\n  return `${date.toLocaleDateString("en-US", {day: "2-digit", month: "2-digit", year: "numeric"}).replace(/\\//g, ".")}, ${date.toLocaleString("en-US", {second: "2-digit", minute: "2-digit", hour: "2-digit", hourCycle: "h24"})}`;\n}\n\nasync function openCloseRow(row: PublishHistoryTableRow) {\n  if (row.status == "waiting")\n    return\n\n  if (row.showInformation) {\n    row.showInformation = false;\n    return;\n  }\n\n  executor.execute(\n    async () => {\n      row.steps = await getListExportJobSteps(row.title, row.isMultiStepJob);\n      if (showingTab.value == "download" && row.status == "success") {\n        await getArtifacts(row);\n      }\n    },\n    { loading: true }\n  );\n\n  row.showInformation = !row.showInformation;\n}\n\nasync function getListExportJobSteps(ID: string, isMultiStep: boolean) {\n  let jobSteps = await qcloudApi.listExportJobSteps(ID, isMultiStep);\n  return jobSteps.map(e => {\n    return {\n      ID: e.ID,\n      name: e.name,\n      status: e.status\n    } as Step\n  });\n}\n\nasync function refreshTable() {\n  await getApplicationJobHistory();\n}\n\n// download artifacts\nasync function getArtifacts(row: PublishHistoryTableRow) {\n  if (!artifactsMap.has(row.title)) {\n    const artifacts = await qcloudApi.listExportJobArtifacts(row.title);\n    if (artifacts && artifacts.length > 0) {\n      artifactsMap.set(row.title, artifacts);\n    }\n  }\n\n}\n\nfunction computedArtifact(type: string) {\n  switch (type) {\n    case \'web\':\n      return \'mdi mdi-monitor artifactIcons\';\n    case \'ios\':\n      return \'mdi mdi-apple-ios artifactIcons\';\n    case \'android\':\n      return \'mdi mdi-android artifactIcons\';\n    default:\n      break;\n  }\n}\n\nfunction getArtifactLink(artifact: IExportJobArtifactInfoItem) {\n  const token = viewModel.user!.authorization;\n  const { objectName } = artifact.details;\n  const url = config.getValue("providerApiUrl");\n  return network.join(url, `/minio/getExportJobArtifact?objectName=${objectName}&t=${token}`);\n}\n\n\nfunction downloadArtifact(artifact: IExportJobArtifactInfoItem) {\n  const a = document.createElement("a");\n  a.href = getArtifactLink(artifact);\n  a.target = "new";\n  a.download = "download";\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n}\n\nasync function showArtifactsBtnClicked(row: PublishHistoryTableRow) {\n  await getArtifacts(row);\n  artifactListVisible.value = !artifactListVisible.value;\n}\n<\/script>\n\n<template>\n  <div class="content-header">\n    \x3c!-- <div class="icon-container">\n      <img src="../../../../../../src/images/is-bankasi-logo.jpg" alt="is-bankasi-logo" class="header-logo" width="57"\n        height="57" />\n    </div> --\x3e\n    <div class="content-header-text-container">\n      <label id="top-label">{{ viewModel.studio.appName }}</label>\n      <label id="bottom-label">You can see application {{ showingTab }} history in here.</label>\n    </div>\n\n  </div>\n  <div class="tabs" id="job-history-tabs">\n    <div class="bar">\n      <input type="radio" id="publishJobTab" name="bar" :checked="showingTab == \'publish\'"\n        @change="showingTab = \'publish\'" />\n      <label for="publishJobTab">Publish Jobs</label>\n\n      <input type="radio" id="downloadsTab" name="bar" :checked="showingTab == \'download\'"\n        @change="showingTab = \'download\'" />\n      <label for="downloadsTab">Downloads</label>\n    </div>\n    <div class="tab-content">\n      <button class=\'refresh-table-button\' @click="refreshTable">\n        <i class="mdi mdi-refresh" style="margin-right: 3px;"></i>\n        Refresh Table\n      </button>\n      <div class="data-table" id="job-history-data-table">\n        <div class="table-header">\n          <span v-for="header in tableHeaders" :key="header.name" :class="(\'table-header-text\')" :style="header.style"> {{ header.name }}\n          </span>\n        </div>\n        <div class="table-body">\n          <div class="table-row" v-for="row in tableData" :key="row.title">\n            <div @click="openCloseRow(row)" class="table-row-info">\n              <span class=\'table-row-text\' style="padding-left: 20px;width:25% ;float: left;">{{ row.title }}</span>\n              <span class=\'table-row-text\' style="width: 20%; float: left;">{{ row.createDate }}</span>\n              <span class=\'table-row-text\' style="width: 20%; float: left;">{{ row.createdBy }}</span>\n              <span class="table-row-status" style="float: left; width: 2%;">\n                <i class="mdi mdi-timer-sand table-row-status-icon" v-if="row.status == \'waiting\'"></i>\n                <i class="mdi mdi-arrow-up-circle-outline table-row-status-icon" v-else-if="row.status == \'running\'"></i>\n                <i class="mdi mdi-check-circle-outline table-row-status-icon" v-else-if="row.status == \'success\'"></i>\n                <i class="mdi mdi-close-circle-outline table-row-status-icon" v-else-if="row.status == \'failed\'"></i>\n              </span>\n              <span class=\'table-row-text\' style="float: left;width: 11%;">{{ row.status }}</span>\n              <span class=\'table-row-text\' style="float: left;width: 20%;">\n                <i class="mdi mdi-monitor" v-if="row.status == \'success\' && row.platform?.web"></i>\n                <i class="mdi mdi-apple-ios" style="padding-left: 8px;" v-if="row.status == \'success\' && row.platform?.mobile"></i>\n                \x3c!-- <i class="mdi mdi-android" v-else-if="row.status == \'success\' && row.platform == \'android\'"></i> --\x3e\n                <span v-if="row.status != \'success\' || !row.platform || (!row.platform?.web && !row.platform?.mobile)">-</span>\n              </span>\n              <span class=\'row-down-icon\'>\n                <i class="mdi mdi-chevron-down" style="padding-top: 13px;" v-if="!row.showInformation"></i>\n                <i class="mdi mdi-chevron-up" style="padding-top: 13px;" v-else></i>\n              </span>\n            </div>\n            <div :id="row.title" class="row-information-container" v-if="row.showInformation">\n              <RowInformationContainer v-for="step in row.steps" :key="step.ID" :ID="step.ID" :name="step.name" :appID="viewModel.studio.appId"\n                :status="step.status" :groupID="row.title" :cloudProvider="row.cloudProvider" />\n              <div v-if="row.status == \'success\' && showingTab == \'download\'">\n                <hr style="margin: 0px 0px 0px 20px; width: 1264px;" />\n                <div\n                  style="height: 88px; height: 88px;float: right;padding-right: 44px;padding-top: 28px; position: relative;display: inline-block;">\n                  <span class="download-artifact-text">You can download this jobs artifacts. </span>\n                  <button @click="showArtifactsBtnClicked(row)" class="artifactDownloadBtn"><i\n                      class=\'mdi mdi-tray-arrow-down\' style="padding-right: 8px;"></i>DOWNLOAD <i\n                      class=\'mdi mdi-chevron-down\'></i></button>\n                  <div v-if="artifactListVisible">\n                    <div v-for="artifact in artifactsMap.get(row.title)" :key="artifact.ID"\n                      class="dropdown-content">\n                      <span @click="downloadArtifact(artifact)" class=\'artifactListItem\'><i\n                          :class="computedArtifact(artifact.type)"></i>{{ artifact.type\n                        }}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped>\n.content-header {\n  /* Layout Properties */\n  display: flex;\n  margin-top: 96px;\n  margin-left: auto;\n  margin-right: auto;\n  width: 90%;\n  height: 120px;\n  /* UI Properties */\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  border: 1px solid #BCBCBC;\n  border-radius: 4px;\n  opacity: 1;\n}\n\n.tabs {\n  margin-top: 12px;\n  margin-left: auto;\n  margin-right: auto;\n  width: 90%;\n  height: 90%;\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  border: 1px solid #BCBCBC;\n  border-radius: 4px;\n  opacity: 1;\n}\n\n.prev-button {\n  margin-left: 17px;\n  opacity: 1;\n  cursor: pointer;\n}\n\n\n.app-name {\n  margin-left: 9px;\n  text-align: left;\n  font: normal normal normal 15px/20px Roboto;\n  letter-spacing: 0px;\n  color: #616161;\n  opacity: 1;\n}\n\n.progress-details-text {\n  /* UI Properties */\n  padding-left: 12px;\n  font-style: normal;\n  font-weight: 500;\n  ;\n  font-family: Roboto;\n  letter-spacing: 0;\n  color: #212121;\n  text-align: left;\n  opacity: 1;\n}\n\n/* tab */\n.bar {\n  margin-top: 32px;\n  margin-left: 32px;\n  margin-bottom: 20px;\n}\n\n.bar input[type="radio"] {\n  opacity: 0;\n  position: fixed;\n  width: 93px;\n  height: 21px;\n  cursor: pointer;\n}\n\n.bar label {\n  text-align: left;\n  font: normal normal medium 16px/21px Roboto;\n  font-weight: 500;\n  letter-spacing: 0px;\n  color: #A1A1A1;\n  opacity: 1;\n  margin-right: 28px;\n}\n\n.bar input[type="radio"]:checked+label {\n  color: #151233;\n  border-bottom: solid;\n  border-bottom-color: #151233;\n}\n\n/* tab content */\n.tab-content {\n  padding: 10px 56px 0;\n}\n\n.refresh-table-button {\n  display: flex;\n  width: 150px;\n  height: 32px;\n  background: #CBCBCB;\n  color: #212121;\n  border-radius: 4px;\n  opacity: 1;\n  border: none;\n  font-family: \'ROBOTO\';\n  font-style: normal;\n  font-size: 14px;\n  font-weight: 500;\n  letter-spacing: 0.02px;\n  text-transform: uppercase;\n  padding-top: 6px;\n  padding-left: 12px;\n}\n\n/* table */\n.data-table {\n  padding-top: 18px;\n  height: 311px;\n}\n\n.table-header-text {\n  padding-top: 11px;\n  color: #373737;\n  font-size: 13px;\n  font-family: "Roboto";\n  font-weight: 500;\n  width: 100%;\n}\n\n.table-header {\n  display: flex;\n  /* position: absolute; */\n  /* width: 100%; */\n  height: 40px;\n  background: #e3e3e3 0% 0% no-repeat padding-box;\n  /* grid-template-columns: 423px 230px 223px 152px 200px;\n  z-index: 1; */\n}\n\n.table-body {\n  /* min-height: 291px;\n  max-height: 612px; */\n  overflow-y: auto;\n  overflow-x: hidden;\n  height: 100%;\n}\n\n.table-body::-webkit-scrollbar {\n  display: none;\n}\n\n.table-row {\n  /* display: grid; */\n  display: inline-block;\n  width: 100%;\n  opacity: 1;\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  border: 1px solid #E3E3E3;\n  /* grid-template-columns: 423px 230px 219px 20px 136px 200px 39px; */\n}\n.table-row-info {\n  cursor: pointer;\n}\n.table-row-text {\n  padding-top: 13px;\n  padding-bottom: 13px;\n  color: #212121;\n  font-size: 14px;\n  font-family: "Roboto";\n  font-weight: 300;\n}\n\n.download-artifact-text {\n  color: #616161;\n  font-size: 14px;\n  font-family: "Roboto";\n  font-weight: 300;\n}\n\n.row-down-icon {\n  width: 2%;\n  display: flex;\n  cursor: pointer;\n}\n\n.icon-container {\n  margin: 30px 20px 30px 30px;\n  width: 60px;\n  height: 60px;\n  border: 1px solid #ECEFF1;\n  background: #FFFFFF 0% 0% no-repeat padding-box;\n  border-radius: 50%;\n  opacity: 1;\n  display: flex;\n}\n\n.icon-container.small {\n  width: 18px;\n  height: 18px;\n  margin: 0px;\n  margin-left: 36px;\n}\n\n.content-header-text-container {\n  padding: 30px;\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: column;\n}\n\n/* #top-label, #bottom-label {\n    position:absolute;\n} */\n#top-label {\n\n  display: flex;\n  flex-direction: row;\n  text-align: left;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 24px;\n  font-family: Roboto;\n  letter-spacing: 0px;\n  color: #212121;\n  opacity: 1;\n}\n\n#bottom-label {\n  font-style: normal;\n  font-weight: 500;\n  font-size: 20px;\n  font-family: Roboto;\n  text-align: left;\n  letter-spacing: 0px;\n  color: #757575;\n  opacity: 1;\n}\n\n.row-information-container {\n  display: block;\n  height: auto;\n  width: 1304px;\n}\n\n.table-row-status-icon {\n  height: 13px;\n  width: 13px;\n}\n\n.table-row-status {\n  margin-top: 12px;\n}\n\n.mdi-timer-sand {\n  color: #A1A1A1;\n}\n\n.mdi-arrow-up-circle-outline {\n  color: #449DD1;\n}\n\n.mdi-check-circle-outline {\n  color: #149911;\n}\n\n.mdi-close-circle-outline {\n  color: #DF2935;\n}\n\n.chevronIcon {\n  cursor: pointer;\n}\n\n.profile-icon {\n  color: #909090;\n}\n\n.dropdown {\n  position: relative;\n  display: inline-block;\n}\n\n.artifactDownloadBtn {\n  display: inline-flex;\n  background-color: #151233;\n  width: 138px;\n  height: 32px;\n  border-radius: 4px;\n  opacity: 1;\n  color: white;\n}\n\n.dropdown-content {\n  display: block;\n  position: absolute;\n  background-color: #FFFFFF;\n  min-width: 138px;\n  height: 32px;\n  z-index: 1;\n  left: 230px;\n  border: 1px solid #A1A1A1;\n  box-shadow: 2px 2px 4px #00000029;\n  border-radius: 4px;\n}\n\n.dropdown-content span {\n  height: 30px;\n  display: block;\n  padding-left: 10px;\n  padding-top: 3px;\n  cursor: pointer;\n}\n\n.dropdown-content span:hover {\n  background-color: #ECEFF1;\n}\n\n.artifactIcons {\n  padding-right: 8px;\n  cursor: pointer;\n}\n\n.mdi-monitor::before {\n  font-size: 18px;\n  line-height: initial;\n}\n\n.mdi-apple-ios::before {\n  font-size: 18px;\n  line-height: initial;\n}\n\n.mdi-android::before {\n  font-size: 18px;\n  line-height: initial;\n}\n</style>\n'],sourceRoot:""}]);const l=s},30858:(n,t,e)=>{e.r(t),e.d(t,{default:()=>Wn});var o=e(71093),i=e(66190),a=e(73843),s=e(5627),l=e(28246),r=e(83487),p=e(91056);const d=n=>((0,o.dD)("data-v-6fffa140"),n=n(),(0,o.Cn)(),n),A={class:"step-icon"},c={key:0,id:"play-icon",class:"mdi mdi-play"},f={key:1,id:"play-icon",class:"mdi mdi-menu-down"},u={style:{"margin-right":"4px"}},g={key:0,class:"mdi mdi-timer-sand"},m={key:1,class:"mdi mdi-arrow-up-circle-outline"},h={key:2,class:"mdi mdi-check-circle-outline"},b={key:3,class:"mdi mdi-close-circle-outline"},C={style:{"background-color":"white","margin-top":"8px"}},w={key:0,class:"log-container"},x={key:0,class:"pipeline-started-container"},E=[d((()=>(0,o._)("span",{class:"pipeline-started-text"},[(0,o.Uk)(" You can see the pipeline status by going to this link. "),(0,o._)("a",{href:"http://jenkins.rally.softtech/job/deploy-gke-V2-3-0/",target:"_blank",rel:"noreferrer"}," GO TO LINK")],-1)))],y={key:1,class:"deployment-completed-container"},B={class:"grid-container"},v={key:0,class:"grid-item"},k=[d((()=>(0,o._)("i",{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",gap:"10px"},class:"mdi mdi-card-account-details-outline"},null,-1))),d((()=>(0,o._)("span",null," Playground User Credentials ",-1)))],I={class:"grid-item",style:{"padding-top":"12px"}},D=["onClick"],F=d((()=>(0,o._)("i",{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",gap:"10px"},class:"mdi mdi-link-variant"},null,-1))),S=["href"],U=d((()=>(0,o._)("tr",null,null,-1))),P=(0,o.aZ)({__name:"rowInformationContainer",props:{ID:null,name:null,status:null,groupID:null,appID:null,cloudProvider:null},setup(n){const t=n,d=s.nC.resolve(l.B),P=s.nC.resolve(r.y),_=s.nC.resolve(p.u),j=(0,a.iH)(!1),Y=(0,a.iH)(Array()),R=(0,a.iH)(Array()),z=["Pipeline Started","Deployment Completed"],H=(0,a.iH)(!1);function T(){if(!j.value)return"40px";switch(t.name){case"Pipeline Started":return"109px";case"Deployment Completed":return"152px";default:return"126px"}}function J(){_.showDialog((0,o.RC)((()=>e.e(596).then(e.bind(e,90596)))),{closable:!0,title:"Playground User Credentials",width:"700px",height:"450px"})}return(n,e)=>((0,o.wg)(),(0,o.iD)("div",{class:"step-row",style:(0,i.normalizeStyle)({background:j.value?"#EEEEEE":"#FFFFFF",height:T()})},[(0,o._)("div",{onClick:e[0]||(e[0]=n=>async function(){"waiting"==t.status||"Deployment Completed"==t.name&&"success"!=t.status||(j.value||await P.execute((async()=>{let n=await d.listExportJobStepLogs(t.ID);n.logs&&(Y.value=n.logs)}),{loading:!0}),"Deployment Completed"==t.name&&(R.value=await async function(){let n=Array();return await P.execute((async()=>{var e,o;const i=await d.getApplication(t.appID);if("azure"==t.cloudProvider&&(null===(e=i.cloud)||void 0===e?void 0:e.azure))n.push({url:i.cloud.azure.dnsEndpoint,name:i.name,type:"application"});else if("plateauGCP"==t.cloudProvider&&(null===(o=i.cloud)||void 0===o?void 0:o.plateauGCP)){const e=(await d.getExportJobsByGroupId({groupID:t.groupID}).then((n=>n.jobs))).filter((n=>1==n.layer)).map((n=>n.jobData.package)),o=i.cloud.plateauGCP.hosts;if(!o)return;n.push({name:"ui",type:"application",url:`http://${o.find((n=>n.startsWith("ui.")))}`}),e.forEach((t=>{const e=o.find((n=>n.startsWith(`${t.name}.`)));e&&n.push({name:t.name,type:t.type,url:`http://${e}/swagger-ui.html#/`})})),H.value=o.some((n=>n.startsWith("identity-provider.")))}}),{loading:!0}),n}()),j.value=!j.value)}()),class:"step-row-info"},[(0,o._)("span",A,[j.value?((0,o.wg)(),(0,o.iD)("i",f)):((0,o.wg)(),(0,o.iD)("i",c))]),(0,o._)("span",u,["waiting"==t.status?((0,o.wg)(),(0,o.iD)("i",g)):"running"==t.status?((0,o.wg)(),(0,o.iD)("i",m)):"success"==t.status?((0,o.wg)(),(0,o.iD)("i",h)):"failed"==t.status?((0,o.wg)(),(0,o.iD)("i",b)):(0,o.kq)("v-if",!0)]),(0,o._)("span",null,(0,i.toDisplayString)(t.name),1)]),(0,o._)("div",C,[j.value&&!z.includes(t.name)?((0,o.wg)(),(0,o.iD)("div",w,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Y.value,(n=>((0,o.wg)(),(0,o.iD)("span",{class:"log-text",key:n},(0,i.toDisplayString)(n),1)))),128))])):(0,o.kq)("v-if",!0)]),j.value&&"Pipeline Started"==t.name?((0,o.wg)(),(0,o.iD)("div",x,E)):(0,o.kq)("v-if",!0),j.value&&"Deployment Completed"==t.name?((0,o.wg)(),(0,o.iD)("div",y,[(0,o._)("div",B,[H.value?((0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("span",{class:"deployment-complete-info-btn",onClick:J},k)])):(0,o.kq)("v-if",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(R.value,(n=>((0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",I,[(0,o._)("span",{class:"deployment-complete-info-btn",style:{background:"white"},onClick:t=>{return e=n.url,void window.open(e,"_blank","noreferrer");var e}},[F,(0,o._)("span",{href:n.url,target:"_blank",rel:"noreferrer"},(0,i.toDisplayString)(n.name.toLocaleUpperCase())+" "+(0,i.toDisplayString)("application"==n.type?"Application":"Service"),9,S)],8,D)])])))),256)),U])])):(0,o.kq)("v-if",!0)],4))}});var _=e(17450),j=e.n(_),Y=e(29530),R=e.n(Y),z=e(16199),H=e.n(z),T=e(40458),J=e.n(T),q=e(62916),L=e.n(q),Z=e(92165),M=e.n(Z),W=e(93678),V={};V.styleTagTransform=M(),V.setAttributes=J(),V.insert=H().bind(null,"head"),V.domAPI=R(),V.insertStyleElement=L(),j()(W.Z,V),W.Z&&W.Z.locals&&W.Z.locals;var O=e(32525);const N=(0,O.Z)(P,[["__scopeId","data-v-6fffa140"]]);var G=e(88613),$=e(7952),Q=e(74454);const K=n=>((0,o.dD)("data-v-5870f4ff"),n=n(),(0,o.Cn)(),n),X={class:"content-header"},nn={class:"content-header-text-container"},tn={id:"top-label"},en={id:"bottom-label"},on={class:"tabs",id:"job-history-tabs"},an={class:"bar"},sn=["checked"],ln=K((()=>(0,o._)("label",{for:"publishJobTab"},"Publish Jobs",-1))),rn=["checked"],pn=K((()=>(0,o._)("label",{for:"downloadsTab"},"Downloads",-1))),dn={class:"tab-content"},An=K((()=>(0,o._)("i",{class:"mdi mdi-refresh",style:{"margin-right":"3px"}},null,-1))),cn={class:"data-table",id:"job-history-data-table"},fn={class:"table-header"},un={class:"table-body"},gn=["onClick"],mn={class:"table-row-text",style:{"padding-left":"20px",width:"25%",float:"left"}},hn={class:"table-row-text",style:{width:"20%",float:"left"}},bn={class:"table-row-text",style:{width:"20%",float:"left"}},Cn={class:"table-row-status",style:{float:"left",width:"2%"}},wn={key:0,class:"mdi mdi-timer-sand table-row-status-icon"},xn={key:1,class:"mdi mdi-arrow-up-circle-outline table-row-status-icon"},En={key:2,class:"mdi mdi-check-circle-outline table-row-status-icon"},yn={key:3,class:"mdi mdi-close-circle-outline table-row-status-icon"},Bn={class:"table-row-text",style:{float:"left",width:"11%"}},vn={class:"table-row-text",style:{float:"left",width:"20%"}},kn={key:0,class:"mdi mdi-monitor"},In={key:1,class:"mdi mdi-apple-ios",style:{"padding-left":"8px"}},Dn={key:2},Fn={class:"row-down-icon"},Sn={key:0,class:"mdi mdi-chevron-down",style:{"padding-top":"13px"}},Un={key:1,class:"mdi mdi-chevron-up",style:{"padding-top":"13px"}},Pn=["id"],_n={key:0},jn=K((()=>(0,o._)("hr",{style:{margin:"0px 0px 0px 20px",width:"1264px"}},null,-1))),Yn={style:{height:"88px",float:"right","padding-right":"44px","padding-top":"28px",position:"relative",display:"inline-block"}},Rn=K((()=>(0,o._)("span",{class:"download-artifact-text"},"You can download this jobs artifacts. ",-1))),zn=["onClick"],Hn=K((()=>(0,o._)("i",{class:"mdi mdi-tray-arrow-down",style:{"padding-right":"8px"}},null,-1))),Tn=K((()=>(0,o._)("i",{class:"mdi mdi-chevron-down"},null,-1))),Jn={key:0},qn=["onClick"],Ln=(0,o.aZ)({__name:"publishHistory",props:{showingTab:null},setup(n){const t=n,e=s.nC.resolve(r.y),p=s.nC.resolve($.E),d=s.nC.resolve(Q.m),A=s.nC.resolve(l.B),c=s.nC.resolve(G.J),f=(0,a.iH)(t.showingTab||"publish"),u=(0,a.iH)(),g=[{name:"Title",style:"padding-left:20px; width: 25%"},{name:"Create Date",style:"width: 20%"},{name:"Created By",style:"width: 20%"},{name:"Status",style:"width: 13%"},{name:"Platform",style:"width: 20%"}],m=(0,a.iH)(!1),h=(0,a.qj)(new Map);function b(){document.getElementById("job-history-tabs").style.height=(window.innerHeight-246).toString()+"px",document.getElementById("job-history-data-table").style.height=(window.innerHeight-430).toString()+"px"}(0,o.YP)((()=>f.value),((n,t)=>{C()})),(0,o.bv)((()=>{b(),window.addEventListener("resize",b)})),(0,o.Ah)((()=>{window.removeEventListener("resize",b)}));const C=async()=>{e.execute((async()=>{var n;let t=await A.listApplicationJobHistory({applicationID:c.studio.appId,type:f.value}),e=new Map,o=null===(n=u.value)||void 0===n?void 0:n.filter((n=>n.showInformation));if(o)for await(const n of o){let t=await w(n.title,n.isMultiStepJob);e.set(n.title,t)}u.value=t.map((n=>{const t=e.has(n.ID);return{title:n.ID,createDate:(o=new Date(n.createDate),`${o.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,".")}, ${o.toLocaleString("en-US",{second:"2-digit",minute:"2-digit",hour:"2-digit",hourCycle:"h24"})}`),createdBy:n.createdBy,status:n.status,platform:"success"==n.status?n.platform:void 0,steps:t?e.get(n.ID):[],showInformation:t,isMultiStepJob:n.isMultiStep,cloudProvider:n.cloudProvider};var o}))}),{loading:!0})};async function w(n,t){return(await A.listExportJobSteps(n,t)).map((n=>({ID:n.ID,name:n.name,status:n.status})))}async function x(){await C()}async function E(n){if(!h.has(n.title)){const t=await A.listExportJobArtifacts(n.title);t&&t.length>0&&h.set(n.title,t)}}function y(n){switch(n){case"web":return"mdi mdi-monitor artifactIcons";case"ios":return"mdi mdi-apple-ios artifactIcons";case"android":return"mdi mdi-android artifactIcons"}}return C(),(n,t)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",X,[(0,o.kq)(' <div class="icon-container">\n      <img src="../../../../../../src/images/is-bankasi-logo.jpg" alt="is-bankasi-logo" class="header-logo" width="57"\n        height="57" />\n    </div> '),(0,o._)("div",nn,[(0,o._)("label",tn,(0,i.toDisplayString)((0,a.SU)(c).studio.appName),1),(0,o._)("label",en,"You can see application "+(0,i.toDisplayString)(f.value)+" history in here.",1)])]),(0,o._)("div",on,[(0,o._)("div",an,[(0,o._)("input",{type:"radio",id:"publishJobTab",name:"bar",checked:"publish"==f.value,onChange:t[0]||(t[0]=n=>f.value="publish")},null,40,sn),ln,(0,o._)("input",{type:"radio",id:"downloadsTab",name:"bar",checked:"download"==f.value,onChange:t[1]||(t[1]=n=>f.value="download")},null,40,rn),pn]),(0,o._)("div",dn,[(0,o._)("button",{class:"refresh-table-button",onClick:x},[An,(0,o.Uk)(" Refresh Table ")]),(0,o._)("div",cn,[(0,o._)("div",fn,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(g,(n=>(0,o._)("span",{key:n.name,class:(0,i.normalizeClass)("table-header-text"),style:(0,i.normalizeStyle)(n.style)},(0,i.toDisplayString)(n.name),7))),64))]),(0,o._)("div",un,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,(n=>{var t,s,l,r;return(0,o.wg)(),(0,o.iD)("div",{class:"table-row",key:n.title},[(0,o._)("div",{onClick:t=>async function(n){"waiting"!=n.status&&(n.showInformation?n.showInformation=!1:(e.execute((async()=>{n.steps=await w(n.title,n.isMultiStepJob),"download"==f.value&&"success"==n.status&&await E(n)}),{loading:!0}),n.showInformation=!n.showInformation))}(n),class:"table-row-info"},[(0,o._)("span",mn,(0,i.toDisplayString)(n.title),1),(0,o._)("span",hn,(0,i.toDisplayString)(n.createDate),1),(0,o._)("span",bn,(0,i.toDisplayString)(n.createdBy),1),(0,o._)("span",Cn,["waiting"==n.status?((0,o.wg)(),(0,o.iD)("i",wn)):"running"==n.status?((0,o.wg)(),(0,o.iD)("i",xn)):"success"==n.status?((0,o.wg)(),(0,o.iD)("i",En)):"failed"==n.status?((0,o.wg)(),(0,o.iD)("i",yn)):(0,o.kq)("v-if",!0)]),(0,o._)("span",Bn,(0,i.toDisplayString)(n.status),1),(0,o._)("span",vn,["success"==n.status&&(null===(t=n.platform)||void 0===t?void 0:t.web)?((0,o.wg)(),(0,o.iD)("i",kn)):(0,o.kq)("v-if",!0),"success"==n.status&&(null===(s=n.platform)||void 0===s?void 0:s.mobile)?((0,o.wg)(),(0,o.iD)("i",In)):(0,o.kq)("v-if",!0),(0,o.kq)(" <i class=\"mdi mdi-android\" v-else-if=\"row.status == 'success' && row.platform == 'android'\"></i> "),"success"==n.status&&n.platform&&((null===(l=n.platform)||void 0===l?void 0:l.web)||(null===(r=n.platform)||void 0===r?void 0:r.mobile))?(0,o.kq)("v-if",!0):((0,o.wg)(),(0,o.iD)("span",Dn,"-"))]),(0,o._)("span",Fn,[n.showInformation?((0,o.wg)(),(0,o.iD)("i",Un)):((0,o.wg)(),(0,o.iD)("i",Sn))])],8,gn),n.showInformation?((0,o.wg)(),(0,o.iD)("div",{key:0,id:n.title,class:"row-information-container"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.steps,(t=>((0,o.wg)(),(0,o.j4)(N,{key:t.ID,ID:t.ID,name:t.name,appID:(0,a.SU)(c).studio.appId,status:t.status,groupID:n.title,cloudProvider:n.cloudProvider},null,8,["ID","name","appID","status","groupID","cloudProvider"])))),128)),"success"==n.status&&"download"==f.value?((0,o.wg)(),(0,o.iD)("div",_n,[jn,(0,o._)("div",Yn,[Rn,(0,o._)("button",{onClick:t=>async function(n){await E(n),m.value=!m.value}(n),class:"artifactDownloadBtn"},[Hn,(0,o.Uk)("DOWNLOAD "),Tn],8,zn),m.value?((0,o.wg)(),(0,o.iD)("div",Jn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.get(n.title),(n=>((0,o.wg)(),(0,o.iD)("div",{key:n.ID,class:"dropdown-content"},[(0,o._)("span",{onClick:t=>function(n){const t=document.createElement("a");t.href=function(n){const t=c.user.authorization,{objectName:e}=n.details,o=p.getValue("providerApiUrl");return d.join(o,`/minio/getExportJobArtifact?objectName=${e}&t=${t}`)}(n),t.target="new",t.download="download",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(n),class:"artifactListItem"},[(0,o._)("i",{class:(0,i.normalizeClass)(y(n.type))},null,2),(0,o.Uk)((0,i.toDisplayString)(n.type),1)],8,qn)])))),128))])):(0,o.kq)("v-if",!0)])])):(0,o.kq)("v-if",!0)],8,Pn)):(0,o.kq)("v-if",!0)])})),128))])])])])],64))}});var Zn=e(58868),Mn={};Mn.styleTagTransform=M(),Mn.setAttributes=J(),Mn.insert=H().bind(null,"head"),Mn.domAPI=R(),Mn.insertStyleElement=L(),j()(Zn.Z,Mn),Zn.Z&&Zn.Z.locals&&Zn.Z.locals;const Wn=(0,O.Z)(Ln,[["__scopeId","data-v-5870f4ff"]])}}]);
//# sourceMappingURL=858.js.map?ver=0.0.307_1709035125091