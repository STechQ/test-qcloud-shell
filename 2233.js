"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[2233],{48844:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(34663),a=t.n(o),i=t(7638),r=t.n(i)()(a());r.push([e.id,'\n*[data-v-4eaf4342] {\n    font-family: "Roboto";\n}\n.container[data-v-4eaf4342] {\n      padding: 20px;\n}\nul[data-v-4eaf4342] {\n    list-style-type: none;\n}\n.createLi[data-v-4eaf4342] {\n    cursor: pointer;\n}\n.move-to-item[data-v-4eaf4342] {\n    padding-top: 1px;\n    padding-right: 20px;\n}\n.move-to-item[data-v-4eaf4342]:not(.item-disabled):hover {\n    background: #D5D5D5;\n}\n.item-disabled[data-v-4eaf4342] {\n    opacity: 0.5;\n}\n.buttons-div[data-v-4eaf4342] {\n      display: flex;\n      justify-content: end;\n      margin-top: 52px;\n      padding: 0 20px;\n}\n.cancel-button[data-v-4eaf4342] {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #757575;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      margin-right: 4px;\n      border: none;\n      background: transparent;\n}\n.move-button[data-v-4eaf4342] {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #FFFFFF;\n      background: #151233;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      border: none;\n}\n.move-button[data-v-4eaf4342]:disabled {\n      color: #757575;\n}\n\n',"",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/moveItem.vue"],names:[],mappings:";AA4GE;IACE,qBAAqB;AACvB;AACA;MACI,aAAa;AAEjB;AACA;IACE,qBAAqB;AACvB;AACA;IACE,eAAe;AACjB;AAEA;IACE,gBAAgB;IAChB,mBAAmB;AACrB;AAEA;IACE,mBAAmB;AACrB;AAEA;IACE,YAAY;AACd;AACA;MACI,aAAa;MACb,oBAAoB;MACpB,gBAAgB;MAChB,eAAe;AACnB;AACA;MACI,gBAAgB;MAChB,eAAe;MACf,kBAAkB;MAClB,cAAc;MACd,aAAa;MACb,mBAAmB;MACnB,iBAAiB;MACjB,kBAAkB;MAClB,iBAAiB;MACjB,YAAY;MACZ,uBAAuB;AAC3B;AACA;MACI,gBAAgB;MAChB,eAAe;MACf,kBAAkB;MAClB,cAAc;MACd,mBAAmB;MACnB,aAAa;MACb,mBAAmB;MACnB,iBAAiB;MACjB,kBAAkB;MAClB,YAAY;AAChB;AACA;MACI,cAAc;AAClB",sourcesContent:['<script setup lang="ts">\nimport { onUnmounted, ref, onMounted } from "vue";\nimport { PathHelper } from "../../../../../../common/helpers/pathHelper";\nimport { container } from \'../../../../domain/core/diContainer\';\nimport { IMoveItemInline } from \'../../../../domain/presentation/dialogs/IMoveItemProps\';\nimport { ITreeItem, ITreeView } from "../../../../domain/presentation/ITreeView";\nimport { FileDisplayerExternalData, IFileDisplayerUseCase } from "../../../../domain/useCase/IFileDisplayerUseCase";\nimport { FileExplorerConstants, IFileExplorer } from "../../../../domain/useCase/IFileExplorer";\nimport { IMoveTargetRequired, IMoveUseCase } from \'../../../../domain/useCase/IMoveUseCase\';\nimport { IUseCaseExecutor } from \'../../../../domain/useCase/IUseCaseExecutor\';\nimport { IViewModel } from \'../../../../domain/viewModel/IViewModel\';\nimport { IViewModelManager } from "../../../../domain/viewModel/IViewModelManager";\nimport { IQJsonAdditionals } from "../../../../../../common/qCloudTemp/quickCloud";\nimport StudioInfo from "../ui/studioInfoComp.vue"\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst moveUseCase = container.resolve<IMoveUseCase>(IMoveUseCase);\nconst param = defineProps<{ param: IMoveItemInline }>();\nconst props = param.param;\nconst viewModel = container.resolve<IViewModel>(IViewModel);\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\nconst emit = defineEmits(["close"]);\nconst rootDiv = ref<HTMLDivElement>();\nconst fileDisplayerUC = container.resolve<IFileDisplayerUseCase>(IFileDisplayerUseCase);\nconst fileExplorer = container.resolve<IFileExplorer>(IFileExplorer);\n\nlet selected: ITreeItem<FileDisplayerExternalData> | undefined = undefined;\nlet treeView: ITreeView<FileDisplayerExternalData>;\nconst selectedIsRootPage = ref<boolean>(false);\nonMounted(() => {\n  const app = viewModelManager.getCurrentApplication()!;\n  if (props.itemToBeMoved.objectType == "folder") {\n    fileExplorer.cloneFilterFolderItems(props.itemToBeMoved.ID, (item) => {\n      if (selectedIsRootPage.value) { return false; }\n      if (item.externalData.objectType != "model") { return true; }\n      if ((item.externalData.additionals as IQJsonAdditionals | undefined)?.isRootPage) { selectedIsRootPage.value = true; }\n      return false;\n    });\n  } else {\n    selectedIsRootPage.value = (props.itemToBeMoved.additionals as IQJsonAdditionals | undefined)?.isRootPage || false;\n  }\n  treeView = fileDisplayerUC.createFileExplorerClone(rootDiv.value!,\n  {\n    displayFilterer: item => {\n      if (selectedIsRootPage.value && item.objectType == "module") { return false; }\n      if (item.objectType == "module" && item.shareType == "version" && item.mainOwner != app.ID) { return false; } // can not move to version imported modules\n      if (item.objectType == "model"){ return false; }\n      if (item.ID == FileExplorerConstants.uiSettingsID) { return false; }\n      return true;\n    },\n    cb: { select: item => selected = item },\n    additionalRoot: { externalData: app, id: app.ID, name: app.name },\n  });\n});\n\nonUnmounted(() => {\n  treeView.reset();\n});\n\nasync function move() {\n  await executor.execute(async () => {\n    if (!selected) { return; }\n    let target: Partial<IMoveTargetRequired>;\n    switch (selected.externalData.objectType) {\n      case "model": throw new Error("unexpected target");\n      case "folder":\n        const folder = selected.externalData;\n        target = {\n          address: { name: props.itemToBeMoved.name, path: PathHelper.join(folder.path , folder.name) },\n          owner: folder.owner.ID != props.itemToBeMoved.owner.ID ? { id: folder.owner.ID, type: folder.owner.objectType } : undefined,\n        };\n        break;\n      case "module":\n        const module = selected.externalData;\n        target = { owner: { id: module.ID, type: "module" }, address: { path: "/", name: "" } };\n        break;\n      case "application":\n        const application = selected.externalData;\n        target = { owner: { id: application.ID, type: "application" }, address: { path: "/", name: "" } };\n        break;\n    }\n    moveUseCase.checkMergeable(props.itemToBeMoved, target)\n    \n    emit("close");\n  }, { loading: true });\n}\n\nfunction close() {\n  emit("close");\n}\n\n<\/script> \n\n<template>\n  <div class="container">\n    <StudioInfo v-if="selectedIsRootPage" style="margin:20px 0px" :infoText="\'Selected items contains the start screen page. Modules are hidden because they cannot contain the start screen page.\'"></StudioInfo>\n    <div id="content-area" class="popover__content">\n      <div ref="rootDiv" style="height: 100%" class="errorDiv"></div>\n      <div class="buttons-div">\n        <button class="cancel-button" @click="close()">Cancel</button>\n        <button class="move-button" @click="move()">MOVE</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<style scoped>\n  * {\n    font-family: "Roboto";\n  }\n  .container {\n      padding: 20px;\n      \n  }\n  ul {\n    list-style-type: none;\n  }\n  .createLi {\n    cursor: pointer;\n  }\n\n  .move-to-item {\n    padding-top: 1px;\n    padding-right: 20px;\n  }\n\n  .move-to-item:not(.item-disabled):hover {\n    background: #D5D5D5;\n  }\n\n  .item-disabled {\n    opacity: 0.5;\n  }\n  .buttons-div {\n      display: flex;\n      justify-content: end;\n      margin-top: 52px;\n      padding: 0 20px;\n  }\n  .cancel-button {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #757575;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      margin-right: 4px;\n      border: none;\n      background: transparent;\n  }\n  .move-button {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #FFFFFF;\n      background: #151233;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      border: none;\n  }\n  .move-button:disabled {\n      color: #757575;\n  }\n\n</style>\n\n'],sourceRoot:""}]);const s=r},97554:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(34663),a=t.n(o),i=t(7638),r=t.n(i)()(a());r.push([e.id,'\n*[data-v-3f1afca0] {\n        font-family: "Roboto";\n}\n.info-div[data-v-3f1afca0] {\n        background: #F5F5FA;\n        border-radius: 4px;\n        width: 100%;\n}\n.info-text[data-v-3f1afca0] {\n        color: #757575;\n        font-size: 14px;\n        display: flex;\n        align-items: center;\n}\n.info-text i[data-v-3f1afca0] {\n        font-size: 24px;\n        color: #151233;\n        margin-right: 8px;\n}\n.text-area[data-v-3f1afca0] {\n        border-radius: 4px;\n        color: #212121;\n        padding: 0px 8px;\n        font-size: 12px;\n        height: 32px;\n        font-weight: 500;\n        background: #FFFFFF;\n        display: flex;\n        align-items: center;\n        margin-top: 10px;\n}\n.copy-icon[data-v-3f1afca0] {\n        font-size: 16px;\n        color: #151233;\n        margin-left: auto;\n        font-weight: 400;\n        cursor: pointer;\n}\n.icon-tooltip[data-v-3f1afca0] {\n        position: absolute;\n        background: #757575;\n        color: #FFFFFF;\n        font-size: 11px;\n        text-align: center;\n        border-radius: 4px;\n        padding: 5px 8px;\n        right: 35px;\n        top: 200px;\n}\n',"",{version:3,sources:["webpack://./src/presentation/vue3/components/ui/studioInfoComp.vue"],names:[],mappings:";AAkCI;QACI,qBAAqB;AACzB;AACA;QACI,mBAAmB;QACnB,kBAAkB;QAClB,WAAW;AACf;AACA;QACI,cAAc;QACd,eAAe;QACf,aAAa;QACb,mBAAmB;AACvB;AACA;QACI,eAAe;QACf,cAAc;QACd,iBAAiB;AACrB;AACA;QACI,kBAAkB;QAClB,cAAc;QACd,gBAAgB;QAChB,eAAe;QACf,YAAY;QACZ,gBAAgB;QAChB,mBAAmB;QACnB,aAAa;QACb,mBAAmB;QACnB,gBAAgB;AACpB;AACA;QACI,eAAe;QACf,cAAc;QACd,iBAAiB;QACjB,gBAAgB;QAChB,eAAe;AACnB;AACA;QACI,kBAAkB;QAClB,mBAAmB;QACnB,cAAc;QACd,eAAe;QACf,kBAAkB;QAClB,kBAAkB;QAClB,gBAAgB;QAChB,WAAW;QACX,UAAU;AACd",sourcesContent:['<template>\n    <div class="info-div" :style="{padding: props.textAreaValue ? \'12px\' : \'5px 12px\'}">\n        <div class="info-text">\n            <i class="mdi mdi-information"></i>\n            <span v-html="props.infoText"></span>\n        </div>\n        <div class="text-area" v-if="props.textAreaValue">\n            {{ props.textAreaValue }}\n            <i class="mdi mdi-content-copy copy-icon" @click="copyText()"></i>\n            <span v-show="showTooltip" class="icon-tooltip">Text copied!</span>\n        </div>\n    </div>\n</template>\n<script setup lang="ts">\n    import { ref } from "vue";\n\n    interface IInfoCompProp {\n        infoText: string,\n        textAreaValue?: string;\n    }\n    const props = defineProps<IInfoCompProp>();\n    const showTooltip = ref(false);\n    function copyText() {\n        if(props.textAreaValue) {\n            navigator.clipboard.writeText(props.textAreaValue);\n            showTooltip.value = true;\n            setTimeout(() => {\n                showTooltip.value = false;\n            }, 2000);\n        }\n\n    }\n<\/script>\n<style scoped>\n    * {\n        font-family: "Roboto";\n    }\n    .info-div {\n        background: #F5F5FA;\n        border-radius: 4px;\n        width: 100%;\n    }\n    .info-text {\n        color: #757575;\n        font-size: 14px;\n        display: flex;\n        align-items: center;\n    }\n    .info-text i {\n        font-size: 24px;\n        color: #151233;\n        margin-right: 8px;\n    }\n    .text-area {\n        border-radius: 4px;\n        color: #212121;\n        padding: 0px 8px;\n        font-size: 12px;\n        height: 32px;\n        font-weight: 500;\n        background: #FFFFFF;\n        display: flex;\n        align-items: center;\n        margin-top: 10px;\n    }\n    .copy-icon {\n        font-size: 16px;\n        color: #151233;\n        margin-left: auto;\n        font-weight: 400;\n        cursor: pointer;\n    }\n    .icon-tooltip {\n        position: absolute;\n        background: #757575;\n        color: #FFFFFF;\n        font-size: 11px;\n        text-align: center;\n        border-radius: 4px;\n        padding: 5px 8px;\n        right: 35px;\n        top: 200px;\n    }\n</style>'],sourceRoot:""}]);const s=r},32233:(e,n,t)=>{t.r(n),t.d(n,{default:()=>E});var o=t(71093),a=t(73843),i=t(80338),r=t(5627),s=t(29307),l=t(3329),d=t(64288),p=t(83487),A=t(88613),c=t(54848),m=t(74720);const u={class:"container"},f={id:"content-area",class:"popover__content"},v={class:"buttons-div"},x=(0,o.aZ)({__name:"moveItem",props:{param:null},emits:["close"],setup(e,{emit:n}){const t=e,x=r.nC.resolve(p.y),C=r.nC.resolve(d.E),g=t.param,B=(r.nC.resolve(A.J),r.nC.resolve(c.B)),I=(0,a.iH)(),b=r.nC.resolve(s.w),y=r.nC.resolve(l.g2);let h,M;const w=(0,a.iH)(!1);return(0,o.bv)((()=>{var e;const n=B.getCurrentApplication();"folder"==g.itemToBeMoved.objectType?y.cloneFilterFolderItems(g.itemToBeMoved.ID,(e=>{var n;return!(w.value||"model"==e.externalData.objectType&&((null===(n=e.externalData.additionals)||void 0===n?void 0:n.isRootPage)&&(w.value=!0),1))})):w.value=(null===(e=g.itemToBeMoved.additionals)||void 0===e?void 0:e.isRootPage)||!1,M=b.createFileExplorerClone(I.value,{displayFilterer:e=>!(w.value&&"module"==e.objectType||"module"==e.objectType&&"version"==e.shareType&&e.mainOwner!=n.ID||"model"==e.objectType||e.ID==l.oA.uiSettingsID),cb:{select:e=>h=e},additionalRoot:{externalData:n,id:n.ID,name:n.name}})})),(0,o.Ah)((()=>{M.reset()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",u,[w.value?((0,o.wg)(),(0,o.j4)(m.Z,{key:0,style:{margin:"20px 0px"},infoText:"Selected items contains the start screen page. Modules are hidden because they cannot contain the start screen page."},null,8,["infoText"])):(0,o.kq)("v-if",!0),(0,o._)("div",f,[(0,o._)("div",{ref_key:"rootDiv",ref:I,style:{height:"100%"},class:"errorDiv"},null,512),(0,o._)("div",v,[(0,o._)("button",{class:"cancel-button",onClick:t[0]||(t[0]=e=>{n("close")})},"Cancel"),(0,o._)("button",{class:"move-button",onClick:t[1]||(t[1]=e=>async function(){await x.execute((async()=>{if(!h)return;let e;switch(h.externalData.objectType){case"model":throw new Error("unexpected target");case"folder":const n=h.externalData;e={address:{name:g.itemToBeMoved.name,path:i.I.join(n.path,n.name)},owner:n.owner.ID!=g.itemToBeMoved.owner.ID?{id:n.owner.ID,type:n.owner.objectType}:void 0};break;case"module":e={owner:{id:h.externalData.ID,type:"module"},address:{path:"/",name:""}};break;case"application":e={owner:{id:h.externalData.ID,type:"application"},address:{path:"/",name:""}}}C.checkMergeable(g.itemToBeMoved,e),n("close")}),{loading:!0})}())},"MOVE")])])]))}});var C=t(17450),g=t.n(C),B=t(29530),I=t.n(B),b=t(16199),y=t.n(b),h=t(40458),M=t.n(h),w=t(62916),D=t.n(w),F=t(92165),T=t.n(F),k=t(48844),Q={};Q.styleTagTransform=T(),Q.setAttributes=M(),Q.insert=y().bind(null,"head"),Q.domAPI=I(),Q.insertStyleElement=D(),g()(k.Z,Q),k.Z&&k.Z.locals&&k.Z.locals;const E=(0,t(32525).Z)(x,[["__scopeId","data-v-4eaf4342"]])},74720:(e,n,t)=>{t.d(n,{Z:()=>D});var o=t(71093),a=t(66190),i=t(46233),r=t(73843);const s={class:"info-text"},l=(e=>((0,o.dD)("data-v-3f1afca0"),e=e(),(0,o.Cn)(),e))((()=>(0,o._)("i",{class:"mdi mdi-information"},null,-1))),d=["innerHTML"],p={key:0,class:"text-area"},A={class:"icon-tooltip"},c=(0,o.aZ)({__name:"studioInfoComp",props:{infoText:null,textAreaValue:null},setup(e){const n=e,t=(0,r.iH)(!1);return(e,r)=>((0,o.wg)(),(0,o.iD)("div",{class:"info-div",style:(0,a.normalizeStyle)({padding:n.textAreaValue?"12px":"5px 12px"})},[(0,o._)("div",s,[l,(0,o._)("span",{innerHTML:n.infoText},null,8,d)]),n.textAreaValue?((0,o.wg)(),(0,o.iD)("div",p,[(0,o.Uk)((0,a.toDisplayString)(n.textAreaValue)+" ",1),(0,o._)("i",{class:"mdi mdi-content-copy copy-icon",onClick:r[0]||(r[0]=e=>{n.textAreaValue&&(navigator.clipboard.writeText(n.textAreaValue),t.value=!0,setTimeout((()=>{t.value=!1}),2e3))})}),(0,o.wy)((0,o._)("span",A,"Text copied!",512),[[i.vShow,t.value]])])):(0,o.kq)("v-if",!0)],4))}});var m=t(17450),u=t.n(m),f=t(29530),v=t.n(f),x=t(16199),C=t.n(x),g=t(40458),B=t.n(g),I=t(62916),b=t.n(I),y=t(92165),h=t.n(y),M=t(97554),w={};w.styleTagTransform=h(),w.setAttributes=B(),w.insert=C().bind(null,"head"),w.domAPI=v(),w.insertStyleElement=b(),u()(M.Z,w),M.Z&&M.Z.locals&&M.Z.locals;const D=(0,t(32525).Z)(c,[["__scopeId","data-v-3f1afca0"]])}}]);
//# sourceMappingURL=2233.js.map?ver=0.0.314_1714381618067