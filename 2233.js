"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[2233],{48844:(e,n,o)=>{o.d(n,{Z:()=>s});var t=o(34663),a=o.n(t),i=o(7638),r=o.n(i)()(a());r.push([e.id,'\n*[data-v-4eaf4342] {\n    font-family: "Roboto";\n}\n.container[data-v-4eaf4342] {\n      padding: 20px;\n}\nul[data-v-4eaf4342] {\n    list-style-type: none;\n}\n.createLi[data-v-4eaf4342] {\n    cursor: pointer;\n}\n.move-to-item[data-v-4eaf4342] {\n    padding-top: 1px;\n    padding-right: 20px;\n}\n.move-to-item[data-v-4eaf4342]:not(.item-disabled):hover {\n    background: #D5D5D5;\n}\n.item-disabled[data-v-4eaf4342] {\n    opacity: 0.5;\n}\n.buttons-div[data-v-4eaf4342] {\n      display: flex;\n      justify-content: end;\n      margin-top: 52px;\n      padding: 0 20px;\n}\n.cancel-button[data-v-4eaf4342] {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #757575;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      margin-right: 4px;\n      border: none;\n      background: transparent;\n}\n.move-button[data-v-4eaf4342] {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #FFFFFF;\n      background: #151233;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      border: none;\n}\n.move-button[data-v-4eaf4342]:disabled {\n      color: #757575;\n}\n\n',"",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/moveItem.vue"],names:[],mappings:";AA4GE;IACE,qBAAqB;AACvB;AACA;MACI,aAAa;AAEjB;AACA;IACE,qBAAqB;AACvB;AACA;IACE,eAAe;AACjB;AAEA;IACE,gBAAgB;IAChB,mBAAmB;AACrB;AAEA;IACE,mBAAmB;AACrB;AAEA;IACE,YAAY;AACd;AACA;MACI,aAAa;MACb,oBAAoB;MACpB,gBAAgB;MAChB,eAAe;AACnB;AACA;MACI,gBAAgB;MAChB,eAAe;MACf,kBAAkB;MAClB,cAAc;MACd,aAAa;MACb,mBAAmB;MACnB,iBAAiB;MACjB,kBAAkB;MAClB,iBAAiB;MACjB,YAAY;MACZ,uBAAuB;AAC3B;AACA;MACI,gBAAgB;MAChB,eAAe;MACf,kBAAkB;MAClB,cAAc;MACd,mBAAmB;MACnB,aAAa;MACb,mBAAmB;MACnB,iBAAiB;MACjB,kBAAkB;MAClB,YAAY;AAChB;AACA;MACI,cAAc;AAClB",sourcesContent:['<script setup lang="ts">\nimport { onUnmounted, ref, onMounted } from "vue";\nimport { PathHelper } from "../../../../../../common/helpers/pathHelper";\nimport { container } from \'../../../../domain/core/diContainer\';\nimport { IMoveItemInline } from \'../../../../domain/presentation/dialogs/IMoveItemProps\';\nimport { ITreeItem, ITreeView } from "../../../../domain/presentation/ITreeView";\nimport { FileDisplayerExternalData, IFileDisplayerUseCase } from "../../../../domain/useCase/IFileDisplayerUseCase";\nimport { FileExplorerConstants, IFileExplorer } from "../../../../domain/useCase/IFileExplorer";\nimport { IMoveTargetRequired, IMoveUseCase } from \'../../../../domain/useCase/IMoveUseCase\';\nimport { IUseCaseExecutor } from \'../../../../domain/useCase/IUseCaseExecutor\';\nimport { IViewModel } from \'../../../../domain/viewModel/IViewModel\';\nimport { IViewModelManager } from "../../../../domain/viewModel/IViewModelManager";\nimport { IQJsonAdditionals } from "../../../../../../common/qCloudTemp/quickCloud";\nimport StudioInfo from "../ui/studioInfoComp.vue"\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst moveUseCase = container.resolve<IMoveUseCase>(IMoveUseCase);\nconst param = defineProps<{ param: IMoveItemInline }>();\nconst props = param.param;\nconst viewModel = container.resolve<IViewModel>(IViewModel);\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\nconst emit = defineEmits(["close"]);\nconst rootDiv = ref<HTMLDivElement>();\nconst fileDisplayerUC = container.resolve<IFileDisplayerUseCase>(IFileDisplayerUseCase);\nconst fileExplorer = container.resolve<IFileExplorer>(IFileExplorer);\n\nlet selected: ITreeItem<FileDisplayerExternalData> | undefined = undefined;\nlet treeView: ITreeView<FileDisplayerExternalData>;\nconst selectedIsRootPage = ref<boolean>(false);\nonMounted(() => {\n  const app = viewModelManager.getCurrentApplication()!;\n  if (props.itemToBeMoved.objectType == "folder") {\n    fileExplorer.cloneFilterFolderItems(props.itemToBeMoved.ID, (item) => {\n      if (selectedIsRootPage.value) { return false; }\n      if (item.externalData.objectType != "model") { return true; }\n      if ((item.externalData.additionals as IQJsonAdditionals | undefined)?.isRootPage) { selectedIsRootPage.value = true; }\n      return false;\n    });\n  } else {\n    selectedIsRootPage.value = (props.itemToBeMoved.additionals as IQJsonAdditionals | undefined)?.isRootPage || false;\n  }\n  treeView = fileDisplayerUC.createFileExplorerClone(rootDiv.value!,\n  {\n    displayFilterer: item => {\n      if (selectedIsRootPage.value && item.objectType == "module") { return false; }\n      if (item.objectType == "module" && item.shareType == "version" && item.mainOwner != app.ID) { return false; } // can not move to version imported modules\n      if (item.objectType == "model"){ return false; }\n      if (item.ID == FileExplorerConstants.uiSettingsID) { return false; }\n      return true;\n    },\n    cb: { select: item => selected = item },\n    additionalRoot: { externalData: app, id: app.ID, name: app.name },\n  });\n});\n\nonUnmounted(() => {\n  treeView.reset();\n});\n\nasync function move() {\n  await executor.execute(async () => {\n    if (!selected) { return; }\n    let target: Partial<IMoveTargetRequired>;\n    switch (selected.externalData.objectType) {\n      case "model": throw new Error("unexpected target");\n      case "folder":\n        const folder = selected.externalData;\n        target = {\n          address: { name: props.itemToBeMoved.name, path: PathHelper.join(folder.path , folder.name) },\n          owner: folder.owner.ID != props.itemToBeMoved.owner.ID ? { id: folder.owner.ID, type: folder.owner.objectType } : undefined,\n        };\n        break;\n      case "module":\n        const module = selected.externalData;\n        target = { owner: { id: module.ID, type: "module" }, address: { path: "/", name: "" } };\n        break;\n      case "application":\n        const application = selected.externalData;\n        target = { owner: { id: application.ID, type: "application" }, address: { path: "/", name: "" } };\n        break;\n    }\n    moveUseCase.checkMergeable(props.itemToBeMoved, target)\n    \n    emit("close");\n  }, { loading: true });\n}\n\nfunction close() {\n  emit("close");\n}\n\n<\/script> \n\n<template>\n  <div class="container">\n    <StudioInfo v-if="selectedIsRootPage" style="margin:20px 0px" :infoText="\'Selected items contains the start screen page. Modules are hidden because they cannot contain the start screen page.\'"></StudioInfo>\n    <div id="content-area" class="popover__content">\n      <div ref="rootDiv" style="height: 100%" class="errorDiv"></div>\n      <div class="buttons-div">\n        <button class="cancel-button" @click="close()">Cancel</button>\n        <button class="move-button" @click="move()">MOVE</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<style scoped>\n  * {\n    font-family: "Roboto";\n  }\n  .container {\n      padding: 20px;\n      \n  }\n  ul {\n    list-style-type: none;\n  }\n  .createLi {\n    cursor: pointer;\n  }\n\n  .move-to-item {\n    padding-top: 1px;\n    padding-right: 20px;\n  }\n\n  .move-to-item:not(.item-disabled):hover {\n    background: #D5D5D5;\n  }\n\n  .item-disabled {\n    opacity: 0.5;\n  }\n  .buttons-div {\n      display: flex;\n      justify-content: end;\n      margin-top: 52px;\n      padding: 0 20px;\n  }\n  .cancel-button {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #757575;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      margin-right: 4px;\n      border: none;\n      background: transparent;\n  }\n  .move-button {\n      font-weight: 500;\n      font-size: 16px;\n      text-align: center;\n      color: #FFFFFF;\n      background: #151233;\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      border-radius: 4px;\n      border: none;\n  }\n  .move-button:disabled {\n      color: #757575;\n  }\n\n</style>\n\n'],sourceRoot:""}]);const s=r},28351:(e,n,o)=>{o.d(n,{Z:()=>s});var t=o(34663),a=o.n(t),i=o(7638),r=o.n(i)()(a());r.push([e.id,'\n*[data-v-ba4f2c38] {\n    font-family: "Roboto";\n}\n.info-div[data-v-ba4f2c38] {\n    background: #F5F5FA;\n    border-radius: 4px;\n    width: 100%;\n}\n.info-text[data-v-ba4f2c38] {\n    color: #757575;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n}\n.info-text i[data-v-ba4f2c38] {\n    font-size: 24px;\n    color: #151233;\n    margin-right: 8px;\n}\n.text-area[data-v-ba4f2c38] {\n    border-radius: 4px;\n    color: #212121;\n    padding: 0px 8px;\n    font-size: 12px;\n    height: 32px;\n    font-weight: 500;\n    background: #FFFFFF;\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n}\n.copy-icon[data-v-ba4f2c38] {\n    font-size: 16px;\n    color: #151233;\n    margin-left: auto;\n    font-weight: 400;\n    cursor: pointer;\n}\n.icon-tooltip[data-v-ba4f2c38] {\n    position: absolute;\n    background: #757575;\n    color: #FFFFFF;\n    font-size: 11px;\n    text-align: center;\n    border-radius: 4px;\n    padding: 5px 8px;\n    right: 35px;\n    top: 200px;\n}\n',"",{version:3,sources:["webpack://./src/presentation/vue3/components/ui/studioInfoComp.vue"],names:[],mappings:";AA+CA;IACI,qBAAqB;AACzB;AAEA;IACI,mBAAmB;IACnB,kBAAkB;IAClB,WAAW;AACf;AAEA;IACI,cAAc;IACd,eAAe;IACf,aAAa;IACb,mBAAmB;AACvB;AAEA;IACI,eAAe;IACf,cAAc;IACd,iBAAiB;AACrB;AAEA;IACI,kBAAkB;IAClB,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,YAAY;IACZ,gBAAgB;IAChB,mBAAmB;IACnB,aAAa;IACb,mBAAmB;IACnB,gBAAgB;AACpB;AAEA;IACI,eAAe;IACf,cAAc;IACd,iBAAiB;IACjB,gBAAgB;IAChB,eAAe;AACnB;AAEA;IACI,kBAAkB;IAClB,mBAAmB;IACnB,cAAc;IACd,eAAe;IACf,kBAAkB;IAClB,kBAAkB;IAClB,gBAAgB;IAChB,WAAW;IACX,UAAU;AACd",sourcesContent:['<template>\n    <div class="info-div"\n        :style="{ padding: props.textAreaValue ? \'12px\' : \'5px 12px\', background: props.customStyle?.backgroundColor || \'#F5F5FA\' }">\n        <div class="info-text">\n            \n            <i :class="props.customIconClass ? props.customIconClass : \'mdi mdi-information\' "\n                    :style="{ color: props.customStyle?.iconColor, fontSize: props.customStyle?.iconSize }"></i>\n            \n            <span :style="{ color: props.customStyle?.color || \'#757575\' }" v-html="props.infoText"></span>\n        </div>\n        <div class="text-area" v-if="props.textAreaValue">\n            {{ props.textAreaValue }}\n            <i class="mdi mdi-content-copy copy-icon" @click="copyText()"></i>\n            <span v-show="showTooltip" class="icon-tooltip">Text copied!</span>\n        </div>\n    </div>\n</template>\n<script setup lang="ts">\nimport { ref } from "vue";\n\ninterface IInfoCompProp {\n    infoText: string,\n    textAreaValue?: string;\n    customIconClass?: string;\n    customStyle?: {\n        backgroundColor?: string;\n        color?: string;\n        iconColor?: string,\n        iconSize?: string,\n    }\n\n}\nconst props = defineProps<IInfoCompProp>();\nconst showTooltip = ref(false);\nfunction copyText() {\n    if (props.textAreaValue) {\n        navigator.clipboard.writeText(props.textAreaValue);\n        showTooltip.value = true;\n        setTimeout(() => {\n            showTooltip.value = false;\n        }, 2000);\n    }\n\n}\n\n<\/script>\n<style scoped>\n* {\n    font-family: "Roboto";\n}\n\n.info-div {\n    background: #F5F5FA;\n    border-radius: 4px;\n    width: 100%;\n}\n\n.info-text {\n    color: #757575;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n}\n\n.info-text i {\n    font-size: 24px;\n    color: #151233;\n    margin-right: 8px;\n}\n\n.text-area {\n    border-radius: 4px;\n    color: #212121;\n    padding: 0px 8px;\n    font-size: 12px;\n    height: 32px;\n    font-weight: 500;\n    background: #FFFFFF;\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n}\n\n.copy-icon {\n    font-size: 16px;\n    color: #151233;\n    margin-left: auto;\n    font-weight: 400;\n    cursor: pointer;\n}\n\n.icon-tooltip {\n    position: absolute;\n    background: #757575;\n    color: #FFFFFF;\n    font-size: 11px;\n    text-align: center;\n    border-radius: 4px;\n    padding: 5px 8px;\n    right: 35px;\n    top: 200px;\n}\n</style>'],sourceRoot:""}]);const s=r},32233:(e,n,o)=>{o.r(n),o.d(n,{default:()=>S});var t=o(71093),a=o(73843),i=o(80338),r=o(5627),s=o(29307),l=o(3329),d=o(64288),c=o(83487),p=o(88613),A=o(54848),m=o(56190);const u={class:"container"},f={id:"content-area",class:"popover__content"},v={class:"buttons-div"},x=(0,t.aZ)({__name:"moveItem",props:{param:null},emits:["close"],setup(e,{emit:n}){const o=e,x=r.nC.resolve(c.y),g=r.nC.resolve(d.E),C=o.param,I=(r.nC.resolve(p.J),r.nC.resolve(A.B)),B=(0,a.iH)(),b=r.nC.resolve(s.w),y=r.nC.resolve(l.g2);let h,M;const w=(0,a.iH)(!1);return(0,t.bv)((()=>{var e;const n=I.getCurrentApplication();"folder"==C.itemToBeMoved.objectType?y.cloneFilterFolderItems(C.itemToBeMoved.ID,(e=>{var n;return!(w.value||"model"==e.externalData.objectType&&((null===(n=e.externalData.additionals)||void 0===n?void 0:n.isRootPage)&&(w.value=!0),1))})):w.value=(null===(e=C.itemToBeMoved.additionals)||void 0===e?void 0:e.isRootPage)||!1,M=b.createFileExplorerClone(B.value,{displayFilterer:e=>!(w.value&&"module"==e.objectType||"module"==e.objectType&&"version"==e.shareType&&e.mainOwner!=n.ID||"model"==e.objectType||e.ID==l.oA.uiSettingsID),cb:{select:e=>h=e},additionalRoot:{externalData:n,id:n.ID,name:n.name}})})),(0,t.Ah)((()=>{M.reset()})),(e,o)=>((0,t.wg)(),(0,t.iD)("div",u,[w.value?((0,t.wg)(),(0,t.j4)(m.Z,{key:0,style:{margin:"20px 0px"},infoText:"Selected items contains the start screen page. Modules are hidden because they cannot contain the start screen page."},null,8,["infoText"])):(0,t.kq)("v-if",!0),(0,t._)("div",f,[(0,t._)("div",{ref_key:"rootDiv",ref:B,style:{height:"100%"},class:"errorDiv"},null,512),(0,t._)("div",v,[(0,t._)("button",{class:"cancel-button",onClick:o[0]||(o[0]=e=>{n("close")})},"Cancel"),(0,t._)("button",{class:"move-button",onClick:o[1]||(o[1]=e=>async function(){await x.execute((async()=>{if(!h)return;let e;switch(h.externalData.objectType){case"model":throw new Error("unexpected target");case"folder":const n=h.externalData;e={address:{name:C.itemToBeMoved.name,path:i.I.join(n.path,n.name)},owner:n.owner.ID!=C.itemToBeMoved.owner.ID?{id:n.owner.ID,type:n.owner.objectType}:void 0};break;case"module":e={owner:{id:h.externalData.ID,type:"module"},address:{path:"/",name:""}};break;case"application":e={owner:{id:h.externalData.ID,type:"application"},address:{path:"/",name:""}}}g.checkMergeable(C.itemToBeMoved,e),n("close")}),{loading:!0})}())},"MOVE")])])]))}});var g=o(17450),C=o.n(g),I=o(29530),B=o.n(I),b=o(16199),y=o.n(b),h=o(40458),M=o.n(h),w=o(62916),F=o.n(w),D=o(92165),T=o.n(D),k=o(48844),E={};E.styleTagTransform=T(),E.setAttributes=M(),E.insert=y().bind(null,"head"),E.domAPI=B(),E.insertStyleElement=F(),C()(k.Z,E),k.Z&&k.Z.locals&&k.Z.locals;const S=(0,o(32525).Z)(x,[["__scopeId","data-v-4eaf4342"]])},56190:(e,n,o)=>{o.d(n,{Z:()=>w});var t=o(71093),a=o(66190),i=o(46233),r=o(73843);const s={class:"info-text"},l=["innerHTML"],d={key:0,class:"text-area"},c={class:"icon-tooltip"},p=(0,t.aZ)({__name:"studioInfoComp",props:{infoText:null,textAreaValue:null,customIconClass:null,customStyle:null},setup(e){const n=e,o=(0,r.iH)(!1);return(e,r)=>{var p,A,m,u;return(0,t.wg)(),(0,t.iD)("div",{class:"info-div",style:(0,a.normalizeStyle)({padding:n.textAreaValue?"12px":"5px 12px",background:(null===(p=n.customStyle)||void 0===p?void 0:p.backgroundColor)||"#F5F5FA"})},[(0,t._)("div",s,[(0,t._)("i",{class:(0,a.normalizeClass)(n.customIconClass?n.customIconClass:"mdi mdi-information"),style:(0,a.normalizeStyle)({color:null===(A=n.customStyle)||void 0===A?void 0:A.iconColor,fontSize:null===(m=n.customStyle)||void 0===m?void 0:m.iconSize})},null,6),(0,t._)("span",{style:(0,a.normalizeStyle)({color:(null===(u=n.customStyle)||void 0===u?void 0:u.color)||"#757575"}),innerHTML:n.infoText},null,12,l)]),n.textAreaValue?((0,t.wg)(),(0,t.iD)("div",d,[(0,t.Uk)((0,a.toDisplayString)(n.textAreaValue)+" ",1),(0,t._)("i",{class:"mdi mdi-content-copy copy-icon",onClick:r[0]||(r[0]=e=>{n.textAreaValue&&(navigator.clipboard.writeText(n.textAreaValue),o.value=!0,setTimeout((()=>{o.value=!1}),2e3))})}),(0,t.wy)((0,t._)("span",c,"Text copied!",512),[[i.vShow,o.value]])])):(0,t.kq)("v-if",!0)],4)}}});var A=o(17450),m=o.n(A),u=o(29530),f=o.n(u),v=o(16199),x=o.n(v),g=o(40458),C=o.n(g),I=o(62916),B=o.n(I),b=o(92165),y=o.n(b),h=o(28351),M={};M.styleTagTransform=y(),M.setAttributes=C(),M.insert=x().bind(null,"head"),M.domAPI=f(),M.insertStyleElement=B(),m()(h.Z,M),h.Z&&h.Z.locals&&h.Z.locals;const w=(0,o(32525).Z)(p,[["__scopeId","data-v-ba4f2c38"]])}}]);
//# sourceMappingURL=2233.js.map?ver=0.0.320_1717484624283