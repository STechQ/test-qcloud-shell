"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[4118],{5096:(e,n,o)=>{o.d(n,{Z:()=>p});var t=o(34663),a=o.n(t),i=o(7638),l=o.n(i),r=o(79240),s=l()(a());s.i(r.Z),s.push([e.id,"\n.module-tab-div[data-v-fb8c2154] {\n    margin-top: 12px;\n}\n.no-module-text[data-v-fb8c2154] {\n    font-size: 14px;\n    color: #757575\n}\n.ghost-img[data-v-fb8c2154] {\n    margin-right: 12px;\n    width: 22px;\n}\n.no-data-div[data-v-fb8c2154] {\n    justify-content: center;\n    display: flex;\n    margin: 24px 0;\n    align-items: center;\n}\n.module-tabs[data-v-fb8c2154] {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid var(--grey-lighten-1, #BDBDBD);\n}\n.tab-item[data-v-fb8c2154] {\n    height: 36px;\n    padding: 10px 54px 10px 54px;\n    font-family: Roboto;\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 16px;\n    letter-spacing: 0em;\n    text-align: center;\n    color: #A1A1A1;\n}\n.active-category[data-v-fb8c2154] {\n    color: #151233;\n    border-bottom: 2px solid;\n    font-family: Roboto;\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 16px;\n    letter-spacing: 0em;\n    text-align: center;\n}\n.container[data-v-fb8c2154] {\n    padding: 32px 20px 20px;\n}\n.table-name[data-v-fb8c2154] {\n    color: #151233;\n    font-size: 16px;\n    font-weight: 500;\n    line-height: 18px;\n    margin-bottom: 12px;\n}\n.select-module-btn[data-v-fb8c2154] {\n    border: none;\n    background: none;\n    color: #212121;\n    font-size: 20px;\n}\n.back-button[data-v-fb8c2154] {\n    font-size: 28px;\n    color: #151233;\n    cursor: pointer;\n    margin-right: 16px;\n}\n.module-name-div[data-v-fb8c2154] {\n    display: flex;\n    align-items: center;\n    margin-bottom: 16px;\n}\n.module-name[data-v-fb8c2154] {\n    color: #151233;\n    font-size: 16px;\n    font-weight: 500;\n}\n.remove-module[data-v-fb8c2154] {\n    background: none;\n    border: none;\n    font-size: 20px;\n    color: #212121;\n    width: 100%;\n    display: flex;\n    justify-content: end;\n    align-items: center;\n}\n.imported-version[data-v-fb8c2154] {\n    color: #2C5A86;\n    font-size: 14px;\n    font-weight: 500;\n    margin-right: 22px;\n    cursor: pointer;\n}\n.import-btn[data-v-fb8c2154] {\n    background: none;\n    border: none;\n    font-size: 14px;\n    font-weight: 500;\n    color: #2C5A86;\n    cursor: pointer;\n}\n.add-ref-module-btn[data-v-fb8c2154] {\n    font-size: 13px;\n    text-align: center;\n    color: #FFFFFF;\n    background: #151233;\n    display: flex;\n    align-items: center;\n    padding: 4px 8px;\n    border-radius: 4px;\n    border: none;\n}\n.remove-module:hover .button-tooltip[data-v-fb8c2154] {\n    opacity: 1;\n    visibility: visible;\n}\n.button-tooltip[data-v-fb8c2154] {\n    visibility: hidden;\n    position: absolute;\n    background: #757575;\n    color: #FFFFFF;\n    font-size: 9px;\n    font-family: 'Roboto';\n    text-align: center;\n    border-radius: 4px;\n    letter-spacing: 0.2px;\n    padding: 6px 8px 6px 8px;\n    opacity: 0;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/attachModuleToApp.vue"],names:[],mappings:";AA+WA;IACI,gBAAgB;AACpB;AAEA;IACI,eAAe;IACf;AACJ;AAEA;IACI,kBAAkB;IAClB,WAAW;AACf;AAEA;IACI,uBAAuB;IACvB,aAAa;IACb,cAAc;IACd,mBAAmB;AACvB;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,uDAAuD;AAC3D;AAEA;IACI,YAAY;IACZ,4BAA4B;IAC5B,mBAAmB;IACnB,eAAe;IACf,gBAAgB;IAChB,iBAAiB;IACjB,mBAAmB;IACnB,kBAAkB;IAClB,cAAc;AAClB;AAEA;IACI,cAAc;IACd,wBAAwB;IACxB,mBAAmB;IACnB,eAAe;IACf,gBAAgB;IAChB,iBAAiB;IACjB,mBAAmB;IACnB,kBAAkB;AACtB;AAEA;IACI,uBAAuB;AAC3B;AAEA;IACI,cAAc;IACd,eAAe;IACf,gBAAgB;IAChB,iBAAiB;IACjB,mBAAmB;AACvB;AAEA;IACI,YAAY;IACZ,gBAAgB;IAChB,cAAc;IACd,eAAe;AACnB;AAEA;IACI,eAAe;IACf,cAAc;IACd,eAAe;IACf,kBAAkB;AACtB;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,mBAAmB;AACvB;AAEA;IACI,cAAc;IACd,eAAe;IACf,gBAAgB;AACpB;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,eAAe;IACf,cAAc;IACd,WAAW;IACX,aAAa;IACb,oBAAoB;IACpB,mBAAmB;AACvB;AAEA;IACI,cAAc;IACd,eAAe;IACf,gBAAgB;IAChB,kBAAkB;IAClB,eAAe;AACnB;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,eAAe;AACnB;AAEA;IACI,eAAe;IACf,kBAAkB;IAClB,cAAc;IACd,mBAAmB;IACnB,aAAa;IACb,mBAAmB;IACnB,gBAAgB;IAChB,kBAAkB;IAClB,YAAY;AAChB;AAEA;IACI,UAAU;IACV,mBAAmB;AACvB;AAEA;IACI,kBAAkB;IAClB,kBAAkB;IAClB,mBAAmB;IACnB,cAAc;IACd,cAAc;IACd,qBAAqB;IACrB,kBAAkB;IAClB,kBAAkB;IAClB,qBAAqB;IACrB,wBAAwB;IACxB,UAAU;AACd",sourcesContent:['<script setup lang="ts">\nimport { ref } from \'vue\';\nimport { container } from \'../../../../domain/core/diContainer\';\nimport { ILocalization } from \'../../../../domain/infrastructure/ILocalization\';\nimport { IModule, IModuleVersion, IExtendedModuleItem } from \'../../../../domain/model/models\';\nimport { IModuleVersionUseCase } from \'../../../../domain/useCase/IModuleVersionUseCase\';\nimport { IObjectUseCase } from \'../../../../domain/useCase/IObjectUseCase\';\nimport { IStudio } from \'../../../../domain/useCase/IStudio\';\nimport { IUseCaseExecutor } from \'../../../../domain/useCase/IUseCaseExecutor\';\nimport { IViewModel } from \'../../../../domain/viewModel/IViewModel\';\n\nconst viewModel = container.resolve<IViewModel>(IViewModel);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst localization = container.resolve<ILocalization>(ILocalization);\nconst objectUseCase = container.resolve<IObjectUseCase>(IObjectUseCase);\nconst studio = container.resolve<IStudio>(IStudio);\nconst moduleVersionUseCase = container.resolve<IModuleVersionUseCase>(IModuleVersionUseCase);\n\nconst importedOrgModulesData = ref<Array<IExtendedModuleItem>>([]);\nconst importedGroupModulesData = ref<Array<IExtendedModuleItem>>([]);\nconst avaliableOrgModulesData = ref<Array<IExtendedModuleItem>>([]);\nconst avaliableGroupModulesData = ref<Array<IExtendedModuleItem>>([]);\nconst importNewOrChange = ref(false);\nconst selectedModule = ref<IExtendedModuleItem>();\nconst moduleVersions = ref<Array<IModuleVersion>>([]);\n\nconst tableColumns = ref(["name", "description", "ownerApp", "relatedAppNames", "createdBy", "createDate", "actions"]);\nconst tableOptions = ref({\n    filterable: true,\n    perPage: 5,\n    perPageValues: [],\n    headings: {\n        name: localization.get("moduleName"),\n        description: localization.get("description"),\n        ownerApp: localization.get("ownerApp"),\n        relatedAppNames: localization.get("relatedApplications"),\n        createdBy: localization.get("createdBy"),\n        createDate: localization.get("createDate"),\n        shareType: localization.get("shareType"),\n        actions: "",\n    },\n    resizableColumns: false,\n    skin: \'import-module\',\n    texts: {\n        count: "",\n        noResults: "No matching records",\n        filterPlaceholder: "Search"\n    },\n});\nconst moduleVersionTableColumns = ref(["version", "description", "createdBy", "createDate", "state"]);\nconst importedModuleType = ref<"Organization" | "Group">("Organization");\nconst availableModule = ref<"Organization" | "Group">("Organization");\nconst orgGroup = ref(viewModel.user!.selectedOrganizationGroup?.organizationGroup)\nconst mainAppModules = ref(viewModel.user!.selectedOrganizationGroup?.organizationApplications?.find(app => app.organizationId == orgGroup.value?.mainOrganizationId)?.modules)\n\nconst moduleVersionTableOptions = ref({\n    filterable: false,\n    perPage: 5,\n    perPageValues: [],\n    headings: {\n        version: localization.get("version"),\n        description: localization.get("description"),\n        createdBy: localization.get("createdBy"),\n        createDate: localization.get("createDate"),\n        state: "",\n    },\n    resizableColumns: false,\n    skin: \'module-versions\',\n    texts: {\n        count: "",\n        noResults: "No matching records",\n    },\n})\nconst dateOptions: Intl.DateTimeFormatOptions = { month: \'2-digit\', day: \'2-digit\', year: \'numeric\' };\n\nfunction refreshTable() {\n    executor.execute(async () => {\n        const modules: Array<IExtendedModuleItem> = await objectUseCase.listModules();\n        const groupModules = await objectUseCase.getGroupModules();\n        const appsDict: Record<string, string> = {};\n        viewModel.apps.forEach(app => appsDict[app.ID] = app.name);\n\n        modules.forEach(module => {\n            setOwnerApp(module, appsDict);\n            const isAddedtoApp = isAddedtoCurrentApp(module);\n            if (isAddedtoApp && module.mainOwner && module.mainOwner != viewModel.studio.appId) {\n                importedOrgModulesData.value.push(module);\n            } else if (!isAddedtoApp && module.shareType) {\n                avaliableOrgModulesData.value.push(module);\n            }\n        });\n        groupModules?.forEach(module => {\n            setOwnerApp(module, appsDict);\n            const isAddedtoApp = isAddedtoCurrentApp(module);\n            if (isAddedtoApp) {\n                importedGroupModulesData.value.push(module);\n            } else {\n                avaliableGroupModulesData.value.push(module);\n            }\n        })\n    }, { loading: true });\n\n    function setOwnerApp(module: IExtendedModuleItem, appsDict: Record<string, string>) {\n        module.ownerApp = module.mainOwner ? appsDict[module.mainOwner] : \'\';\n        const appNamesArr = module.relatedApplications.map(i => appsDict[i.applicationID]).filter(appName => appName != module.ownerApp);\n        module.relatedAppNames = appNamesArr.join(", ");\n    }\n}\n\nrefreshTable()\nfunction add(module: IModule, version?: string) {\n    const moduleFromGroup = mainAppModules.value?.find(appModule => appModule.ID == module.ID);\n    const applicationID = viewModel.studio.appId;\n    const importedData = moduleFromGroup ? importedGroupModulesData : importedOrgModulesData;\n    const availableModules = moduleFromGroup ? avaliableGroupModulesData : avaliableOrgModulesData;\n    const mainOrgId = moduleFromGroup ? orgGroup.value?.mainOrganizationId : undefined;\n    executor.execute(async () => {\n        if (version) {\n            if (isAddedtoCurrentApp(module)) {\n                await studio.detachModuleFromApplication(module, applicationID, true, mainOrgId);\n                const curModule = importedData.value.find(i => i.ID == module.ID)!;\n                curModule.relatedApplications = curModule.relatedApplications.filter(i => i.applicationID != applicationID);\n                refreshTable();\n            }\n            await studio.attachModuletoApplication(module, applicationID, true, version, mainOrgId);\n            const curModule = availableModules.value.find(i => i.ID == module.ID);\n            curModule!.relatedApplications.push({ applicationID, importedVersion: version });\n            const curModuleVersion = moduleVersions.value.find(modVersion => modVersion.version == version);\n            curModuleVersion!.relatedApplications!.push({ applicationID, importedVersion: version });\n            selectedModule.value!.currentVersion = version;\n        }\n        else {\n            await studio.attachModuletoApplication(module, applicationID, false, mainOrgId);\n            const curModule = availableModules.value.find(i => i.ID == module.ID);\n            curModule!.relatedApplications.push({ applicationID });\n        }\n        refreshTable()\n    }, { loading: true });\n}\n\nfunction remove(module: IModule, version?: string) {\n    const moduleFromGroup = mainAppModules.value?.find(appModule => appModule.ID == module.ID);\n    const importedData = moduleFromGroup ? importedGroupModulesData : importedOrgModulesData;\n    const mainOrgId = moduleFromGroup ? orgGroup.value?.mainOrganizationId : undefined;\n    executor.execute(async () => {\n        const applicationID = viewModel.studio.appId;\n        await studio.detachModuleFromApplication(module, applicationID, false, version, mainOrgId);\n        const curModule = importedData.value.find(i => i.ID == module.ID)!;\n        curModule.relatedApplications = curModule.relatedApplications.filter(i => i.applicationID != applicationID);\n        const curModuleVersion = moduleVersions.value.find(modVersion => modVersion.version == version);\n        curModuleVersion!.relatedApplications = curModule.relatedApplications.filter(i => i.applicationID != applicationID);\n        refreshTable()\n    }, { loading: true });\n}\n\nfunction isAddedtoCurrentApp(module: IModule) {\n    const appID = viewModel.studio.appId;\n    const isAdded = module.relatedApplications?.some(i => i.applicationID == appID);\n    return !!isAdded;\n}\n\nfunction selectModule(module: IModule) {\n    getVersions(module.ID);\n    selectedModule.value = module;\n    selectedModule.value.currentVersion = getImportedVersion(module);\n    importNewOrChange.value = true;\n}\nfunction getVersions(moduleID: string) {\n    executor.execute(async () => {\n        const moduleFromGroup = mainAppModules.value?.find(appModule => appModule.ID == moduleID);\n        const mainOrgId = moduleFromGroup ? orgGroup.value?.mainOrganizationId : undefined;\n        moduleVersions.value = await moduleVersionUseCase.listModuleVersions(moduleID, mainOrgId);\n    }, { loading: true })\n}\nfunction getImportedVersion(module: IModule) {\n    const applicationID = viewModel.studio.appId;\n    const importedVersion = module.relatedApplications.find(app => applicationID == app.applicationID)?.importedVersion;\n    return importedVersion;\n}\nfunction computeImportedVersion() {\n    return selectedModule.value?.currentVersion;\n}\nfunction goBack() {\n    importNewOrChange.value = false;\n    refreshTable();\n}\n\n<\/script>\n\n<template>\n    <div class="container vue-table">\n        <div v-if="!importNewOrChange">\n            <div class="module-tabs">\n                <div @click="importedModuleType = \'Organization\'"\n                    :class="[\'tab-item\', importedModuleType == \'Organization\' ? \'active-category\' : \'\']">Imported\n                    Organization Modules\n                </div>\n                <div @click="importedModuleType = \'Group\'"\n                    :class="[\'tab-item\', importedModuleType == \'Group\' ? \'active-category\' : \'\']">\n                    Imported\n                    Organization Group Modules</div>\n            </div>\n            <div v-if="importedModuleType == \'Organization\'">\n                <div v-if="importedOrgModulesData.length > 0" class="module-tab-div">\n                    <v-client-table ref="table" :data="importedOrgModulesData" :columns="tableColumns"\n                        :options="tableOptions">\n                        <template #createDate="props">\n                            <span>{{ new Intl.DateTimeFormat("tr-TR", dateOptions).format(new\n            Date(props.row.createDate))\n                                }}</span>\n                        </template>\n                        <template #ownerApp="props">\n                            <span>{{ props.row.ownerApp }}</span>\n                        </template>\n                        <template #relatedAppNames="props">\n                            <span>{{ props.row.relatedAppNames }}</span>\n                        </template>\n                        <template #actions="props">\n                            <div style="display: flex; align-items: center;">\n                                <div v-show="getImportedVersion(props.row)" class="imported-version"\n                                    @click="selectModule(props.row)">\n                                    <i class="mdi mdi-pencil" style="font-size: 16px; margin-right: 4px"></i>\n                                    <span>{{ getImportedVersion(props.row) }}</span>\n                                </div>\n                                <button class="remove-module" @click="remove(props.row, getImportedVersion(props.row))">\n                                    <i class="mdi mdi-close-circle-outline"></i>\n                                    <span class="button-tooltip" style="right: 48px; z-index: 1; width: 80px;">Remove\n                                        Module</span>\n                                </button>\n                            </div>\n                        </template>\n                    </v-client-table>\n                </div>\n                <div v-else class="no-data-div">\n                    <img class="ghost-img" src="../../../../images/ghost.svg" />\n                    <span style="font-size: 14px; color: #757575">No modules imported yet.</span>\n                </div>\n            </div>\n            <div v-else>\n                <div v-if="importedGroupModulesData.length > 0" class="module-tab-div">\n                    <v-client-table ref="table" :data="importedGroupModulesData" :columns="tableColumns"\n                        :options="tableOptions">\n                        <template #createDate="props">\n                            <span>{{ new Intl.DateTimeFormat("tr-TR", dateOptions).format(new\n            Date(props.row.createDate))\n                                }}</span>\n                        </template>\n                        <template #ownerApp="props">\n                            <span>{{ props.row.ownerApp }}</span>\n                        </template>\n                        <template #relatedAppNames="props">\n                            <span>{{ props.row.relatedAppNames }}</span>\n                        </template>\n                        <template #actions="props">\n                            <div style="display: flex; align-items: center;">\n                                <div v-show="getImportedVersion(props.row)" class="imported-version"\n                                    @click="selectModule(props.row)">\n                                    <i class="mdi mdi-pencil" style="font-size: 16px; margin-right: 4px"></i>\n                                    <span>{{ getImportedVersion(props.row) }}</span>\n                                </div>\n                                <button class="remove-module" @click="remove(props.row, getImportedVersion(props.row))">\n                                    <i class="mdi mdi-close-circle-outline"></i>\n                                    <span class="button-tooltip" style="right: 48px; z-index: 1; width: 80px;">Remove\n                                        Module</span>\n                                </button>\n                            </div>\n                        </template>\n                    </v-client-table>\n                </div>\n                <div v-else class="no-data-div">\n                    <img class="ghost-img" src="../../../../images/ghost.svg" />\n                    <span style="font-size: 14px; color: #757575">No modules imported yet.</span>\n                </div>\n            </div>\n            <div class="module-tabs">\n                <div @click="availableModule = \'Organization\'"\n                    :class="[\'tab-item\', availableModule == \'Organization\' ? \'active-category\' : \'\']">\n                    Organization Modules\n                </div>\n                <div @click="availableModule = \'Group\'"\n                    :class="[\'tab-item\', availableModule == \'Group\' ? \'active-category\' : \'\']">\n                    Organization Group Modules</div>\n            </div>\n            <div v-if="availableModule == \'Organization\'">\n                <div v-if="avaliableOrgModulesData.length > 0" class="module-tab-div">\n                    <v-client-table ref="table" :data="avaliableOrgModulesData" :columns="tableColumns"\n                        :options="tableOptions">\n                        <template #createDate="props">\n                            <span>{{ new Intl.DateTimeFormat("tr-TR", dateOptions).format(new\n            Date(props.row.createDate))\n                                }}</span>\n                        </template>\n                        <template #ownerApp="props">\n                            <span>{{ props.row.ownerApp }}</span>\n                        </template>\n                        <template #relatedAppNames="props">\n                            <span>{{ props.row.relatedAppNames }}</span>\n                        </template>\n                        <template #actions="props">\n                            <button v-show="props.row.shareType == \'version\'" class="select-module-btn"\n                                @click="selectModule(props.row)"><i class="mdi mdi-chevron-right"></i></button>\n                            <button v-show="props.row.shareType == \'reference\'" class="add-ref-module-btn"\n                                @click="add(props.row)">ADD</button>\n                        </template>\n                    </v-client-table>\n                </div>\n                <div v-else class="no-data-div">\n                    <img class="ghost-img" src="../../../../images/ghost.svg" />\n                    <span class="no-module-text">No available module yet.</span>\n                </div>\n            </div>\n            <div v-else class="module-tab-div">\n                <div v-if="avaliableGroupModulesData.length > 0" class="module-tab-div">\n                    <v-client-table ref="table" :data="avaliableGroupModulesData" :columns="tableColumns"\n                        :options="tableOptions">\n                        <template #createDate="props">\n                            <span>{{ new Intl.DateTimeFormat("tr-TR", dateOptions).format(new\n            Date(props.row.createDate))\n                                }}</span>\n                        </template>\n                        <template #ownerApp="props">\n                            <span>{{ props.row.ownerApp }}</span>\n                        </template>\n                        <template #relatedAppNames="props">\n                            <span>{{ props.row.relatedAppNames }}</span>\n                        </template>\n                        <template #actions="props">\n                            <button v-show="props.row.shareType == \'version\'" class="select-module-btn"\n                                @click="selectModule(props.row)"><i class="mdi mdi-chevron-right"></i></button>\n                            <button v-show="props.row.shareType == \'reference\'" class="add-ref-module-btn"\n                                @click="add(props.row)">ADD</button>\n                        </template>\n                    </v-client-table>\n                </div>\n                <div v-else class="no-data-div">\n                    <img class="ghost-img" src="../../../../images/ghost.svg" />\n                    <span class="no-module-text">No available module yet.</span>\n                </div>\n            </div>\n        </div>\n        <div v-if="importNewOrChange">\n            <div class="module-name-div">\n                <i class="mdi mdi-arrow-left-box back-button" @click="goBack()"></i>\n                <span class="module-name">{{ selectedModule?.name }}</span>\n            </div>\n            <div>\n                <span style="color: #212121; font-size: 14px">Choose the module version you want to import.</span>\n            </div>\n            <v-client-table ref="table" :data="moduleVersions" :columns="moduleVersionTableColumns"\n                :options="moduleVersionTableOptions">\n                <template #createDate="props">\n                    <span>{{ new Intl.DateTimeFormat("tr-TR", dateOptions).format(new Date(props.row.createDate))\n                        }}</span>\n                </template>\n                <template #state="props">\n                    <button v-if="props.row.version == computeImportedVersion()" class="import-btn"\n                        style="color: #D5D5D5; cursor: default;">Imported</button>\n                    <button v-else class="import-btn"\n                        @click="add(selectedModule as IModule, props.row.version)">Import</button>\n                </template>\n            </v-client-table>,\n        </div>\n    </div>\n</template>\n<style scoped>\n@import url("../../../../styles/IDE3.css");\n\n.module-tab-div {\n    margin-top: 12px;\n}\n\n.no-module-text {\n    font-size: 14px;\n    color: #757575\n}\n\n.ghost-img {\n    margin-right: 12px;\n    width: 22px;\n}\n\n.no-data-div {\n    justify-content: center;\n    display: flex;\n    margin: 24px 0;\n    align-items: center;\n}\n\n.module-tabs {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid var(--grey-lighten-1, #BDBDBD);\n}\n\n.tab-item {\n    height: 36px;\n    padding: 10px 54px 10px 54px;\n    font-family: Roboto;\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 16px;\n    letter-spacing: 0em;\n    text-align: center;\n    color: #A1A1A1;\n}\n\n.active-category {\n    color: #151233;\n    border-bottom: 2px solid;\n    font-family: Roboto;\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 16px;\n    letter-spacing: 0em;\n    text-align: center;\n}\n\n.container {\n    padding: 32px 20px 20px;\n}\n\n.table-name {\n    color: #151233;\n    font-size: 16px;\n    font-weight: 500;\n    line-height: 18px;\n    margin-bottom: 12px;\n}\n\n.select-module-btn {\n    border: none;\n    background: none;\n    color: #212121;\n    font-size: 20px;\n}\n\n.back-button {\n    font-size: 28px;\n    color: #151233;\n    cursor: pointer;\n    margin-right: 16px;\n}\n\n.module-name-div {\n    display: flex;\n    align-items: center;\n    margin-bottom: 16px;\n}\n\n.module-name {\n    color: #151233;\n    font-size: 16px;\n    font-weight: 500;\n}\n\n.remove-module {\n    background: none;\n    border: none;\n    font-size: 20px;\n    color: #212121;\n    width: 100%;\n    display: flex;\n    justify-content: end;\n    align-items: center;\n}\n\n.imported-version {\n    color: #2C5A86;\n    font-size: 14px;\n    font-weight: 500;\n    margin-right: 22px;\n    cursor: pointer;\n}\n\n.import-btn {\n    background: none;\n    border: none;\n    font-size: 14px;\n    font-weight: 500;\n    color: #2C5A86;\n    cursor: pointer;\n}\n\n.add-ref-module-btn {\n    font-size: 13px;\n    text-align: center;\n    color: #FFFFFF;\n    background: #151233;\n    display: flex;\n    align-items: center;\n    padding: 4px 8px;\n    border-radius: 4px;\n    border: none;\n}\n\n.remove-module:hover .button-tooltip {\n    opacity: 1;\n    visibility: visible;\n}\n\n.button-tooltip {\n    visibility: hidden;\n    position: absolute;\n    background: #757575;\n    color: #FFFFFF;\n    font-size: 9px;\n    font-family: \'Roboto\';\n    text-align: center;\n    border-radius: 4px;\n    letter-spacing: 0.2px;\n    padding: 6px 8px 6px 8px;\n    opacity: 0;\n}\n</style>'],sourceRoot:""}]);const p=s},81166:(e,n,o)=>{o.d(n,{Z:()=>t});const t=o.p+"160ecac2aab009efd6381a6c36c32a71.svg"},70985:(e,n,o)=>{o.d(n,{w:()=>t});const t=Symbol.for("ILocalization")},83240:(e,n,o)=>{o.d(n,{e:()=>t});const t=Symbol.for("IModuleVersionUseCase")},54118:(e,n,o)=>{o.r(n),o.d(n,{default:()=>be});var t=o(71093),a=o(66190),i=o(46233),l=o(81166),r=o(73843),s=o(5627),p=o(70985),d=o(83240),c=o(29633),u=o(6488),m=o(83487),A=o(88613);const v=e=>((0,t.dD)("data-v-fb8c2154"),e=e(),(0,t.Cn)(),e),g={class:"container vue-table"},I={key:0},f={class:"module-tabs"},b={key:0},w={key:0,class:"module-tab-div"},D={style:{display:"flex","align-items":"center"}},C=["onClick"],h=v((()=>(0,t._)("i",{class:"mdi mdi-pencil",style:{"font-size":"16px","margin-right":"4px"}},null,-1))),x=["onClick"],y=[v((()=>(0,t._)("i",{class:"mdi mdi-close-circle-outline"},null,-1))),v((()=>(0,t._)("span",{class:"button-tooltip",style:{right:"48px","z-index":"1",width:"80px"}},"Remove Module",-1)))],B={key:1,class:"no-data-div"},M=[v((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),v((()=>(0,t._)("span",{style:{"font-size":"14px",color:"#757575"}},"No modules imported yet.",-1)))],z={key:1},k={key:0,class:"module-tab-div"},O={style:{display:"flex","align-items":"center"}},_=["onClick"],V=v((()=>(0,t._)("i",{class:"mdi mdi-pencil",style:{"font-size":"16px","margin-right":"4px"}},null,-1))),T=["onClick"],F=[v((()=>(0,t._)("i",{class:"mdi mdi-close-circle-outline"},null,-1))),v((()=>(0,t._)("span",{class:"button-tooltip",style:{right:"48px","z-index":"1",width:"80px"}},"Remove Module",-1)))],G={key:1,class:"no-data-div"},N=[v((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),v((()=>(0,t._)("span",{style:{"font-size":"14px",color:"#757575"}},"No modules imported yet.",-1)))],E={class:"module-tabs"},S={key:2},R={key:0,class:"module-tab-div"},U=["onClick"],Z=[v((()=>(0,t._)("i",{class:"mdi mdi-chevron-right"},null,-1)))],j=["onClick"],H={key:1,class:"no-data-div"},P=[v((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),v((()=>(0,t._)("span",{class:"no-module-text"},"No available module yet.",-1)))],W={key:3,class:"module-tab-div"},Y={key:0,class:"module-tab-div"},q=["onClick"],L=[v((()=>(0,t._)("i",{class:"mdi mdi-chevron-right"},null,-1)))],J=["onClick"],X={key:1,class:"no-data-div"},K=[v((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),v((()=>(0,t._)("span",{class:"no-module-text"},"No available module yet.",-1)))],Q={key:1},$={class:"module-name-div"},ee={class:"module-name"},ne=v((()=>(0,t._)("div",null,[(0,t._)("span",{style:{color:"#212121","font-size":"14px"}},"Choose the module version you want to import.")],-1))),oe={key:0,class:"import-btn",style:{color:"#D5D5D5",cursor:"default"}},te=["onClick"],ae=(0,t.aZ)({__name:"attachModuleToApp",setup(e){var n,o,l,v;const ae=s.nC.resolve(A.J),ie=s.nC.resolve(m.y),le=s.nC.resolve(p.w),re=s.nC.resolve(c._),se=s.nC.resolve(u.c),pe=s.nC.resolve(d.e),de=(0,r.iH)([]),ce=(0,r.iH)([]),ue=(0,r.iH)([]),me=(0,r.iH)([]),Ae=(0,r.iH)(!1),ve=(0,r.iH)(),ge=(0,r.iH)([]),Ie=(0,r.iH)(["name","description","ownerApp","relatedAppNames","createdBy","createDate","actions"]),fe=(0,r.iH)({filterable:!0,perPage:5,perPageValues:[],headings:{name:le.get("moduleName"),description:le.get("description"),ownerApp:le.get("ownerApp"),relatedAppNames:le.get("relatedApplications"),createdBy:le.get("createdBy"),createDate:le.get("createDate"),shareType:le.get("shareType"),actions:""},resizableColumns:!1,skin:"import-module",texts:{count:"",noResults:"No matching records",filterPlaceholder:"Search"}}),be=(0,r.iH)(["version","description","createdBy","createDate","state"]),we=(0,r.iH)("Organization"),De=(0,r.iH)("Organization"),Ce=(0,r.iH)(null===(n=ae.user.selectedOrganizationGroup)||void 0===n?void 0:n.organizationGroup),he=(0,r.iH)(null===(v=null===(l=null===(o=ae.user.selectedOrganizationGroup)||void 0===o?void 0:o.organizationApplications)||void 0===l?void 0:l.find((e=>{var n;return e.organizationId==(null===(n=Ce.value)||void 0===n?void 0:n.mainOrganizationId)})))||void 0===v?void 0:v.modules),xe=(0,r.iH)({filterable:!1,perPage:5,perPageValues:[],headings:{version:le.get("version"),description:le.get("description"),createdBy:le.get("createdBy"),createDate:le.get("createDate"),state:""},resizableColumns:!1,skin:"module-versions",texts:{count:"",noResults:"No matching records"}}),ye={month:"2-digit",day:"2-digit",year:"numeric"};function Be(){function e(e,n){e.ownerApp=e.mainOwner?n[e.mainOwner]:"";const o=e.relatedApplications.map((e=>n[e.applicationID])).filter((n=>n!=e.ownerApp));e.relatedAppNames=o.join(", ")}ie.execute((async()=>{const n=await re.listModules(),o=await re.getGroupModules(),t={};ae.apps.forEach((e=>t[e.ID]=e.name)),n.forEach((n=>{e(n,t);const o=ke(n);o&&n.mainOwner&&n.mainOwner!=ae.studio.appId?de.value.push(n):!o&&n.shareType&&ue.value.push(n)})),null==o||o.forEach((n=>{e(n,t),ke(n)?ce.value.push(n):me.value.push(n)}))}),{loading:!0})}function Me(e,n){var o,t;const a=null===(o=he.value)||void 0===o?void 0:o.find((n=>n.ID==e.ID)),i=ae.studio.appId,l=a?ce:de,r=a?me:ue,s=a?null===(t=Ce.value)||void 0===t?void 0:t.mainOrganizationId:void 0;ie.execute((async()=>{if(n){if(ke(e)){await se.detachModuleFromApplication(e,i,!0,s);const n=l.value.find((n=>n.ID==e.ID));n.relatedApplications=n.relatedApplications.filter((e=>e.applicationID!=i)),Be()}await se.attachModuletoApplication(e,i,!0,n,s),r.value.find((n=>n.ID==e.ID)).relatedApplications.push({applicationID:i,importedVersion:n}),ge.value.find((e=>e.version==n)).relatedApplications.push({applicationID:i,importedVersion:n}),ve.value.currentVersion=n}else await se.attachModuletoApplication(e,i,!1,s),r.value.find((n=>n.ID==e.ID)).relatedApplications.push({applicationID:i});Be()}),{loading:!0})}function ze(e,n){var o,t;const a=null===(o=he.value)||void 0===o?void 0:o.find((n=>n.ID==e.ID)),i=a?ce:de,l=a?null===(t=Ce.value)||void 0===t?void 0:t.mainOrganizationId:void 0;ie.execute((async()=>{const o=ae.studio.appId;await se.detachModuleFromApplication(e,o,!1,n,l);const t=i.value.find((n=>n.ID==e.ID));t.relatedApplications=t.relatedApplications.filter((e=>e.applicationID!=o)),ge.value.find((e=>e.version==n)).relatedApplications=t.relatedApplications.filter((e=>e.applicationID!=o)),Be()}),{loading:!0})}function ke(e){var n;const o=ae.studio.appId;return!!(null===(n=e.relatedApplications)||void 0===n?void 0:n.some((e=>e.applicationID==o)))}function Oe(e){var n;n=e.ID,ie.execute((async()=>{var e,o;const t=(null===(e=he.value)||void 0===e?void 0:e.find((e=>e.ID==n)))?null===(o=Ce.value)||void 0===o?void 0:o.mainOrganizationId:void 0;ge.value=await pe.listModuleVersions(n,t)}),{loading:!0}),ve.value=e,ve.value.currentVersion=_e(e),Ae.value=!0}function _e(e){var n;const o=ae.studio.appId;return null===(n=e.relatedApplications.find((e=>o==e.applicationID)))||void 0===n?void 0:n.importedVersion}function Ve(){var e;return null===(e=ve.value)||void 0===e?void 0:e.currentVersion}return Be(),(e,n)=>{var o;const l=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)("div",g,[Ae.value?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)("div",I,[(0,t._)("div",f,[(0,t._)("div",{onClick:n[0]||(n[0]=e=>we.value="Organization"),class:(0,a.normalizeClass)(["tab-item","Organization"==we.value?"active-category":""])},"Imported Organization Modules ",2),(0,t._)("div",{onClick:n[1]||(n[1]=e=>we.value="Group"),class:(0,a.normalizeClass)(["tab-item","Group"==we.value?"active-category":""])}," Imported Organization Group Modules",2)]),"Organization"==we.value?((0,t.wg)(),(0,t.iD)("div",b,[de.value.length>0?((0,t.wg)(),(0,t.iD)("div",w,[(0,t.Wm)(l,{ref:"table",data:de.value,columns:Ie.value,options:fe.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(new Intl.DateTimeFormat("tr-TR",ye).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t._)("div",D,[(0,t.wy)((0,t._)("div",{class:"imported-version",onClick:n=>Oe(e.row)},[h,(0,t._)("span",null,(0,a.toDisplayString)(_e(e.row)),1)],8,C),[[i.vShow,_e(e.row)]]),(0,t._)("button",{class:"remove-module",onClick:n=>ze(e.row,_e(e.row))},y,8,x)])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",B,M))])):((0,t.wg)(),(0,t.iD)("div",z,[ce.value.length>0?((0,t.wg)(),(0,t.iD)("div",k,[(0,t.Wm)(l,{ref:"table",data:ce.value,columns:Ie.value,options:fe.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(new Intl.DateTimeFormat("tr-TR",ye).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t._)("div",O,[(0,t.wy)((0,t._)("div",{class:"imported-version",onClick:n=>Oe(e.row)},[V,(0,t._)("span",null,(0,a.toDisplayString)(_e(e.row)),1)],8,_),[[i.vShow,_e(e.row)]]),(0,t._)("button",{class:"remove-module",onClick:n=>ze(e.row,_e(e.row))},F,8,T)])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",G,N))])),(0,t._)("div",E,[(0,t._)("div",{onClick:n[2]||(n[2]=e=>De.value="Organization"),class:(0,a.normalizeClass)(["tab-item","Organization"==De.value?"active-category":""])}," Organization Modules ",2),(0,t._)("div",{onClick:n[3]||(n[3]=e=>De.value="Group"),class:(0,a.normalizeClass)(["tab-item","Group"==De.value?"active-category":""])}," Organization Group Modules",2)]),"Organization"==De.value?((0,t.wg)(),(0,t.iD)("div",S,[ue.value.length>0?((0,t.wg)(),(0,t.iD)("div",R,[(0,t.Wm)(l,{ref:"table",data:ue.value,columns:Ie.value,options:fe.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(new Intl.DateTimeFormat("tr-TR",ye).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t.wy)((0,t._)("button",{class:"select-module-btn",onClick:n=>Oe(e.row)},Z,8,U),[[i.vShow,"version"==e.row.shareType]]),(0,t.wy)((0,t._)("button",{class:"add-ref-module-btn",onClick:n=>Me(e.row)},"ADD",8,j),[[i.vShow,"reference"==e.row.shareType]])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",H,P))])):((0,t.wg)(),(0,t.iD)("div",W,[me.value.length>0?((0,t.wg)(),(0,t.iD)("div",Y,[(0,t.Wm)(l,{ref:"table",data:me.value,columns:Ie.value,options:fe.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(new Intl.DateTimeFormat("tr-TR",ye).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t.wy)((0,t._)("button",{class:"select-module-btn",onClick:n=>Oe(e.row)},L,8,q),[[i.vShow,"version"==e.row.shareType]]),(0,t.wy)((0,t._)("button",{class:"add-ref-module-btn",onClick:n=>Me(e.row)},"ADD",8,J),[[i.vShow,"reference"==e.row.shareType]])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",X,K))]))])),Ae.value?((0,t.wg)(),(0,t.iD)("div",Q,[(0,t._)("div",$,[(0,t._)("i",{class:"mdi mdi-arrow-left-box back-button",onClick:n[4]||(n[4]=e=>(Ae.value=!1,void Be()))}),(0,t._)("span",ee,(0,a.toDisplayString)(null===(o=ve.value)||void 0===o?void 0:o.name),1)]),ne,(0,t.Wm)(l,{ref:"table",data:ge.value,columns:be.value,options:xe.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,a.toDisplayString)(new Intl.DateTimeFormat("tr-TR",ye).format(new Date(e.row.createDate))),1)])),state:(0,t.w5)((e=>[e.row.version==Ve()?((0,t.wg)(),(0,t.iD)("button",oe,"Imported")):((0,t.wg)(),(0,t.iD)("button",{key:1,class:"import-btn",onClick:n=>Me(ve.value,e.row.version)},"Import",8,te))])),_:1},8,["data","columns","options"]),(0,t.Uk)(", ")])):(0,t.kq)("v-if",!0)])}}});var ie=o(17450),le=o.n(ie),re=o(29530),se=o.n(re),pe=o(16199),de=o.n(pe),ce=o(40458),ue=o.n(ce),me=o(62916),Ae=o.n(me),ve=o(92165),ge=o.n(ve),Ie=o(5096),fe={};fe.styleTagTransform=ge(),fe.setAttributes=ue(),fe.insert=de().bind(null,"head"),fe.domAPI=se(),fe.insertStyleElement=Ae(),le()(Ie.Z,fe),Ie.Z&&Ie.Z.locals&&Ie.Z.locals;const be=(0,o(32525).Z)(ae,[["__scopeId","data-v-fb8c2154"]])}}]);
//# sourceMappingURL=4118.js.map?ver=0.0.317_1715766246083