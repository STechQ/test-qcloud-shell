"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[291],{61025:(n,e,i)=>{i.d(e,{Z:()=>r});var t=i(34663),a=i.n(t),o=i(7638),s=i.n(o)()(a());s.push([n.id,"\n.user-info-type[data-v-a6b020d8] {\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    background: #FFFFFF;\n    margin-right: 37px;\n    padding: 24px 24px 18px;\n    display: flex;\n    flex-direction: column;\n}\n.user-info-type[data-v-a6b020d8]:last-child {\n    margin-right: 0;\n}\n.user-info-type-name[data-v-a6b020d8] {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #757575;\n    margin-bottom: 20px;\n    min-width: 100px;\n    flex: 1;\n}\n.user-info[data-v-a6b020d8] {\n    font-weight: 500;\n    font-size: 28px;\n    line-height: 33px;\n    color: #151233;\n}\n.div-title[data-v-a6b020d8] {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #151233;\n    margin-bottom: 20px;\n}\n.user-org-table[data-v-a6b020d8] {\n    background: #FFFFFF;\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    width: 100%;\n}\ntd[data-v-a6b020d8]:hover {\n    background-color: none !important;\n}\ntable tr[data-v-a6b020d8]:hover {\n    background-color: #EEEEEE;\n}\n.user-org-table th[data-v-a6b020d8]\n    {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 18px 36px\n}\n.user-org-table td[data-v-a6b020d8] {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 20px 36px;\n    color: #212121;\n    font-size: 14px;\n    line-height: 16px;\n}\n.user-org-table .thead[data-v-a6b020d8] {\n    background: #F5F5F5;\n    color: #616161;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.view-btn[data-v-a6b020d8] {\n    background: none;\n    border:none;\n    color: #2C5A86;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.manage-user-div[data-v-a6b020d8] {\n    width: 85%; \n    display: flex; \n    justify-content: end;\n    position: absolute;\n    top: 80px;\n    right: 36px;\n}\n.manage-btn[data-v-a6b020d8] {\n  border: 1px solid #151233;\n  border-radius: 4px;\n  padding: 1.5px 16px;\n  font-size: 15px;\n  color: #151233;\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n}\n.delete-user-btn[data-v-a6b020d8] {\n        background: #CBCBCB;\n        border-radius: 4px;\n        color: #212121;\n        border: none;\n        margin-left: 12px;\n        display: flex;\n        align-items: center;\n        padding: 1.5px 16px;\n        font-size: 15px;\n        font-weight: 500;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/pages/backoffice/user.vue"],names:[],mappings:";AA0IA;IACI,yBAAyB;IACzB,8CAA8C;IAC9C,mBAAmB;IACnB,mBAAmB;IACnB,kBAAkB;IAClB,uBAAuB;IACvB,aAAa;IACb,sBAAsB;AAC1B;AACA;IACI,eAAe;AACnB;AACA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;IACd,mBAAmB;IACnB,gBAAgB;IAChB,OAAO;AACX;AACA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;AAClB;AACA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;IACd,mBAAmB;AACvB;AACA;IACI,mBAAmB;IACnB,yBAAyB;IACzB,8CAA8C;IAC9C,mBAAmB;IACnB,WAAW;AACf;AACA;IACI,iCAAiC;AACrC;AACA;IACI,yBAAyB;AAC7B;AACA;;IAEI,gCAAgC;IAChC;AACJ;AACA;IACI,gCAAgC;IAChC,kBAAkB;IAClB,cAAc;IACd,eAAe;IACf,iBAAiB;AACrB;AACA;IACI,mBAAmB;IACnB,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,iBAAiB;AACrB;AACA;IACI,gBAAgB;IAChB,WAAW;IACX,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,iBAAiB;AACrB;AACA;IACI,UAAU;IACV,aAAa;IACb,oBAAoB;IACpB,kBAAkB;IAClB,SAAS;IACT,WAAW;AACf;AACA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,mBAAmB;EACnB,eAAe;EACf,cAAc;EACd,aAAa;EACb,mBAAmB;EACnB,gBAAgB;AAClB;AACA;QACQ,mBAAmB;QACnB,kBAAkB;QAClB,cAAc;QACd,YAAY;QACZ,iBAAiB;QACjB,aAAa;QACb,mBAAmB;QACnB,mBAAmB;QACnB,eAAe;QACf,gBAAgB;AACpB",sourcesContent:['<script setup lang="ts">\nimport { defineAsyncComponent, onBeforeMount, ref } from "vue";\nimport { IUser_SUSI } from "../../../../../../common/qCloudTemp/authentication";\nimport { IOrganization } from "../../../../../../common/qCloudTemp/membership";\nimport { container } from "../../../../domain/core/diContainer";\nimport { IDialog } from "../../../../domain/presentation/IDialog";\nimport { IRouter } from "../../../../domain/presentation/IRouter";\nimport { IBackofficeUseCase } from "../../../../domain/useCase/IBackofficeUseCase";\nimport { IUseCaseExecutor } from "../../../../domain/useCase/IUseCaseExecutor";\nimport { IOrganizationUseCase } from "../../../../domain/useCase/IOrganizationUseCase";\nimport OrganizationList from "../../components/backoffice/organization/organizationList.vue";\nimport { IViewModel } from "../../../../domain/viewModel/IViewModel";\n\n\nconst router = container.resolve<IRouter>(IRouter);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst backofficeUseCase = container.resolve<IBackofficeUseCase>(IBackofficeUseCase);\n\n\nconst routerParams = router.getRouteParams<{ userId: string }>();\nbackofficeUseCase.setBreadcrumb(["Users", "User Detail"]);\nconst user = ref<IUser_SUSI>();\nconst orgInfo = ref<Array<IOrganization>>([]);\nconst dialog = container.resolve<IDialog>(IDialog);\nconst organizationsDataIsReady = ref(false);\n\n\n\nonBeforeMount(() => {\n    getOrganizations();\n})\n// function viewOrganization(organizationId: string) {\n//     router.push(`/backoffice/organization/${organizationId}`);\n// }\n// function remove( userId: string, organizationId: string) {\n//     executor.execute(async () => {\n//         await backofficeUseCase.removeUserFromOrganization({ userId, organizationId });\n//         // await getOrganizations();\n//     }, { loading: true });\n// }\n// function formatDate(date?: Date) {\n//     if(date) {\n//         const formatter = new Intl.DateTimeFormat(\'en-GB\', { year: \'numeric\', month: \'long\', day: \'numeric\', hour: \'numeric\', minute: \'numeric\' });\n//         const formattedDate = formatter.format(new Date(date));\n//         return formattedDate;\n//     }\n// }\nfunction openManageUserDialog () {\n  dialog.showDialog(\n        defineAsyncComponent(() => import(`../../components/dialogs/backoffice/manageUser.vue`)),\n        { closable: true, title: "Manage User", width: "499px", maxHeight: "184px" }, {user: user.value}\n    );\n}\nfunction getOrganizations() {\n    executor.execute(async () => {\n        user.value = await backofficeUseCase.getUserInfo(routerParams.userId);\n        orgInfo.value = await backofficeUseCase.getOrganizationsByUserId(routerParams.userId);\n        organizationsDataIsReady.value = true;\n    }, { loading: true });\n}\n\nfunction openDeleteUserDialog() {\n    dialog.showDialog(\n            defineAsyncComponent(() => import(`../../components/dialogs/backoffice/deleteConfirmation.vue`)),\n            { closable: true, title: "Delete User", width: "577px", maxHeight: "206px" },\n            { \n                infoText: \'User Email\',  \n                placeholder:`Write user email \'${user.value?.email}\' to delete`, validText: user.value?.email, \n                deleteCb: async () => {\n                    await executor.execute(async () => {\n                        await backofficeUseCase.deleteUser(user.value?.id!, user.value?.email!);\n                        router.push("/backoffice/users");\n                    }, { loading: true });\n                }\n            });\n}\n<\/script>\n\n<template>\n    <div class="manage-user-div">\n        <button class="manage-btn" @click="openManageUserDialog()"><i class="mdi mdi-cog" style="font-size: 20px; margin-right: 4px"></i><span>MANAGE USER</span></button>\n        <button class="delete-user-btn" @click="openDeleteUserDialog()"><i class="mdi mdi-delete" style="font-size: 20px; margin-right: 4px"></i><span>DELETE</span></button>\n    </div>  \n    <div style="display:flex; margin-bottom: 32px;">\n        <div class="user-info-type">\n            <div class="user-info-type-name">Name</div>\n            <div class="user-info">{{ user?.name }}</div>\n        </div>\n        <div class="user-info-type">\n            <div class="user-info-type-name">Last Name</div>\n            <div class="user-info">{{ user?.lastName }}</div>\n        </div>\n        <div class="user-info-type">\n            <div class="user-info-type-name">E-mail</div>\n            <div class="user-info">{{ user?.email }}</div>\n        </div>\n        <div class="user-info-type" style="flex: 1">\n            <div class="user-info-type-name">ID</div>\n            <div class="user-info" style="font-size: 20px;">{{ user?.id }}</div>\n        </div>\n        <div class="user-info-type" style="flex: 1">\n            <div class="user-info-type-name">Object ID</div>\n            <div class="user-info" style="font-size: 20px;">{{ user?.objectId }}</div>\n        </div>\n    </div>\n    <div style="margin-bottom: 32px;">\n        <div v-if="organizationsDataIsReady">\n            <OrganizationList :organizations="orgInfo" :userID = "user?.id" @refreshTable="getOrganizations"></OrganizationList>\n        </div>\n    </div>\n    <div style="display: none">\n        <div class="div-title">Roles ({{ user?.organizationIds.length }})</div>\n        <div>\n            <table class="user-org-table"> \n                <tr class="thead">\n                    <th class="col-xl-3">ID</th>\n                    <th class="col-xl-3">Name</th>\n                    <th class="col-xl-3">Date Created</th>\n                    <th class="col-xl-2">Date Joined</th>\n                    <th class="col-xl-1"></th>\n                </tr>\n                <tr v-for="org in orgInfo" :key="org.id">\n                    <td>{{ org.id }}</td>\n                    <td>{{ org.name }}</td>\n                    <td> {{ org.createDate }}</td>\n                    <td>-</td>\n                    <td><div style="display: flex;">\n                        <button class="remove-btn">REMOVE</button>\n                        <button class="view-btn">VIEW</button>\n                    </div></td>\n                </tr>\n            </table>\n        </div>\n    </div>\n\n</template>\n\n<style scoped>\n.user-info-type {\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    background: #FFFFFF;\n    margin-right: 37px;\n    padding: 24px 24px 18px;\n    display: flex;\n    flex-direction: column;\n}\n.user-info-type:last-child {\n    margin-right: 0;\n}\n.user-info-type-name {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #757575;\n    margin-bottom: 20px;\n    min-width: 100px;\n    flex: 1;\n}\n.user-info {\n    font-weight: 500;\n    font-size: 28px;\n    line-height: 33px;\n    color: #151233; \n}\n.div-title {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #151233;\n    margin-bottom: 20px;\n}\n.user-org-table {\n    background: #FFFFFF;\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    width: 100%;\n}\ntd:hover {\n    background-color: none !important;\n}\ntable tr:hover {\n    background-color: #EEEEEE;\n}   \n.user-org-table th\n    {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 18px 36px\n}\n.user-org-table td {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 20px 36px;\n    color: #212121;\n    font-size: 14px;\n    line-height: 16px;\n}\n.user-org-table .thead {\n    background: #F5F5F5;\n    color: #616161;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.view-btn {\n    background: none;\n    border:none;\n    color: #2C5A86;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.manage-user-div {\n    width: 85%; \n    display: flex; \n    justify-content: end;\n    position: absolute;\n    top: 80px;\n    right: 36px;\n}\n.manage-btn {\n  border: 1px solid #151233;\n  border-radius: 4px;\n  padding: 1.5px 16px;\n  font-size: 15px;\n  color: #151233;\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n}\n.delete-user-btn {\n        background: #CBCBCB;\n        border-radius: 4px;\n        color: #212121;\n        border: none;\n        margin-left: 12px;\n        display: flex;\n        align-items: center;\n        padding: 1.5px 16px;\n        font-size: 15px;\n        font-weight: 500;   \n    }\n</style>'],sourceRoot:""}]);const r=s},91056:(n,e,i)=>{i.d(e,{u:()=>t});const t=Symbol.for("IDialog")},30291:(n,e,i)=>{i.r(e),i.d(e,{default:()=>en});var t=i(71093),a=i(66190),o=i(73843),s=i(5627),r=i(91056),l=i(1937),d=i(20559),A=i(83487),c=i(7222);const u=n=>((0,t.dD)("data-v-a6b020d8"),n=n(),(0,t.Cn)(),n),p={class:"manage-user-div"},g=[u((()=>(0,t._)("i",{class:"mdi mdi-cog",style:{"font-size":"20px","margin-right":"4px"}},null,-1))),u((()=>(0,t._)("span",null,"MANAGE USER",-1)))],m=[u((()=>(0,t._)("i",{class:"mdi mdi-delete",style:{"font-size":"20px","margin-right":"4px"}},null,-1))),u((()=>(0,t._)("span",null,"DELETE",-1)))],f={style:{display:"flex","margin-bottom":"32px"}},v={class:"user-info-type"},x=u((()=>(0,t._)("div",{class:"user-info-type-name"},"Name",-1))),C={class:"user-info"},b={class:"user-info-type"},B=u((()=>(0,t._)("div",{class:"user-info-type-name"},"Last Name",-1))),I={class:"user-info"},h={class:"user-info-type"},y=u((()=>(0,t._)("div",{class:"user-info-type-name"},"E-mail",-1))),E={class:"user-info"},w={class:"user-info-type",style:{flex:"1"}},D=u((()=>(0,t._)("div",{class:"user-info-type-name"},"ID",-1))),z={class:"user-info",style:{"font-size":"20px"}},k={class:"user-info-type",style:{flex:"1"}},_=u((()=>(0,t._)("div",{class:"user-info-type-name"},"Object ID",-1))),U={class:"user-info",style:{"font-size":"20px"}},F={style:{"margin-bottom":"32px"}},O={key:0},R={style:{display:"none"}},S={class:"div-title"},T={class:"user-org-table"},M=u((()=>(0,t._)("tr",{class:"thead"},[(0,t._)("th",{class:"col-xl-3"},"ID"),(0,t._)("th",{class:"col-xl-3"},"Name"),(0,t._)("th",{class:"col-xl-3"},"Date Created"),(0,t._)("th",{class:"col-xl-2"},"Date Joined"),(0,t._)("th",{class:"col-xl-1"})],-1))),Q=u((()=>(0,t._)("td",null,"-",-1))),W=u((()=>(0,t._)("td",null,[(0,t._)("div",{style:{display:"flex"}},[(0,t._)("button",{class:"remove-btn"},"REMOVE"),(0,t._)("button",{class:"view-btn"},"VIEW")])],-1))),j=(0,t.aZ)({__name:"user",setup(n){const e=s.nC.resolve(l.v5),u=s.nC.resolve(A.y),j=s.nC.resolve(d.X),N=e.getRouteParams();j.setBreadcrumb(["Users","User Detail"]);const H=(0,o.iH)(),Z=(0,o.iH)([]),L=s.nC.resolve(r.u),P=(0,o.iH)(!1);function V(){u.execute((async()=>{H.value=await j.getUserInfo(N.userId),Z.value=await j.getOrganizationsByUserId(N.userId),P.value=!0}),{loading:!0})}return(0,t.wF)((()=>{V()})),(n,o)=>{var s,r,l,d,A,N,q;return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",p,[(0,t._)("button",{class:"manage-btn",onClick:o[0]||(o[0]=n=>{L.showDialog((0,t.RC)((()=>i.e(1637).then(i.bind(i,71637)))),{closable:!0,title:"Manage User",width:"499px",maxHeight:"184px"},{user:H.value})})},g),(0,t._)("button",{class:"delete-user-btn",onClick:o[1]||(o[1]=n=>function(){var n,a;L.showDialog((0,t.RC)((()=>Promise.all([i.e(9607),i.e(4199)]).then(i.bind(i,78570)))),{closable:!0,title:"Delete User",width:"577px",maxHeight:"206px"},{infoText:"User Email",placeholder:`Write user email '${null===(n=H.value)||void 0===n?void 0:n.email}' to delete`,validText:null===(a=H.value)||void 0===a?void 0:a.email,deleteCb:async()=>{await u.execute((async()=>{var n,i;await j.deleteUser(null===(n=H.value)||void 0===n?void 0:n.id,null===(i=H.value)||void 0===i?void 0:i.email),e.push("/backoffice/users")}),{loading:!0})}})}())},m)]),(0,t._)("div",f,[(0,t._)("div",v,[x,(0,t._)("div",C,(0,a.toDisplayString)(null===(s=H.value)||void 0===s?void 0:s.name),1)]),(0,t._)("div",b,[B,(0,t._)("div",I,(0,a.toDisplayString)(null===(r=H.value)||void 0===r?void 0:r.lastName),1)]),(0,t._)("div",h,[y,(0,t._)("div",E,(0,a.toDisplayString)(null===(l=H.value)||void 0===l?void 0:l.email),1)]),(0,t._)("div",w,[D,(0,t._)("div",z,(0,a.toDisplayString)(null===(d=H.value)||void 0===d?void 0:d.id),1)]),(0,t._)("div",k,[_,(0,t._)("div",U,(0,a.toDisplayString)(null===(A=H.value)||void 0===A?void 0:A.objectId),1)])]),(0,t._)("div",F,[P.value?((0,t.wg)(),(0,t.iD)("div",O,[(0,t.Wm)(c.Z,{organizations:Z.value,userID:null===(N=H.value)||void 0===N?void 0:N.id,onRefreshTable:V},null,8,["organizations","userID"])])):(0,t.kq)("v-if",!0)]),(0,t._)("div",R,[(0,t._)("div",S,"Roles ("+(0,a.toDisplayString)(null===(q=H.value)||void 0===q?void 0:q.organizationIds.length)+")",1),(0,t._)("div",null,[(0,t._)("table",T,[M,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Z.value,(n=>((0,t.wg)(),(0,t.iD)("tr",{key:n.id},[(0,t._)("td",null,(0,a.toDisplayString)(n.id),1),(0,t._)("td",null,(0,a.toDisplayString)(n.name),1),(0,t._)("td",null,(0,a.toDisplayString)(n.createDate),1),Q,W])))),128))])])])],64)}}});var N=i(17450),H=i.n(N),Z=i(29530),L=i.n(Z),P=i(16199),V=i.n(P),q=i(40458),Y=i.n(q),G=i(62916),J=i.n(G),X=i(92165),$=i.n(X),K=i(61025),nn={};nn.styleTagTransform=$(),nn.setAttributes=Y(),nn.insert=V().bind(null,"head"),nn.domAPI=L(),nn.insertStyleElement=J(),H()(K.Z,nn),K.Z&&K.Z.locals&&K.Z.locals;const en=(0,i(32525).Z)(j,[["__scopeId","data-v-a6b020d8"]])}}]);
//# sourceMappingURL=291.js.map