"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[3865],{51025:(e,n,o)=>{o.d(n,{Z:()=>a});var t=o(8375),l=o.n(t),i=o(7638),d=o.n(i)()(l());d.push([e.id,'\n.container[data-v-0c72b02c] {\n    padding: 22px 20px 20px;\n}\n.modules-datatable[data-v-0c72b02c] {\n    width: 760px;\n    height: 288px;\n    overflow-x: hidden;\n    overflow-y: auto;\n    margin-bottom: 20px;\n}\n.modules-datatable[data-v-0c72b02c]::-webkit-scrollbar {\n    width: 4px;\n}\n.modules-datatable[data-v-0c72b02c]::-webkit-scrollbar-thumb {\n    background: #bcbcbc 0% 0% no-repeat padding-box;\n    border-radius: 10px;\n}\n.modules-datatable[data-v-0c72b02c]::-webkit-scrollbar-thumb:hover {\n    background: #555;\n}\n.row-container[data-v-0c72b02c] {\n    width: 100%;\n    height: 36px;\n    position: relative;\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #e0e0e0;\n}\n.chevron[data-v-0c72b02c] {\n    position: absolute;\n    left: 4px;\n    color: #757575;\n    font-size: 24px;\n}\n.chevron.disabled[data-v-0c72b02c] {\n    pointer-events: none;\n    color: #D5D5D5;\n}\n.footer[data-v-0c72b02c] {\n    position: relative;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: end;\n}\n.cancel-button[data-v-0c72b02c] {\n    border-radius: 4px;\n    user-select: none;\n    font-style: normal;\n    font-weight: 500;\n    font-family: "ROBOTO";\n    font-size: 15px;\n    color: #757575;\n    padding: 10px 16px;\n    cursor: pointer;\n}\n.set-reference-button[data-v-0c72b02c] {\n    background-color: #151233;\n    color: white;\n    border-radius: 4px;\n    border: none;\n    width: 152px;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 40px;\n    text-align: center;\n    cursor: pointer;\n}\n\n',""]);const a=d},91736:(e,n,o)=>{o.d(n,{Z:()=>a});var t=o(8375),l=o.n(t),i=o(7638),d=o.n(i)()(l());d.push([e.id,"\n.set-reference-row-container[data-v-028f7d68] {\n\twidth: 100%;\n\theight: 36px;\n\tposition: relative;\n\tbackground: #ffffff 0% 0% no-repeat padding-box;\n\tborder: 1px solid #e0e0e0;\n}\n.app-tier-model-icon[data-v-028f7d68] {\n\tposition: absolute;\n\twidth: 16px;\n\theight: 16px;\n\ttop: 6px;\n\tcursor: pointer;\n}\n.app-tier-model-name[data-v-028f7d68] {\n\tposition: absolute;\n\ttop: 9px;\n\tfont: normal normal normal 14px/19px Roboto;\n\tcolor: #212121;\n\tcursor: pointer;\n}\n.set-reference-row-container[data-v-028f7d68]:hover {\n  background: #e5e5e5;\n}\n.chevron[data-v-028f7d68] {\n\tposition: absolute;\n\tcolor: #757575;\n\tfont-size: 24px;\n}\n.bpmn-color[data-v-028f7d68] {\n\tcolor: #007c77;\n}\n.process-color[data-v-028f7d68] {\n\tcolor: #007c77;\n}\n.entity-designer-color[data-v-028f7d68] {\n\tcolor: #e9724c;\n}\n.qjson-color[data-v-028f7d68] {\n\tcolor: #449dd1;\n}\n.yaml-color[data-v-028f7d68] {\n\tcolor: #449dd1;\n}\n.namedcomp-color[data-v-028f7d68] {\n\tcolor: #212121;\n}\n.app-settings-color[data-v-028f7d68] {\n\tcolor: #151233;\n}\n.js-color[data-v-028f7d68] {\n\tcolor: #449dd1;\n}\n.css-color[data-v-028f7d68] {\n\tcolor: #151233;\n}\n.set-reference-row-container[data-v-028f7d68]::-webkit-scrollbar-thumb {\n    background: #BDBDBD;\n    border-radius: 12px;\n    border: 6px solid #FFFFFF;\n    background-clip: padding-box;\n}\n.set-reference-row-container[data-v-028f7d68]::-webkit-scrollbar-track {\n    background: #FFFFFF;\n}\n.set-reference-row-container[data-v-028f7d68]::-webkit-scrollbar {\n    background: #FFFFFF;\n}\n.set-reference-row-container.active[data-v-028f7d68]{\n\tbackground-color: #e5e5e5;\n}\n\n",""]);const a=d},63865:(e,n,o)=>{o.r(n),o.d(n,{default:()=>G});var t=o(71093),l=o(66190),i=o(21905),d=o(73843),a=o(46233),r=o(5627),c=o(62376),s=o(17379),p=o(83487),u=o(88613),v=o(54848),m=o(66059);const h=["id"],f=["onClick"],b=(0,t.aZ)({__name:"setMissingReferencesDialogItem",props:{handleItemCheckEvent:{type:Function},startScreen:null,handleCollapse:{type:Function},item:null,selectedRow:null,onRowSelected:{type:Function}},setup(e,{expose:n}){const o=e,i=(0,d.iH)("mdi mdi-menu-down chevron"),r=(0,d.iH)(o.item.checked);function c(){o.handleCollapse(o.item,!0),i.value=`mdi mdi-menu${o.item.collapsed?"-right":"-down"} chevron`}n({handleModuleCountCheckboxEvent:function(){return r.value=o.item.checked,r.value}});const s=(0,t.Fl)((()=>25*(o.item.level||0)));return(n,r)=>{var p,u;return(0,t.wg)(),(0,t.iD)("div",{class:(0,l.normalizeClass)({"set-reference-row-container":!0,active:o.selectedRow.value===e.item.id}),id:e.item.id,onClick:r[0]||(r[0]=n=>function(e){var n;console.log("bastim:"+e),null===(n=o.onRowSelected)||void 0===n||n.call(o,e)}(e.item.id))},[e.item.children&&(null===(p=e.item.children)||void 0===p?void 0:p.length)>0?((0,t.wg)(),(0,t.iD)("i",{key:0,class:(0,l.normalizeClass)(i.value),onClick:(0,a.withModifiers)(c,["stop"]),style:(0,l.normalizeStyle)({cursor:"pointer",left:(e.item.level?(0,d.SU)(s)-20:4)+"px"})},null,14,f)):(0,t.kq)("v-if",!0),(0,t._)("i",{class:(0,l.normalizeClass)("app-tier-model-icon "+(0,d.SU)(m.o).getModelVisualInfo(e.item.type,void 0).icon),style:(0,l.normalizeStyle)({color:(0,d.SU)(m.o).getModelVisualInfo(e.item.type,void 0).color,left:(0,d.SU)(s)+(e.item.level?45:69)+"px"})},null,6),(0,t._)("span",{style:(0,l.normalizeStyle)({left:(0,d.SU)(s)+(e.item.level?71:91)+"px"}),class:(0,l.normalizeClass)(["app-tier-model-name"])},(0,l.toDisplayString)(null===(u=e.item)||void 0===u?void 0:u.name),5)],10,h)}}});var y=o(17450),g=o.n(y),k=o(29530),w=o.n(k),C=o(16199),I=o.n(C),x=o(40458),T=o.n(x),D=o(62916),S=o.n(D),M=o(92165),F=o.n(M),E=o(91736),H={};H.styleTagTransform=F(),H.setAttributes=T(),H.insert=I().bind(null,"head"),H.domAPI=w(),H.insertStyleElement=S(),g()(E.Z,H),E.Z&&E.Z.locals&&E.Z.locals;var _=o(32525);const A=(0,_.Z)(b,[["__scopeId","data-v-028f7d68"]]);var U=o(29307),z=o(3329),Z=o(29633),R=o(44526),j=o(28820),B=o(22035);const V={class:"container"},q=(e=>((0,t.dD)("data-v-0c72b02c"),e=e(),(0,t.Cn)(),e))((()=>(0,t._)("div",{class:(0,l.normalizeClass)(["modules-datatable"]),id:"module-container-div"},null,-1))),P={class:(0,l.normalizeClass)(["footer"])},O=(0,t.aZ)({__name:"setMissingReferences",props:{param:null},emits:["close"],setup(e,{emit:n}){const o=e,m=r.nC.resolve(u.J),h=r.nC.resolve(v.B),f=r.nC.resolve(p.y),b=r.nC.resolve(U.w),y=r.nC.resolve(Z._),g=r.nC.resolve(R.X),k=r.nC.resolve(j.H),w=r.nC.resolve(B.y),C=o.param,I=(0,d.iH)(C.missingReferenceId),x=(0,d.iH)(C.missingReferenceName),T=(0,d.iH)([]),D=(0,d.iH)(!0),S=(0,d.iH)(),M=(0,d.iH)(),F=(0,d.iH)(),E=(0,d.iH)();(0,t.bv)((async()=>{await f.execute((async()=>{await Promise.all([f.executeUseCase(c.q,{historyType:"publish"}).then((e=>S.value=e)),f.executeUseCase(s.y,{}).then((e=>M.value=e))]),function(){const e=new Map,n=new Map;h.flatMapItems(m.studio.items,(e=>{var o,t,l,i;if("model"!=e.objectType)return;let d;if("module"==e.owner.objectType&&Y(e.owner)){const n=null===(o=M.value)||void 0===o?void 0:o.get(e.owner.ID),l=null===(t=e.owner.relatedApplications.find((e=>e.applicationID==m.studio.appId)))||void 0===t?void 0:t.importedVersion,i=null==n?void 0:n.filter((e=>e.version==l)).flatMap((e=>e.relatedModelHistories)).find((n=>n.modelID==e.ID));d=null==i?void 0:i.version}else{const o=N(e);if(!o)return n.set(e.ID,e.dependentModels?e.dependentModels.map((e=>e.modelId)):Array());d=o}const a=null===(i=null===(l=S.value)||void 0===l?void 0:l.get(e.ID))||void 0===i?void 0:i.find((e=>e.version==d));n.set(e.ID,(null==a?void 0:a.dependentModels)?null==a?void 0:a.dependentModels.map((e=>e.modelId)):Array())})),n.forEach(((o,t)=>{const l=Array();n.forEach(((e,n)=>{e.some((e=>e==t))&&l.push(n)})),e.set(t,{dependedBy:l,dependedTo:o})})),E.value=e}(),function(){const e=m.studio.items.find((e=>"App Settings"==e.name)),n=N(e),o=e&&{id:e.ID,name:e.name,checked:!0,disabled:!1,type:e.modelType,version:n||"latest"};e&&o&&L({newItem:o});const t=i.CryptoHelper.CreateGuid(),l=m.studio.items.filter((e=>"model"==e.objectType&&"appAssetList"==e.usageType)),d={id:t,collapsed:!0,name:"Styled Components",type:"module",imported:!1,anyChildChecked:!0,allChildChecked:!0,children:[{}]};d&&L({newItem:d}),d.children=l.map((e=>{const n={id:e.ID,parentId:t,name:e.name,type:e.modelType,checked:!0,usageType:null==e?void 0:e.usageType,level:2};return L({newItem:n}),n})),Q(d,!1);const a=b.cloneFileExplorerTreeView({displayFilterer:(e,n)=>{switch(e.ID){case z.oA.uiAssetListID:case z.oA.uiSettingsID:return!1}switch(e.objectType){case"application":return!1;case"module":case"model":return!0;case"folder":return n}}}),r=(e,n)=>{var o,t,l,i,d,a,c,s,p;const u=e.externalData;if("application"==u.objectType)throw new Error("unexpected item type");let v,h=y.getFullPath(u,"self").split("/").length-1;switch(u.objectType){case"folder":v={id:u.ID,name:u.name,type:"folder",collapsed:!0,level:h,children:null===(o=e.children)||void 0===o?void 0:o.map((e=>r(e,{ownerModule:n.ownerModule})))},null===(t=v.children)||void 0===t||t.forEach((e=>e.parent=v)),Q(v,!1);break;case"model":if(n.ownerModule)if(v={id:u.ID,name:u.name,type:u.modelType,level:h},!n.ownerModule.isImportedModule||u.isUnmodifiableTotal){const e=N(u);v={...v,checked:!!(e&&"appSettings"!=u.usageType||G(u))||u.isUnmodifiableTotal,disabled:!(e&&"appSettings"!=u.usageType||"appSettings"!=u.usageType||"css"==u.modelType||u.isUnmodifiableTotal),version:u.isUnmodifiableTotal?"latest":e}}else{const e=null===(l=n.ownerModule.relatedModelHistories)||void 0===l?void 0:l.find((e=>e.modelID==u.ID));v={...v,checked:!0,disabled:!1,version:null==e?void 0:e.version}}else{const e=N(u);v={id:u.ID,name:u.name,checked:!!(G(u)||e&&"appSettings"!=u.usageType)||u.isUnmodifiableTotal,disabled:!(e&&"appSettings"!=u.usageType||"appSettings"!=u.usageType||"css"==u.modelType||u.isUnmodifiableTotal),type:u.modelType,version:u.isUnmodifiableTotal?"latest":e,level:h}}break;case"module":const f=Y(u),b=null===(i=u.relatedApplications.find((e=>e.applicationID==m.studio.appId)))||void 0===i?void 0:i.importedVersion,y=f?null===(c=null===(a=null===(d=M.value)||void 0===d?void 0:d.get(u.ID))||void 0===a?void 0:a.find((e=>e.version==b)))||void 0===c?void 0:c.relatedModelHistories:void 0;v={id:u.ID,collapsed:!0,name:u.name,type:"module",imported:f,version:b,children:null===(s=e.children)||void 0===s?void 0:s.map((e=>r(e,{ownerModule:{isImportedModule:f,moduleVersion:b,relatedModelHistories:y}})))},null===(p=v.children)||void 0===p||p.forEach((e=>e.parent=v)),Q(v,!1)}return v},c=a.map((e=>r(e,{}))),s=e=>{var n;L({newItem:e}),null===(n=e.children)||void 0===n||n.forEach(s)};c.forEach(s)}(),D.value=$()}),{loading:!0})}));const H=(0,d.iH)(!1),_=(0,d.iH)(!1),O=(0,d.iH)("");function $(){return F.value=m.studio.items.find((e=>{var n;return null===(n=e.additionals)||void 0===n?void 0:n.isRootPage})),!!F.value}function L({newItem:e}){!function(e){const n=(0,a.createApp)(A,{handleItemCheckEvent:K,startScreen:F,handleCollapse:W,item:e,selectedRow:O,onRowSelected:e=>{O.value=e}}),o=document.createElement("div");n.mount(o);const t=document.getElementById("module-container-div");null==t||t.appendChild(o)}(e),"module"!=e.type&&T.value.push(e)}function G(e){if("container"==e.modelType)return!0;if("css"==e.modelType)return!0;const n=m.studio.items.filter((e=>"model"==e.objectType&&"appSettings"==e.modelType))[0].modelBody;return!!(n?n[0].model:"").includes(e.ID)}function J(){var e;null===(e=C.callback)||void 0===e||e.call(C,"cancel"),n("close")}function N(e){var n;if(!(null===(n=S.value)||void 0===n?void 0:n.has(e.ID)))return;const o=S.value.get(e.ID);return o?(e=>{const n=e.map((e=>{const n=e.split(".");return 10*parseInt(n[0])+1*parseInt(n[1])}));n.sort(((e,n)=>n-e));const o=n[0];return`${Math.floor(o/10)}.${o%10}`})(o.map((e=>e.version))):void 0}function W(e,n,o){var t;e.collapsed=void 0!==o?o:!e.collapsed,n&&(null===(t=e.children)||void 0===t||t.forEach((o=>{document.getElementById(o.id).style.display=e.collapsed?"none":"block",W(o,n,e.collapsed)})))}function X(e,n){var o,t;if(e.disabled||e.checked)return;e.checked=!0,e.parent&&Q(e.parent,n);const l=null===(t=null===(o=E.value)||void 0===o?void 0:o.get(e.id))||void 0===t?void 0:t.dependedTo;l&&l.forEach((e=>{T.value.forEach((o=>{var t;if("module"==o.type&&!o.allChildChecked){const l=null===(t=o.children)||void 0===t?void 0:t.find((n=>!n.checked&&n.id==e));return l&&X(l,n),void Q(o,n)}o.checked||o.id!=e||(X(o,n),o.parent&&Q(o.parent,n))}))}))}function K(e){e.disabled||function(e){var n,o;const t=null===(o=null===(n=E.value)||void 0===n?void 0:n.get(e.id))||void 0===o?void 0:o.dependedBy;return!!t&&t.some((e=>T.value.some((n=>{var o;return"module"==n.type&&n.anyChildChecked?null===(o=n.children)||void 0===o?void 0:o.some((n=>n.checked&&n.id==e)):n.id==e&&n.checked}))))}(e)||"App Settings"==e.name||("module"!=e.type&&"folder"!=e.type?e.checked?(e.checked=!1,e.parent&&Q(e.parent,!0)):X(e,!0):e.children&&e.children.filter((e=>!e.disabled)).length>0?e.anyChildChecked?(e.children.filter((e=>!e.disabled)).forEach((e=>e.checked=!1)),e.checked=!1,Q(e,!0)):(e.children.forEach((e=>X(e,!0))),e.checked=!0):(e.checked=!e.checked,e.allChildChecked=!1),D.value=$(),T.value=[...T.value])}function Q(e,n){var o,t;e.disabled=e.children&&(0==e.children.length||!(null===(o=e.children)||void 0===o?void 0:o.some((e=>!e.disabled)))),e.allChildChecked=e.children&&e.children.length>0&&!e.children.some((e=>!e.checked)),e.anyChildChecked=null===(t=e.children)||void 0===t?void 0:t.some((e=>e.checked&&!e.disabled)),n&&e.parent&&Q(e.parent,!0)}(0,t.bv)((async()=>{H.value=await async function(){return await g.areTagValuesFilled()}(),_.value=k.hasEmptySettings()}));const Y=e=>y.isModuleImported(e);return(e,n)=>((0,t.wg)(),(0,t.iD)("div",V,[(0,t._)("p",null,[(0,t.Uk)("Select the original item from the imported module that the overridden item "),(0,t._)("b",null,(0,l.toDisplayString)(x.value),1),(0,t.Uk)(" replaces ")]),q,(0,t._)("div",P,[(0,t._)("div",{class:(0,l.normalizeClass)(["cancel-button"]),onClick:J},"Cancel"),(0,t._)("div",{class:(0,l.normalizeClass)(["set-reference-button"]),onClick:n[0]||(n[0]=e=>{w.overrideWithModel(O.value,I.value)})},"Set Overridden Item")])]))}});var $=o(51025),L={};L.styleTagTransform=F(),L.setAttributes=T(),L.insert=I().bind(null,"head"),L.domAPI=w(),L.insertStyleElement=S(),g()($.Z,L),$.Z&&$.Z.locals&&$.Z.locals;const G=(0,_.Z)(O,[["__scopeId","data-v-0c72b02c"]])}}]);