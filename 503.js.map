{"version":3,"file":"503.js","mappings":"4JAGIA,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,mzBAAozB,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,mFAAmF,MAAQ,GAAG,SAAW,yWAAyW,eAAiB,CAAC,2+BAAo/B,WAAa,MAE71E,W,gECJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,gQAAiQ,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,6EAA6E,MAAQ,GAAG,SAAW,gHAAgH,eAAiB,CAAC,2rVAAs2V,WAAa,MAE75W,W,eCPO,SAASC,EAAiBC,EAAeC,GAC5C,OAAOD,EAAMC,OAASA,EAAS,oCAAoCA,KAAY,GAG5E,SAASC,EAA2BF,GACvC,MAAO,0BAA0BG,KAAKH,GAChC,GACA,oFAGH,SAASI,EAAgBC,GAC5B,MAAO,2DAA2DF,KAAKE,GACjE,GACA,6C,yICuCgBC,Q,wBCjBQA,QCAAA,Q,yHClC9B,OAA0C,KAAvCC,MAAM,gCAA8B,W,UACvC,OAAuC,OAAlCA,MAAM,SAAQ,kBAAc,K,UACjC,OAAyD,OAApDA,MAAM,QAAM,E,QAAC,UAAK,OAA4B,QAAtBA,MAAM,SAAQ,O,qICQ3CC,EAAU,GAEdA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKJ,KAAW,YAAiB,W,cCzBlD,MAAM,EAAS,GAOf,GAFiC,OAAgB,EAAQ,CAAC,CAAC,S,mDFLvD,EACA,EACA,G,MEGwE,CAAC,YAAY,qBCLnF,EAAS,GAKf,GAFiC,OAAgB,EAAQ,CAAC,CAAC,S,8BCArD,EAAa,CAAED,MAAO,kBA6C5B,GAA4B,QAAiB,CAC3CO,OAAQ,gBACRC,MAAO,CACLC,UAAW,KACXC,UAAW,MAEbC,MAAMC,GAER,MAAMJ,EAAQI,EAORC,GAFW,aAAoCC,EAAA,GACtC,aAA2BC,EAAA,GAChB,aAAsCC,EAAA,IAE1DC,GAA0B,QAAI,IAI9BC,IAHsB,SAAI,IACX,SAAI,IAEJ,QAAIL,EAAkBM,2BAA2B,OAChEC,GAAqB,QAAIP,EAAkBQ,8BAC3CC,GAAgB,QAAI,IACpBC,GAAiB,QAAI,CACvBC,QAAS,GACTC,MAAO,KAoGX,OAjGAjB,EAAMC,UAAUiB,SAAWC,UAChB,CAAEC,MAAOV,EAAaW,MAAOC,MAAOV,EAAmBS,QAGlErB,EAAMC,UAAUsB,SAAWJ,MAAOC,EAAOtC,EAAQwC,KAC7CR,EAAcO,MAAQvC,EACtBiC,EAAeM,MAAQhB,EAAkBmB,kBAAkB1C,GAC3D2B,EAAwBY,MAAQ,iBAChCX,EAAaW,MAAQD,EACrBR,EAAmBS,MAAQC,GAwFxB,CAACG,EAAUC,MACR,WAAc,QAAoB,KAAW,KAAM,EACzD,IAAAC,GAAoB,MAAO,EAAY,EACrC,QAAaC,IACb,QAAaC,MAyGX,QAAoB,QAAQ,IAC/B,Q,cClRD,EAAU,GAEd,EAAQnC,kBAAoB,IAC5B,EAAQC,cAAgB,IAElB,EAAQC,OAAS,SAAc,KAAM,QAE3C,EAAQC,OAAS,IACjB,EAAQC,mBAAqB,IAEhB,IAAI,IAAS,GAKJ,KAAW,YAAiB,WAA3C,MClBP,GAFiC,OAAgB,EAAQ,CAAC,CAAC,YAAY","sources":["webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/ProcessEditorHeader.vue?72bd","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/processEditor.vue?610f","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/validation/validation.ts","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/approvalWizards/tabs/processDefinitionTab.vue","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/approvalWizards/tabs/approveDefinitionFirstTab.vue","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/approvalWizards/tabs/approveDefinitionSecondTab.vue","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/ProcessEditorHeader.vue","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/ProcessEditorHeader.vue?fbfd","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/ProcessEditorHeader.vue?0093","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/tabs/ScreenSelectionTab.vue","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/processEditor.vue?f6ea","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/processEditor.vue?cae0","webpack://qcloud_shell/./src/presentation/vue3/editors/processEditor/processEditor.vue"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.wizard-icon[data-v-90e67246] {\\n    /* Layout Properties */\\n    top: 32px;\\n    left: 36px;\\n    /* UI Properties */\\n    position: relative;\\n    text-align: left;\\n    font: normal normal normal 30px/36px Material Design Icons Desktop;\\n    color: #007c77;\\n}\\n.title[data-v-90e67246] {\\n    /* Layout Properties */\\n    top: 34px;\\n    left: 72px;\\n    /* UI Properties */\\n    color: #007c77;\\n    font-size: 20px;\\n    font-family: \\\"Roboto\\\";\\n    position: absolute;\\n    font-weight: 500;\\n}\\n.step[data-v-90e67246] {\\n    /* Layout Properties */\\n    top: 35px;\\n    right: 32px;\\n    position: absolute;\\n    font-family: 'Roboto';\\n    font-size: 16px;\\n    color: #757575;\\n}\\n.count[data-v-90e67246] {\\n    text-align: right;\\n    font: normal normal bold 18px/24px Roboto;\\n    color: #007c77;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/presentation/vue3/editors/processEditor/ProcessEditorHeader.vue\"],\"names\":[],\"mappings\":\";AASA;IACI,sBAAsB;IACtB,SAAS;IACT,UAAU;IACV,kBAAkB;IAClB,kBAAkB;IAClB,gBAAgB;IAChB,kEAAkE;IAClE,cAAc;AAClB;AAEA;IACI,sBAAsB;IACtB,SAAS;IACT,UAAU;IACV,kBAAkB;IAClB,cAAc;IACd,eAAe;IACf,qBAAqB;IACrB,kBAAkB;IAClB,gBAAgB;AACpB;AAEA;IACI,sBAAsB;IACtB,SAAS;IACT,WAAW;IACX,kBAAkB;IAClB,qBAAqB;IACrB,eAAe;IACf,cAAc;AAClB;AAEA;IACI,iBAAiB;IACjB,yCAAyC;IACzC,cAAc;AAClB\",\"sourcesContent\":[\"<template>\\n    <i class=\\\"mdi mdi-auto-fix wizard-icon\\\" />\\n    <div class=\\\"title\\\">Process Wizard</div>\\n    <div class=\\\"step\\\">Step <span class=\\\"count\\\">1</span></div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\"></script>\\n\\n<style scoped>\\n.wizard-icon {\\n    /* Layout Properties */\\n    top: 32px;\\n    left: 36px;\\n    /* UI Properties */\\n    position: relative;\\n    text-align: left;\\n    font: normal normal normal 30px/36px Material Design Icons Desktop;\\n    color: #007c77;\\n}\\n\\n.title {\\n    /* Layout Properties */\\n    top: 34px;\\n    left: 72px;\\n    /* UI Properties */\\n    color: #007c77;\\n    font-size: 20px;\\n    font-family: \\\"Roboto\\\";\\n    position: absolute;\\n    font-weight: 500;\\n}\\n\\n.step {\\n    /* Layout Properties */\\n    top: 35px;\\n    right: 32px;\\n    position: absolute;\\n    font-family: 'Roboto';\\n    font-size: 16px;\\n    color: #757575;\\n}\\n\\n.count {\\n    text-align: right;\\n    font: normal normal bold 18px/24px Roboto;\\n    color: #007c77;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.process-editor[data-v-f175542c] {\\n    width: 1000px;\\n    height: 616px;\\n    background: white;\\n    position: absolute;\\n    margin-left: calc((100% - 1000px)/2);\\n    margin-top: 26px;\\n    border: 1px solid #D5D5D5;\\n    border-radius: 4px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/presentation/vue3/editors/processEditor/processEditor.vue\"],\"names\":[],\"mappings\":\";AA4OA;IACI,aAAa;IACb,aAAa;IACb,iBAAiB;IACjB,kBAAkB;IAClB,oCAAoC;IACpC,gBAAgB;IAChB,yBAAyB;IACzB,kBAAkB;AACtB\",\"sourcesContent\":[\"<script setup lang=\\\"ts\\\">\\nimport { IProcessEditorProps } from \\\"../../../../application/objects/editors/processEditorImpl\\\";\\nimport { ref } from \\\"vue\\\";\\nimport {\\n    SINGLE_APPROVAL,\\n    DOUBLE_APPROVAL,\\n    TRIPLE_APPROVAL,\\n    QUADRUPLE_APPROVAL,\\n    QUINTUPLE_APPROVAL,\\n    extraProcessConfigVariables,\\n} from \\\"../../../../domain/objects/editors/processEditor/constants/processTemplates\\\";\\nimport ProcessDefinitionTab from \\\"./approvalWizards/tabs/processDefinitionTab.vue\\\";\\nimport EditProcessVariablesTab from \\\"./approvalWizards/tabs/editProcessVariablesTab.vue\\\";\\nimport SingleApprovalWizard from \\\"./approvalWizards/singleApprovalWizard.vue\\\";\\nimport DoubleApprovalWizard from \\\"./approvalWizards/doubleApprovalWizard.vue\\\";\\nimport TripleApprovalWizard from \\\"./approvalWizards/tripleApprovalWizard.vue\\\";\\nimport QuadrupleApprovalWizard from \\\"./approvalWizards/quadrupleApprovalWizard.vue\\\";\\nimport QuintupleApprovalWizard from \\\"./approvalWizards/quintupleApprovalWizard.vue\\\";\\nimport { container } from \\\"../../../../domain/core/diContainer\\\";\\nimport { IUseCaseExecutor } from \\\"../../../../domain/useCase/IUseCaseExecutor\\\";\\nimport { ICreateModel } from \\\"../../../../domain/useCase/ICreateModel\\\";\\nimport { IStudio } from \\\"../../../../domain/useCase/IStudio\\\";\\n\\nimport { IModule } from \\\"../../../../domain/model/models\\\";\\nimport { CryptoHelper } from \\\"@stechquick/algae/lib/helpers/cryptoHelper\\\";\\nimport { IProcessEditorUtil } from \\\"../../../../domain/useCase/IProcessEditorUtil\\\";\\nimport { IModelsOfModule } from \\\"../../../../domain/presentation/editors/IProcessEditorModel\\\";\\nimport { extractProcessVariables } from \\\"@stechquick/plateau-process-designer\\\";\\nimport ProcessEditorHeader from \\\"./ProcessEditorHeader.vue\\\";\\nimport ScreenSelectionTab from \\\"./tabs/ScreenSelectionTab.vue\\\";\\n\\ninterface IProps {\\n    functions: IProcessEditorProps[\\\"functions\\\"];\\n    callbacks: IProcessEditorProps[\\\"callbacks\\\"];\\n}\\n\\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\\nconst studio = container.resolve<IStudio>(IStudio);\\nconst processEditorUtil = container.resolve<IProcessEditorUtil>(IProcessEditorUtil);\\nconst props = defineProps<IProps>();\\nconst processDefinitionTabKey = ref(\\\"\\\");\\nconst disableFinishButton = ref(false);\\nconst isNextActive = ref(true);\\n\\nconst processModel = ref(processEditorUtil.getEmptyProcessWizardModel(\\\"_\\\"));\\nconst processEditorState = ref(processEditorUtil.getEmptyProcessEditorState());\\nconst currentModule = ref({} as IModule);\\nconst modelsOfModule = ref({\\n    screens: [],\\n    bpmns: [],\\n} as IModelsOfModule);\\n\\nprops.functions.getModel = async () => {\\n    return { model: processModel.value, state: processEditorState.value };\\n};\\n\\nprops.functions.setModel = async (model, module, state) => {\\n    currentModule.value = module;\\n    modelsOfModule.value = processEditorUtil.getModelsOfModule(module);\\n    processDefinitionTabKey.value = CryptoHelper.CreateGuid();\\n    processModel.value = model;\\n    processEditorState.value = state;\\n};\\n\\nasync function handleNext() {\\n    const stepper = processEditorState.value.stepper;\\n    const selectedExistingBpmnFile = processModel.value.selectedExistingBpmnFile;\\n    if (stepper.isTabValid) {\\n        if (!processModel.value.createNewBpmnFile) {\\n            isNextActive.value = false;\\n            const existingBpmnVariableCache = processEditorState.value.existingBpmnVariableCache;\\n            const bpmnVariableFromCache = existingBpmnVariableCache[processModel.value.selectedExistingBpmnFile.ID];\\n            if (bpmnVariableFromCache) {\\n                processModel.value.selectedExistingBpmnFile.variables = bpmnVariableFromCache;\\n            }\\n            const bpmnModel = await props.callbacks.getBpmnModel(selectedExistingBpmnFile.ID);\\n            const extractedProcessVariables = await extractProcessVariables(bpmnModel);\\n            const editableVariables = processEditorUtil\\n                .extractEditableProcessVariables(extractedProcessVariables, [\\n                    \\\"initiator\\\",\\n                    \\\"formJson\\\",\\n                    \\\"userId\\\",\\n                    \\\"tenantId\\\",\\n                    \\\"isChange\\\",\\n                    \\\"refreshAfterSendToApproval\\\",\\n                ])\\n                .concat(extraProcessConfigVariables);\\n\\n            editableVariables.forEach((editableVariable: any) => {\\n                if (!processModel.value.selectedExistingBpmnFile.variables.some((variable) => variable.key === editableVariable.source)) {\\n                    processModel.value.selectedExistingBpmnFile.variables.push({\\n                        key: editableVariable.source,\\n                        type: \\\"STRING\\\",\\n                        value: processEditorUtil.handleProcessVariables(\\n                            processModel.value,\\n                            editableVariable.source,\\n                            modelsOfModule.value,\\n                            \\\"process_name\\\"\\n                        ),\\n                        isDeletable: false,\\n                    });\\n                }\\n            });\\n            processModel.value.selectedExistingBpmnFile.variables = processModel.value.selectedExistingBpmnFile.variables.filter((variable) =>\\n                editableVariables.some((editableVariable) => editableVariable.source == variable.key)\\n            );\\n            isNextActive.value = true;\\n        }\\n        stepper.currentStep++;\\n        stepper.isTabValid = false;\\n        props.callbacks.modified({ state: true });\\n    }\\n}\\n\\nfunction handleBack() {\\n    processEditorState.value.stepper!.currentStep--;\\n    processEditorState.value.stepper!.isTabValid = false;\\n    props.callbacks.modified({ state: true });\\n}\\n\\nfunction handleFinish() {\\n    const bpmnFile = processEditorUtil.generateBpmnFile(processModel.value, processEditorState.value.creatingProcessFileName);\\n    executor.execute(\\n        async () => {\\n            const createdItem = await executor.executeUseCase<ICreateModel>(ICreateModel, {\\n                name: processEditorState.value.creatingProcessFileName,\\n                parentObjectId: currentModule.value.ID,\\n                modelType: \\\"bpmn\\\",\\n                modelBody: [{ key: \\\"bpmn\\\", model: bpmnFile }],\\n                modelAdditionals: {},\\n            });\\n\\n            if (processModel.value.createNewBpmnFile) {\\n                processModel.value.selectedExistingBpmnFile.variables = [];\\n            }\\n            \\n            processModel.value.createNewBpmnFile = false;\\n\\n            processModel.value.selectedExistingBpmnFile.ID = createdItem.ID;\\n            modelsOfModule.value.bpmns.push(createdItem);\\n            processEditorState.value.stepper.currentStep = 0;\\n            disableFinishButton.value = true;\\n            studio.openItem(createdItem, { fromHistory: false, noFocus: true });\\n        },\\n        { loading: true }\\n    );\\n    props.callbacks.modified({ state: true });\\n}\\n</script>\\n<template>\\n    <div class=\\\"process-editor\\\">\\n        <ProcessEditorHeader/>\\n        <ScreenSelectionTab/>\\n    </div>\\n    <div class=\\\"process-editor\\\" v-if=\\\"false\\\">\\n        <ProcessDefinitionTab\\n            v-if=\\\"processEditorState.stepper.currentStep === 0\\\"\\n            :model=\\\"processModel\\\"\\n            :models-of-module=\\\"modelsOfModule\\\"\\n            :state=\\\"processEditorState\\\"\\n            :modified=\\\"props.callbacks.modified\\\"\\n            :enable-finish-button=\\\"() => (disableFinishButton = false)\\\"\\n            :is-next-active=\\\"isNextActive\\\"\\n            :key=\\\"processDefinitionTabKey\\\"\\n        />\\n        <EditProcessVariablesTab\\n            v-if=\\\"!processModel.createNewBpmnFile && processEditorState.stepper.currentStep === 1\\\"\\n            :model=\\\"processModel\\\"\\n            :models-of-module=\\\"modelsOfModule\\\"\\n            :state=\\\"processEditorState\\\"\\n            :modified=\\\"props.callbacks.modified\\\"\\n        />\\n        <SingleApprovalWizard\\n            v-if=\\\"\\n                processModel.processType === SINGLE_APPROVAL.value && processEditorState.stepper.currentStep !== 0 && processModel.createNewBpmnFile\\n            \\\"\\n            :model=\\\"processModel\\\"\\n            :models-of-module=\\\"modelsOfModule\\\"\\n            :state=\\\"processEditorState\\\"\\n            :modified=\\\"props.callbacks.modified\\\"\\n        />\\n        <DoubleApprovalWizard\\n            v-if=\\\"\\n                processModel.processType === DOUBLE_APPROVAL.value && processEditorState.stepper.currentStep !== 0 && processModel.createNewBpmnFile\\n            \\\"\\n            :model=\\\"processModel\\\"\\n            :models-of-module=\\\"modelsOfModule\\\"\\n            :state=\\\"processEditorState\\\"\\n            :modified=\\\"props.callbacks.modified\\\"\\n        />\\n        <TripleApprovalWizard\\n            v-if=\\\"\\n                processModel.processType === TRIPLE_APPROVAL.value && processEditorState.stepper.currentStep !== 0 && processModel.createNewBpmnFile\\n            \\\"\\n            :model=\\\"processModel\\\"\\n            :models-of-module=\\\"modelsOfModule\\\"\\n            :state=\\\"processEditorState\\\"\\n            :modified=\\\"props.callbacks.modified\\\"\\n        />\\n        <QuadrupleApprovalWizard\\n            v-if=\\\"\\n                processModel.processType === QUADRUPLE_APPROVAL.value &&\\n                processEditorState.stepper.currentStep !== 0 &&\\n                processModel.createNewBpmnFile\\n            \\\"\\n            :model=\\\"processModel\\\"\\n            :models-of-module=\\\"modelsOfModule\\\"\\n            :state=\\\"processEditorState\\\"\\n            :modified=\\\"props.callbacks.modified\\\"\\n        />\\n        <QuintupleApprovalWizard\\n            v-if=\\\"\\n                processModel.processType === QUINTUPLE_APPROVAL.value &&\\n                processEditorState.stepper.currentStep !== 0 &&\\n                processModel.createNewBpmnFile\\n            \\\"\\n            :model=\\\"processModel\\\"\\n            :models-of-module=\\\"modelsOfModule\\\"\\n            :state=\\\"processEditorState\\\"\\n            :modified=\\\"props.callbacks.modified\\\"\\n        />\\n        <div>\\n            <button style=\\\"margin-bottom: 5%\\\" :disabled=\\\"!processEditorState.stepper.currentStep\\\" @click=\\\"handleBack\\\">Back</button>\\n            <button\\n                v-if=\\\"!processEditorState.stepper.isApproveTab && !(!processModel.createNewBpmnFile && processEditorState.stepper.currentStep === 1)\\\"\\n                @click=\\\"handleNext\\\"\\n                :disabled=\\\"!processEditorState.stepper.isTabValid || !isNextActive\\\"\\n            >\\n                Next\\n            </button>\\n            <button v-if=\\\"processEditorState.stepper.isApproveTab\\\" @click=\\\"handleFinish\\\" :disabled=\\\"disableFinishButton\\\">Finish</button>\\n        </div>\\n    </div>\\n</template>\\n<style scoped>\\n\\n.process-editor {\\n    width: 1000px;\\n    height: 616px;\\n    background: white;\\n    position: absolute;\\n    margin-left: calc((100% - 1000px)/2);\\n    margin-top: 26px;\\n    border: 1px solid #D5D5D5;\\n    border-radius: 4px;\\n}\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","export function checkInputLength(input: string, length: number) {\n    return input.length < length ? `Input length must be bigger than ${length}.` : \"\";\n}\n\nexport function checkInputStartsWithLetter(input: string) {\n    return /^[a-zA-Z][a-zA-Z0-9_]*$/.test(input)\n        ? \"\"\n        : \"Input must start with letter and following characters must be letter, number or _\";\n}\n\nexport function checkURLPattern(url: string) {\n    return /(^X$)|(^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256})/.test(url)\n        ? \"\"\n        : \"URL must be valid and start with https:// \";\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode, vModelText as _vModelText, unref as _unref, createTextVNode as _createTextVNode } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"use-existing-bpmn\" }, \" Create new BPMN file. \", -1 /* HOISTED */)\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_3 = { key: 0 }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\",\n  selected: \"\"\n}, \"Select Existing Bpmn\", -1 /* HOISTED */)\nconst _hoisted_7 = [\"selected\", \"id\"]\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_9 = { key: 1 }\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"process-file-name\" }, \"Process File Name \", -1 /* HOISTED */)\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_13 = [\"disabled\"]\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\".bpmn \")\nconst _hoisted_15 = { key: 0 }\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"processType\" }, \"Select Process Type\", -1 /* HOISTED */)\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_19 = [\"disabled\"]\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\",\n  selected: \"\"\n}, \"Select Process Type\", -1 /* HOISTED */)\nconst _hoisted_21 = [\"value\"]\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\n\nimport { ref, onBeforeMount } from \"vue\";\nimport { checkInputLength, checkInputStartsWithLetter } from \"../../validation/validation\";\nimport { processTypes } from \"../../../../../../domain/objects/editors/processEditor/constants/processTemplates\";\nimport { ModifiedCallbackType } from \"../../../../../../domain/model/editors/modifiedCallbackType\";\nimport { IModelsOfModule, IProcessEditorState } from \"../../../../../../domain/presentation/editors/IProcessEditorModel\";\nimport { IModel } from \"../../../../../../domain/model/models\";\nimport { IProcessModel } from \"@stechquick/algae/lib/qCloudTemp/process\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'processDefinitionTab',\n  props: {\n    model: null,\n    modelsOfModule: null,\n    state: null,\n    modified: null,\n    enableFinishButton: null,\n    isNextActive: { type: Boolean }\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n    model: IProcessModel;\n    modelsOfModule: IModelsOfModule;\n    state: IProcessEditorState;\n    modified: ModifiedCallbackType;\n    enableFinishButton: Function;\n    isNextActive: boolean;\n}\n\n\n\nconst bpmnVariableCache = ref(props.state.existingBpmnVariableCache)\nconst createNewBpmnFile = ref(props.model.createNewBpmnFile);\nconst processFileNameValidationLabel = ref(\"\");\nconst processType = ref(props.model.processType);\nconst selectedExistingBpmn = ref(props.modelsOfModule.bpmns.find((bpmnFile) => bpmnFile.ID === props.model.selectedExistingBpmnFile.ID)?.name);\nconst processFileName = ref(props.state.creatingProcessFileName || selectedExistingBpmn.value || \"\");\n\nonBeforeMount(() => {\n    checkTabValidation();\n});\n\nconst validation = {\n    isProcessFileNameValid: false,\n    isProcessTypeValid: false,\n    isExistingBpmnSelected: false,\n};\n\nfunction handleCreateNewBpmnFile() {\n    props.model.createNewBpmnFile = createNewBpmnFile.value;\n    props.modified({ model: true });\n    setTabValidation();\n}\n\nfunction handleSelectedExistingBpmnFile($event: any) {\n    let selectedBpmn = $event.target[$event.target.selectedIndex];\n    bpmnVariableCache.value[props.model.selectedExistingBpmnFile.ID] = props.model.selectedExistingBpmnFile.variables\n    props.model.selectedExistingBpmnFile.ID = selectedBpmn.id;\n    props.model.selectedExistingBpmnFile.variables = []\n    validation.isExistingBpmnSelected = !!selectedExistingBpmn.value?.length;\n    props.modified({ model: true });\n    setTabValidation();\n}\n\nfunction handleProcessFileName() {\n    checkProcessFileNameValidation();\n    props.state.creatingProcessFileName = processFileName.value\n    validation.isProcessFileNameValid = !processFileNameValidationLabel.value.length;\n    if (validation.isProcessFileNameValid) {\n        props.enableFinishButton();\n    }\n    props.modified({ model: true });\n    setTabValidation();\n}\n\nfunction checkProcessFileNameValidation() {\n    processFileNameValidationLabel.value = checkInputStartsWithLetter(processFileName.value);\n    if (!processFileNameValidationLabel.value.length) {\n        processFileNameValidationLabel.value = checkInputLength(processFileName.value, 3);\n    }\n    if (\n        !processFileNameValidationLabel.value.length &&\n        props.modelsOfModule.bpmns.find((bpmn: IModel) => bpmn.name.replace(\".bpmn\", \"\") === processFileName.value)\n    ) {\n        processFileNameValidationLabel.value = \"This bpmn file name already in use.\";\n    }\n}\n\nfunction handleProcessType() {\n    props.model.processType = processType.value;\n    props.enableFinishButton();\n    props.modified({ model: true });\n    checkTabValidation();\n}\n\nfunction checkTabValidation() {\n    checkProcessFileNameValidation();\n    validation.isProcessFileNameValid = !processFileNameValidationLabel.value.length;\n    validation.isProcessTypeValid = !!processType.value.length;\n    validation.isExistingBpmnSelected = !!selectedExistingBpmn.value?.length;\n    setTabValidation();\n}\n\nfunction setTabValidation() {\n    props.state.stepper.isTabValid =\n        (createNewBpmnFile.value && validation.isProcessFileNameValid && validation.isProcessTypeValid) ||\n        (!createNewBpmnFile.value && validation.isExistingBpmnSelected);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"form\", null, [\n    _withDirectives(_createElementVNode(\"input\", {\n      type: \"checkbox\",\n      id: \"use-existing-bpmn\",\n      name: \"use-existing-bpmn\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((createNewBpmnFile).value = $event)),\n      onChange: handleCreateNewBpmnFile\n    }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [\n      [_vModelCheckbox, createNewBpmnFile.value]\n    ]),\n    _hoisted_1,\n    _hoisted_2,\n    (!createNewBpmnFile.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _withDirectives(_createElementVNode(\"select\", {\n            name: \"existing-bpmns\",\n            id: \"existing-bpmns\",\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selectedExistingBpmn).value = $event)),\n            onChange: handleSelectedExistingBpmnFile,\n            disabled: !__props.isNextActive\n          }, [\n            _hoisted_6,\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.modelsOfModule.bpmns, (bpmn) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                selected: bpmn.ID === props.model.selectedExistingBpmnFile.ID,\n                id: bpmn.ID\n              }, _toDisplayString(bpmn.name), 9 /* TEXT, PROPS */, _hoisted_7))\n            }), 256 /* UNKEYED_FRAGMENT */))\n          ], 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_5), [\n            [_vModelSelect, selectedExistingBpmn.value]\n          ]),\n          _hoisted_8\n        ]))\n      : _createCommentVNode(\"v-if\", true),\n    (createNewBpmnFile.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _hoisted_11,\n          _hoisted_12,\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"text\",\n            id: \"process-file-name\",\n            name: \"process-file-name\",\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((processFileName).value = $event)),\n            onInput: handleProcessFileName,\n            disabled: !createNewBpmnFile.value\n          }, null, 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_13), [\n            [_vModelText, processFileName.value]\n          ]),\n          _hoisted_14,\n          (processFileNameValidationLabel.value && createNewBpmnFile.value)\n            ? (_openBlock(), _createElementBlock(\"label\", _hoisted_15, _toDisplayString(processFileNameValidationLabel.value), 1 /* TEXT */))\n            : _createCommentVNode(\"v-if\", true),\n          _hoisted_16,\n          _hoisted_17,\n          _hoisted_18,\n          _withDirectives(_createElementVNode(\"select\", {\n            name: \"processType\",\n            id: \"processType\",\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((processType).value = $event)),\n            onChange: handleProcessType,\n            disabled: !createNewBpmnFile.value\n          }, [\n            _hoisted_20,\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(processTypes), (processType) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                value: processType.value\n              }, _toDisplayString(processType.name), 9 /* TEXT, PROPS */, _hoisted_21))\n            }), 256 /* UNKEYED_FRAGMENT */))\n          ], 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_19), [\n            [_vModelSelect, processType.value]\n          ]),\n          _hoisted_22\n        ]))\n      : _createCommentVNode(\"v-if\", true),\n    _hoisted_23\n  ]))\n}\n}\n\n})","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"first-approver-screen\" }, \"Select First Approver Screen*\", -1 /* HOISTED */)\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\",\n  selected: \"\"\n}, \"Select First Approver Screen\", -1 /* HOISTED */)\nconst _hoisted_4 = [\"id\"]\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_6 = { key: 0 }\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"second-approver-screen\" }, \"Select Second Approver Screen*\", -1 /* HOISTED */)\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\",\n  selected: \"\"\n}, \"Select Second Approver Screen\", -1 /* HOISTED */)\nconst _hoisted_10 = [\"id\"]\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\n\nimport { ref, onBeforeMount } from \"vue\";\nimport { ModifiedCallbackType } from \"../../../../../../domain/model/editors/modifiedCallbackType\";\nimport { IModelsOfModule, IProcessEditorState } from \"../../../../../../domain/presentation/editors/IProcessEditorModel\";\nimport { IProcessModel } from \"@stechquick/algae/lib/qCloudTemp/process\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'approveDefinitionFirstTab',\n  props: {\n    model: null,\n    modelsOfModule: null,\n    state: null,\n    secondApproveEnabled: { type: Boolean },\n    modified: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n    model: IProcessModel;\n    modelsOfModule: IModelsOfModule;\n    state: IProcessEditorState;\n    secondApproveEnabled: boolean;\n    modified: ModifiedCallbackType;\n}\n\nonBeforeMount(() => {\n    checkTabValidation();\n});\n\n\n\nconst processCheckerDefinition = props.model.processCheckerDefinition;\nconst firstApproverScreen = ref(\n    props.modelsOfModule.screens.find((screen) => screen.ID == props.model.processCheckerDefinition.firstApproverScreenID)?.name || \"\"\n);\nconst secondApproverScreen = ref(\n    props.modelsOfModule.screens.find((screen) => screen.ID == props.model.processCheckerDefinition.secondApproverScreenID)?.name || \"\"\n);\n\nconst stepper = ref(props.state.stepper);\n\nconst validation = {\n    isFirstApproverScreenValid: false,\n    isSecondApproverScreenValid: false,\n};\n\nfunction handleFirstApproverScreen($event: any) {\n    let selectedScreen = $event.target[$event.target.selectedIndex];\n\n    props.modified({ model: true });\n    console.log(\"firstworked\");\n    processCheckerDefinition.firstApproverScreenID = selectedScreen.id;\n    validation.isFirstApproverScreenValid = !!firstApproverScreen.value.length;\n    setTabValidation();\n}\n\nfunction handleSecondApproverScreen($event: any) {\n    let selectedScreen = $event.target[$event.target.selectedIndex];\n\n    props.modified({ model: true });\n    console.log(\"secondworked\");\n    processCheckerDefinition.secondApproverScreenID = selectedScreen.id;\n    validation.isSecondApproverScreenValid = !!secondApproverScreen.value.length;\n    setTabValidation();\n}\n\nfunction checkTabValidation() {\n    validation.isFirstApproverScreenValid = !!firstApproverScreen.value.length;\n    if (props.secondApproveEnabled) {\n        validation.isSecondApproverScreenValid = !!secondApproverScreen.value.length;\n    }\n    setTabValidation();\n}\n\nfunction setTabValidation() {\n    stepper.value.isTabValid = validation.isFirstApproverScreenValid;\n    if (props.secondApproveEnabled) {\n        stepper.value.isTabValid = stepper.value.isTabValid && validation.isSecondApproverScreenValid;\n    }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _hoisted_1,\n    _hoisted_2,\n    _withDirectives(_createElementVNode(\"select\", {\n      name: \"first-approver-screen\",\n      id: \"first-approver-screen\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((firstApproverScreen).value = $event)),\n      onChange: handleFirstApproverScreen\n    }, [\n      _hoisted_3,\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.modelsOfModule.screens, (screen) => {\n        return (_openBlock(), _createElementBlock(\"option\", {\n          id: screen.ID\n        }, _toDisplayString(screen.name), 9 /* TEXT, PROPS */, _hoisted_4))\n      }), 256 /* UNKEYED_FRAGMENT */))\n    ], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [\n      [_vModelSelect, firstApproverScreen.value]\n    ]),\n    _hoisted_5,\n    (props.secondApproveEnabled)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _hoisted_8,\n          _withDirectives(_createElementVNode(\"select\", {\n            name: \"second-approver-screen\",\n            id: \"second-approver-screen\",\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((secondApproverScreen).value = $event)),\n            onChange: handleSecondApproverScreen\n          }, [\n            _hoisted_9,\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.modelsOfModule.screens, (screen) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                id: screen.ID\n              }, _toDisplayString(screen.name), 9 /* TEXT, PROPS */, _hoisted_10))\n            }), 256 /* UNKEYED_FRAGMENT */))\n          ], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [\n            [_vModelSelect, secondApproverScreen.value]\n          ]),\n          _hoisted_11\n        ]))\n      : _createCommentVNode(\"v-if\", true)\n  ], 64 /* STABLE_FRAGMENT */))\n}\n}\n\n})","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"third-approver-screen\" }, \"Select Third Approver Screen*\", -1 /* HOISTED */)\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\",\n  selected: \"\"\n}, \"Select Third Approver Screen\", -1 /* HOISTED */)\nconst _hoisted_4 = [\"id\"]\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_6 = { key: 0 }\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", { for: \"fourth-approver-screen\" }, \"Select Fourth Approver Screen*\", -1 /* HOISTED */)\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\",\n  selected: \"\"\n}, \"Select Fourth Approver Screen\", -1 /* HOISTED */)\nconst _hoisted_10 = [\"id\"]\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */)\n\nimport { ref, onBeforeMount } from \"vue\";\nimport { ModifiedCallbackType } from \"../../../../../../domain/model/editors/modifiedCallbackType\";\nimport { IModelsOfModule, IProcessEditorState } from \"../../../../../../domain/presentation/editors/IProcessEditorModel\";\nimport { IProcessModel } from \"@stechquick/algae/lib/qCloudTemp/process\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'approveDefinitionSecondTab',\n  props: {\n    model: null,\n    modelsOfModule: null,\n    state: null,\n    fourthApproveEnabled: { type: Boolean },\n    modified: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n    model: IProcessModel;\n    modelsOfModule: IModelsOfModule;\n    state: IProcessEditorState;\n    fourthApproveEnabled: boolean;\n    modified: ModifiedCallbackType;\n}\n\nonBeforeMount(() => {\n    checkTabValidation();\n});\n\n\n\nconst processCheckerDefinition = props.model.processCheckerDefinition;\nconst stepper = ref(props.state.stepper);\n\nconst thirdApproverScreen = ref(\n    props.modelsOfModule.screens.find((screen) => screen.ID == props.model.processCheckerDefinition.thirdApproverScreenID)?.name || \"\"\n);\nconst fourthApproverScreen = ref(\n    props.modelsOfModule.screens.find((screen) => screen.ID == props.model.processCheckerDefinition.fourthApproverScreenID)?.name || \"\"\n);\n\nconst validation = {\n    isThirdApproverScreenValid: false,\n    isFourthApproverScreenValid: false,\n};\n\nfunction handleThirdApproverScreen($event: any) {\n    let selectedScreen = $event.target[$event.target.selectedIndex];\n\n    props.modified({ model: true });\n    console.log(\"thirdworked\");\n    processCheckerDefinition.thirdApproverScreenID = selectedScreen.id;\n    validation.isThirdApproverScreenValid = !!thirdApproverScreen.value.length;\n    setTabValidation();\n}\n\nfunction handleFourthApproverScreen($event: any) {\n    let selectedScreen = $event.target[$event.target.selectedIndex];\n\n    props.modified({ model: true });\n    console.log(\"thirdworked\");\n    processCheckerDefinition.fourthApproverScreenID = selectedScreen.id;\n    validation.isFourthApproverScreenValid = !!fourthApproverScreen.value.length;\n    setTabValidation();\n}\n\nfunction checkTabValidation() {\n    validation.isThirdApproverScreenValid = !!thirdApproverScreen.value.length;\n    if (props.fourthApproveEnabled) {\n        validation.isFourthApproverScreenValid = !!fourthApproverScreen.value.length;\n    }\n    setTabValidation();\n}\n\nfunction setTabValidation() {\n    stepper.value!.isTabValid = validation.isThirdApproverScreenValid;\n    if (props.fourthApproveEnabled) {\n        stepper.value!.isTabValid = stepper.value!.isTabValid && validation.isFourthApproverScreenValid;\n    }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _hoisted_1,\n    _hoisted_2,\n    _withDirectives(_createElementVNode(\"select\", {\n      name: \"third-approver-screen\",\n      id: \"third-approver-screen\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((thirdApproverScreen).value = $event)),\n      onChange: handleThirdApproverScreen\n    }, [\n      _hoisted_3,\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.modelsOfModule.screens, (screen) => {\n        return (_openBlock(), _createElementBlock(\"option\", {\n          id: screen.ID\n        }, _toDisplayString(screen.name), 9 /* TEXT, PROPS */, _hoisted_4))\n      }), 256 /* UNKEYED_FRAGMENT */))\n    ], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [\n      [_vModelSelect, thirdApproverScreen.value]\n    ]),\n    _hoisted_5,\n    (props.fourthApproveEnabled)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _hoisted_8,\n          _withDirectives(_createElementVNode(\"select\", {\n            name: \"fourth-approver-screen\",\n            id: \"fourth-approver-screen\",\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((fourthApproverScreen).value = $event)),\n            onChange: handleFourthApproverScreen\n          }, [\n            _hoisted_9,\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.modelsOfModule.screens, (screen) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                id: screen.ID\n              }, _toDisplayString(screen.name), 9 /* TEXT, PROPS */, _hoisted_10))\n            }), 256 /* UNKEYED_FRAGMENT */))\n          ], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [\n            [_vModelSelect, fourthApproverScreen.value]\n          ]),\n          _hoisted_11\n        ]))\n      : _createCommentVNode(\"v-if\", true)\n  ], 64 /* STABLE_FRAGMENT */))\n}\n}\n\n})","<template>\n    <i class=\"mdi mdi-auto-fix wizard-icon\" />\n    <div class=\"title\">Process Wizard</div>\n    <div class=\"step\">Step <span class=\"count\">1</span></div>\n</template>\n\n<script setup lang=\"ts\"></script>\n\n<style scoped>\n.wizard-icon {\n    /* Layout Properties */\n    top: 32px;\n    left: 36px;\n    /* UI Properties */\n    position: relative;\n    text-align: left;\n    font: normal normal normal 30px/36px Material Design Icons Desktop;\n    color: #007c77;\n}\n\n.title {\n    /* Layout Properties */\n    top: 34px;\n    left: 72px;\n    /* UI Properties */\n    color: #007c77;\n    font-size: 20px;\n    font-family: \"Roboto\";\n    position: absolute;\n    font-weight: 500;\n}\n\n.step {\n    /* Layout Properties */\n    top: 35px;\n    right: 32px;\n    position: absolute;\n    font-family: 'Roboto';\n    font-size: 16px;\n    color: #757575;\n}\n\n.count {\n    text-align: right;\n    font: normal normal bold 18px/24px Roboto;\n    color: #007c77;\n}\n</style>\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./ProcessEditorHeader.vue?vue&type=style&index=0&id=90e67246&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./ProcessEditorHeader.vue?vue&type=style&index=0&id=90e67246&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render } from \"./ProcessEditorHeader.vue?vue&type=template&id=90e67246&scoped=true\"\nconst script = {}\n\nimport \"./ProcessEditorHeader.vue?vue&type=style&index=0&id=90e67246&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/QCloud-Shell/QCloud-Shell/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-90e67246\"]])\n\nexport default __exports__","import { render } from \"./ScreenSelectionTab.vue?vue&type=template&id=6edb82bc\"\nconst script = {}\n\nimport exportComponent from \"/home/runner/work/QCloud-Shell/QCloud-Shell/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, unref as _unref, createElementBlock as _createElementBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f175542c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"process-editor\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"process-editor\"\n}\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = [\"disabled\"]\n\nimport { IProcessEditorProps } from \"../../../../application/objects/editors/processEditorImpl\";\nimport { ref } from \"vue\";\nimport {\n    SINGLE_APPROVAL,\n    DOUBLE_APPROVAL,\n    TRIPLE_APPROVAL,\n    QUADRUPLE_APPROVAL,\n    QUINTUPLE_APPROVAL,\n    extraProcessConfigVariables,\n} from \"../../../../domain/objects/editors/processEditor/constants/processTemplates\";\nimport ProcessDefinitionTab from \"./approvalWizards/tabs/processDefinitionTab.vue\";\nimport EditProcessVariablesTab from \"./approvalWizards/tabs/editProcessVariablesTab.vue\";\nimport SingleApprovalWizard from \"./approvalWizards/singleApprovalWizard.vue\";\nimport DoubleApprovalWizard from \"./approvalWizards/doubleApprovalWizard.vue\";\nimport TripleApprovalWizard from \"./approvalWizards/tripleApprovalWizard.vue\";\nimport QuadrupleApprovalWizard from \"./approvalWizards/quadrupleApprovalWizard.vue\";\nimport QuintupleApprovalWizard from \"./approvalWizards/quintupleApprovalWizard.vue\";\nimport { container } from \"../../../../domain/core/diContainer\";\nimport { IUseCaseExecutor } from \"../../../../domain/useCase/IUseCaseExecutor\";\nimport { ICreateModel } from \"../../../../domain/useCase/ICreateModel\";\nimport { IStudio } from \"../../../../domain/useCase/IStudio\";\n\nimport { IModule } from \"../../../../domain/model/models\";\nimport { CryptoHelper } from \"@stechquick/algae/lib/helpers/cryptoHelper\";\nimport { IProcessEditorUtil } from \"../../../../domain/useCase/IProcessEditorUtil\";\nimport { IModelsOfModule } from \"../../../../domain/presentation/editors/IProcessEditorModel\";\nimport { extractProcessVariables } from \"@stechquick/plateau-process-designer\";\nimport ProcessEditorHeader from \"./ProcessEditorHeader.vue\";\nimport ScreenSelectionTab from \"./tabs/ScreenSelectionTab.vue\";\n\ninterface IProps {\n    functions: IProcessEditorProps[\"functions\"];\n    callbacks: IProcessEditorProps[\"callbacks\"];\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'processEditor',\n  props: {\n    functions: null,\n    callbacks: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n    functions: IProcessEditorProps[\"functions\"];\n    callbacks: IProcessEditorProps[\"callbacks\"];\n}\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst studio = container.resolve<IStudio>(IStudio);\nconst processEditorUtil = container.resolve<IProcessEditorUtil>(IProcessEditorUtil);\n\nconst processDefinitionTabKey = ref(\"\");\nconst disableFinishButton = ref(false);\nconst isNextActive = ref(true);\n\nconst processModel = ref(processEditorUtil.getEmptyProcessWizardModel(\"_\"));\nconst processEditorState = ref(processEditorUtil.getEmptyProcessEditorState());\nconst currentModule = ref({} as IModule);\nconst modelsOfModule = ref({\n    screens: [],\n    bpmns: [],\n} as IModelsOfModule);\n\nprops.functions.getModel = async () => {\n    return { model: processModel.value, state: processEditorState.value };\n};\n\nprops.functions.setModel = async (model, module, state) => {\n    currentModule.value = module;\n    modelsOfModule.value = processEditorUtil.getModelsOfModule(module);\n    processDefinitionTabKey.value = CryptoHelper.CreateGuid();\n    processModel.value = model;\n    processEditorState.value = state;\n};\n\nasync function handleNext() {\n    const stepper = processEditorState.value.stepper;\n    const selectedExistingBpmnFile = processModel.value.selectedExistingBpmnFile;\n    if (stepper.isTabValid) {\n        if (!processModel.value.createNewBpmnFile) {\n            isNextActive.value = false;\n            const existingBpmnVariableCache = processEditorState.value.existingBpmnVariableCache;\n            const bpmnVariableFromCache = existingBpmnVariableCache[processModel.value.selectedExistingBpmnFile.ID];\n            if (bpmnVariableFromCache) {\n                processModel.value.selectedExistingBpmnFile.variables = bpmnVariableFromCache;\n            }\n            const bpmnModel = await props.callbacks.getBpmnModel(selectedExistingBpmnFile.ID);\n            const extractedProcessVariables = await extractProcessVariables(bpmnModel);\n            const editableVariables = processEditorUtil\n                .extractEditableProcessVariables(extractedProcessVariables, [\n                    \"initiator\",\n                    \"formJson\",\n                    \"userId\",\n                    \"tenantId\",\n                    \"isChange\",\n                    \"refreshAfterSendToApproval\",\n                ])\n                .concat(extraProcessConfigVariables);\n\n            editableVariables.forEach((editableVariable: any) => {\n                if (!processModel.value.selectedExistingBpmnFile.variables.some((variable) => variable.key === editableVariable.source)) {\n                    processModel.value.selectedExistingBpmnFile.variables.push({\n                        key: editableVariable.source,\n                        type: \"STRING\",\n                        value: processEditorUtil.handleProcessVariables(\n                            processModel.value,\n                            editableVariable.source,\n                            modelsOfModule.value,\n                            \"process_name\"\n                        ),\n                        isDeletable: false,\n                    });\n                }\n            });\n            processModel.value.selectedExistingBpmnFile.variables = processModel.value.selectedExistingBpmnFile.variables.filter((variable) =>\n                editableVariables.some((editableVariable) => editableVariable.source == variable.key)\n            );\n            isNextActive.value = true;\n        }\n        stepper.currentStep++;\n        stepper.isTabValid = false;\n        props.callbacks.modified({ state: true });\n    }\n}\n\nfunction handleBack() {\n    processEditorState.value.stepper!.currentStep--;\n    processEditorState.value.stepper!.isTabValid = false;\n    props.callbacks.modified({ state: true });\n}\n\nfunction handleFinish() {\n    const bpmnFile = processEditorUtil.generateBpmnFile(processModel.value, processEditorState.value.creatingProcessFileName);\n    executor.execute(\n        async () => {\n            const createdItem = await executor.executeUseCase<ICreateModel>(ICreateModel, {\n                name: processEditorState.value.creatingProcessFileName,\n                parentObjectId: currentModule.value.ID,\n                modelType: \"bpmn\",\n                modelBody: [{ key: \"bpmn\", model: bpmnFile }],\n                modelAdditionals: {},\n            });\n\n            if (processModel.value.createNewBpmnFile) {\n                processModel.value.selectedExistingBpmnFile.variables = [];\n            }\n            \n            processModel.value.createNewBpmnFile = false;\n\n            processModel.value.selectedExistingBpmnFile.ID = createdItem.ID;\n            modelsOfModule.value.bpmns.push(createdItem);\n            processEditorState.value.stepper.currentStep = 0;\n            disableFinishButton.value = true;\n            studio.openItem(createdItem, { fromHistory: false, noFocus: true });\n        },\n        { loading: true }\n    );\n    props.callbacks.modified({ state: true });\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(ProcessEditorHeader),\n      _createVNode(ScreenSelectionTab)\n    ]),\n    false\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          (processEditorState.value.stepper.currentStep === 0)\n            ? (_openBlock(), _createBlock(ProcessDefinitionTab, {\n                model: processModel.value,\n                \"models-of-module\": modelsOfModule.value,\n                state: processEditorState.value,\n                modified: props.callbacks.modified,\n                \"enable-finish-button\": () => (disableFinishButton.value = false),\n                \"is-next-active\": isNextActive.value,\n                key: processDefinitionTabKey.value\n              }, null, 8 /* PROPS */, [\"model\", \"models-of-module\", \"state\", \"modified\", \"enable-finish-button\", \"is-next-active\"]))\n            : _createCommentVNode(\"v-if\", true),\n          (!processModel.value.createNewBpmnFile && processEditorState.value.stepper.currentStep === 1)\n            ? (_openBlock(), _createBlock(EditProcessVariablesTab, {\n                key: 1,\n                model: processModel.value,\n                \"models-of-module\": modelsOfModule.value,\n                state: processEditorState.value,\n                modified: props.callbacks.modified\n              }, null, 8 /* PROPS */, [\"model\", \"models-of-module\", \"state\", \"modified\"]))\n            : _createCommentVNode(\"v-if\", true),\n          (\n                processModel.value.processType === _unref(SINGLE_APPROVAL).value && processEditorState.value.stepper.currentStep !== 0 && processModel.value.createNewBpmnFile\n            )\n            ? (_openBlock(), _createBlock(SingleApprovalWizard, {\n                key: 2,\n                model: processModel.value,\n                \"models-of-module\": modelsOfModule.value,\n                state: processEditorState.value,\n                modified: props.callbacks.modified\n              }, null, 8 /* PROPS */, [\"model\", \"models-of-module\", \"state\", \"modified\"]))\n            : _createCommentVNode(\"v-if\", true),\n          (\n                processModel.value.processType === _unref(DOUBLE_APPROVAL).value && processEditorState.value.stepper.currentStep !== 0 && processModel.value.createNewBpmnFile\n            )\n            ? (_openBlock(), _createBlock(DoubleApprovalWizard, {\n                key: 3,\n                model: processModel.value,\n                \"models-of-module\": modelsOfModule.value,\n                state: processEditorState.value,\n                modified: props.callbacks.modified\n              }, null, 8 /* PROPS */, [\"model\", \"models-of-module\", \"state\", \"modified\"]))\n            : _createCommentVNode(\"v-if\", true),\n          (\n                processModel.value.processType === _unref(TRIPLE_APPROVAL).value && processEditorState.value.stepper.currentStep !== 0 && processModel.value.createNewBpmnFile\n            )\n            ? (_openBlock(), _createBlock(TripleApprovalWizard, {\n                key: 4,\n                model: processModel.value,\n                \"models-of-module\": modelsOfModule.value,\n                state: processEditorState.value,\n                modified: props.callbacks.modified\n              }, null, 8 /* PROPS */, [\"model\", \"models-of-module\", \"state\", \"modified\"]))\n            : _createCommentVNode(\"v-if\", true),\n          (\n                processModel.value.processType === _unref(QUADRUPLE_APPROVAL).value &&\n                processEditorState.value.stepper.currentStep !== 0 &&\n                processModel.value.createNewBpmnFile\n            )\n            ? (_openBlock(), _createBlock(QuadrupleApprovalWizard, {\n                key: 5,\n                model: processModel.value,\n                \"models-of-module\": modelsOfModule.value,\n                state: processEditorState.value,\n                modified: props.callbacks.modified\n              }, null, 8 /* PROPS */, [\"model\", \"models-of-module\", \"state\", \"modified\"]))\n            : _createCommentVNode(\"v-if\", true),\n          (\n                processModel.value.processType === _unref(QUINTUPLE_APPROVAL).value &&\n                processEditorState.value.stepper.currentStep !== 0 &&\n                processModel.value.createNewBpmnFile\n            )\n            ? (_openBlock(), _createBlock(QuintupleApprovalWizard, {\n                key: 6,\n                model: processModel.value,\n                \"models-of-module\": modelsOfModule.value,\n                state: processEditorState.value,\n                modified: props.callbacks.modified\n              }, null, 8 /* PROPS */, [\"model\", \"models-of-module\", \"state\", \"modified\"]))\n            : _createCommentVNode(\"v-if\", true),\n          _createElementVNode(\"div\", null, [\n            _createElementVNode(\"button\", {\n              style: {\"margin-bottom\":\"5%\"},\n              disabled: !processEditorState.value.stepper.currentStep,\n              onClick: handleBack\n            }, \"Back\", 8 /* PROPS */, _hoisted_3),\n            (!processEditorState.value.stepper.isApproveTab && !(!processModel.value.createNewBpmnFile && processEditorState.value.stepper.currentStep === 1))\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 0,\n                  onClick: handleNext,\n                  disabled: !processEditorState.value.stepper.isTabValid || !isNextActive.value\n                }, \" Next \", 8 /* PROPS */, _hoisted_4))\n              : _createCommentVNode(\"v-if\", true),\n            (processEditorState.value.stepper.isApproveTab)\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 1,\n                  onClick: handleFinish,\n                  disabled: disableFinishButton.value\n                }, \"Finish\", 8 /* PROPS */, _hoisted_5))\n              : _createCommentVNode(\"v-if\", true)\n          ])\n        ]))\n      : _createCommentVNode(\"v-if\", true)\n  ], 64 /* STABLE_FRAGMENT */))\n}\n}\n\n})","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./processEditor.vue?vue&type=style&index=0&id=f175542c&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./processEditor.vue?vue&type=style&index=0&id=f175542c&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import script from \"./processEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./processEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./processEditor.vue?vue&type=style&index=0&id=f175542c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/QCloud-Shell/QCloud-Shell/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f175542c\"]])\n\nexport default __exports__"],"names":["___CSS_LOADER_EXPORT___","push","module","id","checkInputLength","input","length","checkInputStartsWithLetter","test","checkURLPattern","url","Boolean","class","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","__name","props","functions","callbacks","setup","__props","processEditorUtil","IUseCaseExecutor","IStudio","IProcessEditorUtil","processDefinitionTabKey","processModel","getEmptyProcessWizardModel","processEditorState","getEmptyProcessEditorState","currentModule","modelsOfModule","screens","bpmns","getModel","async","model","value","state","setModel","getModelsOfModule","_ctx","_cache","_","ProcessEditorHeader","ScreenSelectionTab"],"sourceRoot":""}