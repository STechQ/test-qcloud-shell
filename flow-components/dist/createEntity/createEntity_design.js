/*! For license information please see createEntity_design.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@stitches/react")):"function"==typeof define&&define.amd?define(["react","@stitches/react"],t):"object"==typeof exports?exports.flowcomponent=t(require("react"),require("@stitches/react")):e.flowcomponent=t(e.react,e["@stitches/react"])}(this,((e,t)=>(()=>{"use strict";var r={1837:(e,t,r)=>{var o=r(8156),n=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var o,c={},l=null,p=null;for(o in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(p=t.ref),t)s.call(t,o)&&!i.hasOwnProperty(o)&&(c[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===c[o]&&(c[o]=t[o]);return{$$typeof:n,type:e,key:l,ref:p,props:c,_owner:a.current}}t.jsx=c,t.jsxs=c},2094:(e,t,r)=>{e.exports=r(1837)},3149:e=>{e.exports=t},8156:t=>{t.exports=e}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={exports:{}};return r[e](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{n.r(s),n.d(s,{default:()=>c});var e=n(2094),t=n(8156),r=n(3149);const o=r=>{const{NameDiv:o,DescDiv:n}=r.options.react.prop,s=r.options.callbacks.entity,[a,i]=(0,t.useState)({});return(0,t.useEffect)((()=>((async()=>{const e=(await s.getList()).reduce(((e,t)=>(e[t.path]=t,e)),{});i(e)})(),()=>{})),[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(o,{children:"Entity"}),(0,e.jsx)(n,{children:"Entity to create"}),(0,e.jsxs)("select",{value:r.value,onChange:e=>r.onChange(a[e.target.value]),children:[!r.value&&(0,e.jsx)("option",{children:"select entity"}),(c=a,Object.keys(c)).map((t=>{const r=a[t];return(0,e.jsx)("option",{value:r.path,children:r.name},r.path)}))]})]});var c},a=r=>{const{NameDiv:o,DescDiv:n}=r.options.react.prop,{ExpressionComp:s}=r.options.react,[a,c]=(0,t.useState)(r.options.propValues[r.matchField]);return(0,e.jsxs)("div",{children:[(0,e.jsx)(o,{children:r.name}),(0,e.jsx)(n,{children:r.description}),r.entity.properties.map((t=>{const o=["msg","notSet"],n=null==a?void 0:a[t.name];switch(t.type){case"boolean":case"number":case"string":o.push(t.type)}return(0,e.jsxs)("div",{children:[(0,e.jsx)(i,{children:t.name}),(0,e.jsx)(s,{types:o,expression:n,onChange:(e,o)=>((e,t,o)=>{const n=(()=>{const e=r.options.propValues[r.matchField]||{};return Object.keys(e).reduce(((t,r)=>(t[r]=e[r],t)),{})})();n[e.name]=t,c(n),r.options.callbacks.setProp(r.matchField,n)})(t,e)})]},t.name)}))]})},i=(0,r.styled)("div",{fontWeight:"bold"}),c={name:"createEntity",version:"0.8",inputs:[{name:"_"}],outputs:["_"],style:{fill:"#ff9951",stroke:"#999999"},editSection:r=>()=>{if(!r.callbacks.entity)throw new Error("createEntity can not be used without entities");const[n,s]=(0,t.useState)(r.propValues.entityPath),[i,c]=(0,t.useState)(null),l=async e=>{r.callbacks.loading(!0);const t=await r.callbacks.entity.get(e);r.callbacks.loading(!1),s(e),c(t),r.callbacks.setProp("entityPath",e)};return(0,t.useEffect)((()=>{n&&l(n)}),[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(o,{options:r,value:n,onChange:e=>l(e.path)}),i&&(0,e.jsx)(a,{options:r,matchField:"values",entity:i,name:"Entity Fields",description:"Fields of Entity to set"})]})}}})(),s})()));