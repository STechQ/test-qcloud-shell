/*! For license information please see subFlow_design.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.flowcomponent=t(require("react")):e.flowcomponent=t(e.react)}(this,(e=>(()=>{"use strict";var t={6094:(e,t,s)=>{var o=s(8156),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,s){var o,r={},l=null,u=null;for(o in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,o)&&!p.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===r[o]&&(r[o]=t[o]);return{$$typeof:n,type:e,key:l,ref:u,props:r,_owner:i.current}}t.Fragment=r,t.jsx=l,t.jsxs=l},4512:(e,t,s)=>{e.exports=s(6094)},8156:t=>{t.exports=e}},s={};function o(e){var n=s[e];if(void 0!==n)return n.exports;var r=s[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{o.r(n),o.d(n,{default:()=>s});var e=o(4512),t=o(8156);const s={name:"subFlow",version:"0.8",inputs:[{name:"_"}],outputs:["_"],style:{fill:"#8EA884",stroke:"#999999"},editSection:s=>()=>{const{NameDiv:o,DescDiv:n}=s.react.prop,{ExpressionComp:r}=s.react,[a,i]=(0,t.useState)(s.propValues.id),[p,l]=(0,t.useState)([]),[u,c]=(0,t.useState)([]),[d,f]=(0,t.useState)([]),[v,x]=(0,t.useState)(!1),[m,y]=(0,t.useState)(s.propValues.inputs||[]),[j,h]=(0,t.useState)(s.propValues.outputs||[]),b=["input","vars","string"],_=["vars","output"];if(!s.callbacks.ui)throw new Error("subFlow can not execute on environments without UI");const g=s.callbacks.ui;return(0,t.useEffect)((()=>{var e,t;(async()=>{l(await g.listFuncFlowPages())})(),c((null===(e=s.propValues.inputs)||void 0===e?void 0:e.map((e=>({name:e.name,type:"string"}))))||[]),f((null===(t=s.propValues.outputs)||void 0===t?void 0:t.map((e=>({name:e.name,type:"string"}))))||[])}),[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(o,{children:"Flow"}),(0,e.jsxs)("select",{value:a,onChange:async e=>{x(!0);const t=e.target.value;i(t);const o=p.find((e=>e.id==t));if(o){s.callbacks.setProp("id",o.id),s.callbacks.setProp("version",o.version);const e=await g.getFlowModelBody(o.id,o.version);c(e.inputs),f(e.outputs);const t=e.inputs.map((e=>({name:e.name,expression:{type:"string",value:""}}))),n=e.outputs.map((e=>({name:e.name,expression:{type:"output",value:""}})));s.callbacks.setProp("inputs",t),s.callbacks.setProp("outputs",n),y(t),h(n),x(!1)}},children:[(0,e.jsx)("option",{value:""}),p.map((t=>(0,e.jsx)("option",{value:t.id,children:`${t.name}@${t.version}`},t.id)))]}),(0,e.jsx)("hr",{}),(0,e.jsx)(o,{children:"Input"}),v?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("p",{children:"Loading..."})}):null==u?void 0:u.map(((t,o)=>(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsx)("span",{children:t.name}),"=",(0,e.jsx)(r,{inputOptions:{width:"100%"},types:b,expression:m[o].expression,onChange:e=>((e,t)=>{const o=[...m];o[e].expression=t,y(o),s.callbacks.setProp("inputs",o)})(o,e)})]},t.name))),(0,e.jsx)(o,{children:"Output"}),v?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("p",{children:"Loading..."})}):null==d?void 0:d.map(((t,o)=>(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsx)(r,{inputOptions:{width:"100%"},types:_,expression:j[o].expression,onChange:e=>((e,t)=>{const o=[...j];o[e].expression=t,h(o),s.callbacks.setProp("outputs",o)})(o,e)}),"=",(0,e.jsx)("span",{children:t.name})]},t.name)))]})}}})(),n})()));