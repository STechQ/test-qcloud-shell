/*! For license information please see updateEntity_design.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@stitches/react")):"function"==typeof define&&define.amd?define(["react","@stitches/react"],t):"object"==typeof exports?exports.flowcomponent=t(require("react"),require("@stitches/react")):e.flowcomponent=t(e.react,e["@stitches/react"])}(this,((e,t)=>(()=>{"use strict";var n={6094:(e,t,n)=>{var s=n(8156),i=Symbol.for("react.element"),r=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,c={},l=null,p=null;for(s in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(p=t.ref),t)r.call(t,s)&&!a.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===c[s]&&(c[s]=t[s]);return{$$typeof:i,type:e,key:l,ref:p,props:c,_owner:o.current}}t.jsx=c,t.jsxs=c},4512:(e,t,n)=>{e.exports=n(6094)},3149:e=>{e.exports=t},8156:t=>{t.exports=e}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return n[e](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{i.r(r),i.d(r,{default:()=>l});var e=i(4512),t=i(8156),n=i(3149);const s=n=>{const{NameDiv:s,DescDiv:i}=n.options.react.prop,r=n.options.callbacks.entity,[o,a]=(0,t.useState)([]);return(0,t.useEffect)((()=>((async()=>{const e=await r.getList();a(e)})(),()=>{})),[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(s,{children:"Entity"}),(0,e.jsx)(i,{children:"Entity to create"}),(0,e.jsxs)("select",{value:n.value,onChange:e=>{return t=e.target.selectedIndex,void n.onChange(o[t-1]);var t},children:[!n.value&&(0,e.jsx)("option",{children:"select entity"}),o.map((t=>(0,e.jsx)("option",{value:t.path,children:t.name},t.path)))]})]})},o=n=>{const{NameDiv:s,DescDiv:i}=n.options.react.prop,{ExpressionComp:r}=n.options.react,[o,c]=(0,t.useState)(n.options.propValues[n.matchField]);return(0,e.jsxs)("div",{children:[(0,e.jsx)(s,{children:n.name}),(0,e.jsx)(i,{children:n.description}),n.entity.properties.map((t=>{const s=["input","context","output","notSet"],i=null==o?void 0:o[t.name];switch(t.type){case"boolean":case"number":case"string":s.push(t.type)}return(0,e.jsxs)("div",{children:[(0,e.jsx)(a,{children:t.name}),(0,e.jsx)(r,{types:s,expression:i,onChange:(e,s)=>((e,t,s)=>{const i=(()=>{const e=n.options.propValues[n.matchField]||{};return Object.keys(e).reduce(((t,n)=>(t[n]=e[n],t)),{})})();i[e.name]=t,c(i),n.options.callbacks.setProp(n.matchField,i)})(t,e)})]},t.name)}))]})},a=(0,n.styled)("div",{fontWeight:"bold"}),c=({options:n,entity:s})=>{const{NameDiv:i,DescDiv:r}=n.react.prop,{ExpressionComp:o}=n.react,[a,c]=(0,t.useState)(n.propValues.multiple),l=s.name;return(0,e.jsxs)("div",{children:[(0,e.jsx)(i,{children:"Multiple"}),(0,e.jsx)("input",{type:"checkbox",checked:null!=a,onChange:e=>(e=>{const t=e?{}:void 0;c(t),n.callbacks.setProp("multiple",t)})(e.target.checked)}),(0,e.jsxs)(r,{children:["Retrieve 1 ",l," or multiple ",l,"s"]}),a&&(0,e.jsxs)("div",{children:[(0,e.jsx)(i,{children:"Limit"}),(0,e.jsxs)(r,{children:["Limit number of ",l,"s"]}),(0,e.jsx)(o,{types:["number","input","context","notSet"],expression:a.limit,onChange:(e,t)=>{const s={};switch(e.type){default:case"notSet":break;case"input":case"context":case"number":s.limit=e}c(s),n.callbacks.setProp("multiple",s)}})]})]})},l={name:"updateEntity",version:"0.8",inputs:[{name:"_"}],outputs:["_"],editSection:n=>()=>{if(!n.callbacks.entity)throw new Error("updateEntity can not be used without entities");const[i,r]=(0,t.useState)(n.propValues.entityPath),[a,l]=(0,t.useState)(null),p=async e=>{n.callbacks.loading(!0);const t=await n.callbacks.entity.get(e);n.callbacks.loading(!1),r(e),l(t),n.callbacks.setProp("entityPath",e)};return(0,t.useEffect)((()=>{i&&p(i)}),[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(s,{options:n,value:i,onChange:e=>p(e.path)}),a&&(0,e.jsxs)("div",{children:[(0,e.jsx)(o,{matchField:"filters",options:n,entity:a,name:"Entity Field Filter",description:"Filter entities with fields"}),(0,e.jsx)(c,{options:n,entity:a}),(0,e.jsx)(o,{matchField:"updates",options:n,entity:a,name:"Entity Field Update",description:"Update entities with fields"})]})]})}}})(),r})()));