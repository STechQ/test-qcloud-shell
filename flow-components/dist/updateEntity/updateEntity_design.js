/*! For license information please see updateEntity_design.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@stitches/react")):"function"==typeof define&&define.amd?define(["react","@stitches/react"],t):"object"==typeof exports?exports.flowcomponent=t(require("react"),require("@stitches/react")):e.flowcomponent=t(e.react,e["@stitches/react"])}(this,((e,t)=>(()=>{"use strict";var s={1837:(e,t,s)=>{var n=s(8156),r=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var n,c={},l=null,p=null;for(n in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(p=t.ref),t)i.call(t,n)&&!a.hasOwnProperty(n)&&(c[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===c[n]&&(c[n]=t[n]);return{$$typeof:r,type:e,key:l,ref:p,props:c,_owner:o.current}}t.jsx=c,t.jsxs=c},2094:(e,t,s)=>{e.exports=s(1837)},3149:e=>{e.exports=t},8156:t=>{t.exports=e}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return s[e](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{r.r(i),r.d(i,{default:()=>l});var e=r(2094),t=r(8156),s=r(3149);const n=s=>{const{NameDiv:n,DescDiv:r}=s.options.react.prop,i=s.options.callbacks.entity,[o,a]=(0,t.useState)({});return(0,t.useEffect)((()=>((async()=>{const e=(await i.getList()).reduce(((e,t)=>(e[t.path]=t,e)),{});a(e)})(),()=>{})),[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(n,{children:"Entity"}),(0,e.jsx)(r,{children:"Entity to create"}),(0,e.jsxs)("select",{value:s.value,onChange:e=>s.onChange(o[e.target.value]),children:[!s.value&&(0,e.jsx)("option",{children:"select entity"}),(c=o,Object.keys(c)).map((t=>{const s=o[t];return(0,e.jsx)("option",{value:s.path,children:s.name},s.path)}))]})]});var c},o=s=>{const{NameDiv:n,DescDiv:r}=s.options.react.prop,{ExpressionComp:i}=s.options.react,[o,c]=(0,t.useState)(s.options.propValues[s.matchField]);return(0,e.jsxs)("div",{children:[(0,e.jsx)(n,{children:s.name}),(0,e.jsx)(r,{children:s.description}),s.entity.properties.map((t=>{const n=["msg","notSet"],r=null==o?void 0:o[t.name];switch(t.type){case"boolean":case"number":case"string":n.push(t.type)}return(0,e.jsxs)("div",{children:[(0,e.jsx)(a,{children:t.name}),(0,e.jsx)(i,{types:n,expression:r,onChange:(e,n)=>((e,t,n)=>{const r=(()=>{const e=s.options.propValues[s.matchField]||{};return Object.keys(e).reduce(((t,s)=>(t[s]=e[s],t)),{})})();r[e.name]=t,c(r),s.options.callbacks.setProp(s.matchField,r)})(t,e)})]},t.name)}))]})},a=(0,s.styled)("div",{fontWeight:"bold"}),c=({options:s,entity:n})=>{const{NameDiv:r,DescDiv:i}=s.react.prop,{ExpressionComp:o}=s.react,[a,c]=(0,t.useState)(s.propValues.multiple),l=n.name;return(0,e.jsxs)("div",{children:[(0,e.jsx)(r,{children:"Multiple"}),(0,e.jsx)("input",{type:"checkbox",checked:null!=a,onChange:e=>(e=>{const t=e?{}:void 0;c(t),s.callbacks.setProp("multiple",t)})(e.target.checked)}),(0,e.jsxs)(i,{children:["Retrieve 1 ",l," or multiple ",l,"s"]}),a&&(0,e.jsxs)("div",{children:[(0,e.jsx)(r,{children:"Limit"}),(0,e.jsxs)(i,{children:["Limit number of ",l,"s"]}),(0,e.jsx)(o,{types:["number","msg","notSet"],expression:a.limit,onChange:(e,t)=>{const n={};switch(e.type){default:case"notSet":break;case"msg":case"number":n.limit=e}c(n),s.callbacks.setProp("multiple",n)}})]})]})},l={name:"updateEntity",version:"0.8",inputs:[{name:"_"}],outputs:["_"],style:{fill:"#ff9951",stroke:"#999999"},editSection:s=>()=>{if(!s.callbacks.entity)throw new Error("updateEntity can not be used without entities");const[r,i]=(0,t.useState)(s.propValues.entityPath),[a,l]=(0,t.useState)(null),p=async e=>{s.callbacks.loading(!0);const t=await s.callbacks.entity.get(e);s.callbacks.loading(!1),i(e),l(t),s.callbacks.setProp("entityPath",e)};return(0,t.useEffect)((()=>{r&&p(r)}),[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(n,{options:s,value:r,onChange:e=>p(e.path)}),a&&(0,e.jsxs)("div",{children:[(0,e.jsx)(o,{matchField:"filters",options:s,entity:a,name:"Entity Field Filter",description:"Filter entities with fields"}),(0,e.jsx)(c,{options:s,entity:a}),(0,e.jsx)(o,{matchField:"updates",options:s,entity:a,name:"Entity Field Update",description:"Update entities with fields"})]})]})}}})(),i})()));