/*! For license information please see humantask_design.js.LICENSE.txt */
!function(e,l){"object"==typeof exports&&"object"==typeof module?module.exports=l(require("react")):"function"==typeof define&&define.amd?define(["react"],l):"object"==typeof exports?exports.flowcomponent=l(require("react")):e.flowcomponent=l(e.react)}(this,(e=>(()=>{var l={6094:(e,l,s)=>{"use strict";var n=s(8156),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function c(e,l,s){var n,o={},c=null,d=null;for(n in void 0!==s&&(c=""+s),void 0!==l.key&&(c=""+l.key),void 0!==l.ref&&(d=l.ref),l)t.call(l,n)&&!r.hasOwnProperty(n)&&(o[n]=l[n]);if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:i,type:e,key:c,ref:d,props:o,_owner:a.current}}l.Fragment=o,l.jsx=c,l.jsxs=c},4512:(e,l,s)=>{"use strict";e.exports=s(6094)},8156:l=>{"use strict";l.exports=e},5685:(e,l)=>{var s;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",l=0;l<arguments.length;l++){var s=arguments[l];s&&(e=t(e,o(s)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var l="";for(var s in e)n.call(e,s)&&e[s]&&(l=t(l,s));return l}function t(e,l){return l?e?e+" "+l:e+l:e}e.exports?(i.default=i,e.exports=i):void 0===(s=function(){return i}.apply(l,[]))||(e.exports=s)}()}},s={};function n(e){var i=s[e];if(void 0!==i)return i.exports;var o=s[e]={exports:{}};return l[e](o,o.exports,n),o.exports}n.n=e=>{var l=e&&e.__esModule?()=>e.default:()=>e;return n.d(l,{a:l}),l},n.d=(e,l)=>{for(var s in l)n.o(l,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:l[s]})},n.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var i={};return(()=>{"use strict";n.r(i),n.d(i,{default:()=>h});var e=n(4512),l=n(8156);n.p;const s=({label:l,className:s,checked:n,disabled:i,onChange:o})=>(0,e.jsxs)("div",{className:`checkbox-flow ${s||""}`,children:[(0,e.jsx)("input",{className:"cursor-pointer",type:"checkbox",checked:n,onChange:o,disabled:i}),(0,e.jsx)("label",{children:l})]});function o(e,s){(0,l.useEffect)((()=>{const l=l=>{const n=null==e?void 0:e.current;n&&!n.contains((null==l?void 0:l.target)||null)&&s(l)};return document.addEventListener("mousedown",l),document.addEventListener("touchstart",l),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("touchstart",l)}}),[e,s])}n.p;const t=s=>{var n;const[i,t]=(0,l.useState)(!1),a=(0,l.useRef)(null);return o(a,(()=>t(!1))),(0,e.jsxs)("div",{className:"dropdown-flow",ref:a,children:[(0,e.jsx)("button",{className:"cursor-pointer",onClick:e=>{e.stopPropagation(),t(!i)},children:s.iconClass&&(0,e.jsx)("i",{className:s.iconClass})}),(0,e.jsx)("ul",{className:"py-3",style:{display:i?"block":"none"},children:null===(n=s.options)||void 0===n?void 0:n.map((l=>(0,e.jsx)("li",{className:"px-3 py-1 cursor-pointer ellipsis-text",onClick:e=>{t(!1),l.onClick(e)},children:l.name},l.name)))})]})};n.p;var a=n(5685),r=n.n(a);const c=({isOpen:s,onClose:n,children:i,footer:o=[],title:t,type:a="dialog",position:c})=>{if(!s)return null;const[d,u]=(0,l.useState)({top:0}),p=(0,l.useRef)(null);return(0,l.useEffect)((()=>{var e,l;if(c){const s=window.innerHeight>c.top+((null===(e=p.current)||void 0===e?void 0:e.clientHeight)||0)?c.top:window.innerHeight-((null===(l=p.current)||void 0===l?void 0:l.clientHeight)||0)-10;u({top:s})}}),[c]),(0,e.jsx)("div",{className:r()({overlay:"modal"===a}),children:(0,e.jsxs)("div",{ref:p,className:r()("dialog",{"dialog-monaco":"modal"==a}),style:d,children:[(0,e.jsxs)("div",{className:"dots",children:[(0,e.jsx)("span",{}),(0,e.jsx)("span",{}),(0,e.jsx)("span",{})]}),(0,e.jsxs)("div",{className:"dialog-header",children:[(0,e.jsx)("h5",{className:"dialog-title m-0",children:t}),(0,e.jsx)("div",{className:"cursor-pointer",onClick:n,children:(0,e.jsx)("i",{className:"mdi mdi-window-close"})})]}),(0,e.jsx)("div",{className:"dialog-body",children:i}),o.length>0&&(0,e.jsx)("div",{className:"dialog-footer",children:o.map((e=>e))})]})})},d=(n.p,({label:s,options:n=[],className:i,placeholder:t,value:a,disabled:r,onChange:c})=>{const[d,u]=(0,l.useState)(!1),[p,m]=(0,l.useState)(),[v,f]=(0,l.useState)([]),h=(0,l.useRef)(null);return o(h,(()=>u(!1))),(0,l.useEffect)((()=>{const e=v.find((e=>e.value===a));e?m(e.name):a||m("")}),[a,v]),(0,l.useEffect)((()=>{f(n)}),[n]),(0,e.jsxs)("div",{className:`select-flow position-relative ${i||""}`,children:[s&&(0,e.jsx)("label",{className:"d-block ellipsis-text",children:s}),(0,e.jsxs)("div",{ref:h,children:[(0,e.jsxs)("div",{className:"input",onClick:()=>{r||u(!d)},children:[(0,e.jsx)("input",{className:"w-100 ellipsis-text",placeholder:t,value:p,onChange:()=>{}}),(0,e.jsx)("i",{className:"mdi mdi-chevron-down"})]}),(0,e.jsx)("div",{className:"options",style:{display:d?"block":"none"},children:(0,e.jsx)("ul",{children:n.map((l=>(0,e.jsx)("li",{className:"cursor-pointer ellipsis-text",onClick:()=>l.value!=p?(e=>{c(e.value),u(!1)})(l):u(!1),children:l.name},l.value)))})})]})]})}),u=({id:l,label:s,remove:n})=>(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{children:s}),(0,e.jsx)("i",{className:"mdi mdi-close",onClick:e=>{e.preventDefault(),e.stopPropagation(),n(l)}})]}),p=({label:n,options:i,className:t,placeholder:a,values:r,disabled:c,onChange:d})=>{const[p,m]=(0,l.useState)(!1),[v,f]=(0,l.useState)([]),h=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const e=i.filter((e=>null==r?void 0:r.some((l=>e.value===l))));e&&f(e)}),[r]),o(h,(()=>m(!1))),(0,e.jsxs)("div",{className:`select-flow position-relative ${t||""}`,children:[n&&(0,e.jsx)("label",{className:"d-block",children:n}),(0,e.jsxs)("div",{ref:h,children:[(0,e.jsxs)("div",{className:"input w-100",onClick:()=>{c||m(!p)},children:[(0,e.jsx)("div",{className:"w-100 input-block",children:v.map(((l,s)=>(0,e.jsx)(u,{id:s,remove:e=>{(e=>{const l=v.filter(((l,s)=>s!==e));f(l),d(l.map((e=>e.value)))})(e)},label:l.name},crypto.randomUUID())))}),(0,e.jsx)("i",{className:"mdi mdi-chevron-down"})]}),(0,e.jsx)("div",{className:"options",style:{display:p?"block":"none"},children:(0,e.jsx)("ul",{children:i.map(((l,n)=>(0,e.jsx)("li",{className:"cursor-pointer",onClick:()=>(e=>{let l=v;v.some((l=>l.value===e.value))?l=v.filter((l=>l.value!==e.value)):l.push(e),f(l),d(l.map((e=>e.value)))})(l),children:(0,e.jsx)(s,{checked:v.some((e=>e.value===l.value)),onChange:()=>{},label:l.name})},l.value)))})})]})]})},m=(n.p,({label:l,className:s,placeholder:n,value:i,disabled:o,onChange:t,onBlur:a})=>(0,e.jsxs)("div",{className:`input-flow ${s||""}`,children:[l&&(0,e.jsx)("label",{className:"d-block",children:l}),(0,e.jsx)("input",{className:"w-100",placeholder:n,value:i,onChange:t,onBlur:a,disabled:o})]})),v=(n.p,({label:s,isKeepOpen:n=!1,onAddButton:i,children:o})=>{const[t,a]=(0,l.useState)(!0);return(0,e.jsxs)("div",{className:"variables ",children:[(0,e.jsxs)("div",{className:"d-flex justify-content-between p-3 pb-0",children:[(0,e.jsxs)("div",{className:"d-flex cursor-pointer",onClick:()=>a(!t),children:[!n&&(0,e.jsx)("i",{className:"mdi "+(t?"mdi-chevron-down":"mdi-chevron-right")}),(0,e.jsx)("p",{children:s})]}),i&&(0,e.jsx)("i",{className:"mdi mdi-plus cursor-pointer",onClick:i})]}),(n||t)&&(0,e.jsx)("ul",{className:"variable-list",children:o})]})}),f=(n.p,n.p,n.p,n.p,({collapsibleLabel:s,fields:n,disabledFields:i=[],fieldLabel:o,dialogElements:a,emptyValues:r,isAddible:d=!0,isCollabsible:u=!0,createItemLabel:p,dialogTitle:m,maxItemLen:f,onChange:h,getFieldLabel:x})=>{const[b,g]=(0,l.useState)([]),[y,j]=(0,l.useState)(!1),[N,k]=(0,l.useState)(0),[S,w]=(0,l.useState)({top:0}),[C,L]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const e=new Set(i.map((e=>JSON.stringify(e)))),l=n.filter((l=>!e.has(JSON.stringify(l))));g(l)}),[n]);const O=(e,l,s=!1)=>{w({top:e.pageY}),L(s),k(l),j(!0)},$=(e,l,s=o)=>{if(!e)return;if(s.includes(".")){const n=s.split(".").reduce(((e,l)=>e[l]),e);return"object"==typeof n?n.value?`${n.type}.${n.value}`:`Variable ${l+1}`:n}const n=e?e[s]:e;return"object"==typeof n?n.value?`${n.type}.${n.value}`:`Variable ${l+1}`:n},E=e=>{g(e),h(JSON.parse(JSON.stringify([...i,...e])))};function T(e,l){const s=[...b];((e,l,s)=>{const n=l.split("."),i=n.pop();n.reduce(((e,l)=>e[l]),e)[i]=s})(s[N],e,l),E(s)}const _=()=>{if(void 0!==f&&b.length>=f)return;const e=[...b];e.push(JSON.parse(JSON.stringify(r))),E(e)},I=(e,l)=>{var s;const n=null===(s={true:i,false:b}[C.toString()])||void 0===s?void 0:s[N];return{Expression:{expression:(null==n?void 0:n[l])||{type:"string",value:""},onChange:e=>{T(l,e)}},Checkbox:{checked:(null==n?void 0:n[l])||!1,onChange:e=>{T(l,e.target.checked)}},Select:{value:$(n,0,l)||"",onChange:e=>{T(l,e)}},Input:{value:(null==n?void 0:n[l])||"",onChange:e=>{T(l,e.target.value)}},MultiSelect:{values:(null==n?void 0:n[l])||[],onChange:e=>{T(l,e)}},SelectType:{value:(null==n?void 0:n[l])||"",onChange:e=>{T(l,e)}}}[e]||{value:(null==n?void 0:n[l])||"",onChange:e=>{T(l,e)}}};return(0,e.jsx)(e.Fragment,{children:0==(null==b?void 0:b.length)&&0==i.length&&d?(0,e.jsxs)("div",{className:"dynamic-field-create vertical-line cursor-pointer",onClick:_,children:[(0,e.jsx)("p",{children:p}),void 0===f||void 0!==f&&b.length<f?(0,e.jsx)("i",{className:"mdi mdi-plus"}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(v,{label:s,isKeepOpen:!u,...(()=>{if(d&&!(void 0!==f&&b.length>=f))return{onAddButton:_}})(),children:[null==i?void 0:i.map(((l,s)=>(0,e.jsx)("li",{className:`d-flex justify-content-between align-items-center px-1 py-2 cursor-pointer ${b.length-1!==s&&"vertical-line"}`,onClick:e=>O(e,s,!0),children:(0,e.jsx)("p",{className:"m-0 ellipsis-text",children:(null==x?void 0:x(l))||$(l,s)||`Variable ${s+1}`})},`item${s}`))),null==b?void 0:b.map(((l,s)=>(0,e.jsxs)("li",{className:`d-flex justify-content-between align-items-center px-1 py-2 cursor-pointer ${b.length-1!==s&&"vertical-line"}`,onClick:e=>O(e,s),children:[(0,e.jsx)("p",{className:"m-0 ellipsis-text",children:(null==x?void 0:x(l))||$(l,s)||`Variable ${s+1}`}),(0,e.jsx)(t,{iconClass:"mdi mdi-dots-horizontal",options:[{name:"Delete",onClick:e=>{((e,l)=>{e.preventDefault(),e.stopPropagation(),E([...b].filter(((e,s)=>s!=l)))})(e,s)}}]})]},`item${s}`)))]}),(0,e.jsx)(c,{isOpen:y,title:m,onClose:()=>j(!1),position:S,children:a.map(((l,s)=>{var n,o;if((C||!l.isRendered||(null===(n=null==l?void 0:l.isRendered)||void 0===n?void 0:n.call(l,b[N])))&&(!C||!l.isRendered||(null===(o=null==l?void 0:l.isRendered)||void 0===o?void 0:o.call(l,i[N]))))return(0,e.jsx)(l.component,{...I(l.component.name,l.key),disabled:C,...l.props,children:l.children},l.key)}))})]})})}),h={name:"humantask",version:"0.8",inputs:[{name:"_"}],outputs:["_"],icon:"mdiHumanMaleBoardPoll",defaultProps:()=>({forms:[],actions:[],swimlanes:[]}),editSection:s=>()=>{var n,i,o,t,a,r;const{NameDiv:c,DescDiv:u}=s.react.prop,[v,h]=(0,l.useState)([]),x=(null===(o=null===(i=null===(n=null==s?void 0:s.callbacks)||void 0===n?void 0:n.ui)||void 0===i?void 0:i.getRoles)||void 0===o?void 0:o.call(i).map((e=>e.value)))||[],b=null===(r=null===(a=null===(t=null==s?void 0:s.callbacks)||void 0===t?void 0:t.ui)||void 0===a?void 0:a.getSwimlanes)||void 0===r?void 0:r.call(a),[g,y]=(0,l.useState)(["start","complete","claim","assignToUser","assignToUnit","save","function","trigger"]),[j,N]=(0,l.useState)(!1),k=v.map((e=>({name:`${e.name}@${e.version}`,value:e.id}))),S=x.map((e=>({name:`${e}`,value:e}))),w=g.map((e=>({name:`${e}`,value:e}))),C=null==b?void 0:b.map((e=>({name:`${e.name.value}`,value:e.id})));if(!s.callbacks.ui)throw new Error("humantask can not execute on environments without UI");const L=s.callbacks.ui;(0,l.useEffect)((()=>{(async()=>{h(await L.listQjsonPages())})()}),[]);const O=[{component:d,key:"id",props:{label:"Form",types:s.propValues.forms.map((e=>e.id)),options:k}},{component:p,key:"roles",props:{label:"Roles",options:S}}],$=[{component:d,key:"actionType",props:{label:"Action Type",types:g,options:w}},{component:m,key:"customType",props:{label:"Custom Type"}},{component:m,key:"label",props:{label:"Label"}},{component:p,key:"roles",props:{label:"Roles",options:S}}],E=[{component:d,key:"swimlaneId",props:{label:"Swimlane",options:C}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(f,{fields:s.propValues.swimlanes||[],dialogTitle:"Swimlane",collapsibleLabel:"SWIMLANE",fieldLabel:"swimlaneId",getFieldLabel:e=>{var l;return(null===(l=null==b?void 0:b.find((l=>l.id==e.swimlaneId)))||void 0===l?void 0:l.name.value)||""},dialogElements:E,emptyValues:{swimlaneId:""},createItemLabel:"Add Swimlane",onChange:e=>{s.callbacks.setProp("swimlanes",e)},isCollabsible:!1,maxItemLen:1}),(0,e.jsx)(f,{fields:s.propValues.forms||[],dialogTitle:"Form",collapsibleLabel:"FORMS",fieldLabel:"id",getFieldLabel:e=>{var l;return(null===(l=v.find((l=>l.id==e.id)))||void 0===l?void 0:l.name)||""},dialogElements:O,emptyValues:{id:"",roles:[]},createItemLabel:"Add Forms",onChange:e=>{s.callbacks.setProp("forms",e)}}),(0,e.jsx)(f,{fields:s.propValues.actions||[],dialogTitle:"Action",collapsibleLabel:"ACTIONS",fieldLabel:"actionType",getFieldLabel:e=>e.actionType?e.customType?`${e.actionType} - ${e.customType}`:`${e.actionType}`:"",dialogElements:$,emptyValues:{customType:"",label:"",roles:[]},createItemLabel:"Add Actions",onChange:e=>{s.callbacks.setProp("actions",e)}})]})}}})(),i})()));