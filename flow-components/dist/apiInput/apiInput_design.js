/*! For license information please see apiInput_design.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@stitches/react")):"function"==typeof define&&define.amd?define(["react","@stitches/react"],t):"object"==typeof exports?exports.flowcomponent=t(require("react"),require("@stitches/react")):e.flowcomponent=t(e.react,e["@stitches/react"])}(this,((e,t)=>(()=>{"use strict";var s={6094:(e,t,s)=>{var r=s(8156),a=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,s){var r,p={},l=null,c=null;for(r in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)n.call(t,r)&&!i.hasOwnProperty(r)&&(p[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===p[r]&&(p[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:c,props:p,_owner:o.current}}t.jsx=p,t.jsxs=p},4512:(e,t,s)=>{e.exports=s(6094)},3149:e=>{e.exports=t},8156:t=>{t.exports=e}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return s[e](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{a.r(n),a.d(n,{default:()=>x});var e=a(4512),t=a(8156);const s=s=>{const r=s.options.callbacks.entity,[a,n]=(0,t.useState)([]);(0,t.useEffect)((()=>((async()=>{const e=await r.getList();n(s.additionalTypes.concat(e))})(),()=>{})),[]);const o=!s.value,i=s.multiple||!1;return(0,e.jsxs)("div",{children:[(0,e.jsxs)("select",{value:s.value,onChange:e=>(e=>{const t=a[o?e-1:e];s.onChange({multiple:i,type:t})})(e.target.selectedIndex),children:[o&&(0,e.jsx)("option",{children:"select type"}),a.map((t=>{const s="string"==typeof t?t:t.path,r="string"==typeof t?t:t.name;return(0,e.jsx)("option",{value:s,children:r},s)}))]}),!o&&(0,e.jsxs)("div",{children:["Multiple: ",(0,e.jsx)("input",{type:"checkbox",title:"Multiple",checked:i,onChange:e=>(e=>{const t=a.find((e=>"string"==typeof e?e==s.value:e.name==s.value));s.onChange({multiple:e,type:t})})(e.target.checked)})]})]})};var r=a(3149);const o=s=>{const{NameDiv:r,DescDiv:a}=s.react.prop,{ExpressionComp:n}=s.react,o=()=>p.map((e=>e)),i=e=>p.map(((t,s)=>s==(null==e?void 0:e.index)&&e.val)),p=s.propValues.pathVars||[],[l,c]=(0,t.useState)(p),[u,d]=(0,t.useState)(i()),x=(e,t)=>d(i({index:e,val:t}));return(0,e.jsxs)("div",{children:[(0,e.jsx)(r,{children:"Path Variables"}),(0,e.jsxs)(a,{children:["Variables to get from url. Like /buy/","{","productID","}"]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:"/"}),l.reduce(((t,r,a)=>{0!=a&&t.push((0,e.jsx)("span",{children:"/"},`slash_${a}`));const n="string"==typeof r?r:`{${r.value}}`,p={display:u[a]?"inline":"none"};return t.push((0,e.jsxs)("span",{onMouseOver:()=>x(a,!0),onMouseOut:()=>x(a,!1),children:[(0,e.jsx)("span",{children:n}),(0,e.jsx)("span",{style:p,onClick:()=>(e=>{const t=o().filter(((t,s)=>s!=e));c(t),d(i()),s.callbacks.setProp("pathVars",t.length?t:void 0)})(a),children:"X"})]},n)),t}),[])]}),l.map(((t,r)=>{const a="string"==typeof t?{type:"string",value:t}:t;return(0,e.jsx)("div",{children:(0,e.jsx)(n,{inputOptions:{width:"140px"},expression:a,types:["vars","output","string"],onChange:e=>((e,t)=>{const r=o();r[t]="string"==e.type?e.value:e,c(r),s.callbacks.setProp("pathVars",r)})(e,r)})},r)})),(0,e.jsx)("br",{}),(0,e.jsx)("button",{onClick:()=>{const e=o();e.push({type:"vars",value:""}),c(e),s.callbacks.setProp("pathVars",e)},children:"+ Add New"})]})},i={width:"59px"},p=s=>{const{NameDiv:r,DescDiv:a}=s.react.prop,{ExpressionComp:n}=s.react,o=()=>p.map((e=>e)),[p,l]=(0,t.useState)(s.propValues.headers||[]);return(0,e.jsxs)("div",{children:[(0,e.jsx)(r,{children:"Headers"}),(0,e.jsx)(a,{children:"Where to read headers from API input ?"}),p.map(((t,r)=>(0,e.jsxs)("div",{children:[(0,e.jsx)("input",{type:"text",style:i,value:t.key,placeholder:t.key?void 0:"key",onChange:e=>((e,t)=>{const r=o(),a=r[t],n=a.key==a.value.value;a.key=e.toLowerCase(),n&&(a.value.value=a.key),l(r),s.callbacks.setProp("headers",r)})(e.target.value,r)}),(0,e.jsx)(n,{inputOptions:{width:"60px"},types:["input","vars","output"],expression:t.value,onChange:e=>((e,t)=>{const r=o();r[t].value=e,l(r),s.callbacks.setProp("headers",r)})(e,r)}),(0,e.jsx)("button",{style:{padding:"0px 2px 0px 2px",marginLeft:"2px"},onClick:e=>(e=>{const t=o();t.splice(e,1),l(t),s.callbacks.setProp("headers",t)})(r),children:"🗑️"})]},r))),(0,e.jsx)("br",{}),(0,e.jsx)("input",{type:"button",onClick:e=>(()=>{const e=o();e.push({key:"",value:{type:"vars",value:""}}),l(e),s.callbacks.setProp("headers",e)})(),value:"+ Add New"})]})},l={width:"60px"},c=s=>{const{NameDiv:r,DescDiv:a}=s.react.prop,{ExpressionComp:n}=s.react,o=()=>p.map((e=>e)),i=s.propValues.queryParams||[],[p,c]=(0,t.useState)(i);return(0,e.jsxs)("div",{children:[(0,e.jsx)(r,{children:"Query Parameters"}),(0,e.jsx)(a,{children:"Define query parameters from Service input"}),p.map(((t,r)=>(0,e.jsxs)("div",{children:[(0,e.jsx)("input",{type:"text",value:t.key,style:l,onChange:e=>((e,t)=>{const r=o(),a=r[t],n=a.key==a.value.value;a.key=e.toLowerCase(),n&&(a.value.value=a.key),c(r),s.callbacks.setProp("queryParams",r)})(e.target.value,r)}),(0,e.jsx)(n,{inputOptions:{width:"60px"},types:["input","vars","output"],expression:t.value,onChange:e=>((e,t)=>{const r=o();r[t].value=e,c(r),s.callbacks.setProp("queryParams",r)})(e,r)}),(0,e.jsx)("button",{style:{padding:"0px 2px 0px 2px",marginLeft:"2px"},onClick:e=>(e=>{const t=o();t.splice(e,1),c(t),s.callbacks.setProp("queryParams",t)})(r),children:"🗑️"})]},r))),(0,e.jsx)("br",{}),(0,e.jsx)("button",{onClick:e=>(()=>{const e=o();e.push({key:"",value:{type:"vars",value:""}}),c(e),s.callbacks.setProp("queryParams",e)})(),children:"+ Add New"})]})},u=r=>{const{NameDiv:a,DescDiv:n}=r.react.prop,{ExpressionComp:o}=r.react,[i,p]=(0,t.useState)(r.propValues.body||[]),l=()=>i.map((e=>e));console.log(i);const c=i.length<=1?["input","vars","output","wholeMsg"]:["input","vars","output"];return(0,e.jsxs)("div",{children:[(0,e.jsx)(a,{children:"Body"}),(0,e.jsx)(n,{children:"Service input data"}),i.map(((t,a)=>{const n="entity"==t.type?t.entityPath:t.primitive;return(0,e.jsxs)(d,{children:["Field: ",(0,e.jsx)("input",{type:"text",value:t.field||"",onChange:e=>(async(e,t)=>{const s=l(),a=s[t];a.field==a.target.value&&(a.target.value=e),a.field=e,p(s),r.callbacks.setProp("body",s)})(e.target.value,a)}),(0,e.jsx)(s,{options:r,value:n,multiple:t.multi,additionalTypes:["boolean","number","string"],onChange:({multiple:e,type:t})=>(async(e,t,s)=>{const a=l(),n=a[s];a[s]="string"==typeof t?{type:"primitive",multi:e,primitive:t,target:n.target,field:n.field}:{type:"entity",multi:e,entityPath:t.path,target:n.target,field:n.field},p(a),r.callbacks.setProp("body",a)})(e,t,a)}),(0,e.jsx)(o,{inputOptions:{width:"60px"},types:c,expression:t.target,onChange:e=>(async(e,t)=>{const s=l();s[t].target=e,p(s),r.callbacks.setProp("body",s)})(e,a)}),(0,e.jsx)("button",{style:{padding:"0px 2px 0px 2px",marginLeft:"2px"},onClick:e=>(async e=>{const t=l();t.splice(e,1),p(t),r.callbacks.setProp("body",0==t.length?void 0:t)})(a),children:"🗑️"})]},a)})),(0,e.jsx)("br",{}),(0,e.jsx)("button",{onClick:e=>(async()=>{const e=l();e.push({type:"entity",multi:!1,entityPath:"",target:{type:"vars",value:""},field:""}),p(e),r.callbacks.setProp("body",e)})(),children:"+Add New"})]})},d=(0,r.styled)("div",{borderBottom:"1px dashed black",padding:"5px 0 5px 0",margin:"0 3px 0 3px"}),x={name:"apiInput",version:"0.8",style:{fill:"#DEB877",stroke:"#999999"},inputs:[{name:"_"}],outputs:["_"],editSection:t=>()=>(0,e.jsxs)("div",{children:[o(t),(0,e.jsx)("hr",{}),c(t),(0,e.jsx)("hr",{}),p(t),(0,e.jsx)("hr",{}),u(t)]})}})(),n})()));