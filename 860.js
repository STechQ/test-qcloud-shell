"use strict";(self.webpackChunkqcloud_shell=self.webpackChunkqcloud_shell||[]).push([[860],{8068:(n,e,t)=>{t.d(e,{Z:()=>s});var i=t(1864),l=t.n(i),o=t(352),a=t.n(o)()(l());a.push([n.id,"\n.fileInputDiv[data-v-0c5a0cc6] {\n    margin-left: 20px;\n    margin-top: 20px;\n    margin-right: 20px;\n}\n.selectedItems[data-v-0c5a0cc6] {\n    margin-left: 10px;\n    margin-top: 10px;\n    height: 226px;\n    overflow: auto;\n}\n.selectedItems[data-v-0c5a0cc6]::-webkit-scrollbar-thumb {\n    background-color: #D0D1E9;\n    border-radius: 16px;\n}\n.selectedItems[data-v-0c5a0cc6]::-webkit-scrollbar {\n    width: 12px;\n}\n.selectedItems[data-v-0c5a0cc6]::-webkit-scrollbar-track {\n    background: transparent;\n}\n.importBtn[data-v-0c5a0cc6] {\n    border-radius: 4px;\n    border: none;\n    opacity: 1;\n    color: white;\n    width: 97px;\n    height: 40px;\n    font-style: normal;\n    font-size: 20px;\n    font-weight: 500;\n    letter-spacing: 0px;\n    font-family: 'ROBOTO';\n}\n.importBtnDiv[data-v-0c5a0cc6] {\n    text-align: end;\n    margin-right: 20px;\n    margin-top: 30px;\n}\n.removeIcon[data-v-0c5a0cc6] {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n.loading[data-v-0c5a0cc6] {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n[data-v-0c5a0cc6]::-webkit-file-upload-button {\n    background: #2F3160;\n    color: white;\n    border-radius: 4px;\n    width: 120px;\n    height: 48px;\n}\n.fileUploadDiv[data-v-0c5a0cc6] {\n    cursor: pointer;\n}\n.filesValue[data-v-0c5a0cc6] {\n    margin-top: 10px;\n    background-color: #F5F5FA;\n    color: #000000;\n    display: flex;\n    border-radius: 4px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    letter-spacing: 0px;\n    opacity: 1;\n    font-family: 'ROBOTO';\n    margin-left: 10px;\n    width: 561px;\n    text-align: start;\n}\n.uploadFilesText[data-v-0c5a0cc6] {\n    color: #616161;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 10px;\n    font-family: \"ROBOTO\";\n}\n.fileType[data-v-0c5a0cc6] {\n    color: #449DD1;\n    font-size: 18px;\n    padding-left: 5px;\n}\n.uploadArea[data-v-0c5a0cc6] {\n    text-align: center;\n    padding-top: 25px;\n    border: 1px dashed #a1a1a1;\n    height: 100px;\n}\n.cancelBtn[data-v-0c5a0cc6] {\n    background: none;\n    border: none;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 20px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 50px;\n    font-family: \"ROBOTO\";\n    margin-right: 10px;\n    color: #757575;\n    letter-spacing: 0.02px;\n}\n.loader[data-v-0c5a0cc6] {\n    border: 3px solid #f3f3f3;\n    border-radius: 70%;\n    border-top: 3px solid #3498db;\n    width: 12px;\n    height: 12px;\n    -webkit-animation: spin-0c5a0cc6 1s linear infinite;\n    animation: spin-0c5a0cc6 1s linear infinite;\n}\n\n/* Safari */\n@-webkit-keyframes spin-0c5a0cc6 {\n0% {\n        -webkit-transform: rotate(0deg);\n}\n100% {\n        -webkit-transform: rotate(360deg);\n}\n}\n@keyframes spin-0c5a0cc6 {\n0% {\n        transform: rotate(0deg);\n}\n100% {\n        transform: rotate(360deg);\n}\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/importModelDialog.vue"],names:[],mappings:";AA+JA;IACI,iBAAiB;IACjB,gBAAgB;IAChB,kBAAkB;AACtB;AAEA;IACI,iBAAiB;IACjB,gBAAgB;IAChB,aAAa;IACb,cAAc;AAClB;AAEA;IACI,yBAAyB;IACzB,mBAAmB;AACvB;AAEA;IACI,WAAW;AACf;AAEA;IACI,uBAAuB;AAC3B;AAEA;IACI,kBAAkB;IAClB,YAAY;IACZ,UAAU;IACV,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,mBAAmB;IACnB,qBAAqB;AACzB;AAEA;IACI,eAAe;IACf,kBAAkB;IAClB,gBAAgB;AACpB;AAEA;IACI,eAAe;IACf,cAAc;IACd,mBAAmB;IACnB,kBAAkB;IAClB,eAAe;IACf,mBAAmB;IACnB,UAAU;AACd;AAEA;IACI,eAAe;IACf,cAAc;IACd,mBAAmB;IACnB,kBAAkB;IAClB,eAAe;IACf,mBAAmB;IACnB,UAAU;AACd;AAEA;IACI,mBAAmB;IACnB,YAAY;IACZ,kBAAkB;IAClB,YAAY;IACZ,YAAY;AAChB;AAEA;IACI,eAAe;AACnB;AAEA;IACI,gBAAgB;IAChB,yBAAyB;IACzB,cAAc;IACd,aAAa;IACb,kBAAkB;IAClB,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;IACf,mBAAmB;IACnB,UAAU;IACV,qBAAqB;IACrB,iBAAiB;IACjB,YAAY;IACZ,iBAAiB;AACrB;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;IACf,mBAAmB;IACnB,UAAU;IACV,iBAAiB;IACjB,qBAAqB;AACzB;AAEA;IACI,cAAc;IACd,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,kBAAkB;IAClB,iBAAiB;IACjB,0BAA0B;IAC1B,aAAa;AAEjB;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;IACf,mBAAmB;IACnB,UAAU;IACV,iBAAiB;IACjB,qBAAqB;IACrB,kBAAkB;IAClB,cAAc;IACd,sBAAsB;AAC1B;AAEA;IACI,yBAAyB;IACzB,kBAAkB;IAClB,6BAA6B;IAC7B,WAAW;IACX,YAAY;IACZ,mDAA0C;IAC1C,2CAAkC;AACtC;;AAEA,WAAW;AACX;AACI;QACI,+BAA+B;AACnC;AAEA;QACI,iCAAiC;AACrC;AACJ;AAEA;AACI;QACI,uBAAuB;AAC3B;AAEA;QACI,yBAAyB;AAC7B;AACJ",sourcesContent:['<script setup lang="ts">\nimport { IUseCaseExecutor } from \'../../../../domain/useCase/IUseCaseExecutor\';\nimport { container } from \'../../../../domain/core/diContainer\';\nimport { ICreateModel, ICreateModelParam } from \'../../../../domain/useCase/ICreateModel\';\nimport { IApplication, IFolder, IModel, IModule } from \'../../../../domain/model/models\';\nimport { IStudio } from \'../../../../domain/useCase/IStudio\';\nimport { INewItemProps } from \'../../../../domain/presentation/dialogs/INewItemProps\';\nimport { onMounted, ref } from \'@vue/runtime-dom\';\nimport { computed } from \'@vue/reactivity\';\nimport { TooltipImpl } from \'../../impls/tooltipImpl\';\n\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst studio = container.resolve<IStudio>(IStudio);\nconst tooltip = container.resolve<TooltipImpl>(TooltipImpl);\n// const list = document.createElement(\'ul\');\n\ninterface IImportFile {\n    name: string;\n    content: string;\n    isDuplicate: boolean;\n}\n\ninterface INewItemPropsInline extends INewItemProps {\n    parent: IModule | IFolder | IApplication;\n\n}\n\nconst props = defineProps<INewItemPropsInline>();\nconst fileItems = ref<Array<IImportFile>>([])\nconst loadingIcon = ref(false)\nconst emit = defineEmits(["close"]);\n\nfunction checkDuplicate(name: string) {\n    const isDuplicate = props.parent.children?.some(i => i.name == name)\n    return isDuplicate == true\n\n}\n\nasync function selectedFiles() {\n    var item = document.getElementById(\'fileInput\') as HTMLInputElement | null;\n    for (var i = 0; i < item?.files?.length!; i++) {\n        const file = item?.files?.item(i)\n        const isExist = fileItems.value.some(i => i.name == file?.name)\n        if (!isExist) {\n            const text = await file!.text();\n            const isDuplicate = checkDuplicate(file!.name)\n            fileItems.value.push({ name: file!.name, content: text, isDuplicate })\n        }\n\n    }\n    tooltip.startTooltip()\n}\n\nasync function importSelectedModels() {\n    loadingIcon.value = true;\n    fileItems.value.forEach(async item => {\n        if (item.isDuplicate) {\n            return\n        }\n        // parentID ve parentType kesin alınacak ama parent değerini direkt alabilirsin \n        const modelBody = [{ key: "qjson", model: item!.content }];\n        const createObject: ICreateModelParam = {\n            name: item.name,\n            parentObjectId: props.parent.ID,\n            modelBody,\n            modelType: "qjson",\n            modelAdditionals: { qjsonType: \'qjson\' },\n        }\n\n        const createdModel = await executor.executeUseCase<ICreateModel>(ICreateModel, createObject);\n        // await onAfterModelCreated(createdModel)\n        emit(\'close\')\n        loadingIcon.value = false;\n    });\n\n}\n\n\n\nfunction removeItem(file: IImportFile, selectedFiles: Array<any>) {\n    const index = selectedFiles.indexOf(file)\n    selectedFiles.splice(index, 1)\n    tooltip.startTooltip()\n}\nasync function onAfterModelCreated(createdModel: IModel) {\n    await studio.checkout(createdModel)\n    studio.openItem(createdModel);\n}\n\nconst buttonDisabled = computed(() => fileItems.value.filter(i => i.isDuplicate != true).length == 0);\n\n<\/script> \n\n<template>\n    <div class="fileInputDiv">\n        <div class=\'fileUploadDiv col-12\' onclick="document.getElementById(\'fileInput\').click()">\n            <div class=\'col-12 uploadArea\' style="display:flex; padding-left: 150px; padding-top: 35px;">\n                <div class="mdi mdi-cloud-upload-outline"\n                    style="text-align: center; font-size: 25px; color:#A1A1A1; padding-right:10px; margin-top: -7px;">\n                </div>\n                <span style="font-weight:bold">Click</span><span style="padding-left:10px">here to upload your\n                    files.</span>\n            </div>\n        </div>\n        <input style="display: none;" type="file" id="fileInput" multiple @change="selectedFiles()" accept=".qjson">\n\n    </div>\n    <div id="selectedFiles" class="selectedItems">\n\n        <div v-if="fileItems.length > 0">\n            <div class=\'uploadFilesText\'>Selected Files <span> ({{ fileItems.length }})</span></div>\n            <div v-for="fileValues in fileItems">\n                <div v-if="!fileValues.isDuplicate" class=\'filesValue\' \n                    :style="{ border: fileValues.isDuplicate ? \'1px solid red\' : \'none\' }">\n                    <div><i class=\'mdi mdi-palette fileType\'></i></div>\n                    <div class="col-10" style="margin-left: 10px;">\n                        {{ fileValues.name }}\n                    </div>\n\n                    <div class="col-1" style="text-align: end; padding-left: 30px;">\n                        <i v-if="fileValues && !loadingIcon" class=\'mdi mdi-delete-outline removeIcon\'\n                            @click=\'removeItem(fileValues, fileItems)\'></i>\n\n                        <div v-if="loadingIcon" style=" padding-top: 7px;" class="loader"></div>\n                    </div>\n\n                </div>\n\n                <div v-if="fileValues.isDuplicate" class=\'filesValue\' \n                    :style="{ border: fileValues.isDuplicate ? \'1px solid red\' : \'none\' }">\n                    <div><i class=\'mdi mdi-palette fileType\'></i></div>\n                    <div class="col-10" data-toggle="tooltip"\n                    title="File is already imported" placement=\'bottom\' style="margin-left: 10px;">\n                        {{ fileValues.name }}\n                    </div>\n\n                    <div class="col-1" style="text-align: end; padding-left: 30px;">\n                        <i v-if="fileValues && !loadingIcon" class=\'mdi mdi-delete-outline removeIcon\'\n                            @click=\'removeItem(fileValues, fileItems)\'></i>\n\n                        <div v-if="loadingIcon" style=" padding-top: 7px;" class="loader"></div>\n                    </div>\n\n                </div>\n            </div>\n\n\n        </div>\n    </div>\n    <div class=\'importBtnDiv\'>\n        <button class=\'cancelBtn\' @click="emit(\'close\')">Cancel</button>\n        <button class=\'importBtn\' :disable="buttonDisabled"\n            :style="{ backgroundColor: buttonDisabled == true ? \'#37373733\' : \'#151233\' }"\n            @click="importSelectedModels()">IMPORT</button>\n    </div>\n</template> \n\n<style scoped>\n.fileInputDiv {\n    margin-left: 20px;\n    margin-top: 20px;\n    margin-right: 20px;\n}\n\n.selectedItems {\n    margin-left: 10px;\n    margin-top: 10px;\n    height: 226px;\n    overflow: auto;\n}\n\n.selectedItems::-webkit-scrollbar-thumb {\n    background-color: #D0D1E9;\n    border-radius: 16px;\n}\n\n.selectedItems::-webkit-scrollbar {\n    width: 12px;\n}\n\n.selectedItems::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n.importBtn {\n    border-radius: 4px;\n    border: none;\n    opacity: 1;\n    color: white;\n    width: 97px;\n    height: 40px;\n    font-style: normal;\n    font-size: 20px;\n    font-weight: 500;\n    letter-spacing: 0px;\n    font-family: \'ROBOTO\';\n}\n\n.importBtnDiv {\n    text-align: end;\n    margin-right: 20px;\n    margin-top: 30px;\n}\n\n.removeIcon {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n\n.loading {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n\n::-webkit-file-upload-button {\n    background: #2F3160;\n    color: white;\n    border-radius: 4px;\n    width: 120px;\n    height: 48px;\n}\n\n.fileUploadDiv {\n    cursor: pointer;\n}\n\n.filesValue {\n    margin-top: 10px;\n    background-color: #F5F5FA;\n    color: #000000;\n    display: flex;\n    border-radius: 4px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    letter-spacing: 0px;\n    opacity: 1;\n    font-family: \'ROBOTO\';\n    margin-left: 10px;\n    width: 561px;\n    text-align: start;\n}\n\n.uploadFilesText {\n    color: #616161;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 10px;\n    font-family: "ROBOTO";\n}\n\n.fileType {\n    color: #449DD1;\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.uploadArea {\n    text-align: center;\n    padding-top: 25px;\n    border: 1px dashed #a1a1a1;\n    height: 100px;\n\n}\n\n.cancelBtn {\n    background: none;\n    border: none;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 20px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 50px;\n    font-family: "ROBOTO";\n    margin-right: 10px;\n    color: #757575;\n    letter-spacing: 0.02px;\n}\n\n.loader {\n    border: 3px solid #f3f3f3;\n    border-radius: 70%;\n    border-top: 3px solid #3498db;\n    width: 12px;\n    height: 12px;\n    -webkit-animation: spin 1s linear infinite;\n    animation: spin 1s linear infinite;\n}\n\n/* Safari */\n@-webkit-keyframes spin {\n    0% {\n        -webkit-transform: rotate(0deg);\n    }\n\n    100% {\n        -webkit-transform: rotate(360deg);\n    }\n}\n\n@keyframes spin {\n    0% {\n        transform: rotate(0deg);\n    }\n\n    100% {\n        transform: rotate(360deg);\n    }\n}\n</style>'],sourceRoot:""}]);const s=a},1419:(n,e)=>{e.Z=(n,e)=>{const t=n.__vccOpts||n;for(const[n,i]of e)t[n]=i;return t}},9860:(n,e,t)=>{t.r(e),t.d(e,{default:()=>H});var i=t(2068),l=t(9045),o=t(1407),a=t(664),s=t(3734),r=t(9388),c=t(3900),d=t(4611);const A=n=>((0,i.dD)("data-v-0c5a0cc6"),n=n(),(0,i.Cn)(),n),p={class:"fileInputDiv"},m=A((()=>(0,i._)("div",{class:"fileUploadDiv col-12",onclick:"document.getElementById('fileInput').click()"},[(0,i._)("div",{class:"col-12 uploadArea",style:{display:"flex","padding-left":"150px","padding-top":"35px"}},[(0,i._)("div",{class:"mdi mdi-cloud-upload-outline",style:{"text-align":"center","font-size":"25px",color:"#A1A1A1","padding-right":"10px","margin-top":"-7px"}}),(0,i._)("span",{style:{"font-weight":"bold"}},"Click"),(0,i._)("span",{style:{"padding-left":"10px"}},"here to upload your files.")])],-1))),f={id:"selectedFiles",class:"selectedItems"},u={key:0},I={class:"uploadFilesText"},g=(0,i.Uk)("Selected Files "),B=A((()=>(0,i._)("div",null,[(0,i._)("i",{class:"mdi mdi-palette fileType"})],-1))),C={class:"col-10",style:{"margin-left":"10px"}},v={class:"col-1",style:{"text-align":"end","padding-left":"30px"}},x=["onClick"],y={key:1,style:{"padding-top":"7px"},class:"loader"},k=A((()=>(0,i._)("div",null,[(0,i._)("i",{class:"mdi mdi-palette fileType"})],-1))),h={class:"col-10","data-toggle":"tooltip",title:"File is already imported",placement:"bottom",style:{"margin-left":"10px"}},b={class:"col-1",style:{"text-align":"end","padding-left":"30px"}},w=["onClick"],D={key:1,style:{"padding-top":"7px"},class:"loader"},E={class:"importBtnDiv"},T=["disable"],O=(0,i.aZ)({__name:"importModelDialog",props:{parent:null},emits:["close"],setup(n,{emit:e}){const t=n,A=s.nC.resolve(a.y),O=(s.nC.resolve(c.c),s.nC.resolve(d.O)),F=(0,o.iH)([]),_=(0,o.iH)(!1);function q(n){var e;return 1==(null===(e=t.parent.children)||void 0===e?void 0:e.some((e=>e.name==n)))}function M(n,e){const t=e.indexOf(n);e.splice(t,1),O.startTooltip()}const U=(0,o.Fl)((()=>0==F.value.filter((n=>1!=n.isDuplicate)).length));return(n,a)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",p,[m,(0,i._)("input",{style:{display:"none"},type:"file",id:"fileInput",multiple:"",onChange:a[0]||(a[0]=n=>async function(){for(var n,e,t=document.getElementById("fileInput"),i=0;i<(null===(n=null==t?void 0:t.files)||void 0===n?void 0:n.length);i++){const n=null===(e=null==t?void 0:t.files)||void 0===e?void 0:e.item(i),l=F.value.some((e=>e.name==(null==n?void 0:n.name)));if(!l){const e=await n.text(),t=q(n.name);F.value.push({name:n.name,content:e,isDuplicate:t})}}O.startTooltip()}()),accept:".qjson"},null,32)]),(0,i._)("div",f,[F.value.length>0?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",I,[g,(0,i._)("span",null," ("+(0,l.toDisplayString)(F.value.length)+")",1)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(F.value,(n=>((0,i.wg)(),(0,i.iD)("div",null,[n.isDuplicate?(0,i.kq)("v-if",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:"filesValue",style:(0,l.normalizeStyle)({border:n.isDuplicate?"1px solid red":"none"})},[B,(0,i._)("div",C,(0,l.toDisplayString)(n.name),1),(0,i._)("div",v,[n&&!_.value?((0,i.wg)(),(0,i.iD)("i",{key:0,class:"mdi mdi-delete-outline removeIcon",onClick:e=>M(n,F.value)},null,8,x)):(0,i.kq)("v-if",!0),_.value?((0,i.wg)(),(0,i.iD)("div",y)):(0,i.kq)("v-if",!0)])],4)),n.isDuplicate?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"filesValue",style:(0,l.normalizeStyle)({border:n.isDuplicate?"1px solid red":"none"})},[k,(0,i._)("div",h,(0,l.toDisplayString)(n.name),1),(0,i._)("div",b,[n&&!_.value?((0,i.wg)(),(0,i.iD)("i",{key:0,class:"mdi mdi-delete-outline removeIcon",onClick:e=>M(n,F.value)},null,8,w)):(0,i.kq)("v-if",!0),_.value?((0,i.wg)(),(0,i.iD)("div",D)):(0,i.kq)("v-if",!0)])],4)):(0,i.kq)("v-if",!0)])))),256))])):(0,i.kq)("v-if",!0)]),(0,i._)("div",E,[(0,i._)("button",{class:"cancelBtn",onClick:a[1]||(a[1]=n=>e("close"))},"Cancel"),(0,i._)("button",{class:"importBtn",disable:(0,o.SU)(U),style:(0,l.normalizeStyle)({backgroundColor:1==(0,o.SU)(U)?"#37373733":"#151233"}),onClick:a[2]||(a[2]=n=>async function(){_.value=!0,F.value.forEach((async n=>{if(n.isDuplicate)return;const i=[{key:"qjson",model:n.content}],l={name:n.name,parentObjectId:t.parent.ID,modelBody:i,modelType:"qjson",modelAdditionals:{qjsonType:"qjson"}};await A.executeUseCase(r.E,l),e("close"),_.value=!1}))}())},"IMPORT",12,T)])],64))}});var F=t(5701),_=t.n(F),q=t(8236),M=t.n(q),U=t(6080),z=t.n(U),j=t(6850),V=t.n(j),Y=t(7182),S=t.n(Y),Z=t(9213),P=t.n(Z),R=t(8068),W={};W.styleTagTransform=P(),W.setAttributes=V(),W.insert=z().bind(null,"head"),W.domAPI=M(),W.insertStyleElement=S(),_()(R.Z,W),R.Z&&R.Z.locals&&R.Z.locals;const H=(0,t(1419).Z)(O,[["__scopeId","data-v-0c5a0cc6"]])}}]);
//# sourceMappingURL=860.js.map