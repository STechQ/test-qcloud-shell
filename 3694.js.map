{"version":3,"file":"3694.js","mappings":"gKAGIA,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,iJAAkJ,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,qEAAqE,MAAQ,GAAG,SAAW,4DAA4D,eAAiB,CAAC,q3MAA05M,WAAa,MAEtyN,S,qECJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,sWAAyW,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,qEAAqE,MAAQ,GAAG,SAAW,6KAA6K,eAAiB,CAAC,q3MAA05M,WAAa,MAE9mO,S,gKCJA,MACMC,EAAa,CAAEC,MAAO,WACtBC,EAAa,CACjBH,GAAI,eACJE,MAAO,oBAEHE,EAAa,CACjBC,MAAO,CAAC,OAAS,QACjBH,MAAO,YAEHI,EAAa,CAAED,MAAO,CAAC,eAAe,MAAM,gBAAgB,QAC5DE,EAAa,CAAC,WACdC,EAAa,CAAEN,MAAO,YACtBO,EAAa,CAAEP,MAAO,mBAsB5B,GAA4B,QAAiB,CAC3CQ,OAAQ,WACRC,MAAO,CACLX,GAAI,KACJY,KAAM,KACNC,YAAa,KACbC,KAAM,KACNC,OAAQ,KACRC,UAAW,MAEbC,MAAO,CAAC,SACR,KAAAC,CAAMC,GAAc,KAAEC,I,QAExB,MAAMT,EAAQQ,EAqCW,KAAUE,QAA2BC,EAAA,GAA9D,MACMC,EAAW,KAAUF,QAA0BG,EAAA,GAG/CC,GAFW,KAAUJ,QAAmBK,EAAA,GAE5B,KAAUL,QAAoBM,EAAA,IAEhD,SAASC,EAAKC,EAAyBC,GACrCC,QAAQC,IAAI,QACZT,EAASU,SAAQC,UACfL,EAAS/B,KAAKgC,EAAOK,YACrB,MAAMC,EAAgB,KAAUf,QAAwBgB,EAAA,SAClDD,EAAcE,aAAa3B,EAAMX,GAAI,CAAEY,KAAMD,EAAMC,KAAM2B,KAAMV,UAvCzEK,eAAgCJ,EAAgBD,GAC9C,MAAMW,QAAqBjB,EAASkB,eAA8BC,EAAA,GAClE,IAAIC,EAAOlB,EAAUmB,OAAOC,MAAMC,MAAKH,GAAQA,EAAKI,IAAMpC,EAAMX,KAoDlE,IAAqBgD,EAnDdL,IACLH,EAAaS,WAAWtC,EAAMX,IAC9BwC,EAAaU,WAAWP,EAAMb,IAiDXkB,EAhDQrC,EAAMX,GAiD1BmD,EAAWC,QAAOT,KAASA,EAAKJ,MAAOI,EAAKJ,KAAKI,EAAKJ,KAAKc,OAAS,KAAOL,EAASb,cAAwBQ,EAAKW,QAASX,EAAKW,OAAOP,IAAMC,KAhD1IO,SAAQrB,MAAMsB,IACrBhB,EAAaS,WAAWO,EAAMT,IAC9BP,EAAaU,WAAWM,EAAOA,EAAMjB,KAAOiB,EAAMjB,KAAKiB,EAAMjB,KAAKc,OAAS,GAAGlB,gBAAasB,EAAU,IAEzG,CA8BUC,CAAiB5B,EAAOK,YAC9Bf,EAAK,QAAQ,GACZ,CAAEuC,SAAS,GAChB,CACA,IAAIC,EAA8F,GAClGA,EAAQ9D,KAAK,CAAEyC,KAAM,GAAIsB,KAAM,0BAA2BC,MAAOrC,EAAUmB,OAAOmB,QAASC,OAAQ,EAAGhE,GAAIyB,EAAUmB,OAAOqB,QAC3H,IAAIjD,EAAYS,EAAUmB,OAAOC,MACjC,MAAMM,EAAanC,EAAUoC,QAAOT,GAA4B,UAApBA,EAAKuB,aAC3CC,EAAcnD,EAAUoC,QAAOT,GAA4B,WAApBA,EAAKuB,aASlD,SAASE,EAAejB,GAetB,SAASkB,EAAUrB,GACjB,MAAMsB,EAAmB,GAEnBC,EAPR,SAAqBvB,GACnB,OAAOG,EAAWC,QAAOT,KAASA,EAAKJ,MAAOI,EAAKJ,KAAKI,EAAKJ,KAAKc,OAAS,KAAOL,EAASb,cAAwBQ,EAAKW,QAASX,EAAKW,OAAOP,IAAMC,GACrJ,CAKyBwB,CAAYxB,GACnC,IAAK,MAAMQ,KAASe,EAClBD,EAAOxE,KAAK0D,GACZc,EAAOxE,QAAQuE,EAAUb,EAAMT,KAGjC,OAAOuB,CACT,CAEA,OA1BAnB,EAAWsB,MAAK,CAACC,EAAGC,K,QAClB,IAAIC,EAAc,QAAN,EAAAF,EAAEnC,YAAI,QAAI,GAClBsC,EAAc,QAAN,EAAAF,EAAEpC,YAAI,QAAI,GACtB,OAAIqC,EAAMvB,SAAWwB,EAAMxB,OAClBuB,EAAMvB,OAASwB,EAAMxB,OAGvB,CAAC,IAmBHF,EAAWC,QAAOT,IAAQA,EAAKJ,MAA4B,IAArBI,EAAKJ,KAAKc,SACpDyB,QAAiB,CAACC,EAAKC,KACtBD,EAAIjF,KAAKkF,GACTD,EAAIjF,QAAQuE,EAAUW,EAASjC,KACxBgC,IACN,GACP,CAxCAhD,QAAQC,IAAI,QAAShB,GAyCrBe,QAAQC,IAAI,SAAUoC,EAAejB,IACrC,MAAM8B,EAAcb,EAAejB,GAMnC,IAAK,IAAI+B,KAAaD,EACpB,GAA2B,eAAvBC,EAAUC,UAA4B,CACxC,IAAIC,EAAmBF,EAAU3C,KAAgC,GAAxB2C,EAAU3C,KAAKc,OAAc,GAAM,GAC5EO,EAAQ9D,KAAK,CAAEyC,KAAoB,QAAd,EAAA2C,EAAU3C,YAAI,QAAI,GAAIsB,KAAM,sBAAuBC,MAAOoB,EAAUtE,KAAMoD,OAAQoB,EAAkBpF,GAAIkF,EAAUnC,I,CAG3I,IAAK,IAAIsC,KAAclB,EACrBP,EAAQ9D,KAAK,CAAEyC,KAAqB,QAAf,EAAA8C,EAAW9C,YAAI,QAAI,GAAIsB,KAAM,iBAAkBC,MAAOuB,EAAWzE,KAAMoD,OAAQ,GAAIhE,GAAIqF,EAAWtC,KAIzH,MAAO,CAACuC,EAAUC,MACR,WAAc,QAAoB,MAAOtF,EAAY,EAC3D,IAAAuF,GAAoB,MAAOrF,EAAY,EACrC,IAAAqF,GAAoB,MAAOpF,EAAY,EACrC,IAAAoF,GAAoB,KAAMlF,EAAY,GACnC,SAAW,IAAO,QAAoB,KAAW,MAAM,SAAY,QAAOsD,IAAW6B,KAC5E,WAAc,QAAoB,KAAM,CAC9CC,IAAKD,EAAO3B,MACZ6B,QAAUC,GAAiBhE,EAAK6D,EAAOlD,KAAMkD,EAAOzF,IACpDK,OAAO,oBAAgB,CAAC,CAAC,cAAc,OAAQ,CAAE,eAAgBoF,EAAOzB,OAAS,SAChF,EACD,IAAAwB,GAAoB,MAAOhF,EAAY,EACrC,IAAAgF,GAAoB,IAAK/E,EAAY,EACnC,IAAA+E,GAAoB,IAAK,CACvBtF,OAAO,oBAAgBuF,EAAO5B,MAC9BxD,MAAO,CAAC,eAAe,SACtB,KAAM,IACT,SAAiB,qBAAiBoF,EAAO3B,OAAQ,QAGpD,GAAuBvD,MACxB,cAMd,I,uIC1LIsF,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKJ,KAAW,IAAQM,QAAS,IAAQA,O,eCftD,EAAU,CAAC,EAEf,EAAQL,kBAAoB,IAC5B,EAAQC,cAAgB,IAElB,EAAQC,OAAS,SAAc,KAAM,QAE3C,EAAQC,OAAS,IACjB,EAAQC,mBAAqB,IAEhB,IAAI,IAAS,GAKJ,KAAW,IAAQC,QAAS,IAAQA,OCnB1D,MAEA,GAFiC,E,SAAA,GAAgB,EAAQ,CAAC,CAAC,YAAY,oB","sources":["webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?ccef","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?78a3","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?d26f","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?5d2d","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue?e884","webpack://qcloud_shell/./src/presentation/vue3/components/dialogs/moveItem.vue"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\nul[data-v-540ea8d1] {\\n  list-style-type: none;\\n}\\n.new-module-text .mdi[data-v-540ea8d1] {\\n  font-size: 24px;\\n  margin-right: 10px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/presentation/vue3/components/dialogs/moveItem.vue\"],\"names\":[],\"mappings\":\";AAwJA;EACE,qBAAqB;AACvB;AAEA;EACE,eAAe;EACf,kBAAkB;AACpB\",\"sourcesContent\":[\"<script setup lang=\\\"ts\\\">\\nimport { container } from '../../../../domain/core/diContainer';\\nimport { IModel, IModule } from '../../../../domain/model/models';\\nimport { IMoveItemProps } from '../../../../domain/presentation/dialogs/IMoveItemProps';\\nimport { ITreeItem, ITreeView } from '../../../../domain/presentation/ITreeView';\\nimport { IFileExplorer } from '../../../../domain/useCase/IFileExplorer';\\nimport { IObjectUseCase } from '../../../../domain/useCase/IObjectUseCase';\\nimport { IUseCaseExecutor } from '../../../../domain/useCase/IUseCaseExecutor';\\nimport { IViewModel } from '../../../../domain/viewModel/IViewModel';\\nimport { IViewModelManager } from '../../../../domain/viewModel/IViewModelManager';\\n\\ninterface IMoveItemInline extends IMoveItemProps {\\n  id: string;\\n  name: string;\\n  description?: string;\\n  type: \\\"module\\\" | \\\"model\\\";\\n  prefix?: string;\\n  treeItems: Array<ITreeItem>;\\n}\\n\\nasync function refreshTreeItems(itemId: string, itemPath: Array<String>) {\\n  const fileExplorer = await executor.resolveUseCase<IFileExplorer>(IFileExplorer);\\n  let item = viewModel.studio.items.find(item => item.ID == props.id);\\n  if (!item) return;\\n  fileExplorer.removeItem(props.id)\\n  fileExplorer.addNewItem(item, itemId);\\n  let children = getChildren(props.id);\\n  children.forEach(async child => {\\n    fileExplorer.removeItem(child.ID)\\n    fileExplorer.addNewItem(child, child.path ? child.path[child.path.length - 1].toString() : undefined);\\n  });\\n}\\n\\nasync function updateChildrenPaths(itemId: string, itemPath: Array<String>, objectUseCase: IObjectUseCase) {\\n  let children = getChildren(props.id);\\n  children.forEach(async child => {\\n    let updatedPath = updatePath(props.id, child.path ?? [], itemPath);\\n    await objectUseCase.updateObject(props.id, { name: props.name, path: updatedPath });\\n  });\\n}\\n\\nfunction updatePath(updatedItemId: string, existingItemPath: Array<String>, updatedPath: Array<String>) {\\n  const index = existingItemPath.indexOf(updatedItemId);\\n  if (index !== -1) {\\n    return [...updatedPath, ...existingItemPath.slice(index + 1)];\\n  }\\n  return existingItemPath;\\n}\\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\\nconst treeview = container.resolve<ITreeView>(ITreeView);\\nconst props = defineProps<IMoveItemInline>();\\nconst viewModel = container.resolve<IViewModel>(IViewModel);\\nconst emit = defineEmits([\\\"close\\\"]);\\nfunction move(itemPath: Array<String>, itemId: String) {\\n  console.log(\\\"move\\\")\\n  executor.execute(async () => {\\n    itemPath.push(itemId.toString());\\n    const objectUseCase = container.resolve<IObjectUseCase>(IObjectUseCase);\\n    await objectUseCase.updateObject(props.id, { name: props.name, path: itemPath });\\n    //await updateChildrenPaths(itemId.toString(), itemPath, objectUseCase);\\n    await refreshTreeItems(itemId.toString(), itemPath);\\n    emit(\\\"close\\\");\\n  }, { loading: true });\\n}\\nlet actions: { path: Array<String>; icon: string; label: string; indent: number; id: String }[] = []\\nactions.push({ path: [], icon: \\\"mdi mdi-vector-polyline\\\", label: viewModel.studio.appName, indent: 0, id: viewModel.studio.appId })\\nlet treeItems = viewModel.studio.items;\\nconst modelItems = treeItems.filter(item => item.objectType === \\\"model\\\") as IModel[];\\nconst moduleItems = treeItems.filter(item => item.objectType === \\\"module\\\") as IModule[];\\n\\nconsole.log(\\\"ooops\\\", treeItems)\\n\\n\\nfunction getChildren(parentId: string) {\\n  return modelItems.filter(item => (item.path ? item.path[item.path.length - 1] === parentId.toString() : false) || (item.parent ? item.parent.ID == parentId : false));\\n}\\n\\nfunction getSortedItems(modelItems: IModel[]) {\\n  modelItems.sort((a, b) => {\\n    let aPath = a.path ?? [];\\n    let bPath = b.path ?? [];\\n    if (aPath.length !== bPath.length) {\\n      return aPath.length - bPath.length;\\n    }\\n\\n    return 0;\\n  });\\n\\n  function getChildren(parentId: string) {\\n    return modelItems.filter(item => (item.path ? item.path[item.path.length - 1] === parentId.toString() : false) || (item.parent ? item.parent.ID == parentId : false));\\n  }\\n\\n  function sortItems(parentId: string) {\\n    const result: IModel[] = [];\\n\\n    const directChildren = getChildren(parentId);\\n    for (const child of directChildren) {\\n      result.push(child);\\n      result.push(...sortItems(child.ID));\\n    }\\n\\n    return result;\\n  }\\n\\n  return modelItems.filter(item => item.path ? item.path.length === 0 : true)\\n    .reduce<IModel[]>((acc, rootItem) => {\\n      acc.push(rootItem);\\n      acc.push(...sortItems(rootItem.ID));\\n      return acc;\\n    }, []);\\n}\\nconsole.log(\\\"ooops1\\\", getSortedItems(modelItems))\\nconst sortedItems = getSortedItems(modelItems);\\n\\n\\n\\n\\n\\nfor (let modelItem of sortedItems) {\\n  if (modelItem.modelType == \\\"placeholder\\\") {\\n    let indentCalculated = modelItem.path ? (modelItem.path.length * 20 + 20) : 20;\\n    actions.push({ path: modelItem.path ?? [], icon: \\\"mdi mdi-folder-open\\\", label: modelItem.name, indent: indentCalculated, id: modelItem.ID })\\n  }\\n}\\nfor (let moduleItem of moduleItems) {\\n  actions.push({ path: moduleItem.path ?? [], icon: \\\"mdi mdi-puzzle\\\", label: moduleItem.name, indent: 20, id: moduleItem.ID })\\n}\\n\\n</script> \\n\\n<template>\\n  <div class=\\\"moveDiv\\\">\\n    <div id=\\\"content-area\\\" class=\\\"popover__content\\\">\\n      <div style=\\\"height: 100%\\\" class=\\\"errorDiv\\\">\\n        <ul style=\\\"padding-left: 0px; margin-bottom: 0px\\\">\\n          <li v-for=\\\"action in actions\\\" :key=\\\"action.label\\\" @click=\\\"move(action.path, action.id)\\\" style=\\\"padding-top: 1px\\\"\\n            :style=\\\"{ 'padding-left': action.indent + 'px' }\\\">\\n            <div class=\\\"createLi\\\">\\n              <p class=\\\"new-module-text\\\">\\n                <i :class=\\\"action.icon\\\" style=\\\"margin-right: 10px;\\\"></i>{{ action.label }}\\n              </p>\\n            </div>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n\\n<style scoped>\\nul {\\n  list-style-type: none;\\n}\\n\\n.new-module-text .mdi {\\n  font-size: 24px;\\n  margin-right: 10px;\\n}\\n</style>\\n\\n\\n \\n\\n<style scoped>\\n.new-module-text {\\n  margin: 0;\\n  color: #151233;\\n  font-weight: 400;\\n  font-size: 14px;\\n  letter-spacing: 0px;\\n  opacity: 1;\\n  font-family: \\\"ROBOTO\\\";\\n}\\n\\n.createLi {\\n  cursor: pointer;\\n}\\n\\n.moveDiv {\\n  margin-top: 5px;\\n  margin-left: 20px;\\n  margin-right: 20px;\\n  margin-bottom: 10px;\\n}\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.new-module-text[data-v-540ea8d1] {\\n  margin: 0;\\n  color: #151233;\\n  font-weight: 400;\\n  font-size: 14px;\\n  letter-spacing: 0px;\\n  opacity: 1;\\n  font-family: \\\"ROBOTO\\\";\\n}\\n.createLi[data-v-540ea8d1] {\\n  cursor: pointer;\\n}\\n.moveDiv[data-v-540ea8d1] {\\n  margin-top: 5px;\\n  margin-left: 20px;\\n  margin-right: 20px;\\n  margin-bottom: 10px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/presentation/vue3/components/dialogs/moveItem.vue\"],\"names\":[],\"mappings\":\";AAsKA;EACE,SAAS;EACT,cAAc;EACd,gBAAgB;EAChB,eAAe;EACf,mBAAmB;EACnB,UAAU;EACV,qBAAqB;AACvB;AAEA;EACE,eAAe;AACjB;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;AACrB\",\"sourcesContent\":[\"<script setup lang=\\\"ts\\\">\\nimport { container } from '../../../../domain/core/diContainer';\\nimport { IModel, IModule } from '../../../../domain/model/models';\\nimport { IMoveItemProps } from '../../../../domain/presentation/dialogs/IMoveItemProps';\\nimport { ITreeItem, ITreeView } from '../../../../domain/presentation/ITreeView';\\nimport { IFileExplorer } from '../../../../domain/useCase/IFileExplorer';\\nimport { IObjectUseCase } from '../../../../domain/useCase/IObjectUseCase';\\nimport { IUseCaseExecutor } from '../../../../domain/useCase/IUseCaseExecutor';\\nimport { IViewModel } from '../../../../domain/viewModel/IViewModel';\\nimport { IViewModelManager } from '../../../../domain/viewModel/IViewModelManager';\\n\\ninterface IMoveItemInline extends IMoveItemProps {\\n  id: string;\\n  name: string;\\n  description?: string;\\n  type: \\\"module\\\" | \\\"model\\\";\\n  prefix?: string;\\n  treeItems: Array<ITreeItem>;\\n}\\n\\nasync function refreshTreeItems(itemId: string, itemPath: Array<String>) {\\n  const fileExplorer = await executor.resolveUseCase<IFileExplorer>(IFileExplorer);\\n  let item = viewModel.studio.items.find(item => item.ID == props.id);\\n  if (!item) return;\\n  fileExplorer.removeItem(props.id)\\n  fileExplorer.addNewItem(item, itemId);\\n  let children = getChildren(props.id);\\n  children.forEach(async child => {\\n    fileExplorer.removeItem(child.ID)\\n    fileExplorer.addNewItem(child, child.path ? child.path[child.path.length - 1].toString() : undefined);\\n  });\\n}\\n\\nasync function updateChildrenPaths(itemId: string, itemPath: Array<String>, objectUseCase: IObjectUseCase) {\\n  let children = getChildren(props.id);\\n  children.forEach(async child => {\\n    let updatedPath = updatePath(props.id, child.path ?? [], itemPath);\\n    await objectUseCase.updateObject(props.id, { name: props.name, path: updatedPath });\\n  });\\n}\\n\\nfunction updatePath(updatedItemId: string, existingItemPath: Array<String>, updatedPath: Array<String>) {\\n  const index = existingItemPath.indexOf(updatedItemId);\\n  if (index !== -1) {\\n    return [...updatedPath, ...existingItemPath.slice(index + 1)];\\n  }\\n  return existingItemPath;\\n}\\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\\nconst treeview = container.resolve<ITreeView>(ITreeView);\\nconst props = defineProps<IMoveItemInline>();\\nconst viewModel = container.resolve<IViewModel>(IViewModel);\\nconst emit = defineEmits([\\\"close\\\"]);\\nfunction move(itemPath: Array<String>, itemId: String) {\\n  console.log(\\\"move\\\")\\n  executor.execute(async () => {\\n    itemPath.push(itemId.toString());\\n    const objectUseCase = container.resolve<IObjectUseCase>(IObjectUseCase);\\n    await objectUseCase.updateObject(props.id, { name: props.name, path: itemPath });\\n    //await updateChildrenPaths(itemId.toString(), itemPath, objectUseCase);\\n    await refreshTreeItems(itemId.toString(), itemPath);\\n    emit(\\\"close\\\");\\n  }, { loading: true });\\n}\\nlet actions: { path: Array<String>; icon: string; label: string; indent: number; id: String }[] = []\\nactions.push({ path: [], icon: \\\"mdi mdi-vector-polyline\\\", label: viewModel.studio.appName, indent: 0, id: viewModel.studio.appId })\\nlet treeItems = viewModel.studio.items;\\nconst modelItems = treeItems.filter(item => item.objectType === \\\"model\\\") as IModel[];\\nconst moduleItems = treeItems.filter(item => item.objectType === \\\"module\\\") as IModule[];\\n\\nconsole.log(\\\"ooops\\\", treeItems)\\n\\n\\nfunction getChildren(parentId: string) {\\n  return modelItems.filter(item => (item.path ? item.path[item.path.length - 1] === parentId.toString() : false) || (item.parent ? item.parent.ID == parentId : false));\\n}\\n\\nfunction getSortedItems(modelItems: IModel[]) {\\n  modelItems.sort((a, b) => {\\n    let aPath = a.path ?? [];\\n    let bPath = b.path ?? [];\\n    if (aPath.length !== bPath.length) {\\n      return aPath.length - bPath.length;\\n    }\\n\\n    return 0;\\n  });\\n\\n  function getChildren(parentId: string) {\\n    return modelItems.filter(item => (item.path ? item.path[item.path.length - 1] === parentId.toString() : false) || (item.parent ? item.parent.ID == parentId : false));\\n  }\\n\\n  function sortItems(parentId: string) {\\n    const result: IModel[] = [];\\n\\n    const directChildren = getChildren(parentId);\\n    for (const child of directChildren) {\\n      result.push(child);\\n      result.push(...sortItems(child.ID));\\n    }\\n\\n    return result;\\n  }\\n\\n  return modelItems.filter(item => item.path ? item.path.length === 0 : true)\\n    .reduce<IModel[]>((acc, rootItem) => {\\n      acc.push(rootItem);\\n      acc.push(...sortItems(rootItem.ID));\\n      return acc;\\n    }, []);\\n}\\nconsole.log(\\\"ooops1\\\", getSortedItems(modelItems))\\nconst sortedItems = getSortedItems(modelItems);\\n\\n\\n\\n\\n\\nfor (let modelItem of sortedItems) {\\n  if (modelItem.modelType == \\\"placeholder\\\") {\\n    let indentCalculated = modelItem.path ? (modelItem.path.length * 20 + 20) : 20;\\n    actions.push({ path: modelItem.path ?? [], icon: \\\"mdi mdi-folder-open\\\", label: modelItem.name, indent: indentCalculated, id: modelItem.ID })\\n  }\\n}\\nfor (let moduleItem of moduleItems) {\\n  actions.push({ path: moduleItem.path ?? [], icon: \\\"mdi mdi-puzzle\\\", label: moduleItem.name, indent: 20, id: moduleItem.ID })\\n}\\n\\n</script> \\n\\n<template>\\n  <div class=\\\"moveDiv\\\">\\n    <div id=\\\"content-area\\\" class=\\\"popover__content\\\">\\n      <div style=\\\"height: 100%\\\" class=\\\"errorDiv\\\">\\n        <ul style=\\\"padding-left: 0px; margin-bottom: 0px\\\">\\n          <li v-for=\\\"action in actions\\\" :key=\\\"action.label\\\" @click=\\\"move(action.path, action.id)\\\" style=\\\"padding-top: 1px\\\"\\n            :style=\\\"{ 'padding-left': action.indent + 'px' }\\\">\\n            <div class=\\\"createLi\\\">\\n              <p class=\\\"new-module-text\\\">\\n                <i :class=\\\"action.icon\\\" style=\\\"margin-right: 10px;\\\"></i>{{ action.label }}\\n              </p>\\n            </div>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n\\n<style scoped>\\nul {\\n  list-style-type: none;\\n}\\n\\n.new-module-text .mdi {\\n  font-size: 24px;\\n  margin-right: 10px;\\n}\\n</style>\\n\\n\\n \\n\\n<style scoped>\\n.new-module-text {\\n  margin: 0;\\n  color: #151233;\\n  font-weight: 400;\\n  font-size: 14px;\\n  letter-spacing: 0px;\\n  opacity: 1;\\n  font-family: \\\"ROBOTO\\\";\\n}\\n\\n.createLi {\\n  cursor: pointer;\\n}\\n\\n.moveDiv {\\n  margin-top: 5px;\\n  margin-left: 20px;\\n  margin-right: 20px;\\n  margin-bottom: 10px;\\n}\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-540ea8d1\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"moveDiv\" }\nconst _hoisted_2 = {\n  id: \"content-area\",\n  class: \"popover__content\"\n}\nconst _hoisted_3 = {\n  style: {\"height\":\"100%\"},\n  class: \"errorDiv\"\n}\nconst _hoisted_4 = { style: {\"padding-left\":\"0px\",\"margin-bottom\":\"0px\"} }\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"createLi\" }\nconst _hoisted_7 = { class: \"new-module-text\" }\n\nimport { container } from '../../../../domain/core/diContainer';\nimport { IModel, IModule } from '../../../../domain/model/models';\nimport { IMoveItemProps } from '../../../../domain/presentation/dialogs/IMoveItemProps';\nimport { ITreeItem, ITreeView } from '../../../../domain/presentation/ITreeView';\nimport { IFileExplorer } from '../../../../domain/useCase/IFileExplorer';\nimport { IObjectUseCase } from '../../../../domain/useCase/IObjectUseCase';\nimport { IUseCaseExecutor } from '../../../../domain/useCase/IUseCaseExecutor';\nimport { IViewModel } from '../../../../domain/viewModel/IViewModel';\nimport { IViewModelManager } from '../../../../domain/viewModel/IViewModelManager';\n\ninterface IMoveItemInline extends IMoveItemProps {\n  id: string;\n  name: string;\n  description?: string;\n  type: \"module\" | \"model\";\n  prefix?: string;\n  treeItems: Array<ITreeItem>;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'moveItem',\n  props: {\n    id: null,\n    name: null,\n    description: null,\n    type: null,\n    prefix: null,\n    treeItems: null\n  },\n  emits: [\"close\"],\n  setup(__props: any, { emit }) {\n\nconst props = __props as {\n  id: string;\n  name: string;\n  description?: string;\n  type: \"module\" | \"model\";\n  prefix?: string;\n  treeItems: Array<ITreeItem>;\n};\n\nasync function refreshTreeItems(itemId: string, itemPath: Array<String>) {\n  const fileExplorer = await executor.resolveUseCase<IFileExplorer>(IFileExplorer);\n  let item = viewModel.studio.items.find(item => item.ID == props.id);\n  if (!item) return;\n  fileExplorer.removeItem(props.id)\n  fileExplorer.addNewItem(item, itemId);\n  let children = getChildren(props.id);\n  children.forEach(async child => {\n    fileExplorer.removeItem(child.ID)\n    fileExplorer.addNewItem(child, child.path ? child.path[child.path.length - 1].toString() : undefined);\n  });\n}\n\nasync function updateChildrenPaths(itemId: string, itemPath: Array<String>, objectUseCase: IObjectUseCase) {\n  let children = getChildren(props.id);\n  children.forEach(async child => {\n    let updatedPath = updatePath(props.id, child.path ?? [], itemPath);\n    await objectUseCase.updateObject(props.id, { name: props.name, path: updatedPath });\n  });\n}\n\nfunction updatePath(updatedItemId: string, existingItemPath: Array<String>, updatedPath: Array<String>) {\n  const index = existingItemPath.indexOf(updatedItemId);\n  if (index !== -1) {\n    return [...updatedPath, ...existingItemPath.slice(index + 1)];\n  }\n  return existingItemPath;\n}\nconst viewModelManager = container.resolve<IViewModelManager>(IViewModelManager);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst treeview = container.resolve<ITreeView>(ITreeView);\n\nconst viewModel = container.resolve<IViewModel>(IViewModel);\n\nfunction move(itemPath: Array<String>, itemId: String) {\n  console.log(\"move\")\n  executor.execute(async () => {\n    itemPath.push(itemId.toString());\n    const objectUseCase = container.resolve<IObjectUseCase>(IObjectUseCase);\n    await objectUseCase.updateObject(props.id, { name: props.name, path: itemPath });\n    //await updateChildrenPaths(itemId.toString(), itemPath, objectUseCase);\n    await refreshTreeItems(itemId.toString(), itemPath);\n    emit(\"close\");\n  }, { loading: true });\n}\nlet actions: { path: Array<String>; icon: string; label: string; indent: number; id: String }[] = []\nactions.push({ path: [], icon: \"mdi mdi-vector-polyline\", label: viewModel.studio.appName, indent: 0, id: viewModel.studio.appId })\nlet treeItems = viewModel.studio.items;\nconst modelItems = treeItems.filter(item => item.objectType === \"model\") as IModel[];\nconst moduleItems = treeItems.filter(item => item.objectType === \"module\") as IModule[];\n\nconsole.log(\"ooops\", treeItems)\n\n\nfunction getChildren(parentId: string) {\n  return modelItems.filter(item => (item.path ? item.path[item.path.length - 1] === parentId.toString() : false) || (item.parent ? item.parent.ID == parentId : false));\n}\n\nfunction getSortedItems(modelItems: IModel[]) {\n  modelItems.sort((a, b) => {\n    let aPath = a.path ?? [];\n    let bPath = b.path ?? [];\n    if (aPath.length !== bPath.length) {\n      return aPath.length - bPath.length;\n    }\n\n    return 0;\n  });\n\n  function getChildren(parentId: string) {\n    return modelItems.filter(item => (item.path ? item.path[item.path.length - 1] === parentId.toString() : false) || (item.parent ? item.parent.ID == parentId : false));\n  }\n\n  function sortItems(parentId: string) {\n    const result: IModel[] = [];\n\n    const directChildren = getChildren(parentId);\n    for (const child of directChildren) {\n      result.push(child);\n      result.push(...sortItems(child.ID));\n    }\n\n    return result;\n  }\n\n  return modelItems.filter(item => item.path ? item.path.length === 0 : true)\n    .reduce<IModel[]>((acc, rootItem) => {\n      acc.push(rootItem);\n      acc.push(...sortItems(rootItem.ID));\n      return acc;\n    }, []);\n}\nconsole.log(\"ooops1\", getSortedItems(modelItems))\nconst sortedItems = getSortedItems(modelItems);\n\n\n\n\n\nfor (let modelItem of sortedItems) {\n  if (modelItem.modelType == \"placeholder\") {\n    let indentCalculated = modelItem.path ? (modelItem.path.length * 20 + 20) : 20;\n    actions.push({ path: modelItem.path ?? [], icon: \"mdi mdi-folder-open\", label: modelItem.name, indent: indentCalculated, id: modelItem.ID })\n  }\n}\nfor (let moduleItem of moduleItems) {\n  actions.push({ path: moduleItem.path ?? [], icon: \"mdi mdi-puzzle\", label: moduleItem.name, indent: 20, id: moduleItem.ID })\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"ul\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(actions), (action) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              key: action.label,\n              onClick: ($event: any) => (move(action.path, action.id)),\n              style: _normalizeStyle([{\"padding-top\":\"1px\"}, { 'padding-left': action.indent + 'px' }])\n            }, [\n              _createElementVNode(\"div\", _hoisted_6, [\n                _createElementVNode(\"p\", _hoisted_7, [\n                  _createElementVNode(\"i\", {\n                    class: _normalizeClass(action.icon),\n                    style: {\"margin-right\":\"10px\"}\n                  }, null, 2 /* CLASS */),\n                  _createTextVNode(_toDisplayString(action.label), 1 /* TEXT */)\n                ])\n              ])\n            ], 12 /* STYLE, PROPS */, _hoisted_5))\n          }), 128 /* KEYED_FRAGMENT */))\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./moveItem.vue?vue&type=style&index=0&id=540ea8d1&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./moveItem.vue?vue&type=style&index=0&id=540ea8d1&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./moveItem.vue?vue&type=style&index=1&id=540ea8d1&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./moveItem.vue?vue&type=style&index=1&id=540ea8d1&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import script from \"./moveItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./moveItem.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./moveItem.vue?vue&type=style&index=0&id=540ea8d1&scoped=true&lang=css\"\nimport \"./moveItem.vue?vue&type=style&index=1&id=540ea8d1&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/studio/studio/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-540ea8d1\"]])\n\nexport default __exports__"],"names":["___CSS_LOADER_EXPORT___","push","module","id","_hoisted_1","class","_hoisted_2","_hoisted_3","style","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","__name","props","name","description","type","prefix","treeItems","emits","setup","__props","emit","resolve","IViewModelManager","executor","IUseCaseExecutor","viewModel","ITreeView","IViewModel","move","itemPath","itemId","console","log","execute","async","toString","objectUseCase","IObjectUseCase","updateObject","path","fileExplorer","resolveUseCase","IFileExplorer","item","studio","items","find","ID","parentId","removeItem","addNewItem","modelItems","filter","length","parent","forEach","child","undefined","refreshTreeItems","loading","actions","icon","label","appName","indent","appId","objectType","moduleItems","getSortedItems","sortItems","result","directChildren","getChildren","sort","a","b","aPath","bPath","reduce","acc","rootItem","sortedItems","modelItem","modelType","indentCalculated","moduleItem","_ctx","_cache","_","action","key","onClick","$event","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals"],"sourceRoot":""}