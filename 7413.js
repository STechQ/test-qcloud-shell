"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[7413],{64029:(e,n,a)=>{a.d(n,{Z:()=>d});var t=a(8375),i=a.n(t),o=a(7638),l=a.n(o),r=a(79240),s=l()(i());s.i(r.Z),s.push([e.id,"\n.module-tab-div[data-v-0bd23e05] {\n    margin-top: 12px;\n}\n.no-module-text[data-v-0bd23e05] {\n    font-size: 14px;\n    color: #757575\n}\n.ghost-img[data-v-0bd23e05] {\n    margin-right: 12px;\n    width: 22px;\n}\n.no-data-div[data-v-0bd23e05] {\n    justify-content: center;\n    display: flex;\n    margin: 24px 0;\n    align-items: center;\n}\n.module-tabs[data-v-0bd23e05] {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid var(--grey-lighten-1, #BDBDBD);\n}\n.tab-item[data-v-0bd23e05] {\n    height: 36px;\n    padding: 10px 54px 10px 54px;\n    font-family: Roboto;\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 16px;\n    letter-spacing: 0em;\n    text-align: center;\n    color: #A1A1A1;\n}\n.active-category[data-v-0bd23e05] {\n    color: #151233;\n    border-bottom: 2px solid;\n    font-family: Roboto;\n    font-size: 14px;\n    font-weight: 500;\n    line-height: 16px;\n    letter-spacing: 0em;\n    text-align: center;\n}\n.container[data-v-0bd23e05] {\n    padding: 32px 20px 20px;\n}\n.table-name[data-v-0bd23e05] {\n    color: #151233;\n    font-size: 16px;\n    font-weight: 500;\n    line-height: 18px;\n    margin-bottom: 12px;\n}\n.select-module-btn[data-v-0bd23e05] {\n    border: none;\n    background: none;\n    color: #212121;\n    font-size: 20px;\n}\n.back-button[data-v-0bd23e05] {\n    font-size: 28px;\n    color: #151233;\n    cursor: pointer;\n    margin-right: 16px;\n}\n.module-name-div[data-v-0bd23e05] {\n    display: flex;\n    align-items: center;\n    margin-bottom: 16px;\n}\n.module-name[data-v-0bd23e05] {\n    color: #151233;\n    font-size: 16px;\n    font-weight: 500;\n}\n.remove-module[data-v-0bd23e05] {\n    background: none;\n    border: none;\n    font-size: 20px;\n    color: #212121;\n    width: 100%;\n    display: flex;\n    justify-content: end;\n    align-items: center;\n}\n.imported-version[data-v-0bd23e05] {\n    color: #2C5A86;\n    font-size: 14px;\n    font-weight: 500;\n    margin-right: 22px;\n    cursor: pointer;\n}\n.import-btn[data-v-0bd23e05] {\n    background: none;\n    border: none;\n    font-size: 14px;\n    font-weight: 500;\n    color: #2C5A86;\n    cursor: pointer;\n}\n.add-ref-module-btn[data-v-0bd23e05] {\n    font-size: 13px;\n    text-align: center;\n    color: #FFFFFF;\n    background: #151233;\n    display: flex;\n    align-items: center;\n    padding: 4px 8px;\n    border-radius: 4px;\n    border: none;\n}\n.remove-module:hover .button-tooltip[data-v-0bd23e05] {\n    opacity: 1;\n    visibility: visible;\n}\n.button-tooltip[data-v-0bd23e05] {\n    visibility: hidden;\n    position: absolute;\n    background: #757575;\n    color: #FFFFFF;\n    font-size: 9px;\n    font-family: 'Roboto';\n    text-align: center;\n    border-radius: 4px;\n    letter-spacing: 0.2px;\n    padding: 6px 8px 6px 8px;\n    opacity: 0;\n}\n",""]);const d=s},81166:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"160ecac2aab009efd6381a6c36c32a71.svg"},87413:(e,n,a)=>{a.r(n),a.d(n,{default:()=>he});var t=a(71093),i=a(66190),o=a(46233),l=a(81166),r=a(73843),s=a(5627),d=a(70985),p=a(83240),c=a(29633),u=a(6488),v=a(83487),m=a(88613),g=a(19508),w=a(54848);const D=e=>((0,t.dD)("data-v-0bd23e05"),e=e(),(0,t.Cn)(),e),b={class:"container vue-table"},y={key:0},f={class:"module-tabs"},h={key:0},x={key:0,class:"module-tab-div"},I={style:{display:"flex","align-items":"center"}},_=["onClick"],A=D((()=>(0,t._)("i",{class:"mdi mdi-pencil",style:{"font-size":"16px","margin-right":"4px"}},null,-1))),k=["onClick"],z=[D((()=>(0,t._)("i",{class:"mdi mdi-close-circle-outline"},null,-1))),D((()=>(0,t._)("span",{class:"button-tooltip",style:{right:"48px","z-index":"1",width:"80px"}},"Remove Module",-1)))],C={key:1,class:"no-data-div"},S=[D((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),D((()=>(0,t._)("span",{style:{"font-size":"14px",color:"#757575"}},"No modules imported yet.",-1)))],O={key:1},N={key:0,class:"module-tab-div"},F={style:{display:"flex","align-items":"center"}},T=["onClick"],H=D((()=>(0,t._)("i",{class:"mdi mdi-pencil",style:{"font-size":"16px","margin-right":"4px"}},null,-1))),M=["onClick"],Z=[D((()=>(0,t._)("i",{class:"mdi mdi-close-circle-outline"},null,-1))),D((()=>(0,t._)("span",{class:"button-tooltip",style:{right:"48px","z-index":"1",width:"80px"}},"Remove Module",-1)))],R={key:1,class:"no-data-div"},B=[D((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),D((()=>(0,t._)("span",{style:{"font-size":"14px",color:"#757575"}},"No modules imported yet.",-1)))],G={class:"module-tabs"},V={key:2},P={key:0,class:"module-tab-div"},W=["onClick"],q=[D((()=>(0,t._)("i",{class:"mdi mdi-chevron-right"},null,-1)))],E=["onClick"],j={key:1,class:"no-data-div"},J=[D((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),D((()=>(0,t._)("span",{class:"no-module-text"},"No available module yet.",-1)))],U={key:3,class:"module-tab-div"},K={key:0,class:"module-tab-div"},L=["onClick"],Q=[D((()=>(0,t._)("i",{class:"mdi mdi-chevron-right"},null,-1)))],X=["onClick"],Y={key:1,class:"no-data-div"},$=[D((()=>(0,t._)("img",{class:"ghost-img",src:l.Z},null,-1))),D((()=>(0,t._)("span",{class:"no-module-text"},"No available module yet.",-1)))],ee={key:1},ne={class:"module-name-div"},ae={class:"module-name"},te=D((()=>(0,t._)("div",null,[(0,t._)("span",{style:{color:"#212121","font-size":"14px"}},"Choose the module version you want to import.")],-1))),ie={key:0,class:"import-btn",style:{color:"#D5D5D5",cursor:"default"}},oe=["onClick"],le=(0,t.aZ)({__name:"attachModuleToApp",setup(e){var n,a,l,D;const le=s.nC.resolve(m.J),re=s.nC.resolve(v.y),se=s.nC.resolve(d.w),de=s.nC.resolve(c._),pe=s.nC.resolve(u.c),ce=s.nC.resolve(p.e),ue=s.nC.resolve(g.h),ve=s.nC.resolve(w.B),me=(0,r.iH)([]),ge=(0,r.iH)([]),we=(0,r.iH)([]),De=(0,r.iH)([]),be=(0,r.iH)(!1),ye=(0,r.iH)(),fe=(0,r.iH)([]),he=(0,r.iH)(["name","description","ownerApp","relatedAppNames","createdBy","createDate","actions"]),xe=(0,r.iH)({filterable:!0,perPage:5,perPageValues:[],headings:{name:se.get("moduleName"),description:se.get("description"),ownerApp:se.get("ownerApp"),relatedAppNames:se.get("relatedApplications"),createdBy:se.get("createdBy"),createDate:se.get("createDate"),shareType:se.get("shareType"),actions:""},resizableColumns:!1,skin:"import-module",texts:{count:"",noResults:"No matching records",filterPlaceholder:"Search"}}),Ie=(0,r.iH)(["version","description","createdBy","createDate","state"]),_e=(0,r.iH)("Organization"),Ae=(0,r.iH)("Organization"),ke=(0,r.iH)(null===(n=le.user.selectedOrganizationGroup)||void 0===n?void 0:n.organizationGroup),ze=(0,r.iH)(null===(D=null===(l=null===(a=le.user.selectedOrganizationGroup)||void 0===a?void 0:a.organizationApplications)||void 0===l?void 0:l.find((e=>{var n;return e.organizationId==(null===(n=ke.value)||void 0===n?void 0:n.mainOrganizationId)})))||void 0===D?void 0:D.modules),Ce=(0,r.iH)({filterable:!1,perPage:5,perPageValues:[],headings:{version:se.get("version"),description:se.get("description"),createdBy:se.get("createdBy"),createDate:se.get("createDate"),state:""},resizableColumns:!1,skin:"module-versions",texts:{count:"",noResults:"No matching records"}}),Se={month:"2-digit",day:"2-digit",year:"numeric"};function Oe(){function e(e,n){e.ownerApp=e.mainOwner?n[e.mainOwner]:"";const a=e.relatedApplications.map((e=>n[e.applicationID])).filter((n=>n!=e.ownerApp));e.relatedAppNames=a.join(", ")}re.execute((async()=>{const n=await de.listModules(),a=await de.getGroupModules(),t={};le.apps.forEach((e=>t[e.ID]=e.name)),n.forEach((n=>{e(n,t);const a=Te(n);a&&n.mainOwner&&n.mainOwner!=le.studio.appId?(!me.value.some((e=>e.ID==n.ID))&&me.value.push(n),we.value=we.value.filter((e=>e.ID!=n.ID))):a||(!we.value.some((e=>e.ID==n.ID))&&we.value.push(n),me.value=me.value.filter((e=>e.ID!=n.ID)))})),null==a||a.forEach((n=>{e(n,t),Te(n)?(!ge.value.some((e=>e.ID==n.ID))&&ge.value.push(n),De.value=De.value.filter((e=>e.ID!=n.ID))):(!De.value.some((e=>e.ID==n.ID))&&De.value.push(n),ge.value=ge.value.filter((e=>e.ID!=n.ID)))}))}),{loading:!0})}function Ne(e,n){var a,t;const i=null===(a=ze.value)||void 0===a?void 0:a.find((n=>n.ID==e.ID)),o=le.studio.appId,l=i?ge:me,r=i?De:we,s=i?null===(t=ke.value)||void 0===t?void 0:t.mainOrganizationId:void 0;re.execute((async()=>{if(n){if(Te(e)){await pe.detachModuleFromApplication(e,o,!0,n,s);const a=l.value.find((n=>n.ID==e.ID));a.relatedApplications=a.relatedApplications.filter((e=>e.applicationID!=o))}await pe.attachModuletoApplication(e,o,{outerOrgId:s,version:n}),await async function(){var e;const n=ve.findApplication(le.studio.appName),a=null!==(e=null==n?void 0:n.copyApp)&&void 0!==e?e:{},t={ID:le.studio.appId,name:le.studio.appName,copyApp:{...a,missingModules:[]}};await ue.updateApplication(t)}(),r.value.find((n=>n.ID==e.ID)).relatedApplications.push({applicationID:o,importedVersion:n}),fe.value.find((e=>e.version==n)).relatedApplications.push({applicationID:o,importedVersion:n}),ye.value.currentVersion=n}else await pe.attachModuletoApplication(e,o,{}),r.value.find((n=>n.ID==e.ID)).relatedApplications.push({applicationID:o});Oe()}),{loading:!0})}function Fe(e,n){var a,t;const i=null===(a=ze.value)||void 0===a?void 0:a.find((n=>n.ID==e.ID)),o=i?ge:me,l=i?null===(t=ke.value)||void 0===t?void 0:t.mainOrganizationId:void 0;re.execute((async()=>{const a=le.studio.appId;await pe.detachModuleFromApplication(e,a,!1,n,l);const t=o.value.find((n=>n.ID==e.ID));t.relatedApplications=t.relatedApplications.filter((e=>e.applicationID!=a));const i=fe.value.find((e=>e.version==n));i&&(i.relatedApplications=t.relatedApplications.filter((e=>e.applicationID!=a))),Oe()}),{loading:!0})}function Te(e){var n;const a=le.studio.appId;return!!(null===(n=e.relatedApplications)||void 0===n?void 0:n.some((e=>e.applicationID==a)))}function He(e){var n;n=e.ID,re.execute((async()=>{var e,a;const t=(null===(e=ze.value)||void 0===e?void 0:e.find((e=>e.ID==n)))?null===(a=ke.value)||void 0===a?void 0:a.mainOrganizationId:void 0;fe.value=(await ce.listModuleVersions(n,t)).reverse()}),{loading:!0}),ye.value=e,ye.value.currentVersion=Me(e),be.value=!0}function Me(e){var n;const a=le.studio.appId;return null===(n=e.relatedApplications.find((e=>a==e.applicationID)))||void 0===n?void 0:n.importedVersion}function Ze(){var e;return null===(e=ye.value)||void 0===e?void 0:e.currentVersion}return Oe(),(e,n)=>{var a;const l=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)("div",b,[be.value?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)("div",y,[(0,t._)("div",f,[(0,t._)("div",{onClick:n[0]||(n[0]=e=>_e.value="Organization"),class:(0,i.normalizeClass)(["tab-item","Organization"==_e.value?"active-category":""])},"Imported Organization Modules ",2),(0,t._)("div",{onClick:n[1]||(n[1]=e=>_e.value="Group"),class:(0,i.normalizeClass)(["tab-item","Group"==_e.value?"active-category":""])}," Imported Organization Group Modules",2)]),"Organization"==_e.value?((0,t.wg)(),(0,t.iD)("div",h,[me.value.length>0?((0,t.wg)(),(0,t.iD)("div",x,[(0,t.Wm)(l,{ref:"table",data:me.value,columns:he.value,options:xe.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Se).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t._)("div",I,[(0,t.wy)((0,t._)("div",{class:"imported-version",onClick:n=>He(e.row)},[A,(0,t._)("span",null,(0,i.toDisplayString)(Me(e.row)),1)],8,_),[[o.vShow,Me(e.row)]]),(0,t._)("button",{class:"remove-module",onClick:n=>Fe(e.row,Me(e.row))},z,8,k)])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",C,S))])):((0,t.wg)(),(0,t.iD)("div",O,[ge.value.length>0?((0,t.wg)(),(0,t.iD)("div",N,[(0,t.Wm)(l,{ref:"table",data:ge.value,columns:he.value,options:xe.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Se).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t._)("div",F,[(0,t.wy)((0,t._)("div",{class:"imported-version",onClick:n=>He(e.row)},[H,(0,t._)("span",null,(0,i.toDisplayString)(Me(e.row)),1)],8,T),[[o.vShow,Me(e.row)]]),(0,t._)("button",{class:"remove-module",onClick:n=>Fe(e.row,Me(e.row))},Z,8,M)])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",R,B))])),(0,t._)("div",G,[(0,t._)("div",{onClick:n[2]||(n[2]=e=>Ae.value="Organization"),class:(0,i.normalizeClass)(["tab-item","Organization"==Ae.value?"active-category":""])}," Organization Modules ",2),(0,t._)("div",{onClick:n[3]||(n[3]=e=>Ae.value="Group"),class:(0,i.normalizeClass)(["tab-item","Group"==Ae.value?"active-category":""])}," Organization Group Modules",2)]),"Organization"==Ae.value?((0,t.wg)(),(0,t.iD)("div",V,[we.value.length>0?((0,t.wg)(),(0,t.iD)("div",P,[(0,t.Wm)(l,{ref:"table",data:we.value,columns:he.value,options:xe.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Se).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t.wy)((0,t._)("button",{class:"select-module-btn",onClick:n=>He(e.row)},q,8,W),[[o.vShow,"version"==e.row.shareType]]),(0,t.wy)((0,t._)("button",{class:"add-ref-module-btn",onClick:n=>Ne(e.row)},"ADD",8,E),[[o.vShow,"reference"==e.row.shareType]])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",j,J))])):((0,t.wg)(),(0,t.iD)("div",U,[De.value.length>0?((0,t.wg)(),(0,t.iD)("div",K,[(0,t.Wm)(l,{ref:"table",data:De.value,columns:he.value,options:xe.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Se).format(new Date(e.row.createDate))),1)])),ownerApp:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(e.row.ownerApp),1)])),relatedAppNames:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,t.w5)((e=>[(0,t.wy)((0,t._)("button",{class:"select-module-btn",onClick:n=>He(e.row)},Q,8,L),[[o.vShow,"version"==e.row.shareType]]),(0,t.wy)((0,t._)("button",{class:"add-ref-module-btn",onClick:n=>Ne(e.row)},"ADD",8,X),[[o.vShow,"reference"==e.row.shareType]])])),_:1},8,["data","columns","options"])])):((0,t.wg)(),(0,t.iD)("div",Y,$))]))])),be.value?((0,t.wg)(),(0,t.iD)("div",ee,[(0,t._)("div",ne,[(0,t._)("i",{class:"mdi mdi-arrow-left-box back-button",onClick:n[4]||(n[4]=e=>{be.value=!1})}),(0,t._)("span",ae,(0,i.toDisplayString)(null===(a=ye.value)||void 0===a?void 0:a.name),1)]),te,(0,t.Wm)(l,{ref:"table",data:fe.value,columns:Ie.value,options:Ce.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(new Intl.DateTimeFormat("tr-TR",Se).format(new Date(e.row.createDate))),1)])),state:(0,t.w5)((e=>[e.row.version==Ze()?((0,t.wg)(),(0,t.iD)("button",ie,"Imported")):((0,t.wg)(),(0,t.iD)("button",{key:1,class:"import-btn",onClick:n=>Ne(ye.value,e.row.version)},"Import",8,oe))])),_:1},8,["data","columns","options"]),(0,t.Uk)(", ")])):(0,t.kq)("v-if",!0)])}}});var re=a(17450),se=a.n(re),de=a(29530),pe=a.n(de),ce=a(16199),ue=a.n(ce),ve=a(40458),me=a.n(ve),ge=a(62916),we=a.n(ge),De=a(92165),be=a.n(De),ye=a(64029),fe={};fe.styleTagTransform=be(),fe.setAttributes=me(),fe.insert=ue().bind(null,"head"),fe.domAPI=pe(),fe.insertStyleElement=we(),se()(ye.Z,fe),ye.Z&&ye.Z.locals&&ye.Z.locals;const he=(0,a(32525).Z)(le,[["__scopeId","data-v-0bd23e05"]])}}]);