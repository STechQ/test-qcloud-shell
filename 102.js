"use strict";(self.webpackChunkqcloud_shell=self.webpackChunkqcloud_shell||[]).push([[102,8033],{69681:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(51864),l=t.n(i),o=t(60352),a=t.n(o)()(l());a.push([e.id,'\n.fileInputDiv[data-v-087bed0b] {\n    margin-left: 20px;\n    margin-top: 20px;\n    margin-right: 20px;\n}\n.selectedItems[data-v-087bed0b] {\n    margin-left: 10px;\n    margin-top: 10px;\n    height: 226px;\n    overflow: auto;\n}\n.selectedItems[data-v-087bed0b]::-webkit-scrollbar-thumb {\n    background-color: #d0d1e9;\n    border-radius: 16px;\n}\n.selectedItems[data-v-087bed0b]::-webkit-scrollbar {\n    width: 12px;\n}\n.selectedItems[data-v-087bed0b]::-webkit-scrollbar-track {\n    background: transparent;\n}\n.importBtn[data-v-087bed0b] {\n    border-radius: 4px;\n    border: none;\n    opacity: 1;\n    color: white;\n    width: 97px;\n    height: 40px;\n    font-style: normal;\n    font-size: 20px;\n    font-weight: 500;\n    letter-spacing: 0px;\n    font-family: "ROBOTO";\n}\n.importBtnDiv[data-v-087bed0b] {\n    text-align: end;\n    margin-right: 20px;\n    margin-top: 30px;\n}\n.removeIcon[data-v-087bed0b] {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n.removeIconReposition[data-v-087bed0b] {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    margin-left: 23px;\n}\n.loading[data-v-087bed0b] {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n[data-v-087bed0b]::-webkit-file-upload-button {\n    background: #2f3160;\n    color: white;\n    border-radius: 4px;\n    width: 120px;\n    height: 48px;\n}\n.fileUploadDiv[data-v-087bed0b] {\n    cursor: pointer;\n}\n.filesValue[data-v-087bed0b] {\n    margin-top: 10px;\n    background-color: #f5f5fa;\n    color: #000000;\n    display: flex;\n    border-radius: 4px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    letter-spacing: 0px;\n    opacity: 1;\n    font-family: "ROBOTO";\n    margin-left: 10px;\n    width: 561px;\n    text-align: start;\n}\n.uploadFilesText[data-v-087bed0b] {\n    color: #616161;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 10px;\n    font-family: "ROBOTO";\n}\n.fileTypeQjson[data-v-087bed0b] {\n    color: #449dd1;\n    font-size: 18px;\n    padding-left: 5px;\n}\n.fileTypeEntity[data-v-087bed0b] {\n    color: rgb(233, 114, 76);\n    font-size: 18px;\n    padding-left: 5px;\n}\n.fileTypeBpmn[data-v-087bed0b] {\n    color: rgb(0, 124, 119);\n    font-size: 18px;\n    padding-left: 5px;\n}\n.fileTypeProcess[data-v-087bed0b] {\n    color: rgb(0, 124, 119);\n    font-size: 18px;\n    padding-left: 5px;\n}\n.unacceptableFileType[data-v-087bed0b] {\n    color: red;\n    font-size: 18px;\n    padding-left: 5px;\n}\n.uploadArea[data-v-087bed0b] {\n    text-align: center;\n    padding-top: 25px;\n    border: 1px dashed #a1a1a1;\n    height: 100px;\n}\n.cancelBtn[data-v-087bed0b] {\n    background: none;\n    border: none;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 20px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 50px;\n    font-family: "ROBOTO";\n    margin-right: 10px;\n    color: #757575;\n    letter-spacing: 0.02px;\n}\n.loader[data-v-087bed0b] {\n    border: 3px solid #f3f3f3;\n    border-radius: 70%;\n    border-top: 3px solid #3498db;\n    width: 12px;\n    height: 12px;\n    -webkit-animation: spin-087bed0b 1s linear infinite;\n    animation: spin-087bed0b 1s linear infinite;\n}\n\n/* Safari */\n@-webkit-keyframes spin-087bed0b {\n0% {\n        -webkit-transform: rotate(0deg);\n}\n100% {\n        -webkit-transform: rotate(360deg);\n}\n}\n@keyframes spin-087bed0b {\n0% {\n        transform: rotate(0deg);\n}\n100% {\n        transform: rotate(360deg);\n}\n}\n',"",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/importModelDialog.vue"],names:[],mappings:";AAwTA;IACI,iBAAiB;IACjB,gBAAgB;IAChB,kBAAkB;AACtB;AAEA;IACI,iBAAiB;IACjB,gBAAgB;IAChB,aAAa;IACb,cAAc;AAClB;AAEA;IACI,yBAAyB;IACzB,mBAAmB;AACvB;AAEA;IACI,WAAW;AACf;AAEA;IACI,uBAAuB;AAC3B;AAEA;IACI,kBAAkB;IAClB,YAAY;IACZ,UAAU;IACV,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,mBAAmB;IACnB,qBAAqB;AACzB;AAEA;IACI,eAAe;IACf,kBAAkB;IAClB,gBAAgB;AACpB;AAEA;IACI,eAAe;IACf,cAAc;IACd,mBAAmB;IACnB,kBAAkB;IAClB,eAAe;IACf,mBAAmB;IACnB,UAAU;AACd;AAEA;IACI,eAAe;IACf,cAAc;IACd,mBAAmB;IACnB,kBAAkB;IAClB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,eAAe;IACf,cAAc;IACd,mBAAmB;IACnB,kBAAkB;IAClB,eAAe;IACf,mBAAmB;IACnB,UAAU;AACd;AAEA;IACI,mBAAmB;IACnB,YAAY;IACZ,kBAAkB;IAClB,YAAY;IACZ,YAAY;AAChB;AAEA;IACI,eAAe;AACnB;AAEA;IACI,gBAAgB;IAChB,yBAAyB;IACzB,cAAc;IACd,aAAa;IACb,kBAAkB;IAClB,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;IACf,mBAAmB;IACnB,UAAU;IACV,qBAAqB;IACrB,iBAAiB;IACjB,YAAY;IACZ,iBAAiB;AACrB;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;IACf,mBAAmB;IACnB,UAAU;IACV,iBAAiB;IACjB,qBAAqB;AACzB;AAEA;IACI,cAAc;IACd,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,wBAAwB;IACxB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,uBAAuB;IACvB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,uBAAuB;IACvB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,UAAU;IACV,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,kBAAkB;IAClB,iBAAiB;IACjB,0BAA0B;IAC1B,aAAa;AACjB;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;IACf,mBAAmB;IACnB,UAAU;IACV,iBAAiB;IACjB,qBAAqB;IACrB,kBAAkB;IAClB,cAAc;IACd,sBAAsB;AAC1B;AAEA;IACI,yBAAyB;IACzB,kBAAkB;IAClB,6BAA6B;IAC7B,WAAW;IACX,YAAY;IACZ,mDAA0C;IAC1C,2CAAkC;AACtC;;AAEA,WAAW;AACX;AACI;QACI,+BAA+B;AACnC;AAEA;QACI,iCAAiC;AACrC;AACJ;AAEA;AACI;QACI,uBAAuB;AAC3B;AAEA;QACI,yBAAyB;AAC7B;AACJ",sourcesContent:['<script setup lang="ts">\nimport { IUseCaseExecutor } from "../../../../domain/useCase/IUseCaseExecutor";\nimport { container } from "../../../../domain/core/diContainer";\nimport { ICreateModel, ICreateModelParam } from "../../../../domain/useCase/ICreateModel";\nimport { IApplication, IFolder, IModule } from "../../../../domain/model/models";\nimport { INewItemProps } from "../../../../domain/presentation/dialogs/INewItemProps";\nimport { ref } from "@vue/runtime-dom";\nimport { computed } from "@vue/reactivity";\nimport { TooltipImpl } from "../../impls/tooltipImpl";\nimport { IFormValidator, IFormValidatorOptions, IFormValidatorResponseItem } from "../../../../domain/infrastructure/IFormValidator";\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst tooltip = container.resolve<TooltipImpl>(TooltipImpl);\nconst formValidator = container.resolve<IFormValidator>(IFormValidator);\nconst nameValidations: IFormValidatorOptions = { minAndMaxLength: { min: 3, max: 40 }, availableCharacters: true, nonSpaceCharacter: true };\n\ninterface IImportFile {\n    name: string;\n    content: string;\n    isDuplicate: boolean;\n    isAcceptable: boolean;\n    nameValidationExceptions: Array<IFormValidatorResponseItem>;\n    type: "entity" | "qjson" | "process" | "bpmn";\n}\n\ninterface INewItemPropsInline extends INewItemProps {\n    parent: IModule | IFolder | IApplication;\n}\n\nconst props = defineProps<INewItemPropsInline>();\n\nconst fileItems = ref<Array<IImportFile>>([]);\n\nconst loadingIcon = ref(false);\nconst emit = defineEmits(["close"]);\nconst entityNumber = ref(0);\nconst acceptableFileTypes: Array<IImportFile["type"]> =\n    props.parent.objectType == "application"\n        ? ["qjson"]\n        : props.parent.objectType == "module" || props.parent.objectType == "folder"\n        ? ["qjson", "bpmn", "entity", "entity"]\n        : [];\nconst hasEntity = ref(props.parent?.children?.some((i) => i.objectType == "model" && i.modelType == "entityDesigner") == true);\n\nfunction checkDuplicate(name: string, type: IImportFile["type"]) {\n    const isDuplicate = props.parent?.children?.some(\n        (i) => i.name == name.split(".").slice(0, -1).join(".") && i.objectType == "model" && i.modelType == type\n    );\n    return isDuplicate == true;\n}\n\nfunction checkExtension(file: string) {\n    const extension = file.substring(file.lastIndexOf(".") + 1, file.length);\n    return extension as IImportFile["type"];\n}\n\nasync function selectedFiles() {\n    var item = document.getElementById("fileInput") as HTMLInputElement | null;\n    for (var i = 0; i < item?.files?.length!; i++) {\n        const file = item?.files?.item(i);\n        const extensionOfFile = checkExtension(file!.name);\n        const isExist = fileItems.value.some((i) => i.name == file?.name);\n        if (!isExist) {\n            const text = await file!.text();\n            const isDuplicate = checkDuplicate(file!.name, extensionOfFile);\n            const fileNameWithoutExtension = file!.name.substring(0, file!.name.lastIndexOf("."));\n            const nameValidationExceptions: Array<IFormValidatorResponseItem> = formValidator\n                .validate(fileNameWithoutExtension, nameValidations)\n                .filter((item) => !item.isValid);\n            const isAcceptable = acceptableFileTypes.includes(extensionOfFile);\n            fileItems.value.push({\n                name: file!.name,\n                content: text,\n                nameValidationExceptions,\n                isDuplicate,\n                isAcceptable,\n                type: extensionOfFile,\n            });\n            if (extensionOfFile == "entity") {\n                entityNumber.value = entityNumber.value + 1;\n            }\n        }\n    }\n    tooltip.startTooltip();\n}\nasync function importSelectedModels() {\n    if(isButtonDisabled.value) return;\n    loadingIcon.value = true;\n\n    fileItems.value.forEach(async (item) => {\n        if (item.isDuplicate || !item.isAcceptable || item.nameValidationExceptions.length != 0) {\n            return;\n        }\n\n        const createObject: ICreateModelParam = {\n            name: item.name.split(".").slice(0, -1).join("."),\n            parentObjectId: props.parent.ID,\n\n            modelBody: [{ key: item.type, model: item!.content }],\n            modelType: "qjson",\n            modelAdditionals: { qjsonType: "qjson" },\n        };\n\n        switch (item.type) {\n            case "qjson":\n                createObject.modelType = "qjson";\n                createObject.modelAdditionals = { qjsonType: "qjson" };\n                break;\n            case "entity":\n                if (isEntityRuleBlock(item)) {\n                    return;\n                }\n                createObject.modelType = "entityDesigner";\n                createObject.modelAdditionals = {};\n                break;\n            case "bpmn":\n                createObject.modelType = "bpmn";\n                createObject.modelAdditionals = { isAutoGenerated: false, isModifiedByUser: true };\n                break;\n\n            case "process":\n                createObject.modelType = "process";\n                createObject.modelAdditionals = {};\n                break;\n        }\n\n        await executor.executeUseCase<ICreateModel>(ICreateModel, createObject);\n        loadingIcon.value = false;\n        emit("close");\n    });\n}\n\nfunction computedIcon(fileType: string) {\n    switch (fileType) {\n        case "qjson":\n            return "mdi mdi-palette fileTypeQjson";\n        case "entity":\n            return "mdi mdi-database fileTypeEntity";\n        case "bpmn":\n            return "mdi mdi-vector-polyline fileTypeBpmn";\n        case "process":\n            return "mdi mdi-auto-fix fileTypeProcess";\n        default:\n    }\n}\n\nfunction removeItem(file: IImportFile, selectedFiles: Array<any>) {\n    if (file.type == "entity") {\n        entityNumber.value = entityNumber.value - 1;\n    }\n    const index = selectedFiles.indexOf(file);\n    selectedFiles.splice(index, 1);\n    tooltip.startTooltip();\n}\n\nfunction isEntityRuleBlock(item: IImportFile) {\n    if (item.type != "entity") {\n        return false;\n    }\n\n    const isEntityRuleBlock = hasEntity.value || entityNumber.value > 1;\n    return isEntityRuleBlock;\n}\n\nfunction anyNotDuplicateItem() {\n    const retVal = fileItems.value.some((i) => i.type != "entity" && !i.isDuplicate && i.isAcceptable);\n    return retVal;\n}\n\nfunction anyAcceptableItem() {\n    const retVal = fileItems.value.some((i) => i.isAcceptable && i.nameValidationExceptions.length == 0);\n    return retVal;\n}\n\nconst isButtonDisabled = computed(() => {\n    if (fileItems.value.length == 0) {\n        return true;\n    }\n\n    if (!anyAcceptableItem()) {\n        return true;\n    }\n\n    if(loadingIcon.value) {\n        return true;\n    }\n\n    if (fileItems.value.length > entityNumber.value && anyNotDuplicateItem()) {\n        return false;\n    }\n\n    if (fileItems.value.some((i) => i.type != "entity")) {\n        return true;\n    }\n\n    const isEntityRuleBlock = entityNumber.value > 1 || (hasEntity.value && entityNumber.value > 0);\n    return isEntityRuleBlock;\n});\n<\/script>\n\n<template>\n    <div class="fileInputDiv">\n        <div class="fileUploadDiv col-12" onclick="document.getElementById(\'fileInput\').click()">\n            <div class="col-12 uploadArea" style="display: flex; padding-left: 150px; padding-top: 35px">\n                <div\n                    class="mdi mdi-cloud-upload-outline"\n                    style="text-align: center; font-size: 25px; color: #a1a1a1; padding-right: 10px; margin-top: -7px"\n                ></div>\n                <span style="font-weight: bold">Click</span><span style="padding-left: 10px">here to upload your files.</span>\n            </div>\n        </div>\n        <input\n            style="display: none"\n            type="file"\n            id="fileInput"\n            multiple\n            @change="selectedFiles()"\n            :accept="props.parent.objectType == \'application\' ? \'.qjson\' : \'.qjson,.entity,.bpmn,.process\'"\n        />\n    </div>\n    <div id="selectedFiles" class="selectedItems">\n        <div v-if="fileItems.length > 0">\n            <div class="uploadFilesText">\n                Selected Files <span> ({{ fileItems.length }})</span>\n            </div>\n            <div v-for="fileValues in fileItems">\n                <div\n                    v-if="\n                        !fileValues.isDuplicate &&\n                        !isEntityRuleBlock(fileValues) &&\n                        fileValues.isAcceptable &&\n                        fileValues.nameValidationExceptions.length == 0\n                    "\n                    class="filesValue"\n                >\n                    <div><i :class="computedIcon(fileValues.type)"></i></div>\n                    <div class="col-10" style="margin-left: 10px; text-overflow: ellipsis; overflow: hidden">\n                        {{ fileValues.name.split(".").slice(0, -1).join(".") }}\n                    </div>\n\n                    <div class="col-1" style="text-align: end; padding-left: 30px">\n                        <i\n                            v-if="fileValues && !loadingIcon"\n                            class="mdi mdi-delete-outline removeIcon"\n                            :style="computedIcon(fileValues.type) ? \'\' : \'margin-left: 23px;\'"\n                            @click="removeItem(fileValues, fileItems)"\n                        ></i>\n\n                        <div v-if="loadingIcon" style="padding-top: 7px" class="loader"></div>\n                    </div>\n                </div>\n\n                <div\n                    v-if="\n                        fileValues.isDuplicate ||\n                        isEntityRuleBlock(fileValues) ||\n                        !fileValues.isAcceptable ||\n                        fileValues.nameValidationExceptions.length != 0\n                    "\n                    class="filesValue"\n                    style="border: 1px solid red"\n                >\n                    <div><i :class="computedIcon(fileValues.type)"></i></div>\n                    <div\n                        class="col-10"\n                        data-toggle="tooltip"\n                        :title="\n                            isEntityRuleBlock(fileValues)\n                                ? \'Only one entity file is allowed\'\n                                : !fileValues.isAcceptable\n                                ? `File type is not supported.`\n                                : fileValues.nameValidationExceptions.length != 0  \n                                ? fileValues.nameValidationExceptions.at(0)!.message \n                                : \'This file is already imported\'\n                        "\n                        placement="bottom"\n                        style="margin-left: 10px; text-overflow: ellipsis; overflow: hidden"\n                    >\n                        {{ fileValues.name.split(".").slice(0, -1).join(".") }}\n                    </div>\n\n                    <div class="col-1" style="text-align: end; padding-left: 30px">\n                        <i\n                            v-if="fileValues && !loadingIcon"\n                            :class="\'mdi mdi-delete-outline removeIcon\' + (computedIcon(fileValues.type) ? \'\' : \' removeIconReposition\')"\n                            @click="removeItem(fileValues, fileItems)"\n                        ></i>\n\n                        <div\n                            v-if="!fileValues.isDuplicate && !isEntityRuleBlock(fileValues) && loadingIcon"\n                            style="padding-top: 7px"\n                            class="loader"\n                        ></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="importBtnDiv">\n        <button class="cancelBtn" @click="emit(\'close\')">Cancel</button>\n        <button\n            class="importBtn"\n            :disabled="isButtonDisabled"\n            :style="{ backgroundColor: isButtonDisabled ? \'#37373733\' : \'#151233\' }"\n            @click="importSelectedModels()"\n        >\n            IMPORT\n        </button>\n    </div>\n</template>\n\n<style scoped>\n.fileInputDiv {\n    margin-left: 20px;\n    margin-top: 20px;\n    margin-right: 20px;\n}\n\n.selectedItems {\n    margin-left: 10px;\n    margin-top: 10px;\n    height: 226px;\n    overflow: auto;\n}\n\n.selectedItems::-webkit-scrollbar-thumb {\n    background-color: #d0d1e9;\n    border-radius: 16px;\n}\n\n.selectedItems::-webkit-scrollbar {\n    width: 12px;\n}\n\n.selectedItems::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n.importBtn {\n    border-radius: 4px;\n    border: none;\n    opacity: 1;\n    color: white;\n    width: 97px;\n    height: 40px;\n    font-style: normal;\n    font-size: 20px;\n    font-weight: 500;\n    letter-spacing: 0px;\n    font-family: "ROBOTO";\n}\n\n.importBtnDiv {\n    text-align: end;\n    margin-right: 20px;\n    margin-top: 30px;\n}\n\n.removeIcon {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n\n.removeIconReposition {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    margin-left: 23px;\n}\n\n.loading {\n    cursor: pointer;\n    color: #212121;\n    padding-right: 10px;\n    font-style: normal;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n}\n\n::-webkit-file-upload-button {\n    background: #2f3160;\n    color: white;\n    border-radius: 4px;\n    width: 120px;\n    height: 48px;\n}\n\n.fileUploadDiv {\n    cursor: pointer;\n}\n\n.filesValue {\n    margin-top: 10px;\n    background-color: #f5f5fa;\n    color: #000000;\n    display: flex;\n    border-radius: 4px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    letter-spacing: 0px;\n    opacity: 1;\n    font-family: "ROBOTO";\n    margin-left: 10px;\n    width: 561px;\n    text-align: start;\n}\n\n.uploadFilesText {\n    color: #616161;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 18px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 10px;\n    font-family: "ROBOTO";\n}\n\n.fileTypeQjson {\n    color: #449dd1;\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.fileTypeEntity {\n    color: rgb(233, 114, 76);\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.fileTypeBpmn {\n    color: rgb(0, 124, 119);\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.fileTypeProcess {\n    color: rgb(0, 124, 119);\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.unacceptableFileType {\n    color: red;\n    font-size: 18px;\n    padding-left: 5px;\n}\n\n.uploadArea {\n    text-align: center;\n    padding-top: 25px;\n    border: 1px dashed #a1a1a1;\n    height: 100px;\n}\n\n.cancelBtn {\n    background: none;\n    border: none;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 20px;\n    letter-spacing: 0px;\n    opacity: 1;\n    margin-left: 50px;\n    font-family: "ROBOTO";\n    margin-right: 10px;\n    color: #757575;\n    letter-spacing: 0.02px;\n}\n\n.loader {\n    border: 3px solid #f3f3f3;\n    border-radius: 70%;\n    border-top: 3px solid #3498db;\n    width: 12px;\n    height: 12px;\n    -webkit-animation: spin 1s linear infinite;\n    animation: spin 1s linear infinite;\n}\n\n/* Safari */\n@-webkit-keyframes spin {\n    0% {\n        -webkit-transform: rotate(0deg);\n    }\n\n    100% {\n        -webkit-transform: rotate(360deg);\n    }\n}\n\n@keyframes spin {\n    0% {\n        transform: rotate(0deg);\n    }\n\n    100% {\n        transform: rotate(360deg);\n    }\n}\n</style>\n'],sourceRoot:""}]);const s=a},51419:(e,n)=>{n.Z=(e,n)=>{const t=e.__vccOpts||e;for(const[e,i]of n)t[e]=i;return t}},80102:(e,n,t)=>{t.r(n),t.d(n,{default:()=>W});var i=t(62068),l=t(49045),o=t(81407),a=t(80664),s=t(3734),r=t(79388),p=t(54611),d=t(64175);const c={class:"fileInputDiv"},A=(e=>((0,i.dD)("data-v-087bed0b"),e=e(),(0,i.Cn)(),e))((()=>(0,i._)("div",{class:"fileUploadDiv col-12",onclick:"document.getElementById('fileInput').click()"},[(0,i._)("div",{class:"col-12 uploadArea",style:{display:"flex","padding-left":"150px","padding-top":"35px"}},[(0,i._)("div",{class:"mdi mdi-cloud-upload-outline",style:{"text-align":"center","font-size":"25px",color:"#a1a1a1","padding-right":"10px","margin-top":"-7px"}}),(0,i._)("span",{style:{"font-weight":"bold"}},"Click"),(0,i._)("span",{style:{"padding-left":"10px"}},"here to upload your files.")])],-1))),m=["accept"],f={id:"selectedFiles",class:"selectedItems"},u={key:0},I={class:"uploadFilesText"},y=(0,i.Uk)(" Selected Files "),g={key:0,class:"filesValue"},B={class:"col-10",style:{"margin-left":"10px","text-overflow":"ellipsis",overflow:"hidden"}},b={class:"col-1",style:{"text-align":"end","padding-left":"30px"}},v=["onClick"],x={key:1,style:{"padding-top":"7px"},class:"loader"},C={key:1,class:"filesValue",style:{border:"1px solid red"}},h=["title"],k={class:"col-1",style:{"text-align":"end","padding-left":"30px"}},w=["onClick"],T={key:1,style:{"padding-top":"7px"},class:"loader"},E={class:"importBtnDiv"},V=["disabled"],j=(0,i.aZ)({__name:"importModelDialog",props:{parent:null},emits:["close"],setup(e,{emit:n}){var t,j;const D=e,O=s.nC.resolve(a.y),F=s.nC.resolve(p.O),q=s.nC.resolve(d.T),z={minAndMaxLength:{min:3,max:40},availableCharacters:!0,nonSpaceCharacter:!0},U=(0,o.iH)([]),_=(0,o.iH)(!1),R=(0,o.iH)(0),Y="application"==D.parent.objectType?["qjson"]:"module"==D.parent.objectType||"folder"==D.parent.objectType?["qjson","bpmn","entity","entity"]:[],M=(0,o.iH)(1==(null===(j=null===(t=D.parent)||void 0===t?void 0:t.children)||void 0===j?void 0:j.some((e=>"model"==e.objectType&&"entityDesigner"==e.modelType))));function N(e,n){var t,i;return 1==(null===(i=null===(t=D.parent)||void 0===t?void 0:t.children)||void 0===i?void 0:i.some((t=>t.name==e.split(".").slice(0,-1).join(".")&&"model"==t.objectType&&t.modelType==n)))}function S(e){return e.substring(e.lastIndexOf(".")+1,e.length)}function Z(e){switch(e){case"qjson":return"mdi mdi-palette fileTypeQjson";case"entity":return"mdi mdi-database fileTypeEntity";case"bpmn":return"mdi mdi-vector-polyline fileTypeBpmn";case"process":return"mdi mdi-auto-fix fileTypeProcess"}}function P(e,n){"entity"==e.type&&(R.value=R.value-1);const t=n.indexOf(e);n.splice(t,1),F.startTooltip()}function W(e){return"entity"==e.type&&(M.value||R.value>1)}const Q=(0,o.Fl)((()=>0==U.value.length||(!U.value.some((e=>e.isAcceptable&&0==e.nameValidationExceptions.length))||(!!_.value||!(U.value.length>R.value&&U.value.some((e=>"entity"!=e.type&&!e.isDuplicate&&e.isAcceptable)))&&(!!U.value.some((e=>"entity"!=e.type))||(R.value>1||M.value&&R.value>0))))));return(e,t)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",c,[A,(0,i._)("input",{style:{display:"none"},type:"file",id:"fileInput",multiple:"",onChange:t[0]||(t[0]=e=>async function(){for(var e,n,t=document.getElementById("fileInput"),i=0;i<(null===(e=null==t?void 0:t.files)||void 0===e?void 0:e.length);i++){const e=null===(n=null==t?void 0:t.files)||void 0===n?void 0:n.item(i),l=S(e.name),o=U.value.some((n=>n.name==(null==e?void 0:e.name)));if(!o){const n=await e.text(),t=N(e.name,l),i=e.name.substring(0,e.name.lastIndexOf(".")),o=q.validate(i,z).filter((e=>!e.isValid)),a=Y.includes(l);U.value.push({name:e.name,content:n,nameValidationExceptions:o,isDuplicate:t,isAcceptable:a,type:l}),"entity"==l&&(R.value=R.value+1)}}F.startTooltip()}()),accept:"application"==D.parent.objectType?".qjson":".qjson,.entity,.bpmn,.process"},null,40,m)]),(0,i._)("div",f,[U.value.length>0?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",I,[y,(0,i._)("span",null," ("+(0,l.toDisplayString)(U.value.length)+")",1)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(U.value,(e=>((0,i.wg)(),(0,i.iD)("div",null,[e.isDuplicate||W(e)||!e.isAcceptable||0!=e.nameValidationExceptions.length?(0,i.kq)("v-if",!0):((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",null,[(0,i._)("i",{class:(0,l.normalizeClass)(Z(e.type))},null,2)]),(0,i._)("div",B,(0,l.toDisplayString)(e.name.split(".").slice(0,-1).join(".")),1),(0,i._)("div",b,[e&&!_.value?((0,i.wg)(),(0,i.iD)("i",{key:0,class:"mdi mdi-delete-outline removeIcon",style:(0,l.normalizeStyle)(Z(e.type)?"":"margin-left: 23px;"),onClick:n=>P(e,U.value)},null,12,v)):(0,i.kq)("v-if",!0),_.value?((0,i.wg)(),(0,i.iD)("div",x)):(0,i.kq)("v-if",!0)])])),e.isDuplicate||W(e)||!e.isAcceptable||0!=e.nameValidationExceptions.length?((0,i.wg)(),(0,i.iD)("div",C,[(0,i._)("div",null,[(0,i._)("i",{class:(0,l.normalizeClass)(Z(e.type))},null,2)]),(0,i._)("div",{class:"col-10","data-toggle":"tooltip",title:W(e)?"Only one entity file is allowed":e.isAcceptable?0!=e.nameValidationExceptions.length?e.nameValidationExceptions.at(0).message:"This file is already imported":"File type is not supported.",placement:"bottom",style:{"margin-left":"10px","text-overflow":"ellipsis",overflow:"hidden"}},(0,l.toDisplayString)(e.name.split(".").slice(0,-1).join(".")),9,h),(0,i._)("div",k,[e&&!_.value?((0,i.wg)(),(0,i.iD)("i",{key:0,class:(0,l.normalizeClass)("mdi mdi-delete-outline removeIcon"+(Z(e.type)?"":" removeIconReposition")),onClick:n=>P(e,U.value)},null,10,w)):(0,i.kq)("v-if",!0),e.isDuplicate||W(e)||!_.value?(0,i.kq)("v-if",!0):((0,i.wg)(),(0,i.iD)("div",T))])])):(0,i.kq)("v-if",!0)])))),256))])):(0,i.kq)("v-if",!0)]),(0,i._)("div",E,[(0,i._)("button",{class:"cancelBtn",onClick:t[1]||(t[1]=e=>n("close"))},"Cancel"),(0,i._)("button",{class:"importBtn",disabled:(0,o.SU)(Q),style:(0,l.normalizeStyle)({backgroundColor:(0,o.SU)(Q)?"#37373733":"#151233"}),onClick:t[2]||(t[2]=e=>async function(){Q.value||(_.value=!0,U.value.forEach((async e=>{if(e.isDuplicate||!e.isAcceptable||0!=e.nameValidationExceptions.length)return;const t={name:e.name.split(".").slice(0,-1).join("."),parentObjectId:D.parent.ID,modelBody:[{key:e.type,model:e.content}],modelType:"qjson",modelAdditionals:{qjsonType:"qjson"}};switch(e.type){case"qjson":t.modelType="qjson",t.modelAdditionals={qjsonType:"qjson"};break;case"entity":if(W(e))return;t.modelType="entityDesigner",t.modelAdditionals={};break;case"bpmn":t.modelType="bpmn",t.modelAdditionals={isAutoGenerated:!1,isModifiedByUser:!0};break;case"process":t.modelType="process",t.modelAdditionals={}}await O.executeUseCase(r.E,t),_.value=!1,n("close")})))}())}," IMPORT ",12,V)])],64))}});var D=t(75701),O=t.n(D),F=t(8236),q=t.n(F),z=t(6080),U=t.n(z),_=t(56850),R=t.n(_),Y=t(87182),M=t.n(Y),N=t(39213),S=t.n(N),Z=t(69681),P={};P.styleTagTransform=S(),P.setAttributes=R(),P.insert=U().bind(null,"head"),P.domAPI=q(),P.insertStyleElement=M(),O()(Z.Z,P),Z.Z&&Z.Z.locals&&Z.Z.locals;const W=(0,t(51419).Z)(j,[["__scopeId","data-v-087bed0b"]])}}]);
//# sourceMappingURL=102.js.map