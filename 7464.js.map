{"version":3,"file":"7464.js?ver=0.0.318_1716978881695","mappings":"2HAYA,8BAwBA,QAvBmB,EAAAA,YAAf,WACI,IAAIC,EAAYC,UAAUD,WAAaC,UAAUC,QAAgBC,OAAQC,MACzE,MAAI,WAAWC,KAAKL,GACT,UAEP,SAASK,KAAKL,KAAqBG,OAAQG,SACpC,MAEJ,SACX,EAEc,EAAAC,SAAd,SAAuBC,GACnB,IAAMC,EAASC,KAAKX,cACdY,EAAMH,EAAQI,MAAK,SAAAC,GAAK,OAAAA,EAAEC,WAAaL,CAAf,IAC9B,IAAKE,EACD,MAAM,IAAII,MAAM,iBAAiBN,EAAM,6BAG3CN,OAAOa,SAASC,QAAQN,EAAIO,cAC5BC,YAAW,WACPhB,OAAOa,SAASC,QAAQN,EAAIS,YAChC,GAAG,IACP,EACJ,EAxBA,GAAa,IAAAC,C,mCCHb,IAAIC,GAAe,EACnB,IAAIC,SAAcC,GAAOA,MAAOC,MAAK,IAAMH,GAAe,IACrC,oBAAf,WAA8BI,YACpC,MAAMC,GAAsC,IAAjBL,EAMpB,SAASM,EAAqBC,EAAkBlB,EAAoC,CAAC,GAExF,IAAImB,EAA2CC,EAC3CC,EACJ,MAAMC,EAA6CJ,IAC3CG,GAASE,aAAaF,GAC1BA,EAAQb,YAAW,KAAQY,EAAO,IAAIhB,MAAM,gDAAgDc,KAAW,GAAKA,EAA6B,EAO7I,OAJIA,GACAI,EAAWJ,GAGR,CACHI,aACAE,QAAS,IAAIZ,SAAW,CAACC,EAAKY,KAdT,IAACC,IAc8Cb,EAA5BM,EAdKH,GAAsBhB,EAAI2B,eAAkBC,GAA8BpB,YAAW,IAAMkB,EAAGE,KAAUF,EAc3EN,EAASK,CAAG,IACtFN,WACAC,SAER,C,mHChCO,SAASS,EAAgBH,GAC5B,IAAII,EACJ,MAAO,IACIA,IAAWA,EAASJ,IAEnC,CAEA,SAASK,IACL,MAAMC,GAAO,SAEb,OADAxB,YAAW,KAAQwB,EAAKb,UAAU,GAAI,KAC/Ba,EAAKR,OAChB,CAEOS,eAAeC,EAA6BC,EAAoBT,SAC7DU,EAAiB,CAACD,IACxB,MAAME,EAAM,aAA8BF,SACpCT,EAAGW,EACb,CACOJ,eAAeG,EAAiBE,EAA6BZ,GAChE,IAAIa,GAAM,EACV,MAAQA,GACJ,IACID,EAAaE,SAAQL,GAAc,aAAkBA,KACrDI,GAAM,C,CACR,MAAOE,SACCV,G,OAGRL,aAAE,EAAFA,IACV,C,4CC1BO,MAAMgB,EAAUC,OAAOC,IAAI,WAI3B,SAASC,EAAgBC,GAEhC,C,mCCAO,MAAMC,EAAmBJ,OAAOC,IAAI,mB,yGCL3C,MCJA,GDI4B,QAAiB,CAC3CI,OAAQ,aACRC,MAAMC,IAGR,QAAgB,CAAEC,QAAQ,IAE1B,MAAMC,EAAW,aAAoCL,EAAA,GAE/CM,EADS,aAA2BX,EAAA,IACdY,iBAY5B,OAXAF,EAASG,SAAQtB,UACb,MAAMuB,EAAYH,EAAaG,UAC/B,IAAKA,EACD,MAAM,IAAIpD,MAAM,qBAEpBqD,SAASC,OAAS,aAAeF,EACjC,aAAwB,CAAC,CAAE/C,YAAa,wDAAyDF,aAAc,0EAA4EiD,EAAWrD,SAAU,OAChN,CAAEM,YAAa,8EAA+EF,aAAc,wDAA0DiD,EAAWrD,SAAU,YAAa,GACzM,CAAEwD,SAAS,IAGP,CAACC,EAAUC,MACR,WAAc,QAAoB,KAAM,KAAM,kBAExD,G","sources":["webpack://qcloud_shell/../node_modules/@stechquick/algae/src/helpers/deepLinkHelper.ts","webpack://qcloud_shell/./src/common/promiseHelper.ts","webpack://qcloud_shell/./src/domain/core/diContainer.ts","webpack://qcloud_shell/./src/domain/presentation/IRouter.ts","webpack://qcloud_shell/./src/domain/useCase/IUseCaseExecutor.ts","webpack://qcloud_shell/./src/presentation/vue3/pages/studioapps.vue?3273","webpack://qcloud_shell/./src/presentation/vue3/pages/studioapps.vue"],"sourcesContent":["export interface IDeepLinkOptions {\n    appStoreUrl: string;\n    appOpenerUrl: string;\n}\n\nexport interface IDeepLink {\n    appStoreUrl: string;\n    appOpenerUrl: string;\n    platform: \"android\" | \"ios\" | \"unknown\";\n}\n\n\nexport class DeepLinkHelper {\n    private static getMobileOS(): IDeepLink[\"platform\"] {\n        var userAgent = navigator.userAgent || navigator.vendor || (<any>window).opera;\n        if (/android/i.test(userAgent)) {\n            return \"android\";\n        }\n        if (/iPhone/.test(userAgent) && !(<any>window).MSStream) {\n            return \"ios\";\n        }\n        return \"unknown\";\n    }\n\n    public static goToLink(options: Array<IDeepLink>) {\n        const retVal = this.getMobileOS();\n        const opt = options.find(i => i.platform === retVal);\n        if (!opt) {\n            throw new Error(`The Platform \"${retVal}\" is not implemented yet!`);\n        }\n\n        window.location.replace(opt.appOpenerUrl);\n        setTimeout(() => {\n            window.location.replace(opt.appStoreUrl);\n        }, 8000);\n    }\n}\n","export interface IPromiseData<T> {\n    promise: Promise<T>;\n    resolver: (value: T | PromiseLike<T>) => void;\n    reject: (reason?: any) => void;\n    startTimer: (timeout: number) => void;\n}\n\n//some platforms have syncronous resolve problem (ex: IOS JavascriptCore)\ndeclare var doNothing: any;\nlet syncResolved = false as boolean;\nnew Promise<void>(res => res()).then(() => syncResolved = true);\ntypeof(doNothing) != \"undefined\" && doNothing();\nconst syncResolveProblem = syncResolved === true; // platform has sync resolve problem or not\n\ntype ResolveFunc<T> = (value: T | PromiseLike<T>) => void;\n/**\n * @param timeout timeout time in ms, undefined if infinite\n */\nexport function createPromiseData<T>(timeout?: number, opt: { fixSyncResolve?: boolean } = {}): IPromiseData<T> {\n    const syncResolveFixer = (cb: ResolveFunc<T>) => syncResolveProblem && opt.fixSyncResolve ? (value: T | PromiseLike<T>) => setTimeout(() => cb(value)) : cb;\n    let resolver: ResolveFunc<T> = <any>undefined, reject: (reason?: any) => void = <any>undefined;\n    let timer: number;\n    const startTimer: IPromiseData<T>[\"startTimer\"] = (timeout: number) => {\n        if (timer) { clearTimeout(timer); }\n        timer = setTimeout(() => { reject(new Error(`The operation has timed out. timeoutValue  : ${timeout}`)); }, timeout) as unknown as number;\n    }\n\n    if (timeout) {\n        startTimer(timeout);\n    }\n\n    return {\n        startTimer,\n        promise: new Promise<T>((res, rej) => { resolver = syncResolveFixer(res); reject = rej; }),\n        resolver,\n        reject\n    };\n}","import { DependencyContainer, container, inject, injectable, singleton } from \"tsyringe\";\nimport { createPromiseData } from \"../../common/promiseHelper\";\n\ninterface IDependencyContainer extends DependencyContainer { }; // for vite vs webpack :( remember\n\nexport function cacheResolve<T>(cb: () => T) {\n    let cached: T | undefined = undefined;\n    return () => {\n        return cached || (cached = cb());\n    };\n}\n\nfunction sleep() {\n    const prom = createPromiseData<void>();\n    setTimeout(() => { prom.resolver() }, 100);\n    return prom.promise;\n}\n\nexport async function delayWithResolve<TInterface>(dependency: symbol, cb: (dep: TInterface) => void | Promise<void>) {\n    await delayTillResolve([dependency]);\n    const dep = container.resolve<TInterface>(dependency);\n    await cb(dep);\n}\nexport async function delayTillResolve(dependencies: Array<symbol>, cb?: () => void | Promise<void>) {\n    let run = false;\n    while (!run) {\n        try {\n            dependencies.forEach(dependency => container.resolve(dependency));\n            run = true;\n        } catch (err) {\n            await sleep();\n        }\n    }\n    await cb?.();\n}\n\nexport { IDependencyContainer, container, inject, injectable, singleton };\n","export interface IRouter {\n    push(to: string | { path: string, params?: Record<string, any> }): Promise<void>;\n    back(): void;\n    getRouteParams<T extends Record<string, string | Array<string>>>(): T;\n    isBackOrForward(): boolean;\n    isRouteNoAuth(): boolean;\n}\n\nexport const IRouter = Symbol.for(\"IRouter\");\nexport interface IRouteDefinition {\n    noAuth?: boolean\n}\nexport function routeDefinition(definition: IRouteDefinition) {\n    // Nothing to do, this is for extract-routes\n}\nexport interface IRouteOptions {\n    transfer?: string;\n}\nexport function routeOptions(options: IRouteOptions) {\n    // Nothing to do, this is for extract-routes\n}","import { UnpromisedReturn } from \"../../common/extendedTypes\";\nimport { IUseCase } from \"./IUseCase\";\n\nexport interface IExecuteOptions {\n    loading: boolean;\n    loadingInfo?: { title: string, text: string };\n    noContinueInBgBtn?: boolean;\n}\nexport interface IUseCaseExecutor {\n    executeUseCase<TUseCase extends IUseCase<UnpromisedReturn<TUseCase[\"execute\"]>, any>>(useCaseInjectionToken: symbol, ...params: Parameters<TUseCase[\"execute\"]>): Promise<UnpromisedReturn<TUseCase[\"execute\"]>>;\n    execute<T>(callback: () => Promise<T>, options: IExecuteOptions): Promise<T | undefined>;\n    wrap(cb: () => Promise<void>, options: IExecuteOptions): () => Promise<void>;\n    resolveUseCase<TUseCase extends object>(useCaseInjectionToken: symbol): Promise<TUseCase>;\n}\nexport const IUseCaseExecutor = Symbol.for(\"IUseCaseExecutor\");","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { IRouter, routeDefinition } from \"../../../domain/presentation/IRouter\";\nimport { container } from \"../../../domain/core/diContainer\";\nimport { DeepLinkHelper } from \"@stechquick/algae/lib/helpers/deepLinkHelper\";\nimport { IUseCaseExecutor } from \"../../../domain/useCase/IUseCaseExecutor\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'studioapps',\n  setup(__props) {\n\n\nrouteDefinition({ noAuth: true });\n\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst router = container.resolve<IRouter>(IRouter);\nconst routerParams = router.getRouteParams<{ publishID: string }>();\nexecutor.execute(async () => {\n    const publishID = routerParams.publishID;\n    if (!publishID) {\n        throw new Error(\"Missing publishID\");\n    }\n    document.cookie = \"publishID=\" + publishID;\n    DeepLinkHelper.goToLink([{ appStoreUrl: \"https://apps.apple.com/tr/app/studioapps/id6446583055\", appOpenerUrl: \"studioapps://app/7379282a-bfd2-4b12-822b-369fb861c573/addapp?publishid=\" + publishID, platform: \"ios\" },\n    { appStoreUrl: \"https://play.google.com/store/apps/details?id=com.softtech.quick.studioapps\", appOpenerUrl: \"app://com.softtech.quick.studioapps/addapp?publishid=\" + publishID, platform: \"android\" }]);\n}, { loading: false });\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"h4\", null, \"Redirecting...\"))\n}\n}\n\n})","import script from \"./studioapps.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./studioapps.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["getMobileOS","userAgent","navigator","vendor","window","opera","test","MSStream","goToLink","options","retVal","this","opt","find","i","platform","Error","location","replace","appOpenerUrl","setTimeout","appStoreUrl","DeepLinkHelper","syncResolved","Promise","res","then","doNothing","syncResolveProblem","createPromiseData","timeout","resolver","reject","timer","startTimer","clearTimeout","promise","rej","cb","fixSyncResolve","value","cacheResolve","cached","sleep","prom","async","delayWithResolve","dependency","delayTillResolve","dep","dependencies","run","forEach","err","IRouter","Symbol","for","routeDefinition","definition","IUseCaseExecutor","__name","setup","__props","noAuth","executor","routerParams","getRouteParams","execute","publishID","document","cookie","loading","_ctx","_cache"],"sourceRoot":""}