"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[245,801],{92103:(e,n,t)=>{t.d(n,{Z:()=>c});var o=t(34663),a=t.n(o),s=t(7638),r=t.n(s),i=t(79240),l=r()(a());l.i(i.Z),l.push([e.id,"\n.container[data-v-43466965] {\n    padding: 32px 20px 20px;\n}\n.avatarLogo[data-v-43466965] {\n    vertical-align: middle;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n}\n.ExportBtn[data-v-43466965] {\n    border: unset;\n    background: unset;\n    font-style: normal;\n    font-weight: bold;\n    font-size: 16px;\n    letter-spacing: 0.02px;\n    padding: 1px 6px 1px 0;\n}\n.VueTables__sort-icon[data-v-43466965]{\n    float: right;\n    font-size: 15px;\n    font-weight: 600;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/application/modelVersionDialog.vue"],names:[],mappings:";AAwGA;IACI,uBAAuB;AAC3B;AACA;IACI,sBAAsB;IACtB,WAAW;IACX,YAAY;IACZ,kBAAkB;AAEtB;AAEA;IACI,aAAa;IACb,iBAAiB;IACjB,kBAAkB;IAClB,iBAAiB;IACjB,eAAe;IACf,sBAAsB;IACtB,sBAAsB;AAC1B;AACA;IACI,YAAY;IACZ,eAAe;IACf,gBAAgB;AACpB",sourcesContent:["\n<template>\n     <div class=\"container\">\n         <div v-if=\"histories\" class=\"vue-table\">\n            <v-client-table :data=\"histories\" :columns=\"appDatatableColumns\" :options=\"optionsDataTable\">\n                <template #createDate=\"props\">\n                    <span>{{new Intl.DateTimeFormat(\"tr-TR\",options).format(new Date(props.row.createDate))}}</span>\n                </template>\n                <template #updateDate=\"props\">\n                    <span>{{ new Intl.DateTimeFormat(\"tr-TR\",options).format(new Date(props.row.updateDate)) }}</span>\n                </template>\n                <template #actions=\"props\">\n                    <button class='ExportBtn'\n                    :style=\"{ 'color':parseInt(props.row.version) == computedVersion() ? '#A1A1A1' : '#151233'}\"\n                    @click=\"selectVersion(props.row.version)\">{{ parseInt(props.row.version) == computedVersion() ?\n                            'Selected' : 'Select'\n                        }}</button>\n                </template>\n            </v-client-table>\n        </div>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { container } from 'tsyringe';\nimport { ref } from 'vue';\nimport { IModelHistoryInfo } from '../../../../domain/model/models';\nimport { IListModelVersions } from '../../../../domain/useCase/IListModelVersions';\nimport { IUseCaseExecutor } from '../../../../domain/useCase/IUseCaseExecutor';\nimport { ILocalization } from \"../../../../domain/infrastructure/ILocalization\";\nconst props = defineProps<IModelVersionProp>();\nconst histories = ref<Array<IModelHistoryInfo>>([])\nconst selectedModel = ref(props.clickedNode);\nlet allversion: any = [];\nconst appDatatableColumns = ref(['name', 'createDate', 'createdBy', 'updateDate', 'updatedBy', 'shortComment', 'version', 'actions']);\nconst localization = container.resolve<ILocalization>(ILocalization)\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nlet options :any = { month:'2-digit',day:'2-digit', year:'numeric', hour: 'numeric', minute: 'numeric',second: 'numeric'};\nconst optionsDataTable = ref({\n    filterable: false, // omit the `id` column,\n    headings: {\n        name: localization.get('exportName'),\n        createDate: localization.get('exportcreateDate'),\n        createdBy: localization.get('exportcreatedBy'),\n        updateDate: localization.get('exportupdateDate'),\n        updatedBy: localization.get('exportupdatedBy'),\n        shortComment: localization.get('exportshortComment'),\n        version: localization.get('exportversion'),\n    },\n    skin: 'version-table',\n    dateColumns: ['createDate', 'updateDate'],\n        // sortIcon:{\n        //     base:'mdi',\n        //     is:'mdi mdi-unfold-less-horizontal',\n        //     up: 'mdi mdi-arrow-up',\n        //     down: 'mdi mdi-arrow-down'\n        //   },\n    texts: {\n        count: '',\n        noResults: \"Saved version could not be found in the system, the last saved model of the file will be released.\"\n    }\n});\n\n\n\ninterface ISelectedModel {\n    id: string,\n    state: { checked: boolean },\n    text: string,\n    type: string,\n    version: string\n}\ninterface IModelVersionProp {\n    clickedNode: ISelectedModel,\n    versions?:Array<IModelHistoryInfo>,\n    cb?:(version : string) => void;\n}\n\nif(props.versions) {\n    histories.value = props.versions;\n} else {\n    executor.execute(async () => {\n        histories.value = await executor.executeUseCase<IListModelVersions>(IListModelVersions, { modelID: selectedModel.value.id, versionType: \"major\" });\n        allversion = histories.value.map(item => parseInt(item.version!));\n    }, { loading: true });\n}\n\n\nfunction computedVersion() {\n    if (selectedModel.value.version != 'System latest') {\n        return selectedModel.value.version\n    }\n    else {\n        return Math.max(...allversion)\n    }\n\n}\nfunction selectVersion(n: string) {\n    selectedModel.value.version = n\n    props.cb && props.cb(n);\n}\n<\/script>\n<style scoped>\n@import url(\"../../../../styles/IDE3.css\");\n.container {\n    padding: 32px 20px 20px;\n}\n.avatarLogo {\n    vertical-align: middle;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n\n}\n\n.ExportBtn {\n    border: unset;\n    background: unset;\n    font-style: normal;\n    font-weight: bold;\n    font-size: 16px;\n    letter-spacing: 0.02px;\n    padding: 1px 6px 1px 0;\n}\n.VueTables__sort-icon{\n    float: right;\n    font-size: 15px;\n    font-weight: 600;\n}\n</style>"],sourceRoot:""}]);const c=l},70985:(e,n,t)=>{t.d(n,{w:()=>o});const o=Symbol.for("ILocalization")},57348:(e,n,t)=>{t.d(n,{u:()=>o});const o=Symbol.for("IListModelVersions")},60801:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z});var o=t(71093),a=t(66190),s=t(73843),r=t(53266),i=t(57348),l=t(83487),c=t(70985);const d={class:"container"},p={key:0,class:"vue-table"},u=["onClick"],m=(0,o.aZ)({__name:"modelVersionDialog",props:{clickedNode:null,versions:null,cb:{type:Function}},setup(e){const n=e,t=(0,s.iH)([]),m=(0,s.iH)(n.clickedNode);let v=[];const A=(0,s.iH)(["name","createDate","createdBy","updateDate","updatedBy","shortComment","version","actions"]),g=r.nC.resolve(c.w),I=r.nC.resolve(l.y);let f={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};const x=(0,s.iH)({filterable:!1,headings:{name:g.get("exportName"),createDate:g.get("exportcreateDate"),createdBy:g.get("exportcreatedBy"),updateDate:g.get("exportupdateDate"),updatedBy:g.get("exportupdatedBy"),shortComment:g.get("exportshortComment"),version:g.get("exportversion")},skin:"version-table",dateColumns:["createDate","updateDate"],texts:{count:"",noResults:"Saved version could not be found in the system, the last saved model of the file will be released."}});function y(){return"System latest"!=m.value.version?m.value.version:Math.max(...v)}function h(e){m.value.version=e,n.cb&&n.cb(e)}return n.versions?t.value=n.versions:I.execute((async()=>{t.value=await I.executeUseCase(i.u,{modelID:m.value.id,versionType:"major"}),v=t.value.map((e=>parseInt(e.version)))}),{loading:!0}),(e,n)=>{const r=(0,o.up)("v-client-table");return(0,o.wg)(),(0,o.iD)("div",d,[t.value?((0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(r,{data:t.value,columns:A.value,options:x.value},{createDate:(0,o.w5)((e=>[(0,o._)("span",null,(0,a.toDisplayString)(new Intl.DateTimeFormat("tr-TR",(0,s.SU)(f)).format(new Date(e.row.createDate))),1)])),updateDate:(0,o.w5)((e=>[(0,o._)("span",null,(0,a.toDisplayString)(new Intl.DateTimeFormat("tr-TR",(0,s.SU)(f)).format(new Date(e.row.updateDate))),1)])),actions:(0,o.w5)((e=>[(0,o._)("button",{class:"ExportBtn",style:(0,a.normalizeStyle)({color:parseInt(e.row.version)==y()?"#A1A1A1":"#151233"}),onClick:n=>h(e.row.version)},(0,a.toDisplayString)(parseInt(e.row.version)==y()?"Selected":"Select"),13,u)])),_:1},8,["data","columns","options"])])):(0,o.kq)("v-if",!0)])}}});var v=t(17450),A=t.n(v),g=t(29530),I=t.n(g),f=t(16199),x=t.n(f),y=t(40458),h=t.n(y),b=t(62916),D=t.n(b),C=t(92165),w=t.n(C),B=t(92103),k={};k.styleTagTransform=w(),k.setAttributes=h(),k.insert=x().bind(null,"head"),k.domAPI=I(),k.insertStyleElement=D(),A()(B.Z,k),B.Z&&B.Z.locals&&B.Z.locals;const z=(0,t(32525).Z)(m,[["__scopeId","data-v-43466965"]])}}]);
//# sourceMappingURL=245.js.map?ver=0.0.286_1702641107721