"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[4771],{54906:(n,e,i)=>{i.d(e,{Z:()=>s});var t=i(34663),a=i.n(t),l=i(7638),o=i.n(l)()(a());o.push([n.id,"\n*[data-v-7dd753ca] {\n        font-family: 'Roboto';\n}\n.container[data-v-7dd753ca] {\n        padding: 32px 20px 20px;\n}\n.name-label[data-v-7dd753ca] {\n        font-weight: 500;\n        font-size: 15px;\n        line-height: 18px;\n        color: #151233;\n        margin-bottom: 4px;\n}\n.e-mail-input[data-v-7dd753ca] {\n        border: 1px solid #BCBCBC;\n        border-radius: 4px;\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        padding: 8px 8px 8px 12px;\n        width: 95%;\n        font-size: 15px;\n        color: #212121;\n        outline: none;\n}\n.e-mail-input[data-v-7dd753ca]::placeholder {\n        color: #BCBCBC\n}\n.buttons-div[data-v-7dd753ca] {\n        display: flex;\n        justify-content: end;\n}\n.cancel-button[data-v-7dd753ca] {\n        font-weight: 500;\n        font-size: 16px;\n        text-align: center;\n        color: #757575;\n        display: flex;\n        align-items: center;\n        padding: 8px 16px;\n        border-radius: 4px;\n        margin-right: 4px;\n        border: none;\n        background: transparent;\n}\n.send-invite-button[data-v-7dd753ca] {\n        font-weight: 500;\n        font-size: 16px;\n        text-align: center;\n        color: #FFFFFF;\n        background: #151233;\n        display: flex;\n        align-items: center;\n        padding: 8px 16px;\n        border-radius: 4px;\n        border: none;\n}\n.send-invite-button[data-v-7dd753ca]:disabled {\n        color: #757575\n}\n.button-tooltip[data-v-7dd753ca] {\n        visibility: hidden;\n        position: absolute;\n        background: #757575;\n        color: #FFFFFF;\n        font-size: 11px;\n        font-family: 'Roboto';\n        text-align: center;\n        border-radius: 4px;\n        letter-spacing: 0.2px;\n        padding: 6px 8px 6px 8px;\n        top: 56px;\n        left: 63px;\n        opacity: 0;\n}\n.send-invite-button:disabled:hover + .button-tooltip[data-v-7dd753ca] {\n        visibility: visible;\n        transition: opacity 0.3s ease-out 0.5s;\n        opacity: 1;\n}\n.remove-field[data-v-7dd753ca] {\n        display: none;\n        padding: 0 5px;\n        width: 5%;\n}\n.e-mail-addresses[data-v-7dd753ca] {\n        display: flex;\n        margin-bottom: 10px;\n}\n.e-mail-input:hover + .remove-field[data-v-7dd753ca],\n    .remove-field[data-v-7dd753ca]:hover {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 24px;\n        cursor: pointer;\n}\n.multiple-address-info[data-v-7dd753ca] {\n        font-size: 14px;\n        line-height: 16px;\n        display: flex;\n        align-items: center;\n        padding: 12px;\n        margin: 20px 0 52px;\n        background: #F5F5FA;\n        border-radius: 4px;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/organization/invitePeopleDialog.vue"],names:[],mappings:";AA+HI;QACI,qBAAqB;AACzB;AACA;QACI,uBAAuB;AAC3B;AACA;QACI,gBAAgB;QAChB,eAAe;QACf,iBAAiB;QACjB,cAAc;QACd,kBAAkB;AACtB;AACA;QACI,yBAAyB;QACzB,kBAAkB;QAClB,aAAa;QACb,mBAAmB;QACnB,mBAAmB;QACnB,yBAAyB;QACzB,UAAU;QACV,eAAe;QACf,cAAc;QACd,aAAa;AACjB;AACA;QACI;AACJ;AACA;QACI,aAAa;QACb,oBAAoB;AACxB;AACA;QACI,gBAAgB;QAChB,eAAe;QACf,kBAAkB;QAClB,cAAc;QACd,aAAa;QACb,mBAAmB;QACnB,iBAAiB;QACjB,kBAAkB;QAClB,iBAAiB;QACjB,YAAY;QACZ,uBAAuB;AAC3B;AACA;QACI,gBAAgB;QAChB,eAAe;QACf,kBAAkB;QAClB,cAAc;QACd,mBAAmB;QACnB,aAAa;QACb,mBAAmB;QACnB,iBAAiB;QACjB,kBAAkB;QAClB,YAAY;AAChB;AACA;QACI;AACJ;AACA;QACI,kBAAkB;QAClB,kBAAkB;QAClB,mBAAmB;QACnB,cAAc;QACd,eAAe;QACf,qBAAqB;QACrB,kBAAkB;QAClB,kBAAkB;QAClB,qBAAqB;QACrB,wBAAwB;QACxB,SAAS;QACT,UAAU;QACV,UAAU;AACd;AACA;QACI,mBAAmB;QACnB,sCAAsC;QACtC,UAAU;AACd;AACA;QACI,aAAa;QACb,cAAc;QACd,SAAS;AACb;AACA;QACI,aAAa;QACb,mBAAmB;AACvB;AACA;;QAEI,aAAa;QACb,mBAAmB;QACnB,uBAAuB;QACvB,eAAe;QACf,eAAe;AACnB;AACA;QACI,eAAe;QACf,iBAAiB;QACjB,aAAa;QACb,mBAAmB;QACnB,aAAa;QACb,mBAAmB;QACnB,mBAAmB;QACnB,kBAAkB;AACtB",sourcesContent:['<template>\n    <div class="container">\n        <div class="label-div">\n            <label class="name-label">Email Adresses</label>\n        </div>\n        <div style="overflow: auto; max-height: 470px;">\n            <div v-for="(field, index) in invitations" :key="index" class="e-mail-addresses">\n                <input class="e-mail-input" :ref="\'field-\' + index" v-model="field.mail" @paste="handlePaste($event, index)" size="50" @input="addField(); field.mail = field.mail.toLowerCase()"\n                    placeholder="name@example.com" />\n                <span class="remove-field" @click="removeField(index)"><i class="mdi mdi-close"></i></span>\n             </div>\n        </div>\n       \n        <div class="multiple-address-info">\n            <i class="mdi mdi-information" style="font-size: 24px; color: #151233; margin-right: 4px;"></i>\n            <span>You can copy and paste multiple email addresses at once by using \';\' between items.</span>\n        </div>\n        <div class="buttons-div">\n            <button class="cancel-button" @click="close()">Cancel</button>\n            <button id="sendButton" class="send-invite-button" :disabled="!checkEmailValidation() || checkDuplicateEmails()" @click="inviteMember">SEND INVITATION</button>\n            <span v-if="!checkEmailValidation()" class="button-tooltip" style="top: 340px; left: 470px; z-index: 1; width: 174px;">Email addresses must be valid.</span>\n            <span v-if="checkDuplicateEmails()" class="button-tooltip" style="top: 340px; left: 470px; z-index: 1; width: 174px;">There are duplicate mails.</span>\n        </div>\n    </div>\n</template>\n<script setup lang="ts">\n    import { ref } from "vue";\n    import { container } from "../../../../../domain/core/diContainer";\n    import { IOrganizationUseCase } from "../../../../../domain/useCase/IOrganizationUseCase";\n    import { IUseCaseExecutor } from "../../../../../domain/useCase/IUseCaseExecutor";\n    import { IViewModel } from "../../../../../domain/viewModel/IViewModel";\n    import { IRouter } from "../../../../../domain/presentation/IRouter";\n    import { INotification } from "../../../../../domain/presentation/INotification";\n    \n    interface IInvitationItem {\n        mail: string;\n        name?: string;\n        id?: string;\n    }\n    type InvitationList = Array<IInvitationItem>;\n    const viewModel = container.resolve<IViewModel>(IViewModel);\n    const organization = container.resolve<IOrganizationUseCase>(IOrganizationUseCase);\n    const executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\n    const router = container.resolve<IRouter>(IRouter);\n    const selectedOrganizationId = ref(viewModel.user?.selectedOrganization?.id);\n    const emit = defineEmits(["close"]);\n    const invitations = ref<InvitationList>([{ mail: "" }, { mail: "" },{ mail: "" }]);\n    const addField = (value?: IInvitationItem) => {\n        let emptyInputCount: number = 0;\n        invitations.value.forEach(element => {\n            if(element.mail == "") {\n                emptyInputCount++\n            }\n        });\n        if(emptyInputCount == 0) {\n            invitations.value.push(value || { mail: "" });\n        }\n    };\n    function close() {\n        emit("close");\n    }\n    const removeField = (index: number) => {\n        if (invitations.value.length <= 1) { insertField(0, undefined, true); return false; }\n        invitations.value.splice(index, 1); return true;\n    };\n    const checkEmailValidation = () => {\n        let isAllEmailsValid = true;\n        let emptyMailCount = 0;\n        invitations.value.forEach(invite => {\n            if(invite.mail != \'\' && !validateMail(invite.mail)) {\n                isAllEmailsValid = false;\n                return isAllEmailsValid;\n            }\n        });\n        invitations.value.forEach(invite => {\n            if(invite.mail == \'\') {\n                emptyMailCount++;\n            }\n        })\n        if(emptyMailCount == invitations.value.length) {\n            isAllEmailsValid = false;\n        }\n        return isAllEmailsValid;\n    }\n    function checkDuplicateEmails () {\n        const emailAddresses = invitations.value.filter(item => item.mail != \'\').map(function(item){ return item.mail; })\n        const isDuplicate = emailAddresses.some(function(item, idx){ return emailAddresses.indexOf(item) != idx;} );\n        return isDuplicate;\n    }\n    const insertField = (index: number, value: IInvitationItem | undefined, override: boolean) => {\n        value = value || { mail: "" };\n        if (override) {\n            invitations.value.splice(index, 1, value);\n        } else {\n            invitations.value.splice(index, 0, value);\n        }\n    };\n    const handlePaste = (event: ClipboardEvent, index: number) => {\n        const { clipboardData } = event;\n        if (!clipboardData) { return; }\n\n        event.preventDefault();\n        const text = clipboardData.getData(\'text\');\n        const values = text.split(/[\\s;]+/);\n\n        const override = invitations.value[index].mail == "";\n\n        insertField(index, { mail: values[0] }, override);\n        values.slice(1).forEach((value, curIndex) => insertField(index + curIndex + 1, { mail: value }, false));\n    }\n    function onManageOrganization() {\n        router.push(`/organization/manage/${selectedOrganizationId.value}`);\n    }\n    const inviteMember = async () => {\n        executor.execute(async () => {\n            const invProm = organization.createInvitation({ invitations: invitations.value.map(inv => ({ email: inv.mail })) });\n            await invProm;\n            while (removeField(0));\n            await close();\n            await onManageOrganization();\n        }, { loading: true });\n    };\n    const validateMail = (email: string) => !email ? true : /^(?=.{1,64}@)[a-zA-Z0-9!#$%&\'*+/=?^_`{|}~-]+(\\.[a-zA-Z0-9!#$%&\'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*(\\.[a-zA-Z]{2,})$/.test(email); //RFC 5322-compliant 🤔\n    // /(?:[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*|"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.test(email); // 🤯 https://www.w3resource.com/javascript/form/email-validation.php // ne halt ettiğini anlamadım, isterseniz içinde 1 @ ve 1 . var mı diye de bakabiliriz. 😂\n\n<\/script>\n<style scoped>\n    * {\n        font-family: \'Roboto\';\n    }\n    .container {\n        padding: 32px 20px 20px;\n    }\n    .name-label {\n        font-weight: 500;\n        font-size: 15px;\n        line-height: 18px;\n        color: #151233;\n        margin-bottom: 4px;\n    }\n    .e-mail-input {\n        border: 1px solid #BCBCBC;\n        border-radius: 4px;\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        padding: 8px 8px 8px 12px;\n        width: 95%;\n        font-size: 15px;\n        color: #212121;\n        outline: none;\n    }\n    .e-mail-input::placeholder {\n        color: #BCBCBC\n    }   \n    .buttons-div {\n        display: flex;\n        justify-content: end;\n    }\n    .cancel-button {\n        font-weight: 500;\n        font-size: 16px;\n        text-align: center;\n        color: #757575;\n        display: flex;\n        align-items: center;\n        padding: 8px 16px;\n        border-radius: 4px;\n        margin-right: 4px;\n        border: none;\n        background: transparent;\n    }\n    .send-invite-button {\n        font-weight: 500;\n        font-size: 16px;\n        text-align: center;\n        color: #FFFFFF;\n        background: #151233;\n        display: flex;\n        align-items: center;\n        padding: 8px 16px;\n        border-radius: 4px;\n        border: none;\n    }\n    .send-invite-button:disabled {\n        color: #757575\n    }\n    .button-tooltip {\n        visibility: hidden;\n        position: absolute;\n        background: #757575;\n        color: #FFFFFF;\n        font-size: 11px;\n        font-family: \'Roboto\';\n        text-align: center;\n        border-radius: 4px;\n        letter-spacing: 0.2px;\n        padding: 6px 8px 6px 8px;\n        top: 56px;\n        left: 63px;\n        opacity: 0;\n    }\n    .send-invite-button:disabled:hover + .button-tooltip {\n        visibility: visible;\n        transition: opacity 0.3s ease-out 0.5s;\n        opacity: 1;\n    } \n    .remove-field {\n        display: none;\n        padding: 0 5px;\n        width: 5%;\n    }\n    .e-mail-addresses {\n        display: flex;\n        margin-bottom: 10px;\n    }\n    .e-mail-input:hover + .remove-field,\n    .remove-field:hover {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 24px;\n        cursor: pointer;\n    }\n    .multiple-address-info {\n        font-size: 14px;\n        line-height: 16px;\n        display: flex;\n        align-items: center;\n        padding: 12px;\n        margin: 20px 0 52px;\n        background: #F5F5FA;\n        border-radius: 4px;\n    }\n</style>'],sourceRoot:""}]);const s=o},4771:(n,e,i)=>{i.r(e),i.d(e,{default:()=>j});var t=i(71093),a=i(46233),l=i(73843),o=i(5627),s=i(4625),d=i(83487),r=i(88613),A=i(1937);const c=n=>((0,t.dD)("data-v-7dd753ca"),n=n(),(0,t.Cn)(),n),p={class:"container"},m=c((()=>(0,t._)("div",{class:"label-div"},[(0,t._)("label",{class:"name-label"},"Email Adresses")],-1))),u={style:{overflow:"auto","max-height":"470px"}},v=["onUpdate:modelValue","onPaste","onInput"],x=["onClick"],f=[c((()=>(0,t._)("i",{class:"mdi mdi-close"},null,-1)))],C=c((()=>(0,t._)("div",{class:"multiple-address-info"},[(0,t._)("i",{class:"mdi mdi-information",style:{"font-size":"24px",color:"#151233","margin-right":"4px"}}),(0,t._)("span",null,"You can copy and paste multiple email addresses at once by using ';' between items.")],-1))),B={class:"buttons-div"},b=["disabled"],g={key:0,class:"button-tooltip",style:{top:"340px",left:"470px","z-index":"1",width:"174px"}},h={key:1,class:"button-tooltip",style:{top:"340px",left:"470px","z-index":"1",width:"174px"}},Q=(0,t.aZ)({__name:"invitePeopleDialog",emits:["close"],setup(n,{emit:e}){var i,c;const Q=o.nC.resolve(r.J),y=o.nC.resolve(s.M),I=o.nC.resolve(d.y),z=o.nC.resolve(A.v5),k=(0,l.iH)(null===(c=null===(i=Q.user)||void 0===i?void 0:i.selectedOrganization)||void 0===c?void 0:c.id),w=(0,l.iH)([{mail:""},{mail:""},{mail:""}]);function F(){e("close")}const E=n=>w.value.length<=1?(M(0,void 0,!0),!1):(w.value.splice(n,1),!0),_=()=>{let n=!0,e=0;return w.value.forEach((e=>{if(""!=e.mail&&!V(e.mail))return n=!1,n})),w.value.forEach((n=>{""==n.mail&&e++})),e==w.value.length&&(n=!1),n};function D(){const n=w.value.filter((n=>""!=n.mail)).map((function(n){return n.mail}));return n.some((function(e,i){return n.indexOf(e)!=i}))}const M=(n,e,i)=>{e=e||{mail:""},i?w.value.splice(n,1,e):w.value.splice(n,0,e)},U=async()=>{I.execute((async()=>{const n=y.createInvitation({invitations:w.value.map((n=>({email:n.mail})))});for(await n;E(0););await F(),await void z.push(`/organization/manage/${k.value}`)}),{loading:!0})},V=n=>!n||/^(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,})$/.test(n);return(n,e)=>((0,t.wg)(),(0,t.iD)("div",p,[m,(0,t._)("div",u,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(w.value,((n,e)=>((0,t.wg)(),(0,t.iD)("div",{key:e,class:"e-mail-addresses"},[(0,t.wy)((0,t._)("input",{class:"e-mail-input",ref_for:!0,ref:"field-"+e,"onUpdate:modelValue":e=>n.mail=e,onPaste:n=>((n,e)=>{const{clipboardData:i}=n;if(!i)return;n.preventDefault();const t=i.getData("text").split(/[\s;]+/),a=""==w.value[e].mail;M(e,{mail:t[0]},a),t.slice(1).forEach(((n,i)=>M(e+i+1,{mail:n},!1)))})(n,e),size:"50",onInput:e=>{(n=>{let e=0;w.value.forEach((n=>{""==n.mail&&e++})),0==e&&w.value.push({mail:""})})(),n.mail=n.mail.toLowerCase()},placeholder:"name@example.com"},null,40,v),[[a.vModelText,n.mail]]),(0,t._)("span",{class:"remove-field",onClick:n=>E(e)},f,8,x)])))),128))]),C,(0,t._)("div",B,[(0,t._)("button",{class:"cancel-button",onClick:e[0]||(e[0]=n=>F())},"Cancel"),(0,t._)("button",{id:"sendButton",class:"send-invite-button",disabled:!_()||D(),onClick:U},"SEND INVITATION",8,b),_()?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)("span",g,"Email addresses must be valid.")),D()?((0,t.wg)(),(0,t.iD)("span",h,"There are duplicate mails.")):(0,t.kq)("v-if",!0)])]))}});var y=i(17450),I=i.n(y),z=i(29530),k=i.n(z),w=i(16199),F=i.n(w),E=i(40458),_=i.n(E),D=i(62916),M=i.n(D),U=i(92165),V=i.n(U),Z=i(54906),O={};O.styleTagTransform=V(),O.setAttributes=_(),O.insert=F().bind(null,"head"),O.domAPI=k(),O.insertStyleElement=M(),I()(Z.Z,O),Z.Z&&Z.Z.locals&&Z.Z.locals;const j=(0,i(32525).Z)(Q,[["__scopeId","data-v-7dd753ca"]])}}]);
//# sourceMappingURL=4771.js.map?ver=0.0.286_1702817773633