"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[1093,8613],{86329:(n,a,i)=>{i.d(a,{Z:()=>d});var e=i(34663),o=i.n(e),t=i(7638),l=i.n(t),r=i(69345),s=l()(o());s.i(r.Z),s.push([n.id,"\n","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const d=s},73268:(n,a,i)=>{i.d(a,{Z:()=>r});var e=i(34663),o=i.n(e),t=i(7638),l=i.n(t)()(o());l.push([n.id,"\n.organization-info-type[data-v-cf095892] {\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    background: #FFFFFF;\n    margin-right: 37px;\n    padding: 24px 24px 18px;\n    display: flex;\n    flex-direction: column;\n}\n.organization-info-type[data-v-cf095892]:last-child {\n    margin-right: 0;\n}\n.organization-info-type-name[data-v-cf095892] {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #757575;\n    margin-bottom: 20px;\n    min-width: 100px;\n    flex: 1;\n}\n.organization-info[data-v-cf095892] {\n    font-weight: 500;\n    font-size: 28px;\n    line-height: 33px;\n    color: #151233;\n}\n.div-title[data-v-cf095892] {\n    font-weight: 500;\n    font-size: 24px;\n    line-height: 28px;\n    color: #151233;\n    margin-bottom: 20px;\n}\n.azure-info-table[data-v-cf095892] {\n    background: #FFFFFF;\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    width: 100%;\n}\ntd[data-v-cf095892]:hover {\n    background-color: none !important;\n}\n.azure-info-table tr[data-v-cf095892]:hover {\n    background-color: #EEEEEE;\n}\n.azure-info-table th[data-v-cf095892] {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 18px 36px\n}\n.azure-info-table td[data-v-cf095892] {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 20px 36px;\n    color: #212121;\n    font-size: 14px;\n    line-height: 16px;\n}\n.azure-info-table .thead-azure[data-v-cf095892] {\n    color: #616161;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.view-btn[data-v-cf095892] {\n    background: none;\n    border: none;\n    color: #2C5A86;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.tags-div[data-v-cf095892] {\n    background: #FFFFFF;\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    padding: 14px 24px;\n    display: flex;\n    align-items: center;\n}\n.tags-title[data-v-cf095892] {\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 19px;\n    color: #757575;\n    margin-right: 24px;\n}\n.tag-name[data-v-cf095892] {\n    padding: 5.5px 8px;\n    background: #D0D1E9;\n    display: flex;\n    justify-content: center;\n    border-radius: 4px;\n    margin-right: 8px;\n    font-size: 14px;\n    color: #2F3160;\n    white-space: nowrap;\n    font-weight: 500;\n    cursor: pointer;\n}\n.manage-org-div[data-v-cf095892] {\n    width: 77%;\n    display: flex;\n    justify-content: end;\n    position: absolute;\n    top: 80px;\n    right: 36px;\n}\n.manage-btn[data-v-cf095892] {\n    border: 1px solid #151233;\n    border-radius: 4px;\n    padding: 1.5px 16px;\n    font-size: 15px;\n    color: #151233;\n    display: flex;\n    align-items: center;\n    font-weight: 500;\n}\n.delete-org-btn[data-v-cf095892] {\n    background: #CBCBCB;\n    border-radius: 4px;\n    color: #212121;\n    border: none;\n    margin-left: 12px;\n    display: flex;\n    align-items: center;\n    padding: 1.5px 16px;\n    font-size: 15px;\n    font-weight: 500;\n}\n.view-btn[data-v-cf095892] {\n    background: none;\n    border: none;\n    color: #2C5A86;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\ntd[data-v-cf095892]:hover {\n    background-color: none !important;\n}","",{version:3,sources:["webpack://./src/presentation/vue3/pages/backoffice/organization.vue"],names:[],mappings:";AA0PA;IACI,yBAAyB;IACzB,8CAA8C;IAC9C,mBAAmB;IACnB,mBAAmB;IACnB,kBAAkB;IAClB,uBAAuB;IACvB,aAAa;IACb,sBAAsB;AAC1B;AAEA;IACI,eAAe;AACnB;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;IACd,mBAAmB;IACnB,gBAAgB;IAChB,OAAO;AACX;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;AAClB;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;IACd,mBAAmB;AACvB;AAEA;IACI,mBAAmB;IACnB,yBAAyB;IACzB,8CAA8C;IAC9C,mBAAmB;IACnB,WAAW;AACf;AAEA;IACI,iCAAiC;AACrC;AAEA;IACI,yBAAyB;AAC7B;AAEA;IACI,gCAAgC;IAChC;AACJ;AAEA;IACI,gCAAgC;IAChC,kBAAkB;IAClB,cAAc;IACd,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,mBAAmB;IACnB,yBAAyB;IACzB,8CAA8C;IAC9C,mBAAmB;IACnB,kBAAkB;IAClB,aAAa;IACb,mBAAmB;AACvB;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;IACd,kBAAkB;AACtB;AAEA;IACI,kBAAkB;IAClB,mBAAmB;IACnB,aAAa;IACb,uBAAuB;IACvB,kBAAkB;IAClB,iBAAiB;IACjB,eAAe;IACf,cAAc;IACd,mBAAmB;IACnB,gBAAgB;IAChB,eAAe;AACnB;AAEA;IACI,UAAU;IACV,aAAa;IACb,oBAAoB;IACpB,kBAAkB;IAClB,SAAS;IACT,WAAW;AACf;AAEA;IACI,yBAAyB;IACzB,kBAAkB;IAClB,mBAAmB;IACnB,eAAe;IACf,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,gBAAgB;AACpB;AAEA;IACI,mBAAmB;IACnB,kBAAkB;IAClB,cAAc;IACd,YAAY;IACZ,iBAAiB;IACjB,aAAa;IACb,mBAAmB;IACnB,mBAAmB;IACnB,eAAe;IACf,gBAAgB;AACpB;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,iBAAiB;AACrB;AAEA;IACI,iCAAiC;AACrC",sourcesContent:['<script setup lang="ts">\nimport { defineAsyncComponent, onBeforeMount, ref } from "vue";\nimport { IUser_SUSI } from "../../../../../../common/qCloudTemp/authentication";\nimport { container } from "../../../../domain/core/diContainer";\nimport { IApplication } from "../../../../domain/model/models";\nimport { IDialog } from "../../../../domain/presentation/IDialog";\nimport { IRouter } from "../../../../domain/presentation/IRouter";\nimport { IAzureResourceGroupUrls, IBackofficeUseCase, IOrganizationUIExtended } from "../../../../domain/useCase/IBackofficeUseCase";\nimport { ITableMethods } from "../../../../domain/useCase/ITableMethods";\nimport { IUseCaseExecutor } from "../../../../domain/useCase/IUseCaseExecutor";\nimport { IViewModel } from "../../../../domain/viewModel/IViewModel";\nimport AppList from "../../components/backoffice/application/applicationList.vue";\nimport UserList from "../../components/backoffice/user/userList.vue";\n\n\nconst router = container.resolve<IRouter>(IRouter);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst backofficeUseCase = container.resolve<IBackofficeUseCase>(IBackofficeUseCase);\nconst tableMethods = container.resolve<ITableMethods>(ITableMethods);\nconst viewModel = container.resolve<IViewModel>(IViewModel);\n\n\nconst routerParams = router.getRouteParams<{ organizationId: string }>();\nbackofficeUseCase.setBreadcrumb(["Organizations", "Organization Detail"]);\nconst organization = ref<IOrganizationUIExtended>();\nconst dialog = container.resolve<IDialog>(IDialog);\nconst userList = ref<Array<IUser_SUSI>>([]);\nconst appList = ref<Array<IApplication>>([]);\nconst rgUrls = ref<IAzureResourceGroupUrls>();\nconst orgTags = ref<Array<{ id: string, name: string }>>([]);\nconst usersDataIsReady = ref(false);\nconst appDataIsReady = ref(false);\nconst organizationGroupName = ref("");\n\n\nonBeforeMount(async () => {\n    await getOrganizationInfo();\n    await listTags()\n    getTagData();\n    listOrganizationUsers();\n    listOrganizationApps();\n    getResourceGroupUrls();\n    getOrgGroupName();\n})\n\nasync function getOrganizationInfo() {\n    await executor.execute(async () => {\n        organization.value = await backofficeUseCase.getOrganizationInfo(routerParams.organizationId);\n    }, { loading: true });\n}\n\n\nfunction openManageOrganizationDialog() {\n    const closeCb = (reason: "close" | "outclick" | "component") => {\n        if (reason == "component") {\n            getTagData();\n        }\n    }\n    dialog.showDialog(\n        defineAsyncComponent(() => import(`../../components/dialogs/backoffice/manageOrganization.vue`)),\n        { closable: true, title: "Manage Organization", width: "592px", maxHeight: "650px", closeCb }, { organization: organization.value }\n    );\n}\nfunction openDeleteOrganizationDialog() {\n    dialog.showDialog(\n        defineAsyncComponent(() => import(`../../components/dialogs/backoffice/deleteConfirmation.vue`)),\n        { closable: true, title: "Delete Organization", width: "577px", maxHeight: "206px" },\n        {\n            infoText: \'Organization Name\',\n            placeholder: `Write organization name \'${organization.value?.name}\' to delete`, validText: organization.value?.name,\n            deleteCb: async () => {\n                await executor.execute(async () => {\n                    await backofficeUseCase.deleteOrganization(organization.value?.id!, organization.value?.name!);\n                    router.push("/backoffice/organizations");\n                }, { loading: true });\n            }\n        }\n    );\n}\nfunction listOrganizationUsers() {\n    const organizationId = routerParams.organizationId;\n    executor.execute(async () => {\n        userList.value = await backofficeUseCase.listOrganizationUsers(organizationId);\n        usersDataIsReady.value = true;\n    }, { loading: true });\n}\nfunction listOrganizationApps() {\n    const organizationId = routerParams.organizationId;\n    executor.execute(async () => {\n        appList.value = await backofficeUseCase.listOrganizationApps(organizationId);\n        appDataIsReady.value = true;\n    }, { loading: true });\n}\n\nfunction getResourceGroupUrls() {\n    executor.execute(async () => {\n        if (!organization.value?.cloud?.azure?.resourceGroupID) {\n            console.log(`Organization \'${organization.value!.id} - ${organization.value!.name}\' has no "cloud.azure.resourceGroupID"!`)\n            return;\n        }\n        rgUrls.value = await backofficeUseCase.getAzureResourceGroupUrls(organization.value.cloud.azure.resourceGroupID!);\n    }, { loading: true });\n}\nfunction openResourceGroupOverviewPage() {\n    window.open(rgUrls.value!.overviewUrl, \'_blank\');\n}\nfunction openResourceGroupCostPage() {\n    window.open(rgUrls.value!.costUrl, \'_blank\');\n}\nasync function listTags() {\n    await executor.execute(async () => {\n        await backofficeUseCase.listTags();\n    }, { loading: true })\n}\nfunction getTagData() {\n    executor.execute(async () => {\n        await getOrganizationInfo();\n    }, { loading: true });\n    const tagsDict: Record<string, string> = {};\n    orgTags.value = [];\n    viewModel.backoffice?.tags?.forEach(tag => tagsDict[tag.ID] = tag.name);\n    organization.value?.tags?.forEach(tagID => {\n        const tagData = { id: tagID, name: tagsDict[tagID] };\n        orgTags.value?.push(tagData);\n    })\n}\nfunction viewTag(tagId: string) {\n    router.push(`/backoffice/tag/${tagId}`);\n}\nfunction getOrgGroupName() {\n    executor.execute(async () => {\n        if (organization.value!.organizationGroupId) {\n            const orgGroupName = await backofficeUseCase.getOrgGroupNameByOrgID(organization.value!.id);\n            if (orgGroupName) {\n                organizationGroupName.value = orgGroupName;\n            }\n            else {\n                organizationGroupName.value = "No Organization Group"\n            }\n        }\n        else {\n            organizationGroupName.value = "No Organization Group"\n        }\n    }, { loading: true })\n}\n<\/script>\n\n<template>\n    <div>\n        <div class="manage-org-div">\n            <button class="manage-btn" @click="openManageOrganizationDialog()"><i class="mdi mdi-cog"\n                    style="font-size: 20px; margin-right: 4px"></i><span>MANAGE ORGANIZATION</span></button>\n            <button class="delete-org-btn" @click="openDeleteOrganizationDialog()"><i class="mdi mdi-delete"\n                    style="font-size: 20px; margin-right: 4px"></i><span>DELETE</span></button>\n        </div>\n        <div style="display:flex; margin-bottom: 32px;">\n            <div class="organization-info-type">\n                <div class="organization-info-type-name">Name</div>\n                <div class="organization-info">{{ organization?.name }}</div>\n            </div>\n            <div class="organization-info-type">\n                <div class="organization-info-type-name">Users</div>\n                <div class="organization-info">{{ userList.length }}</div>\n            </div>\n            <div class="organization-info-type">\n                <div class="organization-info-type-name">Apps</div>\n                <div class="organization-info">{{ appList.length }}</div>\n            </div>\n            <div class="organization-info-type">\n                <div class="organization-info-type-name">UI Page Count</div>\n                <div class="organization-info">{{ organization?.calculatedInfo?.uiPageCount }}</div>\n            </div>\n            <div class="organization-info-type">\n                <div class="organization-info-type-name">UI Page Size</div>\n                <div class="organization-info">{{ organization?.calculatedInfo?.uiPageSize ?\n                    Math.ceil((organization.calculatedInfo.uiPageSize) / (1024)) + \'KB\' : \'\' }}</div>\n            </div>\n            <div class="organization-info-type" style="flex: 1;">\n                <div class="organization-info-type-name">Date Created</div>\n                <div class="organization-info">{{ tableMethods.formatDate(organization?.createDate) }}</div>\n            </div>\n            <div class="organization-info-type" style="flex: 1;">\n                <div class="organization-info-type-name">ID</div>\n                <div class="organization-info" style="font-size: 20px;">{{ organization?.id }}</div>\n            </div>\n            \x3c!-- <div class="organization-info-type">\n            <div class="organization-info-type-name">DB Name</div>\n            <div class="organization-info">{{ organization?.dbName }}</div> --\x3e\n            <div class="organization-info-type">\n                <div class="organization-info-type-name">Organization Group</div>\n                <div class="organization-info">{{ organizationGroupName }}</div>\n            </div>\n        </div> \n        <div style="margin-bottom: 32px;">\n            <div class="tags-div">\n                <span class="tags-title">Tags</span>\n                <span v-for="tag in orgTags" :key="tag.id" class="tag-name" @click="viewTag(tag.id)">{{ tag.name }}</span>\n            </div>\n        </div>\n        <div style="margin-bottom: 32px;">\n            <div v-if="usersDataIsReady">\n                <UserList :users="userList" @refreshTable="listOrganizationUsers"></UserList>\n            </div>\n        </div>\n        <div style="margin-bottom: 32px;">\n            <div v-if="appDataIsReady">\n                <AppList :apps="appList"></AppList>\n            </div>\n        </div>\n        <div style="margin-bottom: 32px;">\n            <div class="div-title">Azure</div>\n            <div>\n                <table class="azure-info-table">\n                    <tr>\n                        <td class="thead-azure col-xl-4">resourceGroupId</td>\n                        <td v-if="organization?.cloud?.azure?.resourceGroupID" class="col-xl-7">{{\n                            organization?.cloud?.azure?.resourceGroupID }}</td>\n                        <td v-else>-</td>\n                        <td class="col-xl-1">\n                            <div><button v-if="rgUrls?.overviewUrl" class="view-btn"\n                                    @click="openResourceGroupOverviewPage">VIEW</button></div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="thead-azure">modelStorageID</td>\n                        <td v-if="organization?.cloud?.azure?.modelStorageID">{{\n                            organization?.cloud?.azure?.modelStorageID }}</td>\n                        <td v-else>-</td>\n                        <td></td>\n                    </tr>\n                    <tr>\n                        <td class="thead-azure">cost</td>\n                        <td>-</td>\n                        <td>\n                            <div><button v-if="rgUrls?.costUrl" class="view-btn"\n                                    @click="openResourceGroupCostPage">VIEW</button></div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="thead-azure">costDate</td>\n                        <td>-</td>\n                        <td></td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style scoped>\n.organization-info-type {\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    background: #FFFFFF;\n    margin-right: 37px;\n    padding: 24px 24px 18px;\n    display: flex;\n    flex-direction: column;\n}\n\n.organization-info-type:last-child {\n    margin-right: 0;\n}\n\n.organization-info-type-name {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #757575;\n    margin-bottom: 20px;\n    min-width: 100px;\n    flex: 1;\n}\n\n.organization-info {\n    font-weight: 500;\n    font-size: 28px;\n    line-height: 33px;\n    color: #151233;\n}\n\n.div-title {\n    font-weight: 500;\n    font-size: 24px;\n    line-height: 28px;\n    color: #151233;\n    margin-bottom: 20px;\n}\n\n.azure-info-table {\n    background: #FFFFFF;\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    width: 100%;\n}\n\ntd:hover {\n    background-color: none !important;\n}\n\n.azure-info-table tr:hover {\n    background-color: #EEEEEE;\n}\n\n.azure-info-table th {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 18px 36px\n}\n\n.azure-info-table td {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 20px 36px;\n    color: #212121;\n    font-size: 14px;\n    line-height: 16px;\n}\n\n.azure-info-table .thead-azure {\n    color: #616161;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n\n.view-btn {\n    background: none;\n    border: none;\n    color: #2C5A86;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n\n.tags-div {\n    background: #FFFFFF;\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    padding: 14px 24px;\n    display: flex;\n    align-items: center;\n}\n\n.tags-title {\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 19px;\n    color: #757575;\n    margin-right: 24px;\n}\n\n.tag-name {\n    padding: 5.5px 8px;\n    background: #D0D1E9;\n    display: flex;\n    justify-content: center;\n    border-radius: 4px;\n    margin-right: 8px;\n    font-size: 14px;\n    color: #2F3160;\n    white-space: nowrap;\n    font-weight: 500;\n    cursor: pointer;\n}\n\n.manage-org-div {\n    width: 77%;\n    display: flex;\n    justify-content: end;\n    position: absolute;\n    top: 80px;\n    right: 36px;\n}\n\n.manage-btn {\n    border: 1px solid #151233;\n    border-radius: 4px;\n    padding: 1.5px 16px;\n    font-size: 15px;\n    color: #151233;\n    display: flex;\n    align-items: center;\n    font-weight: 500;\n}\n\n.delete-org-btn {\n    background: #CBCBCB;\n    border-radius: 4px;\n    color: #212121;\n    border: none;\n    margin-left: 12px;\n    display: flex;\n    align-items: center;\n    padding: 1.5px 16px;\n    font-size: 15px;\n    font-weight: 500;\n}\n\n.view-btn {\n    background: none;\n    border: none;\n    color: #2C5A86;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n\ntd:hover {\n    background-color: none !important;\n}</style>\n'],sourceRoot:""}]);const r=l},91056:(n,a,i)=>{i.d(a,{u:()=>e});const e=Symbol.for("IDialog")},88613:(n,a,i)=>{i.d(a,{J:()=>e});const e=Symbol.for("IViewModel")},88525:(n,a,i)=>{i.d(a,{Z:()=>Y});var e=i(71093),o=i(66190),t=i(73843),l=i(46233),r=i(5627),s=i(20559),d=i(91886),c=i(83487),g=i(89001);const u=n=>((0,e.dD)("data-v-233b5ae8"),n=n(),(0,e.Cn)(),n),p={class:"page-title"},A={class:"filter-area"},v={class:"search-in-table"},f=u((()=>(0,e._)("i",{class:"mdi mdi-magnify"},null,-1))),m={class:"table-container"},x={class:"items-table",id:"applicationListTable"},I={key:0,class:"col-xl-1"},z=u((()=>(0,e._)("th",{class:"col-xl-1"},"UI Page Count",-1))),C=u((()=>(0,e._)("th",{class:"col-xl-1"},"UI Page Size",-1))),b=u((()=>(0,e._)("th",{class:"col-xl-2"},"Date Created",-1))),B=u((()=>(0,e._)("th",{class:"col-xl-1"},"Created By",-1))),h=u((()=>(0,e._)("th",{class:"col-xl-2"},"Date Updated",-1))),y=u((()=>(0,e._)("th",{class:"col-xl-2"},"Date Modified",-1))),D=u((()=>(0,e._)("th",{class:"col-xl-1"},"Mobile",-1))),w=u((()=>(0,e._)("th",{class:"col-xl-1"},"Date First Published",-1))),k=u((()=>(0,e._)("th",{class:"col-xl-1"},"Date Last Published",-1))),_=u((()=>(0,e._)("th",{class:"col-xl-1"},"Licensed",-1))),E={key:0},U={style:{padding:"18px 36px"}},O={key:0,class:"mdi mdi-cellphone",style:{"font-size":"26px"}},S=(0,e.aZ)({__name:"applicationList",props:{apps:null,displayOrgName:{type:Boolean}},setup(n){const a=n,i=(r.nC.resolve(c.y),r.nC.resolve(s.X),r.nC.resolve(d.r)),u=a.apps,S=(0,t.iH)(""),G=(0,t.iH)([]),T=(0,t.iH)(["10","20","30","All"]),F=(0,t.iH)(["All","Mobile"]),P=(0,t.iH)("All");function N(){const n=u.filter((n=>{var a,i;return(null===(a=n.name)||void 0===a?void 0:a.toUpperCase().includes(S.value.toUpperCase()))||(null===(i=n.createdBy)||void 0===i?void 0:i.toUpperCase().includes(S.value.toUpperCase()))}));return"All"==P.value?n:"Mobile"==P.value?n.filter((n=>n.mobileUsage)):n}function M(n){G.value=n}function R(n){switch(n){case"All":P.value="All";break;case"Mobile":P.value="Mobile"}}return(0,e.bv)((()=>{i.addSortingToColumns("applicationListTable")})),(n,r)=>{const s=(0,e.up)("CustomSelect");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("div",p,[(0,e._)("span",null,"Application List ("+(0,o.toDisplayString)((0,t.SU)(u).length)+")",1)]),(0,e._)("div",A,[(0,e._)("div",v,[f,(0,e.wy)((0,e._)("input",{class:"search-input",type:"text",placeholder:"Search",alt:"search","onUpdate:modelValue":r[0]||(r[0]=n=>S.value=n)},null,512),[[l.vModelText,S.value]])]),(0,e._)("div",null,[(0,e.Wm)(s,{options:F.value,default:F.value[0],onInput:R,class:"filters","selected-class":"selected-filter"},null,8,["options","default"])])]),(0,e._)("div",m,[(0,e._)("table",x,[(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",{class:(0,o.normalizeClass)({"col-xl-2":!a.displayOrgName,"col-xl-1":a.displayOrgName})},"Name",2),a.displayOrgName?((0,e.wg)(),(0,e.iD)("th",I,"Organization")):(0,e.kq)("v-if",!0),z,C,b,B,h,y,D,w,k,_])]),(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(G.value,(n=>((0,e.wg)(),(0,e.iD)("tr",{key:n.ID},[(0,e.kq)(" <td>{{ app.ID }}</td> "),(0,e._)("td",null,(0,o.toDisplayString)(n.name),1),(0,e.kq)(" <td>{{ app.ownerUser }}</td> "),a.displayOrgName?((0,e.wg)(),(0,e.iD)("td",E,(0,o.toDisplayString)(n.organizationName),1)):(0,e.kq)("v-if",!0),(0,e._)("td",null,(0,o.toDisplayString)(n.uiPageCount),1),(0,e._)("td",null,(0,o.toDisplayString)(Math.ceil(n.uiPageSize/1024)+"KB"),1),(0,e._)("td",null,(0,o.toDisplayString)((0,t.SU)(i).formatDate(n.createDate)),1),(0,e._)("td",null,(0,o.toDisplayString)(n.createdBy),1),(0,e._)("td",null,(0,o.toDisplayString)(n.updateDate?(0,t.SU)(i).formatDate(n.updateDate):"-"),1),(0,e._)("td",null,(0,o.toDisplayString)(n.modifyDate?(0,t.SU)(i).formatDate(n.modifyDate):"-"),1),(0,e._)("td",U,[n.mobileUsage&&(n.mobileUsage.isMobilePublished||n.mobileUsage.isMobileTemplateUsed)?((0,e.wg)(),(0,e.iD)("i",O)):(0,e.kq)("v-if",!0)]),(0,e._)("td",null,(0,o.toDisplayString)(n.firstPublishDate?(0,t.SU)(i).formatDate(n.firstPublishDate):"-"),1),(0,e._)("td",null,(0,o.toDisplayString)(n.lastPublishDate?(0,t.SU)(i).formatDate(n.lastPublishDate):"-"),1),(0,e._)("td",null,(0,o.toDisplayString)(n.licensed?"LICENSED":"Free"),1)])))),128))]),(0,e.Wm)(g.Z,{itemsPerPageOptions:T.value,columnCount:a.displayOrgName?12:11,onPaginateData:M,searchInTable:S.value,getTableData:N},null,8,["itemsPerPageOptions","columnCount","searchInTable"])])])],64)}}});var G=i(17450),T=i.n(G),F=i(29530),P=i.n(F),N=i(16199),M=i.n(N),R=i(40458),L=i.n(R),Z=i(62916),H=i.n(Z),W=i(92165),q=i.n(W),V=i(86329),j={};j.styleTagTransform=q(),j.setAttributes=L(),j.insert=M().bind(null,"head"),j.domAPI=P(),j.insertStyleElement=H(),T()(V.Z,j),V.Z&&V.Z.locals&&V.Z.locals;const Y=(0,i(32525).Z)(S,[["__scopeId","data-v-233b5ae8"]])},41093:(n,a,i)=>{i.r(a),i.d(a,{default:()=>kn});var e=i(71093),o=i(66190),t=i(73843),l=i(5627),r=i(91056),s=i(1937),d=i(20559),c=i(91886),g=i(83487),u=i(88613),p=i(88525),A=i(65370);const v=n=>((0,e.dD)("data-v-cf095892"),n=n(),(0,e.Cn)(),n),f={class:"manage-org-div"},m=[v((()=>(0,e._)("i",{class:"mdi mdi-cog",style:{"font-size":"20px","margin-right":"4px"}},null,-1))),v((()=>(0,e._)("span",null,"MANAGE ORGANIZATION",-1)))],x=[v((()=>(0,e._)("i",{class:"mdi mdi-delete",style:{"font-size":"20px","margin-right":"4px"}},null,-1))),v((()=>(0,e._)("span",null,"DELETE",-1)))],I={style:{display:"flex","margin-bottom":"32px"}},z={class:"organization-info-type"},C=v((()=>(0,e._)("div",{class:"organization-info-type-name"},"Name",-1))),b={class:"organization-info"},B={class:"organization-info-type"},h=v((()=>(0,e._)("div",{class:"organization-info-type-name"},"Users",-1))),y={class:"organization-info"},D={class:"organization-info-type"},w=v((()=>(0,e._)("div",{class:"organization-info-type-name"},"Apps",-1))),k={class:"organization-info"},_={class:"organization-info-type"},E=v((()=>(0,e._)("div",{class:"organization-info-type-name"},"UI Page Count",-1))),U={class:"organization-info"},O={class:"organization-info-type"},S=v((()=>(0,e._)("div",{class:"organization-info-type-name"},"UI Page Size",-1))),G={class:"organization-info"},T={class:"organization-info-type",style:{flex:"1"}},F=v((()=>(0,e._)("div",{class:"organization-info-type-name"},"Date Created",-1))),P={class:"organization-info"},N={class:"organization-info-type",style:{flex:"1"}},M=v((()=>(0,e._)("div",{class:"organization-info-type-name"},"ID",-1))),R={class:"organization-info",style:{"font-size":"20px"}},L={class:"organization-info-type"},Z=v((()=>(0,e._)("div",{class:"organization-info-type-name"},"Organization Group",-1))),H={class:"organization-info"},W={style:{"margin-bottom":"32px"}},q={class:"tags-div"},V=v((()=>(0,e._)("span",{class:"tags-title"},"Tags",-1))),j=["onClick"],Y={style:{"margin-bottom":"32px"}},$={key:0},K={style:{"margin-bottom":"32px"}},J={key:0},X={style:{"margin-bottom":"32px"}},Q=v((()=>(0,e._)("div",{class:"div-title"},"Azure",-1))),nn={class:"azure-info-table"},an=v((()=>(0,e._)("td",{class:"thead-azure col-xl-4"},"resourceGroupId",-1))),en={key:0,class:"col-xl-7"},on={key:1},tn={class:"col-xl-1"},ln=v((()=>(0,e._)("td",{class:"thead-azure"},"modelStorageID",-1))),rn={key:0},sn={key:1},dn=v((()=>(0,e._)("td",null,null,-1))),cn=v((()=>(0,e._)("td",{class:"thead-azure"},"cost",-1))),gn=v((()=>(0,e._)("td",null,"-",-1))),un=v((()=>(0,e._)("tr",null,[(0,e._)("td",{class:"thead-azure"},"costDate"),(0,e._)("td",null,"-"),(0,e._)("td")],-1))),pn=(0,e.aZ)({__name:"organization",setup(n){const a=l.nC.resolve(s.v5),v=l.nC.resolve(g.y),pn=l.nC.resolve(d.X),An=l.nC.resolve(c.r),vn=l.nC.resolve(u.J),fn=a.getRouteParams();pn.setBreadcrumb(["Organizations","Organization Detail"]);const mn=(0,t.iH)(),xn=l.nC.resolve(r.u),In=(0,t.iH)([]),zn=(0,t.iH)([]),Cn=(0,t.iH)(),bn=(0,t.iH)([]),Bn=(0,t.iH)(!1),hn=(0,t.iH)(!1),yn=(0,t.iH)("");async function Dn(){await v.execute((async()=>{mn.value=await pn.getOrganizationInfo(fn.organizationId)}),{loading:!0})}function wn(){const n=fn.organizationId;v.execute((async()=>{In.value=await pn.listOrganizationUsers(n),Bn.value=!0}),{loading:!0})}function kn(){window.open(Cn.value.overviewUrl,"_blank")}function _n(){window.open(Cn.value.costUrl,"_blank")}function En(){var n,a,i,e;v.execute((async()=>{await Dn()}),{loading:!0});const o={};bn.value=[],null===(a=null===(n=vn.backoffice)||void 0===n?void 0:n.tags)||void 0===a||a.forEach((n=>o[n.ID]=n.name)),null===(e=null===(i=mn.value)||void 0===i?void 0:i.tags)||void 0===e||e.forEach((n=>{var a;const i={id:n,name:o[n]};null===(a=bn.value)||void 0===a||a.push(i)}))}return(0,e.wF)((async()=>{await Dn(),await async function(){await v.execute((async()=>{await pn.listTags()}),{loading:!0})}(),En(),wn(),function(){const n=fn.organizationId;v.execute((async()=>{zn.value=await pn.listOrganizationApps(n),hn.value=!0}),{loading:!0})}(),v.execute((async()=>{var n,a,i;(null===(i=null===(a=null===(n=mn.value)||void 0===n?void 0:n.cloud)||void 0===a?void 0:a.azure)||void 0===i?void 0:i.resourceGroupID)?Cn.value=await pn.getAzureResourceGroupUrls(mn.value.cloud.azure.resourceGroupID):console.log(`Organization '${mn.value.id} - ${mn.value.name}' has no "cloud.azure.resourceGroupID"!`)}),{loading:!0}),v.execute((async()=>{if(mn.value.organizationGroupId){const n=await pn.getOrgGroupNameByOrgID(mn.value.id);yn.value=n||"No Organization Group"}else yn.value="No Organization Group"}),{loading:!0})})),(n,l)=>{var r,s,d,c,g,u,vn,fn,Dn,Un,On,Sn,Gn,Tn,Fn,Pn,Nn,Mn,Rn,Ln,Zn;return(0,e.wg)(),(0,e.iD)("div",null,[(0,e._)("div",f,[(0,e._)("button",{class:"manage-btn",onClick:l[0]||(l[0]=n=>{xn.showDialog((0,e.RC)((()=>i.e(3448).then(i.bind(i,43448)))),{closable:!0,title:"Manage Organization",width:"592px",maxHeight:"650px",closeCb:n=>{"component"==n&&En()}},{organization:mn.value})})},m),(0,e._)("button",{class:"delete-org-btn",onClick:l[1]||(l[1]=n=>function(){var n,o;xn.showDialog((0,e.RC)((()=>Promise.all([i.e(5332),i.e(3601)]).then(i.bind(i,84828)))),{closable:!0,title:"Delete Organization",width:"577px",maxHeight:"206px"},{infoText:"Organization Name",placeholder:`Write organization name '${null===(n=mn.value)||void 0===n?void 0:n.name}' to delete`,validText:null===(o=mn.value)||void 0===o?void 0:o.name,deleteCb:async()=>{await v.execute((async()=>{var n,i;await pn.deleteOrganization(null===(n=mn.value)||void 0===n?void 0:n.id,null===(i=mn.value)||void 0===i?void 0:i.name),a.push("/backoffice/organizations")}),{loading:!0})}})}())},x)]),(0,e._)("div",I,[(0,e._)("div",z,[C,(0,e._)("div",b,(0,o.toDisplayString)(null===(r=mn.value)||void 0===r?void 0:r.name),1)]),(0,e._)("div",B,[h,(0,e._)("div",y,(0,o.toDisplayString)(In.value.length),1)]),(0,e._)("div",D,[w,(0,e._)("div",k,(0,o.toDisplayString)(zn.value.length),1)]),(0,e._)("div",_,[E,(0,e._)("div",U,(0,o.toDisplayString)(null===(d=null===(s=mn.value)||void 0===s?void 0:s.calculatedInfo)||void 0===d?void 0:d.uiPageCount),1)]),(0,e._)("div",O,[S,(0,e._)("div",G,(0,o.toDisplayString)((null===(g=null===(c=mn.value)||void 0===c?void 0:c.calculatedInfo)||void 0===g?void 0:g.uiPageSize)?Math.ceil(mn.value.calculatedInfo.uiPageSize/1024)+"KB":""),1)]),(0,e._)("div",T,[F,(0,e._)("div",P,(0,o.toDisplayString)((0,t.SU)(An).formatDate(null===(u=mn.value)||void 0===u?void 0:u.createDate)),1)]),(0,e._)("div",N,[M,(0,e._)("div",R,(0,o.toDisplayString)(null===(vn=mn.value)||void 0===vn?void 0:vn.id),1)]),(0,e.kq)(' <div class="organization-info-type">\n            <div class="organization-info-type-name">DB Name</div>\n            <div class="organization-info">{{ organization?.dbName }}</div> '),(0,e._)("div",L,[Z,(0,e._)("div",H,(0,o.toDisplayString)(yn.value),1)])]),(0,e._)("div",W,[(0,e._)("div",q,[V,((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(bn.value,(n=>((0,e.wg)(),(0,e.iD)("span",{key:n.id,class:"tag-name",onClick:i=>{return e=n.id,void a.push(`/backoffice/tag/${e}`);var e}},(0,o.toDisplayString)(n.name),9,j)))),128))])]),(0,e._)("div",Y,[Bn.value?((0,e.wg)(),(0,e.iD)("div",$,[(0,e.Wm)(A.Z,{users:In.value,onRefreshTable:wn},null,8,["users"])])):(0,e.kq)("v-if",!0)]),(0,e._)("div",K,[hn.value?((0,e.wg)(),(0,e.iD)("div",J,[(0,e.Wm)(p.Z,{apps:zn.value},null,8,["apps"])])):(0,e.kq)("v-if",!0)]),(0,e._)("div",X,[Q,(0,e._)("div",null,[(0,e._)("table",nn,[(0,e._)("tr",null,[an,(null===(Un=null===(Dn=null===(fn=mn.value)||void 0===fn?void 0:fn.cloud)||void 0===Dn?void 0:Dn.azure)||void 0===Un?void 0:Un.resourceGroupID)?((0,e.wg)(),(0,e.iD)("td",en,(0,o.toDisplayString)(null===(Gn=null===(Sn=null===(On=mn.value)||void 0===On?void 0:On.cloud)||void 0===Sn?void 0:Sn.azure)||void 0===Gn?void 0:Gn.resourceGroupID),1)):((0,e.wg)(),(0,e.iD)("td",on,"-")),(0,e._)("td",tn,[(0,e._)("div",null,[(null===(Tn=Cn.value)||void 0===Tn?void 0:Tn.overviewUrl)?((0,e.wg)(),(0,e.iD)("button",{key:0,class:"view-btn",onClick:kn},"VIEW")):(0,e.kq)("v-if",!0)])])]),(0,e._)("tr",null,[ln,(null===(Nn=null===(Pn=null===(Fn=mn.value)||void 0===Fn?void 0:Fn.cloud)||void 0===Pn?void 0:Pn.azure)||void 0===Nn?void 0:Nn.modelStorageID)?((0,e.wg)(),(0,e.iD)("td",rn,(0,o.toDisplayString)(null===(Ln=null===(Rn=null===(Mn=mn.value)||void 0===Mn?void 0:Mn.cloud)||void 0===Rn?void 0:Rn.azure)||void 0===Ln?void 0:Ln.modelStorageID),1)):((0,e.wg)(),(0,e.iD)("td",sn,"-")),dn]),(0,e._)("tr",null,[cn,gn,(0,e._)("td",null,[(0,e._)("div",null,[(null===(Zn=Cn.value)||void 0===Zn?void 0:Zn.costUrl)?((0,e.wg)(),(0,e.iD)("button",{key:0,class:"view-btn",onClick:_n},"VIEW")):(0,e.kq)("v-if",!0)])])]),un])])])])}}});var An=i(17450),vn=i.n(An),fn=i(29530),mn=i.n(fn),xn=i(16199),In=i.n(xn),zn=i(40458),Cn=i.n(zn),bn=i(62916),Bn=i.n(bn),hn=i(92165),yn=i.n(hn),Dn=i(73268),wn={};wn.styleTagTransform=yn(),wn.setAttributes=Cn(),wn.insert=In().bind(null,"head"),wn.domAPI=mn(),wn.insertStyleElement=Bn(),vn()(Dn.Z,wn),Dn.Z&&Dn.Z.locals&&Dn.Z.locals;const kn=(0,i(32525).Z)(pn,[["__scopeId","data-v-cf095892"]])}}]);
//# sourceMappingURL=1093.js.map?ver=0.0.298_1707474942634