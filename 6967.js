"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[6967],{45491:(n,e,t)=>{t.d(e,{Z:()=>r});var i=t(34663),o=t.n(i),a=t(7638),s=t.n(a)()(o());s.push([n.id,"\n.user-info-type[data-v-c663ecc2] {\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    background: #FFFFFF;\n    margin-right: 37px;\n    padding: 24px 24px 18px;\n    display: flex;\n    flex-direction: column;\n}\n.user-info-type[data-v-c663ecc2]:last-child {\n    margin-right: 0;\n}\n.user-info-type-name[data-v-c663ecc2] {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #757575;\n    margin-bottom: 20px;\n    min-width: 100px;\n    flex: 1;\n}\n.user-info[data-v-c663ecc2] {\n    font-weight: 500;\n    font-size: 28px;\n    line-height: 33px;\n    color: #151233;\n}\n.div-title[data-v-c663ecc2] {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #151233;\n    margin-bottom: 20px;\n}\n.user-org-table[data-v-c663ecc2] {\n    background: #FFFFFF;\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    width: 100%;\n}\ntd[data-v-c663ecc2]:hover {\n    background-color: none !important;\n}\ntable tr[data-v-c663ecc2]:hover {\n    background-color: #EEEEEE;\n}\n.user-org-table th[data-v-c663ecc2]\n    {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 18px 36px\n}\n.user-org-table td[data-v-c663ecc2] {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 20px 36px;\n    color: #212121;\n    font-size: 14px;\n    line-height: 16px;\n}\n.user-org-table .thead[data-v-c663ecc2] {\n    background: #F5F5F5;\n    color: #616161;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.view-btn[data-v-c663ecc2] {\n    background: none;\n    border:none;\n    color: #2C5A86;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.manage-user-div[data-v-c663ecc2] {\n    width: 85%; \n    display: flex; \n    justify-content: end;\n    position: absolute;\n    top: 80px;\n    right: 36px;\n}\n.manage-btn[data-v-c663ecc2] {\n  border: 1px solid #151233;\n  border-radius: 4px;\n  padding: 1.5px 16px;\n  font-size: 15px;\n  color: #151233;\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n}\n.delete-user-btn[data-v-c663ecc2] {\n        background: #CBCBCB;\n        border-radius: 4px;\n        color: #212121;\n        border: none;\n        margin-left: 12px;\n        display: flex;\n        align-items: center;\n        padding: 1.5px 16px;\n        font-size: 15px;\n        font-weight: 500;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/pages/backoffice/user.vue"],names:[],mappings:";AA0IA;IACI,yBAAyB;IACzB,8CAA8C;IAC9C,mBAAmB;IACnB,mBAAmB;IACnB,kBAAkB;IAClB,uBAAuB;IACvB,aAAa;IACb,sBAAsB;AAC1B;AACA;IACI,eAAe;AACnB;AACA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;IACd,mBAAmB;IACnB,gBAAgB;IAChB,OAAO;AACX;AACA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;AAClB;AACA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,cAAc;IACd,mBAAmB;AACvB;AACA;IACI,mBAAmB;IACnB,yBAAyB;IACzB,8CAA8C;IAC9C,mBAAmB;IACnB,WAAW;AACf;AACA;IACI,iCAAiC;AACrC;AACA;IACI,yBAAyB;AAC7B;AACA;;IAEI,gCAAgC;IAChC;AACJ;AACA;IACI,gCAAgC;IAChC,kBAAkB;IAClB,cAAc;IACd,eAAe;IACf,iBAAiB;AACrB;AACA;IACI,mBAAmB;IACnB,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,iBAAiB;AACrB;AACA;IACI,gBAAgB;IAChB,WAAW;IACX,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,iBAAiB;AACrB;AACA;IACI,UAAU;IACV,aAAa;IACb,oBAAoB;IACpB,kBAAkB;IAClB,SAAS;IACT,WAAW;AACf;AACA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,mBAAmB;EACnB,eAAe;EACf,cAAc;EACd,aAAa;EACb,mBAAmB;EACnB,gBAAgB;AAClB;AACA;QACQ,mBAAmB;QACnB,kBAAkB;QAClB,cAAc;QACd,YAAY;QACZ,iBAAiB;QACjB,aAAa;QACb,mBAAmB;QACnB,mBAAmB;QACnB,eAAe;QACf,gBAAgB;AACpB",sourcesContent:['<script setup lang="ts">\nimport { defineAsyncComponent, onBeforeMount, ref } from "vue";\nimport { IUser_SUSI } from "../../../../../../common/qCloudTemp/authentication";\nimport { IOrganization } from "../../../../../../common/qCloudTemp/membership";\nimport { container } from "../../../../domain/core/diContainer";\nimport { IDialog } from "../../../../domain/presentation/IDialog";\nimport { IRouter } from "../../../../domain/presentation/IRouter";\nimport { IBackofficeUseCase } from "../../../../domain/useCase/IBackofficeUseCase";\nimport { IUseCaseExecutor } from "../../../../domain/useCase/IUseCaseExecutor";\nimport { IOrganizationUseCase } from "../../../../domain/useCase/IOrganizationUseCase";\nimport OrganizationList from "../../components/backoffice/organization/organizationList.vue";\nimport { IViewModel } from "../../../../domain/viewModel/IViewModel";\n\n\nconst router = container.resolve<IRouter>(IRouter);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst backofficeUseCase = container.resolve<IBackofficeUseCase>(IBackofficeUseCase);\n\n\nconst routerParams = router.getRouteParams<{ userId: string }>();\nbackofficeUseCase.setBreadcrumb(["Users", "User Detail"]);\nconst user = ref<IUser_SUSI>();\nconst orgInfo = ref<Array<IOrganization>>([]);\nconst dialog = container.resolve<IDialog>(IDialog);\nconst organizationsDataIsReady = ref(false);\n\n\n\nonBeforeMount(() => {\n    getOrganizations();\n})\n// function viewOrganization(organizationId: string) {\n//     router.push(`/backoffice/organization/${organizationId}`);\n// }\n// function remove( userId: string, organizationId: string) {\n//     executor.execute(async () => {\n//         await backofficeUseCase.removeUserFromOrganization({ userId, organizationId });\n//         // await getOrganizations();\n//     }, { loading: true });\n// }\n// function formatDate(date?: Date) {\n//     if(date) {\n//         const formatter = new Intl.DateTimeFormat(\'en-GB\', { year: \'numeric\', month: \'long\', day: \'numeric\', hour: \'numeric\', minute: \'numeric\' });\n//         const formattedDate = formatter.format(new Date(date));\n//         return formattedDate;\n//     }\n// }\nfunction openManageUserDialog () {\n  dialog.showDialog(\n        defineAsyncComponent(() => import(`../../components/dialogs/backoffice/manageUser.vue`)),\n        { closable: true, title: "Manage User", width: "499px", maxHeight: "184px" }, {user: user.value}\n    );\n}\nfunction getOrganizations() {\n    executor.execute(async () => {\n        user.value = await backofficeUseCase.getUserInfo(routerParams.userId);\n        orgInfo.value = await backofficeUseCase.getOrganizationsByUserId(routerParams.userId);\n        organizationsDataIsReady.value = true;\n    }, { loading: true });\n}\n\nfunction openDeleteUserDialog() {\n    dialog.showDialog(\n            defineAsyncComponent(() => import(`../../components/dialogs/backoffice/deleteConfirmation.vue`)),\n            { closable: true, title: "Delete User", width: "577px", maxHeight: "206px" },\n            { \n                infoText: \'User Name\',  \n                placeholder:`Write user name \'${user.value?.name}\' to delete`, validText: user.value?.name, \n                deleteCb: async () => {\n                    await executor.execute(async () => {\n                        await backofficeUseCase.deleteUser(user.value?.id!, user.value?.name!);\n                        router.push("/backoffice/users");\n                    }, { loading: true });\n                }\n            });\n}\n<\/script>\n\n<template>\n    <div class="manage-user-div">\n        <button class="manage-btn" @click="openManageUserDialog()"><i class="mdi mdi-cog" style="font-size: 20px; margin-right: 4px"></i><span>MANAGE USER</span></button>\n        <button class="delete-user-btn" @click="openDeleteUserDialog()"><i class="mdi mdi-delete" style="font-size: 20px; margin-right: 4px"></i><span>DELETE</span></button>\n    </div>  \n    <div style="display:flex; margin-bottom: 32px;">\n        <div class="user-info-type">\n            <div class="user-info-type-name">Name</div>\n            <div class="user-info">{{ user?.name }}</div>\n        </div>\n        <div class="user-info-type">\n            <div class="user-info-type-name">Last Name</div>\n            <div class="user-info">{{ user?.lastName }}</div>\n        </div>\n        <div class="user-info-type">\n            <div class="user-info-type-name">E-mail</div>\n            <div class="user-info">{{ user?.email }}</div>\n        </div>\n        <div class="user-info-type" style="flex: 1">\n            <div class="user-info-type-name">ID</div>\n            <div class="user-info" style="font-size: 20px;">{{ user?.id }}</div>\n        </div>\n        <div class="user-info-type" style="flex: 1">\n            <div class="user-info-type-name">Object ID</div>\n            <div class="user-info" style="font-size: 20px;">{{ user?.objectId }}</div>\n        </div>\n    </div>\n    <div style="margin-bottom: 32px;">\n        <div v-if="organizationsDataIsReady">\n            <OrganizationList :organizations="orgInfo" :userID = "user?.id" @refreshTable="getOrganizations"></OrganizationList>\n        </div>\n    </div>\n    <div style="display: none">\n        <div class="div-title">Roles ({{ user?.organizationIds.length }})</div>\n        <div>\n            <table class="user-org-table"> \n                <tr class="thead">\n                    <th class="col-xl-3">ID</th>\n                    <th class="col-xl-3">Name</th>\n                    <th class="col-xl-3">Date Created</th>\n                    <th class="col-xl-2">Date Joined</th>\n                    <th class="col-xl-1"></th>\n                </tr>\n                <tr v-for="org in orgInfo" :key="org.id">\n                    <td>{{ org.id }}</td>\n                    <td>{{ org.name }}</td>\n                    <td> {{ org.createDate }}</td>\n                    <td>-</td>\n                    <td><div style="display: flex;">\n                        <button class="remove-btn">REMOVE</button>\n                        <button class="view-btn">VIEW</button>\n                    </div></td>\n                </tr>\n            </table>\n        </div>\n    </div>\n\n</template>\n\n<style scoped>\n.user-info-type {\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    background: #FFFFFF;\n    margin-right: 37px;\n    padding: 24px 24px 18px;\n    display: flex;\n    flex-direction: column;\n}\n.user-info-type:last-child {\n    margin-right: 0;\n}\n.user-info-type-name {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #757575;\n    margin-bottom: 20px;\n    min-width: 100px;\n    flex: 1;\n}\n.user-info {\n    font-weight: 500;\n    font-size: 28px;\n    line-height: 33px;\n    color: #151233; \n}\n.div-title {\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 23px;\n    color: #151233;\n    margin-bottom: 20px;\n}\n.user-org-table {\n    background: #FFFFFF;\n    border: 1px solid #E3E3E3;\n    box-shadow: 1px 1px 2px rgba(33, 33, 33, 0.16);\n    border-radius: 10px;\n    width: 100%;\n}\ntd:hover {\n    background-color: none !important;\n}\ntable tr:hover {\n    background-color: #EEEEEE;\n}   \n.user-org-table th\n    {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 18px 36px\n}\n.user-org-table td {\n    border-bottom: 1px solid #E3E3E3;\n    padding: 20px 36px;\n    color: #212121;\n    font-size: 14px;\n    line-height: 16px;\n}\n.user-org-table .thead {\n    background: #F5F5F5;\n    color: #616161;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.view-btn {\n    background: none;\n    border:none;\n    color: #2C5A86;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n}\n.manage-user-div {\n    width: 85%; \n    display: flex; \n    justify-content: end;\n    position: absolute;\n    top: 80px;\n    right: 36px;\n}\n.manage-btn {\n  border: 1px solid #151233;\n  border-radius: 4px;\n  padding: 1.5px 16px;\n  font-size: 15px;\n  color: #151233;\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n}\n.delete-user-btn {\n        background: #CBCBCB;\n        border-radius: 4px;\n        color: #212121;\n        border: none;\n        margin-left: 12px;\n        display: flex;\n        align-items: center;\n        padding: 1.5px 16px;\n        font-size: 15px;\n        font-weight: 500;   \n    }\n</style>'],sourceRoot:""}]);const r=s},91056:(n,e,t)=>{t.d(e,{u:()=>i});const i=Symbol.for("IDialog")},46967:(n,e,t)=>{t.r(e),t.d(e,{default:()=>en});var i=t(71093),o=t(66190),a=t(73843),s=t(5627),r=t(91056),l=t(1937),d=t(20559),c=t(83487),A=t(7222);const u=n=>((0,i.dD)("data-v-c663ecc2"),n=n(),(0,i.Cn)(),n),p={class:"manage-user-div"},g=[u((()=>(0,i._)("i",{class:"mdi mdi-cog",style:{"font-size":"20px","margin-right":"4px"}},null,-1))),u((()=>(0,i._)("span",null,"MANAGE USER",-1)))],m=[u((()=>(0,i._)("i",{class:"mdi mdi-delete",style:{"font-size":"20px","margin-right":"4px"}},null,-1))),u((()=>(0,i._)("span",null,"DELETE",-1)))],f={style:{display:"flex","margin-bottom":"32px"}},v={class:"user-info-type"},x=u((()=>(0,i._)("div",{class:"user-info-type-name"},"Name",-1))),C={class:"user-info"},b={class:"user-info-type"},B=u((()=>(0,i._)("div",{class:"user-info-type-name"},"Last Name",-1))),I={class:"user-info"},h={class:"user-info-type"},y=u((()=>(0,i._)("div",{class:"user-info-type-name"},"E-mail",-1))),E={class:"user-info"},w={class:"user-info-type",style:{flex:"1"}},D=u((()=>(0,i._)("div",{class:"user-info-type-name"},"ID",-1))),z={class:"user-info",style:{"font-size":"20px"}},k={class:"user-info-type",style:{flex:"1"}},_=u((()=>(0,i._)("div",{class:"user-info-type-name"},"Object ID",-1))),U={class:"user-info",style:{"font-size":"20px"}},F={style:{"margin-bottom":"32px"}},O={key:0},R={style:{display:"none"}},S={class:"div-title"},T={class:"user-org-table"},M=u((()=>(0,i._)("tr",{class:"thead"},[(0,i._)("th",{class:"col-xl-3"},"ID"),(0,i._)("th",{class:"col-xl-3"},"Name"),(0,i._)("th",{class:"col-xl-3"},"Date Created"),(0,i._)("th",{class:"col-xl-2"},"Date Joined"),(0,i._)("th",{class:"col-xl-1"})],-1))),N=u((()=>(0,i._)("td",null,"-",-1))),Q=u((()=>(0,i._)("td",null,[(0,i._)("div",{style:{display:"flex"}},[(0,i._)("button",{class:"remove-btn"},"REMOVE"),(0,i._)("button",{class:"view-btn"},"VIEW")])],-1))),W=(0,i.aZ)({__name:"user",setup(n){const e=s.nC.resolve(l.v5),u=s.nC.resolve(c.y),W=s.nC.resolve(d.X),j=e.getRouteParams();W.setBreadcrumb(["Users","User Detail"]);const H=(0,a.iH)(),Z=(0,a.iH)([]),L=s.nC.resolve(r.u),P=(0,a.iH)(!1);function V(){u.execute((async()=>{H.value=await W.getUserInfo(j.userId),Z.value=await W.getOrganizationsByUserId(j.userId),P.value=!0}),{loading:!0})}return(0,i.wF)((()=>{V()})),(n,a)=>{var s,r,l,d,c,j,q;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",p,[(0,i._)("button",{class:"manage-btn",onClick:a[0]||(a[0]=n=>{L.showDialog((0,i.RC)((()=>t.e(1637).then(t.bind(t,71637)))),{closable:!0,title:"Manage User",width:"499px",maxHeight:"184px"},{user:H.value})})},g),(0,i._)("button",{class:"delete-user-btn",onClick:a[1]||(a[1]=n=>function(){var n,o;L.showDialog((0,i.RC)((()=>Promise.all([t.e(9607),t.e(8363)]).then(t.bind(t,78570)))),{closable:!0,title:"Delete User",width:"577px",maxHeight:"206px"},{infoText:"User Name",placeholder:`Write user name '${null===(n=H.value)||void 0===n?void 0:n.name}' to delete`,validText:null===(o=H.value)||void 0===o?void 0:o.name,deleteCb:async()=>{await u.execute((async()=>{var n,t;await W.deleteUser(null===(n=H.value)||void 0===n?void 0:n.id,null===(t=H.value)||void 0===t?void 0:t.name),e.push("/backoffice/users")}),{loading:!0})}})}())},m)]),(0,i._)("div",f,[(0,i._)("div",v,[x,(0,i._)("div",C,(0,o.toDisplayString)(null===(s=H.value)||void 0===s?void 0:s.name),1)]),(0,i._)("div",b,[B,(0,i._)("div",I,(0,o.toDisplayString)(null===(r=H.value)||void 0===r?void 0:r.lastName),1)]),(0,i._)("div",h,[y,(0,i._)("div",E,(0,o.toDisplayString)(null===(l=H.value)||void 0===l?void 0:l.email),1)]),(0,i._)("div",w,[D,(0,i._)("div",z,(0,o.toDisplayString)(null===(d=H.value)||void 0===d?void 0:d.id),1)]),(0,i._)("div",k,[_,(0,i._)("div",U,(0,o.toDisplayString)(null===(c=H.value)||void 0===c?void 0:c.objectId),1)])]),(0,i._)("div",F,[P.value?((0,i.wg)(),(0,i.iD)("div",O,[(0,i.Wm)(A.Z,{organizations:Z.value,userID:null===(j=H.value)||void 0===j?void 0:j.id,onRefreshTable:V},null,8,["organizations","userID"])])):(0,i.kq)("v-if",!0)]),(0,i._)("div",R,[(0,i._)("div",S,"Roles ("+(0,o.toDisplayString)(null===(q=H.value)||void 0===q?void 0:q.organizationIds.length)+")",1),(0,i._)("div",null,[(0,i._)("table",T,[M,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Z.value,(n=>((0,i.wg)(),(0,i.iD)("tr",{key:n.id},[(0,i._)("td",null,(0,o.toDisplayString)(n.id),1),(0,i._)("td",null,(0,o.toDisplayString)(n.name),1),(0,i._)("td",null,(0,o.toDisplayString)(n.createDate),1),N,Q])))),128))])])])],64)}}});var j=t(17450),H=t.n(j),Z=t(29530),L=t.n(Z),P=t(16199),V=t.n(P),q=t(40458),Y=t.n(q),G=t(62916),J=t.n(G),X=t(92165),$=t.n(X),K=t(45491),nn={};nn.styleTagTransform=$(),nn.setAttributes=Y(),nn.insert=V().bind(null,"head"),nn.domAPI=L(),nn.insertStyleElement=J(),H()(K.Z,nn),K.Z&&K.Z.locals&&K.Z.locals;const en=(0,t(32525).Z)(W,[["__scopeId","data-v-c663ecc2"]])}}]);
//# sourceMappingURL=6967.js.map