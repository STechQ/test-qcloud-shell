"use strict";(self.webpackChunkqcloud_shell=self.webpackChunkqcloud_shell||[]).push([[887],{4842:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(1864),l=n.n(a),o=n(352),s=n.n(o)()(l());s.push([e.id,"\ntextarea[data-v-8db4c832]{\n    resize: both;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/editors/fileEditor.vue"],names:[],mappings:";AAgEA;IACI,YAAY;AAChB",sourcesContent:['<script setup lang="ts">\nimport { text } from \'stream/consumers\';\nimport { onBeforeUnmount, onMounted, onUnmounted, Ref, ref } from \'vue\';\nimport { IFileEditorProps } from \'../../../application/objects/editors/fileEditorImpl\';\n\ninterface IProps {\n    functions: IFileEditorProps["functions"];\n    callbacks: IFileEditorProps["callbacks"];\n}\nconst props = defineProps<IProps>();\nconst textarea = ref<HTMLTextAreaElement>() as Ref<HTMLTextAreaElement>;\n\nprops.functions.getModel = async () => {\n    const scrollTop = textarea.value.scrollTop;\n    const selectionStart = textarea.value.selectionStart;\n    const selectionEnd = textarea.value.selectionEnd;\n    const width = textarea.value.style.width;\n    const height = textarea.value.style.height;\n\n    return { model: textarea.value.value, state: { scrollTop, selectionStart, selectionEnd, width, height, checkout: !textarea.value.disabled } };\n};\nprops.functions.setModel = async (model, state) => {\n    //model\n    textarea.value.value = model;\n\n    //state\n    textarea.value.focus();\n    textarea.value.style.width = state.width || "98%";\n    textarea.value.style.height = state.height || "90%";\n    textarea.value.scrollTop = state.scrollTop;\n    textarea.value.selectionStart = state.selectionStart;\n    textarea.value.selectionEnd = state.selectionEnd;\n    textarea.value.disabled = textarea.value.readOnly = !state.checkout || false\n    textarea.value.style.resize = "none"\n}\nconst modified: Record<string, EventListenerOrEventListenerObject> = {\n    select: () => { console.log("select"); props.callbacks.modified({ state: true }) },\n    scroll: () => { console.log("scroll"); props.callbacks.modified({ state: true }) },\n    change: () => { console.log("change"); props.callbacks.modified({ model: true }) },\n    keydown: (e: Event) => {\n        const event = e as KeyboardEvent;\n        const code = event.code.toLowerCase();\n        if (event.shiftKey || event.ctrlKey || code.startsWith("arrow")){return;}\n        console.log("keydown"); props.callbacks.modified({ model: true });\n    },\n    resize: () => { console.log("resize"); props.callbacks.modified({ state: true }) },\n};\n\nconst watchTextArea = (attach: boolean) => {\n    const target = attach ? textarea.value.addEventListener : textarea.value.removeEventListener;\n    Object.keys(modified).forEach(key => target.call(textarea.value, key, modified[key]));\n}\n\nonMounted(() => {\n    watchTextArea(true);\n});\nonBeforeUnmount(() => {\n    watchTextArea(false);\n});\n<\/script>\n<template>\n<textarea ref="textarea"></textarea>\n</template>\n<style scoped>\ntextarea{\n    resize: both;\n}\n</style>'],sourceRoot:""}]);const r=s},1887:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(2068),l=n(1407);const o=(0,a.aZ)({__name:"fileEditor",props:{functions:null,callbacks:null},setup(e){const t=e,n=(0,l.iH)();t.functions.getModel=async()=>{const e=n.value.scrollTop,t=n.value.selectionStart,a=n.value.selectionEnd,l=n.value.style.width,o=n.value.style.height;return{model:n.value.value,state:{scrollTop:e,selectionStart:t,selectionEnd:a,width:l,height:o,checkout:!n.value.disabled}}},t.functions.setModel=async(e,t)=>{n.value.value=e,n.value.focus(),n.value.style.width=t.width||"98%",n.value.style.height=t.height||"90%",n.value.scrollTop=t.scrollTop,n.value.selectionStart=t.selectionStart,n.value.selectionEnd=t.selectionEnd,n.value.disabled=n.value.readOnly=!t.checkout||!1,n.value.style.resize="none"};const o={select:()=>{console.log("select"),t.callbacks.modified({state:!0})},scroll:()=>{console.log("scroll"),t.callbacks.modified({state:!0})},change:()=>{console.log("change"),t.callbacks.modified({model:!0})},keydown:e=>{const n=e,a=n.code.toLowerCase();n.shiftKey||n.ctrlKey||a.startsWith("arrow")||(console.log("keydown"),t.callbacks.modified({model:!0}))},resize:()=>{console.log("resize"),t.callbacks.modified({state:!0})}},s=e=>{const t=e?n.value.addEventListener:n.value.removeEventListener;Object.keys(o).forEach((e=>t.call(n.value,e,o[e])))};return(0,a.bv)((()=>{s(!0)})),(0,a.Jd)((()=>{s(!1)})),(e,t)=>((0,a.wg)(),(0,a.iD)("textarea",{ref_key:"textarea",ref:n},null,512))}});var s=n(5701),r=n.n(s),c=n(8236),i=n.n(c),d=n(6080),u=n.n(d),v=n(6850),h=n.n(v),p=n(7182),f=n.n(p),m=n(9213),y=n.n(m),x=n(4842),b={};b.styleTagTransform=y(),b.setAttributes=h(),b.insert=u().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=f(),r()(x.Z,b),x.Z&&x.Z.locals&&x.Z.locals;const g=(0,n(1419).Z)(o,[["__scopeId","data-v-8db4c832"]])}}]);
//# sourceMappingURL=887.js.map