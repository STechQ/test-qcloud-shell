{"version":3,"file":"7311.js","mappings":"iKAGIA,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,uDAAwD,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,4DAA4D,MAAQ,GAAG,SAAW,yBAAyB,eAAiB,CAAC,0tFAA2uF,WAAa,MAEj/F,W,wECKA,SAA4B,QAAiB,CAC3CC,OAAQ,aACRC,MAAO,CACLC,UAAW,KACXC,UAAW,MAEbC,MAAMC,GAER,MAAMJ,EAAQI,EAMRC,GAAW,UAEjBL,EAAMC,UAAUK,SAAWC,UACvB,MAAMC,EAAYH,EAASI,MAAMD,UAC3BE,EAAiBL,EAASI,MAAMC,eAChCC,EAAeN,EAASI,MAAME,aAC9BC,EAAQP,EAASI,MAAMI,MAAMD,MAC7BE,EAAST,EAASI,MAAMI,MAAMC,OAEpC,MAAO,CAAEC,MAAOV,EAASI,MAAMA,MAAOO,MAAO,CAAER,YAAWE,iBAAgBC,eAAcC,QAAOE,SAAQG,UAAWZ,EAASI,MAAMS,YAErIlB,EAAMC,UAAUkB,SAAWZ,MAAOQ,EAAOC,KAErCX,EAASI,MAAMA,MAAQM,EAGvBV,EAASI,MAAMW,QACff,EAASI,MAAMI,MAAMD,MAAQI,EAAMJ,OAAS,MAC5CP,EAASI,MAAMI,MAAMC,OAASE,EAAMF,QAAU,MAC9CT,EAASI,MAAMD,UAAYQ,EAAMR,UACjCH,EAASI,MAAMC,eAAiBM,EAAMN,eACtCL,EAASI,MAAME,aAAeK,EAAML,aACpCN,EAASI,MAAMS,SAAWb,EAASI,MAAMY,UAAYL,EAAMC,WAAY,EACvEZ,EAASI,MAAMI,MAAMS,OAAS,QAGlC,MAAMC,EAA+D,CACjEC,OAAQ,KAAQC,QAAQC,IAAI,UAAW1B,EAAME,UAAUqB,SAAS,CAAEP,OAAO,KACzEW,OAAQ,KAAQF,QAAQC,IAAI,UAAW1B,EAAME,UAAUqB,SAAS,CAAEP,OAAO,KACzEY,OAAQ,KAAQH,QAAQC,IAAI,UAAW1B,EAAME,UAAUqB,SAAS,CAAER,OAAO,KACzEc,QAAUC,IACN,MAAMC,EAAQD,EACRE,EAAOD,EAAMC,KAAKC,cACpBF,EAAMG,UAAYH,EAAMI,SAAWH,EAAKI,WAAW,WACvDX,QAAQC,IAAI,WAAY1B,EAAME,UAAUqB,SAAS,CAAER,OAAO,MAE9DO,OAAQ,KAAQG,QAAQC,IAAI,UAAW1B,EAAME,UAAUqB,SAAS,CAAEP,OAAO,KACzEqB,MAAM,KAAMZ,QAAQC,IAAI,gBAAiB1B,EAAME,UAAUqB,SAAS,CAACR,OAAM,MAGvEuB,EAAiBC,IACnB,MAAMC,EAASD,EAASlC,EAASI,MAAMgC,iBAAmBpC,EAASI,MAAMiC,oBACzEC,OAAOC,KAAKrB,GAAUsB,SAAQC,GAAON,EAAOO,KAAK1C,EAASI,MAAOqC,EAAKvB,EAASuB,OAUnF,OAPA,SAAU,KACNR,GAAc,OAElB,SAAgB,KACZA,GAAc,MAGX,CAACU,EAAUC,MACR,WAAc,QAAoB,WAAY,CACpDC,QAAS,WACTC,IAAK9C,GACJ,KAAM,S,qICvEP+C,EAAU,GAEdA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKJ,KAAW,YAAiB,WCpBlD,MAEA,GAFiC,E,SAAA,GAAgB,EAAQ,CAAC,CAAC,YAAY","sources":["webpack://qcloud_shell/./src/presentation/vue3/editors/fileEditor.vue?0b72","webpack://qcloud_shell/./src/presentation/vue3/editors/fileEditor.vue?d294","webpack://qcloud_shell/./src/presentation/vue3/editors/fileEditor.vue?e15d","webpack://qcloud_shell/./src/presentation/vue3/editors/fileEditor.vue"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ntextarea[data-v-07a98a6c]{\\n    resize: both;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/presentation/vue3/editors/fileEditor.vue\"],\"names\":[],\"mappings\":\";AAkEA;IACI,YAAY;AAChB\",\"sourcesContent\":[\"<script setup lang=\\\"ts\\\">\\nimport { text } from 'stream/consumers';\\nimport { onBeforeUnmount, onMounted, onUnmounted, Ref, ref } from 'vue';\\nimport { IFileEditorProps } from '../../../application/objects/editors/fileEditorImpl';\\n\\ninterface IProps {\\n    functions: IFileEditorProps[\\\"functions\\\"];\\n    callbacks: IFileEditorProps[\\\"callbacks\\\"];\\n}\\nconst props = defineProps<IProps>();\\nconst textarea = ref<HTMLTextAreaElement>() as Ref<HTMLTextAreaElement>;\\n\\nprops.functions.getModel = async () => {\\n    const scrollTop = textarea.value.scrollTop;\\n    const selectionStart = textarea.value.selectionStart;\\n    const selectionEnd = textarea.value.selectionEnd;\\n    const width = textarea.value.style.width;\\n    const height = textarea.value.style.height;\\n\\n    return { model: textarea.value.value, state: { scrollTop, selectionStart, selectionEnd, width, height, checkout: !textarea.value.disabled } };\\n};\\nprops.functions.setModel = async (model, state) => {\\n    //model\\n    textarea.value.value = model;\\n\\n    //state\\n    textarea.value.focus();\\n    textarea.value.style.width = state.width || \\\"98%\\\";\\n    textarea.value.style.height = state.height || \\\"90%\\\";\\n    textarea.value.scrollTop = state.scrollTop;\\n    textarea.value.selectionStart = state.selectionStart;\\n    textarea.value.selectionEnd = state.selectionEnd;\\n    textarea.value.disabled = textarea.value.readOnly = !state.checkout || false;\\n    textarea.value.style.resize = \\\"none\\\";\\n    \\n}\\nconst modified: Record<string, EventListenerOrEventListenerObject> = {\\n    select: () => { console.log(\\\"select\\\"); props.callbacks.modified({ state: true }) },\\n    scroll: () => { console.log(\\\"scroll\\\"); props.callbacks.modified({ state: true }) },\\n    change: () => { console.log(\\\"change\\\"); props.callbacks.modified({ model: true }) },\\n    keydown: (e: Event) => {\\n        const event = e as KeyboardEvent;\\n        const code = event.code.toLowerCase();\\n        if (event.shiftKey || event.ctrlKey || code.startsWith(\\\"arrow\\\")){return;}\\n        console.log(\\\"keydown\\\"); props.callbacks.modified({ model: true });\\n    },\\n    resize: () => { console.log(\\\"resize\\\"); props.callbacks.modified({ state: true }) },\\n    input:() =>{console.log('model change'); props.callbacks.modified({model:true})}\\n};\\n\\nconst watchTextArea = (attach: boolean) => {\\n    const target = attach ? textarea.value.addEventListener : textarea.value.removeEventListener;\\n    Object.keys(modified).forEach(key => target.call(textarea.value, key, modified[key]));\\n}\\n\\nonMounted(() => {\\n    watchTextArea(true);\\n});\\nonBeforeUnmount(() => {\\n    watchTextArea(false);\\n});\\n</script>\\n<template>\\n<textarea ref=\\\"textarea\\\"></textarea>\\n</template>\\n<style scoped>\\ntextarea{\\n    resize: both;\\n}\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { text } from 'stream/consumers';\nimport { onBeforeUnmount, onMounted, onUnmounted, Ref, ref } from 'vue';\nimport { IFileEditorProps } from '../../../application/objects/editors/fileEditorImpl';\n\ninterface IProps {\n    functions: IFileEditorProps[\"functions\"];\n    callbacks: IFileEditorProps[\"callbacks\"];\n}\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'fileEditor',\n  props: {\n    functions: null,\n    callbacks: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n    functions: IFileEditorProps[\"functions\"];\n    callbacks: IFileEditorProps[\"callbacks\"];\n}\n\n\nconst textarea = ref<HTMLTextAreaElement>() as Ref<HTMLTextAreaElement>;\n\nprops.functions.getModel = async () => {\n    const scrollTop = textarea.value.scrollTop;\n    const selectionStart = textarea.value.selectionStart;\n    const selectionEnd = textarea.value.selectionEnd;\n    const width = textarea.value.style.width;\n    const height = textarea.value.style.height;\n\n    return { model: textarea.value.value, state: { scrollTop, selectionStart, selectionEnd, width, height, checkout: !textarea.value.disabled } };\n};\nprops.functions.setModel = async (model, state) => {\n    //model\n    textarea.value.value = model;\n\n    //state\n    textarea.value.focus();\n    textarea.value.style.width = state.width || \"98%\";\n    textarea.value.style.height = state.height || \"90%\";\n    textarea.value.scrollTop = state.scrollTop;\n    textarea.value.selectionStart = state.selectionStart;\n    textarea.value.selectionEnd = state.selectionEnd;\n    textarea.value.disabled = textarea.value.readOnly = !state.checkout || false;\n    textarea.value.style.resize = \"none\";\n    \n}\nconst modified: Record<string, EventListenerOrEventListenerObject> = {\n    select: () => { console.log(\"select\"); props.callbacks.modified({ state: true }) },\n    scroll: () => { console.log(\"scroll\"); props.callbacks.modified({ state: true }) },\n    change: () => { console.log(\"change\"); props.callbacks.modified({ model: true }) },\n    keydown: (e: Event) => {\n        const event = e as KeyboardEvent;\n        const code = event.code.toLowerCase();\n        if (event.shiftKey || event.ctrlKey || code.startsWith(\"arrow\")){return;}\n        console.log(\"keydown\"); props.callbacks.modified({ model: true });\n    },\n    resize: () => { console.log(\"resize\"); props.callbacks.modified({ state: true }) },\n    input:() =>{console.log('model change'); props.callbacks.modified({model:true})}\n};\n\nconst watchTextArea = (attach: boolean) => {\n    const target = attach ? textarea.value.addEventListener : textarea.value.removeEventListener;\n    Object.keys(modified).forEach(key => target.call(textarea.value, key, modified[key]));\n}\n\nonMounted(() => {\n    watchTextArea(true);\n});\nonBeforeUnmount(() => {\n    watchTextArea(false);\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"textarea\", {\n    ref_key: \"textarea\",\n    ref: textarea\n  }, null, 512 /* NEED_PATCH */))\n}\n}\n\n})","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./fileEditor.vue?vue&type=style&index=0&id=07a98a6c&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[9].use[0]!./fileEditor.vue?vue&type=style&index=0&id=07a98a6c&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import script from \"./fileEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./fileEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./fileEditor.vue?vue&type=style&index=0&id=07a98a6c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/QCloud-Shell/QCloud-Shell/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-07a98a6c\"]])\n\nexport default __exports__"],"names":["___CSS_LOADER_EXPORT___","push","module","id","__name","props","functions","callbacks","setup","__props","textarea","getModel","async","scrollTop","value","selectionStart","selectionEnd","width","style","height","model","state","checkout","disabled","setModel","focus","readOnly","resize","modified","select","console","log","scroll","change","keydown","e","event","code","toLowerCase","shiftKey","ctrlKey","startsWith","input","watchTextArea","attach","target","addEventListener","removeEventListener","Object","keys","forEach","key","call","_ctx","_cache","ref_key","ref","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement"],"sourceRoot":""}