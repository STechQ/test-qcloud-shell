"use strict";(self.webpackChunkqcloud_shell=self.webpackChunkqcloud_shell||[]).push([[419],{4614:(e,n,a)=>{a.d(n,{Z:()=>r});var t=a(1864),s=a.n(t),i=a(352),l=a.n(i)()(s());l.push([e.id,"\n.input-line[data-v-b0055540] {\n    margin-top: 20px;\n    margin-left: 10px;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/systemuser/createDomain.vue"],names:[],mappings:";AA+EA;IACI,gBAAgB;IAChB,iBAAiB;AACrB",sourcesContent:['<script setup lang="ts">\nimport { ref } from "vue";\nimport { container } from "../../../../../domain/core/diContainer";\nimport { IUseCaseExecutor } from "../../../../../domain/useCase/IUseCaseExecutor";\nimport { ISystemUserManagement } from "../../../../../domain/useCase/ISystemUserManagement";\n\ninterface IInitialUser {\n    userName?: string;\n    userEmail?: string;\n    userPassword?: string;\n}\n\nconst emit = defineEmits(["close"]);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst systemUserManagement = container.resolve<ISystemUserManagement>(ISystemUserManagement);\n\nconst name = ref<string>();\nconst apps = ref<Record<string, boolean>>({ quick: true, bpmn: true, entity: true, flow: true, process: true });\nconst appItems = ref(Object.keys(apps.value));\nconst createInitials = ref<boolean>(true);\nconst initialUser = ref<IInitialUser>({});\n\nasync function create() {\n    await executor.execute(async () => {\n        if (!name.value) { alert("name required!"); return; }\n\n        let falseCounter = 0;\n        const keys = Object.keys(apps.value);\n        keys.forEach(app => { if ((apps.value as Record<string, boolean>)[app] == false) { falseCounter++; } });\n        if (falseCounter == keys.length) { alert("You must choose an application at least!"); return; }\n\n        let user = undefined;\n        if (createInitials.value) {\n            const { userName, userEmail, userPassword } = initialUser.value;\n            if ((!userName || !userEmail || !userPassword)) {\n                alert("\'userName\', \'userEmail\' and \'userPassword\' fields are required!");\n                return;\n            }\n            user = { userName, userEmail, userPassword };\n        }\n\n        await systemUserManagement.createDomain(name.value, apps.value, user);\n        emit("close");\n    }, { loading: true });\n}\n\n<\/script>\n<template>\n    <div class="input-line">\n        Domain Name <input type="text" v-model="name" @input="(val) => (name = name?.toUpperCase())" />\n    </div>\n    <div class="input-line">\n        DB Name {{name ? `DB${name}`: ""}}\n    </div>\n    <div class="input-line">\n        Applications\n        <div v-for="item in appItems">{{ item }} <input type="checkbox" v-model="apps[item]" /></div>\n    </div>\n    <div class="input-line">\n        <input type="checkbox" v-model="createInitials">\n        Create the initial admin user\n    </div>\n    <div class="input-line" v-if="createInitials">\n        <div class="input-line">\n            User Name <input type="text" v-model="initialUser.userName" />\n        </div>\n        <div class="input-line">\n            User Email <input type="text" v-model="initialUser.userEmail" />\n        </div>\n        <div class="input-line">\n            Password <input type="password" v-model="initialUser.userPassword" />\n        </div>\n    </div>\n    <div class="input-line">\n        <button @click="create()">Create</button>\n    </div>\n</template>\n\n<style scoped>\n.input-line {\n    margin-top: 20px;\n    margin-left: 10px;\n}\n</style>'],sourceRoot:""}]);const r=l},419:(e,n,a)=>{a.r(n),a.d(n,{default:()=>O});var t=a(2068),s=a(1705),i=a(9045),l=a(1407),r=a(3734),u=a(664),o=a(1145);const p={class:"input-line"},c=(0,t.Uk)(" Domain Name "),m={class:"input-line"},d={class:"input-line"},v=(0,t.Uk)(" Applications "),y=["onUpdate:modelValue"],f={class:"input-line"},U=(0,t.Uk)(" Create the initial admin user "),w={key:0,class:"input-line"},g={class:"input-line"},k=(0,t.Uk)(" User Name "),x={class:"input-line"},C=(0,t.Uk)(" User Email "),b={class:"input-line"},I=(0,t.Uk)(" Password "),h={class:"input-line"},E=(0,t.aZ)({__name:"createDomain",emits:["close"],setup(e,{emit:n}){const a=r.nC.resolve(u.y),E=r.nC.resolve(o.H),_=(0,l.iH)(),N=(0,l.iH)({quick:!0,bpmn:!0,entity:!0,flow:!0,process:!0}),D=(0,l.iH)(Object.keys(N.value)),A=(0,l.iH)(!0),P=(0,l.iH)({});return(e,l)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",p,[c,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),onInput:l[1]||(l[1]=e=>{var n;return _.value=null===(n=_.value)||void 0===n?void 0:n.toUpperCase()})},null,544),[[s.vModelText,_.value]])]),(0,t._)("div",m," DB Name "+(0,i.toDisplayString)(_.value?`DB${_.value}`:""),1),(0,t._)("div",d,[v,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(D.value,(e=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t.Uk)((0,i.toDisplayString)(e)+" ",1),(0,t.wy)((0,t._)("input",{type:"checkbox","onUpdate:modelValue":n=>N.value[e]=n},null,8,y),[[s.vModelCheckbox,N.value[e]]])])))),256))]),(0,t._)("div",f,[(0,t.wy)((0,t._)("input",{type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=e=>A.value=e)},null,512),[[s.vModelCheckbox,A.value]]),U]),A.value?((0,t.wg)(),(0,t.iD)("div",w,[(0,t._)("div",g,[k,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=e=>P.value.userName=e)},null,512),[[s.vModelText,P.value.userName]])]),(0,t._)("div",x,[C,(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=e=>P.value.userEmail=e)},null,512),[[s.vModelText,P.value.userEmail]])]),(0,t._)("div",b,[I,(0,t.wy)((0,t._)("input",{type:"password","onUpdate:modelValue":l[5]||(l[5]=e=>P.value.userPassword=e)},null,512),[[s.vModelText,P.value.userPassword]])])])):(0,t.kq)("v-if",!0),(0,t._)("div",h,[(0,t._)("button",{onClick:l[6]||(l[6]=e=>async function(){await a.execute((async()=>{if(!_.value)return void alert("name required!");let e=0;const a=Object.keys(N.value);if(a.forEach((n=>{0==N.value[n]&&e++})),e==a.length)return void alert("You must choose an application at least!");let t;if(A.value){const{userName:e,userEmail:n,userPassword:a}=P.value;if(!e||!n||!a)return void alert("'userName', 'userEmail' and 'userPassword' fields are required!");t={userName:e,userEmail:n,userPassword:a}}await E.createDomain(_.value,N.value,t),n("close")}),{loading:!0})}())},"Create")])],64))}});var _=a(5701),N=a.n(_),D=a(8236),A=a.n(D),P=a(6080),M=a.n(P),B=a(6850),q=a.n(B),H=a(7182),S=a.n(H),V=a(9213),Z=a.n(V),T=a(4614),j={};j.styleTagTransform=Z(),j.setAttributes=q(),j.insert=M().bind(null,"head"),j.domAPI=A(),j.insertStyleElement=S(),N()(T.Z,j),T.Z&&T.Z.locals&&T.Z.locals;const O=(0,a(1419).Z)(E,[["__scopeId","data-v-b0055540"]])}}]);
//# sourceMappingURL=419.js.map