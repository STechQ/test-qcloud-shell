"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[5553,2525,1],{47234:(e,n,o)=>{o.d(n,{Z:()=>c});var t=o(34663),i=o.n(t),s=o(7638),r=o.n(s),a=o(79240),l=r()(i());l.i(a.Z),l.push([e.id,"\n.container[data-v-0d6ea0aa] {\n        padding: 32px 20px 20px;\n}\n.import-btn[data-v-0d6ea0aa] {\n        background: none;\n        border: none;\n        font-size: 14px;\n        font-weight: 500;\n        color: #2C5A86;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/module/versionSettings.vue"],names:[],mappings:";AAmFI;QACI,uBAAuB;AAC3B;AACA;QACI,gBAAgB;QAChB,YAAY;QACZ,eAAe;QACf,gBAAgB;QAChB,cAAc;AAClB",sourcesContent:['<script setup lang="ts">\n    import { onBeforeMount, ref } from "vue";\n    import { container } from "../../../../../domain/core/diContainer";\n    import { ILocalization } from "../../../../../domain/infrastructure/ILocalization";\n    import { IModule, IModuleVersion } from "../../../../../domain/model/models";\n    import { IModuleVersionUseCase } from "../../../../../domain/useCase/IModuleVersionUseCase";\n    import { IStudio } from "../../../../../domain/useCase/IStudio";\n    import { IUseCaseExecutor } from "../../../../../domain/useCase/IUseCaseExecutor";\n    import { IViewModel } from "../../../../../domain/viewModel/IViewModel";\n\n    interface IModuleItem {\n        module: IModule;\n    }\n    const executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\n    const moduleVersionUseCase = container.resolve<IModuleVersionUseCase>(IModuleVersionUseCase);\n    const viewModel = container.resolve<IViewModel>(IViewModel);\n    const studio = container.resolve<IStudio>(IStudio);\n\n\n    const props = defineProps<IModuleItem>();\n    const localization = container.resolve<ILocalization>(ILocalization);\n    const versions = ref<Array<IModuleVersion>>([]);\n    const tableColumns = ref(["version", "description", "createdBy", "createDate", "state"]);\n    const tableOptions = ref({\n        filterable: false,\n        perPage: 5,\n        perPageValues: [],\n        headings: {\n            version: localization.get("version"),\n            description: localization.get("description"),\n            createdBy: localization.get("createdBy"),\n            createDate: localization.get("createDate"),\n            state: "",\n        },\n        resizableColumns: false,\n        skin: \'module-versions\',\n        texts: {\n            count: "",\n            noResults: "No matching records",\n\n        },\n    });\n    const dateOptions: any = { month: \'2-digit\', day: \'2-digit\', year: \'numeric\', hour: \'numeric\', minute: \'numeric\', second: \'numeric\' };\n    onBeforeMount(() => {\n        getVersions();\n    })\n    function getVersions() {\n        executor.execute(async () => {\n            versions.value = await moduleVersionUseCase.listModuleVersions(props.module.ID);\n        }, {loading: true})\n    }\n    function importModuleVersion(moduleVersion: IModuleVersion) {\n        executor.execute(async () => {\n            const applicationID = viewModel.studio.appId;\n            await studio.detachModuleFromApplication(props.module, applicationID, true);\n            props.module.relatedApplications = props.module.relatedApplications.filter(i => i.applicationID != applicationID);\n            await studio.attachModuletoApplication(props.module, applicationID, true, moduleVersion.version);\n            props.module.relatedApplications.push({ applicationID, importedVersion: moduleVersion.version });\n            moduleVersion.relatedApplications!.push({ applicationID, importedVersion: moduleVersion.version });\n            props.module.currentVersion = moduleVersion.version;\n        }, { loading: true })\n        \n    }\n    function computeImportedVersion() {\n        return props.module.currentVersion;\n    }\n<\/script>\n<template>\n    <div class="container vue-table">\n        <v-client-table ref="table" :data = "versions" :columns="tableColumns" :options="tableOptions">\n            <template #createDate="props">\n                    <span>{{ new Intl.DateTimeFormat("tr-TR", dateOptions).format(new Date(props.row.createDate)) }}</span>\n                </template>\n                 <template #state="props">\n                    <button v-if="props.row.version == computeImportedVersion()" class="import-btn" style="color: #D5D5D5; cursor: default;">Using</button>\n                    <button v-else class="import-btn" @click="importModuleVersion(props.row)">Use This Version</button>\n                </template> \n        </v-client-table>\n    </div>\n\n</template>\n<style scoped>\n    @import url("../../../../../../src/styles/IDE3.css");\n    .container {\n        padding: 32px 20px 20px;\n    }\n    .import-btn {\n        background: none;\n        border: none;\n        font-size: 14px;\n        font-weight: 500;\n        color: #2C5A86;\n    }\n</style>'],sourceRoot:""}]);const c=l},32525:(e,n)=>{n.Z=(e,n)=>{const o=e.__vccOpts||e;for(const[e,t]of n)o[e]=t;return o}},85553:(e,n,o)=>{o.r(n),o.d(n,{default:()=>U});var t=o(71093),i=o(66190),s=o(73843),r=o(5627),a=o(70985),l=o(83240),c=o(6488),u=o(83487),p=o(88613);const d={class:"container vue-table"},m={key:0,class:"import-btn",style:{color:"#D5D5D5",cursor:"default"}},v=["onClick"],I=(0,t.aZ)({__name:"versionSettings",props:{module:null},setup(e){const n=e,o=r.nC.resolve(u.y),I=r.nC.resolve(l.e),g=r.nC.resolve(p.J),f=r.nC.resolve(c.c),A=r.nC.resolve(a.w),C=(0,s.iH)([]),V=(0,s.iH)(["version","description","createdBy","createDate","state"]),D=(0,s.iH)({filterable:!1,perPage:5,perPageValues:[],headings:{version:A.get("version"),description:A.get("description"),createdBy:A.get("createdBy"),createDate:A.get("createDate"),state:""},resizableColumns:!1,skin:"module-versions",texts:{count:"",noResults:"No matching records"}}),b={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};function w(e){o.execute((async()=>{const o=g.studio.appId;await f.detachModuleFromApplication(n.module,o,!0),n.module.relatedApplications=n.module.relatedApplications.filter((e=>e.applicationID!=o)),await f.attachModuletoApplication(n.module,o,!0,e.version),n.module.relatedApplications.push({applicationID:o,importedVersion:e.version}),e.relatedApplications.push({applicationID:o,importedVersion:e.version}),n.module.currentVersion=e.version}),{loading:!0})}function h(){return n.module.currentVersion}return(0,t.wF)((()=>{o.execute((async()=>{C.value=await I.listModuleVersions(n.module.ID)}),{loading:!0})})),(e,n)=>{const o=(0,t.up)("v-client-table");return(0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(o,{ref:"table",data:C.value,columns:V.value,options:D.value},{createDate:(0,t.w5)((e=>[(0,t._)("span",null,(0,i.toDisplayString)(new Intl.DateTimeFormat("tr-TR",b).format(new Date(e.row.createDate))),1)])),state:(0,t.w5)((e=>[e.row.version==h()?((0,t.wg)(),(0,t.iD)("button",m,"Using")):((0,t.wg)(),(0,t.iD)("button",{key:1,class:"import-btn",onClick:n=>w(e.row)},"Use This Version",8,v))])),_:1},8,["data","columns","options"])])}}});var g=o(17450),f=o.n(g),A=o(29530),C=o.n(A),V=o(16199),D=o.n(V),b=o(40458),w=o.n(b),h=o(62916),M=o.n(h),y=o(92165),x=o.n(y),B=o(47234),k={};k.styleTagTransform=x(),k.setAttributes=w(),k.insert=D().bind(null,"head"),k.domAPI=C(),k.insertStyleElement=M(),f()(B.Z,k),B.Z&&B.Z.locals&&B.Z.locals;const U=(0,o(32525).Z)(I,[["__scopeId","data-v-0d6ea0aa"]])}}]);
//# sourceMappingURL=5553.js.map?ver=0.0.311_1710249164190