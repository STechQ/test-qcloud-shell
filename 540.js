"use strict";(self.webpackChunkqcloud_shell=self.webpackChunkqcloud_shell||[]).push([[540],{3970:(e,n,t)=>{t.d(n,{Z:()=>i});var o=t(1864),a=t.n(o),s=t(352),r=t.n(s)()(a());r.push([e.id,"\n.deploy-screen-container[data-v-15b91816] {\n    width: 1417px;\n    height: 700px;\n    position: relative;\n}\n.default-button[data-v-15b91816] {\n    cursor: pointer;\n    position: absolute;\n    top: 652px;\n    left: 1257px;\n    width: 98px;\n    height: 48px;\n    /* UI Properties */\n    background: #151233 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    opacity: 1;\n}\n.button-disabled[data-v-15b91816] {\n    cursor: default;\n    opacity: 0.5;\n}\n.next-button-text[data-v-15b91816] {\n    cursor: pointer;\n    position: absolute;\n    top: 664px;\n    left: 1281px;\n    width: 50px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26) var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--white);\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #ffffff;\n    opacity: 1;\n}\n.finish-button-text[data-v-15b91816] {\n    cursor: pointer;\n    position: absolute;\n    top: 664px;\n    left: 1275px;\n    width: 63px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26) var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--white);\n    text-align: right;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #ffffff;\n    opacity: 1;\n}\n.text-disabled[data-v-15b91816] {\n    cursor: default;\n}\n.previous-button[data-v-15b91816] {\n    cursor: pointer;\n    position: absolute;\n    top: 652px;\n    left: 1115px;\n    width: 126px;\n    height: 48px;\n    /* UI Properties */\n    background: var(--white) 0% 0% no-repeat padding-box;\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    opacity: 1;\n}\n.previous-button-text[data-v-15b91816] {\n    cursor: pointer;\n    position: absolute;\n    top: 664px;\n    left: 1139px;\n    width: 78px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26) var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    text-align: right;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #151233;\n    opacity: 1;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/deploy/deployScreen.vue"],names:[],mappings:";AAiLA;IACI,aAAa;IACb,aAAa;IACb,kBAAkB;AACtB;AAEA;IACI,eAAe;IACf,kBAAkB;IAClB,UAAU;IACV,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,+CAA+C;IAC/C,kBAAkB;IAClB,UAAU;AACd;AAEA;IACI,eAAe;IACf,YAAY;AAChB;AAEA;IACI,eAAe;IACf,kBAAkB;IAClB,UAAU;IACV,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,8KAA8K;IAC9K,kDAAkD;IAClD,mBAAmB;IACnB,gBAAgB;IAChB,2CAA2C;IAC3C,mBAAmB;IACnB,cAAc;IACd,UAAU;AACd;AAEA;IACI,eAAe;IACf,kBAAkB;IAClB,UAAU;IACV,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,8KAA8K;IAC9K,kDAAkD;IAClD,mBAAmB;IACnB,iBAAiB;IACjB,2CAA2C;IAC3C,mBAAmB;IACnB,cAAc;IACd,UAAU;AACd;AAEA;IACI,eAAe;AACnB;AAEA;IACI,eAAe;IACf,kBAAkB;IAClB,UAAU;IACV,YAAY;IACZ,YAAY;IACZ,YAAY;IACZ,kBAAkB;IAClB,oDAAoD;IACpD,+CAA+C;IAC/C,kBAAkB;IAClB,UAAU;AACd;AAEA;IACI,eAAe;IACf,kBAAkB;IAClB,UAAU;IACV,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,8KAA8K;IAC9K,kDAAkD;IAClD,iBAAiB;IACjB,2CAA2C;IAC3C,mBAAmB;IACnB,cAAc;IACd,UAAU;AACd",sourcesContent:['<script setup lang="ts">\nimport { container } from "../../../../../domain/core/diContainer";\nimport { IApplication, IModel, IModule } from \'../../../../../domain/model/models\';\nimport { IViewModel } from "../../../../../domain/viewModel/IViewModel";\nimport IDeployScreenProps from "../../../../../domain/presentation/dialogs/IDeployScreenProps";\nimport DeployScreenHeader from "./deployScreenHeader.vue";\nimport ModuleSelectionTab from "./tabs/moduleSelectionTab.vue";\nimport AssetSelectionTab from "./tabs/assetSelectionTab.vue";\nimport SummaryTab from "./tabs/summaryTab.vue";\nimport { onBeforeMount, ref } from "vue";\nimport { IDeployJobItem, IExportItem } from "@stechquick/algae/lib/qCloudTemp/exporter";\nimport { IUseCaseExecutor } from "../../../../../domain/useCase/IUseCaseExecutor";\nimport { IDeployJobs } from "../../../../../domain/useCase/IDeployJobs";\nimport { UsageType, ModelType } from \'@stechquick/algae/lib/qCloudTemp/quickCloud\';\nimport { IJobUtils } from "../../../../../domain/useCase/IJobUtils";\n\ninterface IDeployScreenAdditionalProps {\n    screenType: "Export" | "Deploy";\n}\n\nconst emit = defineEmits(["close"]);\n\nconst viewModel = container.resolve<IViewModel>(IViewModel);\nconst executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\nconst deployJobsUseCase = container.resolve<IDeployJobs>(IDeployJobs);\nconst jobUtils = container.resolve<IJobUtils>(IJobUtils);\nconst items = viewModel.studio.items.filter((item) => item.objectType == "module") as Array<IModule | IApplication>;\nconst currentApp: IApplication = viewModel.apps.find((item) => item.ID == viewModel.studio.appId)!;\ncurrentApp.children = viewModel.studio.items.filter((item) => item.objectType == "model") as Array<IModel>\nitems.unshift(currentApp);\n\nconst reposServiceStatus = ref<Array<{ repoId: number; exist: boolean }>>([]);\nconst props = defineProps<IDeployScreenAdditionalProps>();\n\nonBeforeMount(async () => {\n    if (props.screenType == "Export") {\n        deployScreenProps.value.stepper.step = 1;\n        return;\n    }\n\n    await executor.execute(async () => {\n        const repoIds = items\n            .filter(i => i.deployParameters != undefined && i.deployParameters.gitServiceRepoId != 0)\n            .map(i => i.deployParameters!.gitServiceRepoId)\n            .filter((value, index, self) => self.indexOf(value) == index);\n\n        if (repoIds.length == 0) { return; }\n\n        const retVal = await deployJobsUseCase.checkRepoHasService(repoIds);\n        reposServiceStatus.value = retVal;\n        deployScreenProps.value.stepper.step = 1;\n    }, { loading: true });\n});\n\nconst deployScreenProps = ref<IDeployScreenProps>({\n    selectedModules: [],\n    moduleSelectionState: {},\n    modulesChanged: false,\n    selectedAssets: [],\n    assetSelectionState: {},\n    stepper: {\n        step: 0,\n        isTabValid: false,\n    },\n});\n\nfunction handleNext() {\n    if (deployScreenProps.value.stepper.isTabValid && deployScreenProps.value.stepper.step < 3) {\n        deployScreenProps.value.stepper.step++;\n        deployScreenProps.value.stepper.isTabValid = false;\n    }\n}\n\nfunction handlePrevious() {\n    if (deployScreenProps.value.stepper.step > 1) {\n        deployScreenProps.value.stepper.step--;\n        deployScreenProps.value.stepper.isTabValid = false;\n    }\n}\n\n// function getTypeOfModel(usageType: UsageType, type: ModelType, fileName: string): IExportItem["type"] {\n//     if(usageType == "appSettings") {\n//         switch (fileName) {\n//             case "pipeline": return "pipeline_qjson";\n//             case "alert": return "alert_qjson";\n//             case "loading": return "loading_qjson";\n//             case "containerServices": return "containerServices_js";\n//             case "settings": return "settings_yaml";\n//         }\n//     }\n//     if(type == "qjson") return "qjsons";\n//     if(type == "js") return "containerServices_js";\n//     if(type == "yaml") return "settings_yaml";\n//     if(type == "namedComponent") return "namedComps";\n//     return type;\n// }\n\nfunction createJob() {\n    if (props.screenType == "Deploy")\n        createDeployJob();\n    else if (props.screenType == "Export")\n        createExportJob();\n}\n\nfunction createExportJob() {\n    //TODO: Write export job function\n    console.error("Export Job!!!")\n}\n\nfunction createDeployJob() {\n    const deployJobs = Array<IDeployJobItem>();\n    deployScreenProps.value.selectedAssets.forEach((module) => {\n        const deployItems = Array<IExportItem>();\n        if (module.state.checked) {\n            module.children!.forEach((children) => {\n                if (children.type == "module" || children.type == "application" || children.type == "folder") return;\n\n                if (children.state.checked) {\n                    deployItems.push({\n                        id: children.ID,\n                        name: jobUtils.getFileFullname(children),\n                        type: jobUtils.getItemType(children),\n                        path: "/",\n                        ver: children.version,\n                    });\n                }\n            });\n            deployJobs.push({\n                deployType: module.type == "application" ? "application" : "module",\n                deployObject: { ID: module.ID, name: module.name },\n                deployItems,\n                environment: {\n                    type: "gitlab", params: {\n                        repoId: module.deployParameters!.gitServiceRepoId, productRepoId: currentApp.deployParameters!.gitProductRepoId,\n                        jobName: currentApp.deployParameters!.jobName, commitServiceId: currentApp.deployParameters!.commitServiceId\n                    }\n                },\n                dropServiceDb: true,\n            });\n        }\n    });\n    executor.execute(\n        async () => {\n            await deployJobsUseCase.createDeployJobs(deployJobs);\n            emit("close");\n        },\n        { loading: true }\n    );\n}\n<\/script>\n\n<template>\n    <div class="deploy-screen-container">\n        <DeployScreenHeader :step="deployScreenProps.stepper.step" />\n        <ModuleSelectionTab :deploy-screen-props="deployScreenProps" :items="items"\n            :reposServiceStatus="reposServiceStatus" v-if="deployScreenProps.stepper.step == 1" />\n        <AssetSelectionTab :deploy-screen-props="deployScreenProps" :reposServiceStatus="reposServiceStatus"\n            v-if="deployScreenProps.stepper.step == 2" />\n        <SummaryTab :deploy-screen-props="deployScreenProps" v-if="deployScreenProps.stepper.step == 3" />\n\n        <div class="previous-button" @click="handlePrevious" v-if="deployScreenProps.stepper.step != 1" />\n        <span class="previous-button-text" @click="handlePrevious"\n            v-if="deployScreenProps.stepper.step != 1">Previous</span>\n\n        <div class="default-button" data-v-33a93b5b="" v-if="deployScreenProps.stepper.step == 3" @click="createJob" />\n        <span class="finish-button-text" v-if="deployScreenProps.stepper.step == 3" @click="createJob"> FINISH </span>\n\n        <div :class="\'default-button\' + (deployScreenProps.stepper.isTabValid ? \'\' : \' button-disabled\')"\n            data-v-33a93b5b="" @click="handleNext" v-if="deployScreenProps.stepper.step < 3" />\n        <span :class="\'next-button-text\' + (deployScreenProps.stepper.isTabValid ? \'\' : \' text-disabled\')"\n            v-if="deployScreenProps.stepper.step < 3" @click="handleNext">\n            NEXT\n        </span>\n    </div>\n</template>\n\n<style scoped>\n.deploy-screen-container {\n    width: 1417px;\n    height: 700px;\n    position: relative;\n}\n\n.default-button {\n    cursor: pointer;\n    position: absolute;\n    top: 652px;\n    left: 1257px;\n    width: 98px;\n    height: 48px;\n    /* UI Properties */\n    background: #151233 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    opacity: 1;\n}\n\n.button-disabled {\n    cursor: default;\n    opacity: 0.5;\n}\n\n.next-button-text {\n    cursor: pointer;\n    position: absolute;\n    top: 664px;\n    left: 1281px;\n    width: 50px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26) var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--white);\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #ffffff;\n    opacity: 1;\n}\n\n.finish-button-text {\n    cursor: pointer;\n    position: absolute;\n    top: 664px;\n    left: 1275px;\n    width: 63px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26) var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--white);\n    text-align: right;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #ffffff;\n    opacity: 1;\n}\n\n.text-disabled {\n    cursor: default;\n}\n\n.previous-button {\n    cursor: pointer;\n    position: absolute;\n    top: 652px;\n    left: 1115px;\n    width: 126px;\n    height: 48px;\n    /* UI Properties */\n    background: var(--white) 0% 0% no-repeat padding-box;\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border-radius: 4px;\n    opacity: 1;\n}\n\n.previous-button-text {\n    cursor: pointer;\n    position: absolute;\n    top: 664px;\n    left: 1139px;\n    width: 78px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26) var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    text-align: right;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #151233;\n    opacity: 1;\n}\n</style>\n'],sourceRoot:""}]);const i=r},1427:(e,n,t)=>{t.d(n,{Z:()=>i});var o=t(1864),a=t.n(o),s=t(352),r=t.n(s)()(a());r.push([e.id,"\n.deploy-screen-header-container[data-v-2db39ce2] {\n    top: 0px;\n    left: 0px;\n    width: 1417px;\n    height: 115px;\n    /* UI Properties */\n    background: var(--grey-lighten-4) 0% 0% no-repeat padding-box;\n    background: #f5f5f5 0% 0% no-repeat padding-box;\n    border: 1px solid #d5d5d5;\n    border-radius: 4px 4px 0px 0px;\n    opacity: 1;\n    position: relative;\n}\n.first-box[data-v-2db39ce2] {\n    position: absolute;\n    top: 36px;\n    left: 106px;\n}\n.second-box[data-v-2db39ce2] {\n    position: absolute;\n    top: 35px;\n    left: 605px;\n}\n.third-box[data-v-2db39ce2] {\n    position: absolute;\n    top: 36px;\n    left: 1166px;\n}\n.box[data-v-2db39ce2] {\n    /* UI Properties */\n    width: 43px;\n    height: 43px;\n    border-radius: 50%;\n    background: var(--white) 0% 0% no-repeat padding-box;\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 2px solid #6f749f;\n    opacity: 1;\n}\n.box-active[data-v-2db39ce2] {\n    /* UI Properties */\n    width: 43px;\n    height: 43px;\n    background: #151233 0% 0% no-repeat padding-box;\n    opacity: 1;\n    border-radius: 50%;\n}\n.box-done[data-v-2db39ce2] {\n    /* UI Properties */\n    width: 43px;\n    height: 43px;\n    border-radius: 50%;\n    background: #14991d 0% 0% no-repeat padding-box;\n    opacity: 1;\n}\n.first-number[data-v-2db39ce2] {\n    position: absolute;\n    top: 42px;\n    left: 121px;\n    width: 13px;\n    height: 29px;\n}\n.second-number[data-v-2db39ce2] {\n    position: absolute;\n    top: 41px;\n    left: 620px;\n    width: 13px;\n    height: 29px;\n}\n.third-number[data-v-2db39ce2] {\n        position: absolute;\n        top: 42px;\n        left: 1181px;\n        width: 13px;\n        height: 29px;\n}\n.number[data-v-2db39ce2] {\n        /* UI Properties */\n        font: var(--unnamed-font-style-normal) normal bold 22px/29px var(--unnamed-font-family-roboto);\n        letter-spacing: var(--unnamed-character-spacing-0);\n        text-align: left;\n        font: normal normal bold 22px/29px Roboto;\n        letter-spacing: 0px;\n        color: #6f749f;\n        opacity: 1;\n}\n.number-active[data-v-2db39ce2] {\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal bold 22px/29px var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--white);\n    text-align: left;\n    font: normal normal bold 22px/29px Roboto;\n    letter-spacing: 0px;\n    color: #ffffff;\n    opacity: 1;\n}\n.first-text[data-v-2db39ce2] {\n    position: absolute;\n    top: 42px;\n    left: 158px;\n    width: 172px;\n    height: 29px;\n}\n.second-text[data-v-2db39ce2] {\n    position: absolute;\n    top: 41px;\n    left: 657px;\n    width: 154px;\n    height: 29px;\n}\n.third-text[data-v-2db39ce2] {\n    position: absolute;\n    top: 42px;\n    left: 1218px;\n    width: 154px;\n    height: 29px;\n}\n.text[data-v-2db39ce2] {\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 22px/29px var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    text-align: left;\n    font: normal normal normal 22px/29px Roboto;\n    letter-spacing: 0px;\n    color: #6f749f;\n    opacity: 1;\n}\n.text-active[data-v-2db39ce2] {\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal bold 22px/29px var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    text-align: left;\n    font: normal normal bold 22px/29px Roboto;\n    letter-spacing: 0px;\n    color: #151233;\n    opacity: 1;\n}\n.first-line[data-v-2db39ce2] {\n    position: absolute;\n    display: block;\n    top: 57.5px;\n    left: 350px;\n    width: 235px;\n    height: 0px;\n}\n.second-line[data-v-2db39ce2] {\n    position: absolute;\n    top: 57.5px;\n    left: 831px;\n    width: 315px;\n    height: 0px;\n}\n.line[data-v-2db39ce2] {\n    /* UI Properties */\n    border: 1px solid #989ac1;\n    opacity: 1;\n}\n.line-active[data-v-2db39ce2] {\n    /* UI Properties */\n    border: 1px solid #151233;\n    opacity: 1;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/deploy/deployScreenHeader.vue"],names:[],mappings:";AAyBA;IACI,QAAQ;IACR,SAAS;IACT,aAAa;IACb,aAAa;IACb,kBAAkB;IAClB,6DAA6D;IAC7D,+CAA+C;IAC/C,yBAAyB;IACzB,8BAA8B;IAC9B,UAAU;IACV,kBAAkB;AACtB;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,WAAW;AACf;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,WAAW;AACf;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,YAAY;AAChB;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,oDAAoD;IACpD,+CAA+C;IAC/C,yBAAyB;IACzB,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,+CAA+C;IAC/C,UAAU;IACV,kBAAkB;AACtB;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,+CAA+C;IAC/C,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,WAAW;IACX,WAAW;IACX,YAAY;AAChB;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,WAAW;IACX,WAAW;IACX,YAAY;AAChB;AACA;QACQ,kBAAkB;QAClB,SAAS;QACT,YAAY;QACZ,WAAW;QACX,YAAY;AACpB;AAEA;QACQ,kBAAkB;QAClB,8FAA8F;QAC9F,kDAAkD;QAClD,gBAAgB;QAChB,yCAAyC;QACzC,mBAAmB;QACnB,cAAc;QACd,UAAU;AAClB;AAEA;IACI,kBAAkB;IAClB,8FAA8F;IAC9F,kDAAkD;IAClD,mBAAmB;IACnB,gBAAgB;IAChB,yCAAyC;IACzC,mBAAmB;IACnB,cAAc;IACd,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,WAAW;IACX,YAAY;IACZ,YAAY;AAChB;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,WAAW;IACX,YAAY;IACZ,YAAY;AAChB;AAGA;IACI,kBAAkB;IAClB,SAAS;IACT,YAAY;IACZ,YAAY;IACZ,YAAY;AAChB;AAEA;IACI,kBAAkB;IAClB,2HAA2H;IAC3H,kDAAkD;IAClD,gBAAgB;IAChB,2CAA2C;IAC3C,mBAAmB;IACnB,cAAc;IACd,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,8FAA8F;IAC9F,kDAAkD;IAClD,gBAAgB;IAChB,yCAAyC;IACzC,mBAAmB;IACnB,cAAc;IACd,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,cAAc;IACd,WAAW;IACX,WAAW;IACX,YAAY;IACZ,WAAW;AACf;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,WAAW;IACX,YAAY;IACZ,WAAW;AACf;AAEA;IACI,kBAAkB;IAClB,yBAAyB;IACzB,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,yBAAyB;IACzB,UAAU;AACd",sourcesContent:["<template>\n    <div class=\"deploy-screen-header-container\">\n        <span :class=\"'first-box box' + (props.step === 1 ? '-active' : '-done')\"></span>\n        <span class=\"first-number number-active\">1</span>\n        <span class=\"first-text text-active\">Module Selection</span>\n        <span class=\"first-line line-active\"></span>\n        <span :class=\"'second-box box' + (props.step === 2 ? '-active' : props.step > 2 ? '-done' : '')\"></span>\n        <span :class=\"'second-number number' + (props.step >= 2 ? '-active' : '')\">2</span>\n        <span :class=\"'second-text text' + (props.step >= 2 ? '-active' : '')\">Asset Selection</span>\n        <span :class=\"'second-line line' + (props.step >= 2 ? '-active' : '')\"></span>\n        <span :class=\"'third-box box' + (props.step === 3 ? '-active' : '')\"></span>\n        <span :class=\"'third-number number' + (props.step === 3 ? '-active' : '')\">3</span>\n        <span :class=\"'third-text text' + (props.step === 3 ? '-active' : '')\">Summary</span>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\ninterface IData {\n    step: number;\n}\n\nconst props = defineProps<IData>();\n<\/script>\n\n<style scoped>\n.deploy-screen-header-container {\n    top: 0px;\n    left: 0px;\n    width: 1417px;\n    height: 115px;\n    /* UI Properties */\n    background: var(--grey-lighten-4) 0% 0% no-repeat padding-box;\n    background: #f5f5f5 0% 0% no-repeat padding-box;\n    border: 1px solid #d5d5d5;\n    border-radius: 4px 4px 0px 0px;\n    opacity: 1;\n    position: relative;\n}\n\n.first-box {\n    position: absolute;\n    top: 36px;\n    left: 106px;\n}\n\n.second-box {\n    position: absolute;\n    top: 35px;\n    left: 605px;\n}\n\n.third-box {\n    position: absolute;\n    top: 36px;\n    left: 1166px;\n}\n\n.box {\n    /* UI Properties */\n    width: 43px;\n    height: 43px;\n    border-radius: 50%;\n    background: var(--white) 0% 0% no-repeat padding-box;\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 2px solid #6f749f;\n    opacity: 1;\n}\n\n.box-active {\n    /* UI Properties */\n    width: 43px;\n    height: 43px;\n    background: #151233 0% 0% no-repeat padding-box;\n    opacity: 1;\n    border-radius: 50%;\n}\n\n.box-done {\n    /* UI Properties */\n    width: 43px;\n    height: 43px;\n    border-radius: 50%;\n    background: #14991d 0% 0% no-repeat padding-box;\n    opacity: 1;\n}\n\n.first-number {\n    position: absolute;\n    top: 42px;\n    left: 121px;\n    width: 13px;\n    height: 29px;\n}\n\n.second-number {\n    position: absolute;\n    top: 41px;\n    left: 620px;\n    width: 13px;\n    height: 29px;\n}\n.third-number {\n        position: absolute;\n        top: 42px;\n        left: 1181px;\n        width: 13px;\n        height: 29px;\n}\n\n.number {\n        /* UI Properties */\n        font: var(--unnamed-font-style-normal) normal bold 22px/29px var(--unnamed-font-family-roboto);\n        letter-spacing: var(--unnamed-character-spacing-0);\n        text-align: left;\n        font: normal normal bold 22px/29px Roboto;\n        letter-spacing: 0px;\n        color: #6f749f;\n        opacity: 1;\n}\n\n.number-active {\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal bold 22px/29px var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--white);\n    text-align: left;\n    font: normal normal bold 22px/29px Roboto;\n    letter-spacing: 0px;\n    color: #ffffff;\n    opacity: 1;\n}\n\n.first-text {\n    position: absolute;\n    top: 42px;\n    left: 158px;\n    width: 172px;\n    height: 29px;\n}\n\n.second-text {\n    position: absolute;\n    top: 41px;\n    left: 657px;\n    width: 154px;\n    height: 29px;\n}\n\n\n.third-text {\n    position: absolute;\n    top: 42px;\n    left: 1218px;\n    width: 154px;\n    height: 29px;\n}\n\n.text {\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 22px/29px var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    text-align: left;\n    font: normal normal normal 22px/29px Roboto;\n    letter-spacing: 0px;\n    color: #6f749f;\n    opacity: 1;\n}\n\n.text-active {\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal bold 22px/29px var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    text-align: left;\n    font: normal normal bold 22px/29px Roboto;\n    letter-spacing: 0px;\n    color: #151233;\n    opacity: 1;\n}\n\n.first-line {\n    position: absolute;\n    display: block;\n    top: 57.5px;\n    left: 350px;\n    width: 235px;\n    height: 0px;\n}\n\n.second-line {\n    position: absolute;\n    top: 57.5px;\n    left: 831px;\n    width: 315px;\n    height: 0px;\n}\n\n.line {\n    /* UI Properties */\n    border: 1px solid #989ac1;\n    opacity: 1;\n}\n\n.line-active {\n    /* UI Properties */\n    border: 1px solid #151233;\n    opacity: 1;\n}\n</style>\n"],sourceRoot:""}]);const i=r},8256:(e,n,t)=>{t.d(n,{Z:()=>p});var o=t(1864),a=t.n(o),s=t(352),r=t.n(s),i=t(5612),l=r()(a());l.i(i.Z),l.push([e.id,"\n.select-text[data-v-bf209a60] {\n    position: absolute;\n    top: 141px;\n    left: 62px;\n    width: 370px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26)\n        var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--grey-darken-1);\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #757575;\n    opacity: 1;\n}\n.treeview-card[data-v-bf209a60] {\n    position: absolute;\n    top: 182px;\n    left: 62px;\n    width: 1293px;\n    height: 429px;\n    /* UI Properties */\n    background: var(--white) 0% 0% no-repeat padding-box;\n    border: 1px solid var(--grey-lighten-2);\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #e0e0e0;\n    opacity: 1;\n    overflow: auto;\n}\n.treeview-card[data-v-bf209a60]::-webkit-scrollbar {\n    width: 12px;\n}\n.treeview-card[data-v-bf209a60]::-webkit-scrollbar-track {\n    background: transparent;\n}\n.treeview-card[data-v-bf209a60]::-webkit-scrollbar-thumb {\n    background-color: #D0D1E9;    \n    border-radius: 16px;\n}\n.pencilIcon[data-v-bf209a60] {\n    text-align: end;\n}\n.selected-items-count[data-v-bf209a60] {\n    font: normal normal normal 16px/21px Roboto;\n    color: #757575;\n    margin-left: 8px;\n}\n.selected-items-count-bold[data-v-bf209a60] {\n    font: normal normal bold 16px/21px Roboto;\n    color: #151233;\n}\n.icon-properties[data-v-bf209a60] {\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #00000000;\n    opacity: 0;\n}\n.icon-position[data-v-bf209a60] {\n    margin-right: -8px;\n    margin-left: 10px;\n}\n.qjson-color[data-v-bf209a60] {\n    color: #449dd1;\n}\n.yaml-color[data-v-bf209a60] {\n    color: #449dd1;\n}\n.js-color[data-v-bf209a60] {\n    color: #449dd1;\n}\n.process-color[data-v-bf209a60] {\n    color: #007c77;\n}\n.bpmn-color[data-v-bf209a60] {\n    color: #007c77;\n}\n.entity-designer-color[data-v-bf209a60] {\n    color: #e9724c;\n}\n.warning-text[data-v-bf209a60] {\n    text-align: left;\n    font: normal normal normal 16px/21px Roboto;\n    letter-spacing: 0px;\n    color: red;\n    opacity: 1;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/deploy/tabs/assetSelectionTab.vue"],names:[],mappings:";AA4IA;IACI,kBAAkB;IAClB,UAAU;IACV,UAAU;IACV,YAAY;IACZ,YAAY;IACZ,kBAAkB;IAClB;yCACqC;IACrC,kDAAkD;IAClD,2BAA2B;IAC3B,gBAAgB;IAChB,2CAA2C;IAC3C,mBAAmB;IACnB,cAAc;IACd,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,UAAU;IACV,aAAa;IACb,aAAa;IACb,kBAAkB;IAClB,oDAAoD;IACpD,uCAAuC;IACvC,+CAA+C;IAC/C,yBAAyB;IACzB,UAAU;IACV,cAAc;AAClB;AAEE;IACE,WAAW;AACb;AAEA;IACE,uBAAuB;AACzB;AAEA;IACE,yBAAyB;IACzB,mBAAmB;AACrB;AAEF;IACI,eAAe;AACnB;AAEA;IACI,2CAA2C;IAC3C,cAAc;IACd,gBAAgB;AACpB;AACA;IACI,yCAAyC;IACzC,cAAc;AAClB;AAEA;IACI,+CAA+C;IAC/C,2BAA2B;IAC3B,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,iBAAiB;AACrB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,gBAAgB;IAChB,2CAA2C;IAC3C,mBAAmB;IACnB,UAAU;IACV,UAAU;AACd",sourcesContent:['<template>\n    <div class="select-text">Select assets</div>\n    <div class="treeview-card">\n        <tree :nodes="treeViewNodes" :config="config" @nodeChecked="setSelectedAssets" @nodeUnchecked="setSelectedAssets">\n            <template #before-input="{ node }">\n                <span v-if="node.type == \'application\'" class="mdi mdi-application module-color icon-position" />\n                <span v-if="node.type == \'module\'" class="mdi mdi-puzzle module-color icon-position" />\n                <span v-if="node.type == \'qjson\'" class="mdi mdi-palette qjson-color icon-position" />\n                <span v-if="node.type == \'yaml\'" class="mdi mdi-palette yaml-color icon-position" />\n                <span v-if="node.type == \'js\'" class="mdi mdi-palette js-color icon-position" />\n                <span v-if="node.type == \'process\'" class="mdi mdi-auto-fix process-color icon-position" />\n                <span v-if="node.type == \'bpmn\'" class="mdi mdi-vector-polyline bpmn-color icon-position" />\n                <span v-if="node.type == \'entityDesigner\'" \n                        :class="\'mdi mdi-database entity-designer-color icon-position\' + (node.state.disabled ? \' deploy-screen-disabled-icon\' : \'\')"\n                />\n            </template>\n            <template #after-input="{ node }" style="display: flex; align-items: flex-end">\n                <span class="warning-text" v-if="node.state.disabled">(Entity selection is required for this module!)</span>\n                <div class="col align-self-end" v-if="node.version != undefined" style="margin-right: 10px;">\n                    <div class="pencilIcon">\n                        <h6 class="align-version tree-text ps-3 versionText">\n                            <span v-if="node.version == \'System latest\'" class="versionBadge latestVersionBadge">* </span>\n                            {{ node.version + "   version" }}\n                            <i class="mdi mdi-pencil-outline ms-1" @click="versionDialog(node)"></i>\n                        </h6>\n                    </div>\n                </div>\n                <div v-if="node.type == \'module\' || node.type == \'application\'">\n                    <span class="selected-items-count">\n                        (<span class="selected-items-count-bold">\n                            {{ node.children.filter((children:any) => treeViewNodes[children].state.checked ).length}}\n                        </span>\n                        of\n                        <span class="selected-items-count-bold">\n                            {{ node.children.length }}\n                        </span>\n                        models selected)\n                    </span>\n                </div>\n            </template>\n        </tree>\n    </div>\n</template>\n\n<script setup lang="ts">\nimport tree from "vue3-treeview";\nimport "vue3-treeview/dist/style.css";\nimport { defineAsyncComponent, ref } from "vue";\nimport { container } from "../../../../../../domain/core/diContainer";\nimport IDeployScreenProps, { ITreeViewNode } from "../../../../../../domain/presentation/dialogs/IDeployScreenProps";\nimport { IDialog } from "../../../../../../domain/presentation/IDialog";\n\ninterface IData {\n    deployScreenProps: IDeployScreenProps;\n    reposServiceStatus: Array<{ repoId: number; exist: boolean; }>;\n}\n\ntype ITreeViewData = Record<string, ITreeViewNode>;\nconst props = defineProps<IData>();\nconst dialog = container.resolve<IDialog>(IDialog);\nconst selectedAssets = ref<Array<ITreeViewNode>>(props.deployScreenProps.selectedAssets);\nconst roots = selectedAssets.value.map((item) => item.ID);\nconst treeViewNodes = ref<ITreeViewData>(props.deployScreenProps.assetSelectionState);\n\nfunction iterateItemsAndFindChildren(items: Array<any>, parent?: any) {\n    items.forEach((item) => {\n        const selectionRequired = isSelectionRequired(item, parent);\n\n        const curNode: ITreeViewNode = (treeViewNodes.value[item.ID] = {\n            ID: item.ID,\n            text: item.name,\n            name: item.name,\n            type: item.type || item.modelType || item.objectType,\n            usageType: item.usageType,\n            state: { checked: true, opened: true, disabled: selectionRequired },\n            version: item.type != "folder" && item.type != "module" && item.type != "application" ? "latest" : undefined,\n            deployParameters: item.deployParameters\n        });\n        if (!item.children) {\n            return;\n        }\n\n        curNode.children = item.children.map((child: any) => child.ID);\n        iterateItemsAndFindChildren(item.children, item);\n    });\n}\n\nfunction isSelectionRequired(item: any, parent: any) {\n    const type = item.type || item.modelType || item.objectType;\n    if(type != "entityDesigner") { return false; }\n\n    const isServiceExist = props.reposServiceStatus.some(i => i.repoId == parent.deployParameters!.gitServiceRepoId && i.exist);\n    return !isServiceExist;\n}\n\nif (!Object.keys(treeViewNodes.value).length || props.deployScreenProps.modulesChanged) {\n    props.deployScreenProps.selectedAssets.forEach((asset) => {\n        if (!Object.keys(treeViewNodes.value).includes(asset.ID)) {\n            iterateItemsAndFindChildren(selectedAssets.value);\n        }\n    });\n    props.deployScreenProps.modulesChanged = false;\n}\n\nselectedAssets.value.forEach((asset) => {\n    asset.children = asset.children?.map((child) => treeViewNodes.value[child.ID]);\n});\n\nconst config = ref({\n    roots,\n    checkboxes: true,\n    dragAndDrop: false,\n    editable: false,\n    checkMode: 0,\n});\n\nfunction setSelectedAssets() {\n    selectedAssets.value.forEach((asset) => {\n        asset.state.checked = asset.children!.some((children) => children.state.checked)\n        const entityChild = asset.children?.find(child => child.type == "entityDesigner" && child.state.disabled)\n        if(asset.state.checked && entityChild) {\n            entityChild.state.checked = true;\n        }\n    });\n    props.deployScreenProps.stepper.isTabValid = props.deployScreenProps.selectedAssets.some((asset) => asset.state.checked);\n}\n\nsetSelectedAssets();\n\nfunction versionDialog(clickedNode: ITreeViewNode) {\n    dialog.showDialog(\n        defineAsyncComponent(() => import("../../../application/modelVersionDialog.vue")),\n        { closable: true, title: "Change Version", width: "900px", height: "auto", overflow: "auto" },\n        { clickedNode }\n    );\n}\n<\/script>\n\n<style scoped>\n@import url("../../../../../../styles/IDE3.css");\n.select-text {\n    position: absolute;\n    top: 141px;\n    left: 62px;\n    width: 370px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26)\n        var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--grey-darken-1);\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #757575;\n    opacity: 1;\n}\n\n.treeview-card {\n    position: absolute;\n    top: 182px;\n    left: 62px;\n    width: 1293px;\n    height: 429px;\n    /* UI Properties */\n    background: var(--white) 0% 0% no-repeat padding-box;\n    border: 1px solid var(--grey-lighten-2);\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #e0e0e0;\n    opacity: 1;\n    overflow: auto;\n}\n\n  .treeview-card::-webkit-scrollbar {\n    width: 12px;               \n  }\n\n  .treeview-card::-webkit-scrollbar-track {\n    background: transparent;        \n  }\n\n  .treeview-card::-webkit-scrollbar-thumb {\n    background-color: #D0D1E9;    \n    border-radius: 16px;   \n  }\n\n.pencilIcon {\n    text-align: end;\n}\n\n.selected-items-count {\n    font: normal normal normal 16px/21px Roboto;\n    color: #757575;\n    margin-left: 8px;\n}\n.selected-items-count-bold {\n    font: normal normal bold 16px/21px Roboto;\n    color: #151233;\n}\n\n.icon-properties {\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #00000000;\n    opacity: 0;\n}\n\n.icon-position {\n    margin-right: -8px;\n    margin-left: 10px;\n}\n\n.qjson-color {\n    color: #449dd1;\n}\n\n.yaml-color {\n    color: #449dd1;\n}\n\n.js-color {\n    color: #449dd1;\n}\n\n.process-color {\n    color: #007c77;\n}\n\n.bpmn-color {\n    color: #007c77;\n}\n\n.entity-designer-color {\n    color: #e9724c;\n}\n\n.warning-text {\n    text-align: left;\n    font: normal normal normal 16px/21px Roboto;\n    letter-spacing: 0px;\n    color: red;\n    opacity: 1;\n}\n</style>\n'],sourceRoot:""}]);const p=l},5124:(e,n,t)=>{t.d(n,{Z:()=>p});var o=t(1864),a=t.n(o),s=t(352),r=t.n(s),i=t(5612),l=r()(a());l.i(i.Z),l.push([e.id,"\n.select-text[data-v-38f1100b] {\n    position: absolute;\n    top: 141px;\n    left: 62px;\n    width: 370px;\n    height: 26px;\n    /* UI Properties */\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #757575;\n    opacity: 1;\n}\n.top-text-container[data-v-38f1100b] {\n    position: absolute;\n    top: 185px;\n    left: 62px;\n}\n.bold-number[data-v-38f1100b] {\n    text-align: left;\n    font: normal normal bold 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #212121;\n}\n.top-text-description[data-v-38f1100b] {\n    /* UI Properties */\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #757575;\n}\n.select-modules-checkbox[data-v-38f1100b] {\n    width: 18px;\n    height: 18px;\n    color: #151233;\n    /* UI Properties */\n    border-radius: 50%;\n    margin-right: 7px;\n}\n.treeview-card[data-v-38f1100b] {\n    position: absolute;\n    top: 219px;\n    left: 62px;\n    width: 1293px;\n    height: 392px;\n    /* UI Properties */\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #e0e0e0;\n    opacity: 1;\n    overflow: auto;\n}\n.treeview-card[data-v-38f1100b]::-webkit-scrollbar {\n    width: 12px;\n}\n.treeview-card[data-v-38f1100b]::-webkit-scrollbar-track {\n    background: transparent;\n}\n.treeview-card[data-v-38f1100b]::-webkit-scrollbar-thumb {\n    background-color: #d0d1e9;\n    border-radius: 16px;\n}\n.icon-position[data-v-38f1100b] {\n    margin-right: -8px;\n    margin-left: 10px;\n}\n.warning-text[data-v-38f1100b] {\n    text-align: left;\n    font: normal normal normal 16px/21px Roboto;\n    letter-spacing: 0px;\n    color: red;\n    opacity: 1;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/deploy/tabs/moduleSelectionTab.vue"],names:[],mappings:";AAuJA;IACI,kBAAkB;IAClB,UAAU;IACV,UAAU;IACV,YAAY;IACZ,YAAY;IACZ,kBAAkB;IAClB,gBAAgB;IAChB,2CAA2C;IAC3C,mBAAmB;IACnB,cAAc;IACd,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,UAAU;AACd;AAEA;IACI,gBAAgB;IAChB,yCAAyC;IACzC,mBAAmB;IACnB,cAAc;AAClB;AAEA;IACI,kBAAkB;IAClB,gBAAgB;IAChB,2CAA2C;IAC3C,mBAAmB;IACnB,cAAc;AAClB;AAEA;IACI,WAAW;IACX,YAAY;IACZ,cAAc;IACd,kBAAkB;IAClB,kBAAkB;IAClB,iBAAiB;AACrB;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,UAAU;IACV,aAAa;IACb,aAAa;IACb,kBAAkB;IAClB,+CAA+C;IAC/C,yBAAyB;IACzB,UAAU;IACV,cAAc;AAClB;AAEA;IACI,WAAW;AACf;AAEA;IACI,uBAAuB;AAC3B;AAEA;IACI,yBAAyB;IACzB,mBAAmB;AACvB;AAEA;IACI,kBAAkB;IAClB,iBAAiB;AACrB;AAEA;IACI,gBAAgB;IAChB,2CAA2C;IAC3C,mBAAmB;IACnB,UAAU;IACV,UAAU;AACd",sourcesContent:['<template>\n    <div class="select-text">Select modules to deploy</div>\n    <div class="top-text-container">\n        <span\n            class="select-modules-checkbox mdi mdi-minus-box mdi-24px"\n            v-if="enabledModules.length == checkedModules.length"\n            @click="setAllCheckStatus(false)"\n        ></span>\n        <span\n            class="select-modules-checkbox mdi mdi-plus-box mdi-24px"\n            v-if="enabledModules.length != checkedModules.length"\n            @click="setAllCheckStatus(true)"\n        ></span>\n        <span class="bold-number">{{ checkedModules.length }}</span>\n        <span class="top-text-description" style="color: #616161"> of </span>\n        <span class="bold-number">{{ items.length }}</span>\n        <span class="top-text-description"> modules selected</span>\n    </div>\n    <div style="display: flex">\n        <div class="treeview-card">\n            <tree :nodes="treeViewNodes" :config="config" @nodeChecked="setSelectedModules" @nodeUnchecked="setSelectedModules">\n                <template #before-input="{ node }">\n                    <span\n                        v-if="node.type == \'module\'"\n                        :class="\'mdi mdi-puzzle module-color icon-position\' + (node.state.disabled ? \' deploy-screen-disabled-icon\' : \'\')"\n                    />\n                    <span\n                        v-else\n                        :class="\'mdi mdi-application module-color icon-position\' + (node.state.disabled ? \' deploy-screen-disabled-icon\' : \'\')"\n                    />\n                </template>\n                <template #after-input="{ node }">\n                    <span class="warning-text" v-if="node.state.disabled && node.type == \'module\' && node.isRepoAvailableForService"\n                        >(Deploy Settings is not provided!)</span\n                    >\n                    <span class="warning-text" v-if="node.state.disabled && node.type == \'module\' && !node.isRepoAvailableForService"\n                        >(This module must include an entity to deploy!)</span\n                    >\n                </template>\n            </tree>\n        </div>\n    </div>\n</template>\n\n<script setup lang="ts">\nimport tree from "vue3-treeview";\nimport "vue3-treeview/dist/style.css";\nimport { computed, ref } from "vue";\nimport { IApplication, IModule } from "../../../../../../domain/model/models";\nimport IDeployScreenProps, { ITreeViewNode } from "../../../../../../domain/presentation/dialogs/IDeployScreenProps";\n\ninterface IData {\n    deployScreenProps: IDeployScreenProps;\n    items: Array<IModule | IApplication>;\n    reposServiceStatus: Array<{ repoId: number; exist: boolean }>;\n}\n\ntype ITreeViewData = Record<string, ITreeViewNode>;\nconst props = defineProps<IData>();\nconst items = ref<Array<IModule | IApplication>>(props.items.filter((item) => item.children && !!item.children.length));\nconst roots = items.value.map((item) => item.ID);\nconst treeViewNodes = ref<ITreeViewData>(props.deployScreenProps.moduleSelectionState);\n\nif (!Object.keys(treeViewNodes.value).length) {\n    items.value.forEach((item) => {\n        const isRepoAvailableForService = isRepoAvailable(item);\n\n        treeViewNodes.value[item.ID] = {\n            ID: item.ID,\n            text: item.name,\n            name: item.name,\n            type: item.objectType,\n            state: {\n                checked: (item.deployParameters ? item.deployParameters.gitServiceRepoId != 0 : false) && isRepoAvailableForService,\n                disabled: (item.deployParameters ? item.deployParameters.gitServiceRepoId == 0 : true) || !isRepoAvailableForService,\n            },\n            deployParameters: item.deployParameters!,\n            isRepoAvailableForService,\n        };\n    });\n}\n\nfunction isRepoAvailable(item: IModule | IApplication) {\n    if (item.objectType == "application") {\n        return true;\n    }\n\n    const anyEntity = item.children.some((i) => i.objectType == "model" && i.modelType == "entityDesigner");\n    const isServiceExist = props.reposServiceStatus.some((i) => i.repoId == item.deployParameters!.gitServiceRepoId && i.exist);\n\n    return anyEntity || isServiceExist;\n}\n\nconst checkedModules = computed(() =>\n    Object.keys(treeViewNodes.value)\n        .map((key) => treeViewNodes.value[key])\n        .filter((item) => item.state.checked)\n);\n\nconst enabledModules = computed(() =>\n    Object.keys(treeViewNodes.value)\n        .map((key) => treeViewNodes.value[key])\n        .filter((item) => !item.state.disabled)\n);\n\nconst config = ref({\n    roots,\n    checkboxes: true,\n    dragAndDrop: false,\n    editable: false,\n    checkMode: 0,\n    disabledClass: "deploy-screen-disabled-node",\n});\n\nfunction setSelectedModules() {\n    props.deployScreenProps.modulesChanged = true;\n    props.deployScreenProps.selectedModules = items.value.filter((item) =>\n        checkedModules.value.some((checkedModule) => checkedModule.ID === item.ID && checkedModule.state.checked)\n    );\n\n    props.deployScreenProps.selectedAssets = props.deployScreenProps.selectedModules.map(\n        (module) =>\n            ({\n                ID: module.ID,\n                name: module.name,\n                text: module.name,\n                type: module.objectType,\n                usageType: undefined,\n                children: module.children,\n                state: { checked: true },\n                version: undefined,\n                deployParameters: module.deployParameters,\n            } as ITreeViewNode)\n    );\n\n    props.deployScreenProps.stepper.isTabValid = !!props.deployScreenProps.selectedModules.length;\n}\n\nsetSelectedModules();\n\nfunction setAllCheckStatus(selected: boolean) {\n    Object.keys(treeViewNodes.value).forEach(\n        (key) => (treeViewNodes.value[key].state.checked = selected && !treeViewNodes.value[key].state.disabled)\n    );\n    setSelectedModules();\n}\n<\/script>\n\n<style scoped>\n@import url("../../../../../../styles/IDE3.css");\n\n.select-text {\n    position: absolute;\n    top: 141px;\n    left: 62px;\n    width: 370px;\n    height: 26px;\n    /* UI Properties */\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #757575;\n    opacity: 1;\n}\n\n.top-text-container {\n    position: absolute;\n    top: 185px;\n    left: 62px;\n}\n\n.bold-number {\n    text-align: left;\n    font: normal normal bold 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #212121;\n}\n\n.top-text-description {\n    /* UI Properties */\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #757575;\n}\n\n.select-modules-checkbox {\n    width: 18px;\n    height: 18px;\n    color: #151233;\n    /* UI Properties */\n    border-radius: 50%;\n    margin-right: 7px;\n}\n\n.treeview-card {\n    position: absolute;\n    top: 219px;\n    left: 62px;\n    width: 1293px;\n    height: 392px;\n    /* UI Properties */\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #e0e0e0;\n    opacity: 1;\n    overflow: auto;\n}\n\n.treeview-card::-webkit-scrollbar {\n    width: 12px;\n}\n\n.treeview-card::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n.treeview-card::-webkit-scrollbar-thumb {\n    background-color: #d0d1e9;\n    border-radius: 16px;\n}\n\n.icon-position {\n    margin-right: -8px;\n    margin-left: 10px;\n}\n\n.warning-text {\n    text-align: left;\n    font: normal normal normal 16px/21px Roboto;\n    letter-spacing: 0px;\n    color: red;\n    opacity: 1;\n}\n</style>\n'],sourceRoot:""}]);const p=l},156:(e,n,t)=>{t.d(n,{Z:()=>i});var o=t(1864),a=t.n(o),s=t(352),r=t.n(s)()(a());r.push([e.id,"\n.top-text[data-v-606822aa] {\n    position: absolute;\n    top: 141px;\n    left: 62px;\n    width: 370px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26)\n        var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--grey-darken-1);\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #757575;\n    opacity: 1;\n}\n.treeviewCard[data-v-606822aa] {\n    position: absolute;\n    top: 182px;\n    left: 62px;\n    width: 1293px;\n    height: 429px;\n    /* UI Properties */\n    background: var(--white) 0% 0% no-repeat padding-box;\n    border: 1px solid var(--grey-lighten-2);\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #e0e0e0;\n    opacity: 1;\n    overflow: auto;\n}\n.treeviewCard[data-v-606822aa]::-webkit-scrollbar {\n  width: 12px;\n}\n.treeviewCard[data-v-606822aa]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.treeviewCard[data-v-606822aa]::-webkit-scrollbar-thumb {\n  background-color: #D0D1E9;    \n  border-radius: 16px;\n}\n.qjson-color[data-v-606822aa] {\n    color: #449dd1;\n}\n.yaml-color[data-v-606822aa] {\n    color: #449dd1;\n}\n.js-color[data-v-606822aa] {\n    color: #449dd1;\n}\n.process-color[data-v-606822aa] {\n    color: #007c77;\n}\n.bpmn-color[data-v-606822aa] {\n    color: #007c77;\n}\n.entity-designer-color[data-v-606822aa] {\n    color: #e9724c;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/deploy/tabs/summaryTab.vue"],names:[],mappings:";AAqEA;IACI,kBAAkB;IAClB,UAAU;IACV,UAAU;IACV,YAAY;IACZ,YAAY;IACZ,kBAAkB;IAClB;yCACqC;IACrC,kDAAkD;IAClD,2BAA2B;IAC3B,gBAAgB;IAChB,2CAA2C;IAC3C,mBAAmB;IACnB,cAAc;IACd,UAAU;AACd;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,UAAU;IACV,aAAa;IACb,aAAa;IACb,kBAAkB;IAClB,oDAAoD;IACpD,uCAAuC;IACvC,+CAA+C;IAC/C,yBAAyB;IACzB,UAAU;IACV,cAAc;AAClB;AAEA;EACE,WAAW;AACb;AAEA;EACE,uBAAuB;AACzB;AAEA;EACE,yBAAyB;EACzB,mBAAmB;AACrB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB;AAEA;IACI,cAAc;AAClB",sourcesContent:['<template>\n    <div class="top-text">These are the modules will be deployed.</div>\n    <div style="display: flex">\n        <div class="treeviewCard">\n            <tree :nodes="treeViewNodes" :config="config">\n                <template #before-input="{ node }">\n                    <span v-if="node.type == \'application\'" class="mdi mdi-application module-color icon-position" />\n                    <span v-if="node.type == \'module\'" class="mdi mdi-puzzle module-color" />\n                    <span v-if="node.type == \'qjson\'" class="mdi mdi-palette qjson-color" />\n                    <span v-if="node.type == \'yaml\'" class="mdi mdi-palette yaml-color" />\n                    <span v-if="node.type == \'js\'" class="mdi mdi-palette js-color" />\n                    <span v-if="node.type == \'process\'" class="mdi mdi-auto-fix process-color" />\n                    <span v-if="node.type == \'bpmn\'" class="mdi mdi-vector-polyline bpmn-color" />\n                    <span v-if="node.type == \'entityDesigner\'" class="mdi mdi-database entity-designer-color" />\n                </template>\n            </tree>\n        </div>\n    </div>\n</template>\n\n<script setup lang="ts">\nimport tree from "vue3-treeview";\nimport "vue3-treeview/dist/style.css";\nimport { ref } from "vue";\nimport IDeployScreenProps, { ITreeViewNode } from "../../../../../../domain/presentation/dialogs/IDeployScreenProps";\n\ninterface IData {\n    deployScreenProps: IDeployScreenProps;\n}\n\ntype ITreeViewData = Record<string, ITreeViewNode>;\nconst props = defineProps<IData>();\nconst selectedAssets = ref<Array<ITreeViewNode>>(props.deployScreenProps.selectedAssets);\nconst roots = selectedAssets.value.filter((item) => item.state.checked).map((item) => item.ID);\nconst treeViewNodes = ref<ITreeViewData>({});\n\nfunction iterateItemsAndFindChildren(items: Array<any>) {\n    items\n        .filter((item) => item.state.checked)\n        .forEach((item) => {\n            const curNode: ITreeViewNode = (treeViewNodes.value[item.ID] = {\n                ID: item.ID,\n                text: item.name,\n                name: item.name,\n                type: item.type,\n                state: { checked: item.state.checked, opened: true, disabled: false },\n                deployParameters: item.deployParameters,\n            });\n            if (!item.children) {\n                return;\n            }\n\n            curNode.children = item.children.map((child: any) => child.ID);\n            iterateItemsAndFindChildren(item.children);\n        });\n}\n\niterateItemsAndFindChildren(selectedAssets.value);\n\nconst config = ref({\n    roots,\n    checkboxes: false,\n    dragAndDrop: false,\n    editable: false,\n    checkMode: 0,\n});\n<\/script>\n\n<style scoped>\n.top-text {\n    position: absolute;\n    top: 141px;\n    left: 62px;\n    width: 370px;\n    height: 26px;\n    /* UI Properties */\n    font: var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20) / var(--unnamed-line-spacing-26)\n        var(--unnamed-font-family-roboto);\n    letter-spacing: var(--unnamed-character-spacing-0);\n    color: var(--grey-darken-1);\n    text-align: left;\n    font: normal normal normal 20px/26px Roboto;\n    letter-spacing: 0px;\n    color: #757575;\n    opacity: 1;\n}\n\n.treeviewCard {\n    position: absolute;\n    top: 182px;\n    left: 62px;\n    width: 1293px;\n    height: 429px;\n    /* UI Properties */\n    background: var(--white) 0% 0% no-repeat padding-box;\n    border: 1px solid var(--grey-lighten-2);\n    background: #ffffff 0% 0% no-repeat padding-box;\n    border: 1px solid #e0e0e0;\n    opacity: 1;\n    overflow: auto;\n}\n\n.treeviewCard::-webkit-scrollbar {\n  width: 12px;               \n}\n\n.treeviewCard::-webkit-scrollbar-track {\n  background: transparent;        \n}\n\n.treeviewCard::-webkit-scrollbar-thumb {\n  background-color: #D0D1E9;    \n  border-radius: 16px;   \n}\n\n.qjson-color {\n    color: #449dd1;\n}\n\n.yaml-color {\n    color: #449dd1;\n}\n\n.js-color {\n    color: #449dd1;\n}\n\n.process-color {\n    color: #007c77;\n}\n\n.bpmn-color {\n    color: #007c77;\n}\n\n.entity-designer-color {\n    color: #e9724c;\n}\n</style>\n'],sourceRoot:""}]);const i=r},1540:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ne});var o=t(2068),a=t(1407),s=t(9045),r=t(3734),i=t(7422);const l=e=>((0,o.dD)("data-v-2db39ce2"),e=e(),(0,o.Cn)(),e),p={class:"deploy-screen-header-container"},d=l((()=>(0,o._)("span",{class:"first-number number-active"},"1",-1))),c=l((()=>(0,o._)("span",{class:"first-text text-active"},"Module Selection",-1))),A=l((()=>(0,o._)("span",{class:"first-line line-active"},null,-1))),m=(0,o.aZ)({__name:"deployScreenHeader",props:{step:null},setup(e){const n=e;return(e,t)=>((0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("span",{class:(0,s.normalizeClass)("first-box box"+(1===n.step?"-active":"-done"))},null,2),d,c,A,(0,o._)("span",{class:(0,s.normalizeClass)("second-box box"+(2===n.step?"-active":n.step>2?"-done":""))},null,2),(0,o._)("span",{class:(0,s.normalizeClass)("second-number number"+(n.step>=2?"-active":""))},"2",2),(0,o._)("span",{class:(0,s.normalizeClass)("second-text text"+(n.step>=2?"-active":""))},"Asset Selection",2),(0,o._)("span",{class:(0,s.normalizeClass)("second-line line"+(n.step>=2?"-active":""))},null,2),(0,o._)("span",{class:(0,s.normalizeClass)("third-box box"+(3===n.step?"-active":""))},null,2),(0,o._)("span",{class:(0,s.normalizeClass)("third-number number"+(3===n.step?"-active":""))},"3",2),(0,o._)("span",{class:(0,s.normalizeClass)("third-text text"+(3===n.step?"-active":""))},"Summary",2)]))}});var u=t(5701),f=t.n(u),b=t(8236),v=t.n(b),y=t(6080),I=t.n(y),x=t(6850),C=t.n(x),g=t(7182),h=t.n(g),k=t(9213),B=t.n(k),w=t(1427),S={};S.styleTagTransform=B(),S.setAttributes=C(),S.insert=I().bind(null,"head"),S.domAPI=v(),S.insertStyleElement=h(),f()(w.Z,S),w.Z&&w.Z.locals&&w.Z.locals;var D=t(1419);const P=(0,D.Z)(m,[["__scopeId","data-v-2db39ce2"]]);var U=t(6285);t(8411);const E=e=>((0,o.dD)("data-v-38f1100b"),e=e(),(0,o.Cn)(),e),T=E((()=>(0,o._)("div",{class:"select-text"},"Select modules to deploy",-1))),V={class:"top-text-container"},R={class:"bold-number"},j=E((()=>(0,o._)("span",{class:"top-text-description",style:{color:"#616161"}}," of ",-1))),Y={class:"bold-number"},Z=E((()=>(0,o._)("span",{class:"top-text-description"}," modules selected",-1))),q={style:{display:"flex"}},_={class:"treeview-card"},M={key:0,class:"warning-text"},N={key:1,class:"warning-text"},W=(0,o.aZ)({__name:"moduleSelectionTab",props:{deployScreenProps:null,items:null,reposServiceStatus:null},setup(e){const n=e,t=(0,a.iH)(n.items.filter((e=>e.children&&!!e.children.length))),r=t.value.map((e=>e.ID)),i=(0,a.iH)(n.deployScreenProps.moduleSelectionState);Object.keys(i.value).length||t.value.forEach((e=>{const t=function(e){if("application"==e.objectType)return!0;const t=e.children.some((e=>"model"==e.objectType&&"entityDesigner"==e.modelType)),o=n.reposServiceStatus.some((n=>n.repoId==e.deployParameters.gitServiceRepoId&&n.exist));return t||o}(e);i.value[e.ID]={ID:e.ID,text:e.name,name:e.name,type:e.objectType,state:{checked:!!e.deployParameters&&0!=e.deployParameters.gitServiceRepoId&&t,disabled:!e.deployParameters||0==e.deployParameters.gitServiceRepoId||!t},deployParameters:e.deployParameters,isRepoAvailableForService:t}}));const l=(0,o.Fl)((()=>Object.keys(i.value).map((e=>i.value[e])).filter((e=>e.state.checked)))),p=(0,o.Fl)((()=>Object.keys(i.value).map((e=>i.value[e])).filter((e=>!e.state.disabled)))),d=(0,a.iH)({roots:r,checkboxes:!0,dragAndDrop:!1,editable:!1,checkMode:0,disabledClass:"deploy-screen-disabled-node"});function c(){n.deployScreenProps.modulesChanged=!0,n.deployScreenProps.selectedModules=t.value.filter((e=>l.value.some((n=>n.ID===e.ID&&n.state.checked)))),n.deployScreenProps.selectedAssets=n.deployScreenProps.selectedModules.map((e=>({ID:e.ID,name:e.name,text:e.name,type:e.objectType,usageType:void 0,children:e.children,state:{checked:!0},version:void 0,deployParameters:e.deployParameters}))),n.deployScreenProps.stepper.isTabValid=!!n.deployScreenProps.selectedModules.length}function A(e){Object.keys(i.value).forEach((n=>i.value[n].state.checked=e&&!i.value[n].state.disabled)),c()}return c(),(e,n)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[T,(0,o._)("div",V,[(0,a.SU)(p).length==(0,a.SU)(l).length?((0,o.wg)(),(0,o.iD)("span",{key:0,class:"select-modules-checkbox mdi mdi-minus-box mdi-24px",onClick:n[0]||(n[0]=e=>A(!1))})):(0,o.kq)("v-if",!0),(0,a.SU)(p).length!=(0,a.SU)(l).length?((0,o.wg)(),(0,o.iD)("span",{key:1,class:"select-modules-checkbox mdi mdi-plus-box mdi-24px",onClick:n[1]||(n[1]=e=>A(!0))})):(0,o.kq)("v-if",!0),(0,o._)("span",R,(0,s.toDisplayString)((0,a.SU)(l).length),1),j,(0,o._)("span",Y,(0,s.toDisplayString)(t.value.length),1),Z]),(0,o._)("div",q,[(0,o._)("div",_,[(0,o.Wm)((0,a.SU)(U.Z),{nodes:i.value,config:d.value,onNodeChecked:c,onNodeUnchecked:c},{"before-input":(0,o.w5)((({node:e})=>["module"==e.type?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,s.normalizeClass)("mdi mdi-puzzle module-color icon-position"+(e.state.disabled?" deploy-screen-disabled-icon":""))},null,2)):((0,o.wg)(),(0,o.iD)("span",{key:1,class:(0,s.normalizeClass)("mdi mdi-application module-color icon-position"+(e.state.disabled?" deploy-screen-disabled-icon":""))},null,2))])),"after-input":(0,o.w5)((({node:e})=>[e.state.disabled&&"module"==e.type&&e.isRepoAvailableForService?((0,o.wg)(),(0,o.iD)("span",M,"(Deploy Settings is not provided!)")):(0,o.kq)("v-if",!0),e.state.disabled&&"module"==e.type&&!e.isRepoAvailableForService?((0,o.wg)(),(0,o.iD)("span",N,"(This module must include an entity to deploy!)")):(0,o.kq)("v-if",!0)])),_:1},8,["nodes","config"])])])],64))}});var z=t(5124),F={};F.styleTagTransform=B(),F.setAttributes=C(),F.insert=I().bind(null,"head"),F.domAPI=v(),F.insertStyleElement=h(),f()(z.Z,F),z.Z&&z.Z.locals&&z.Z.locals;const J=(0,D.Z)(W,[["__scopeId","data-v-38f1100b"]]);var H=t(2455);const X=(e=>((0,o.dD)("data-v-bf209a60"),e=e(),(0,o.Cn)(),e))((()=>(0,o._)("div",{class:"select-text"},"Select assets",-1))),O={class:"treeview-card"},Q={key:0,class:"mdi mdi-application module-color icon-position"},K={key:1,class:"mdi mdi-puzzle module-color icon-position"},G={key:2,class:"mdi mdi-palette qjson-color icon-position"},L={key:3,class:"mdi mdi-palette yaml-color icon-position"},$={key:4,class:"mdi mdi-palette js-color icon-position"},ee={key:5,class:"mdi mdi-auto-fix process-color icon-position"},ne={key:6,class:"mdi mdi-vector-polyline bpmn-color icon-position"},te={key:0,class:"warning-text"},oe={key:1,class:"col align-self-end",style:{"margin-right":"10px"}},ae={class:"pencilIcon"},se={class:"align-version tree-text ps-3 versionText"},re={key:0,class:"versionBadge latestVersionBadge"},ie=["onClick"],le={key:2},pe={class:"selected-items-count"},de=(0,o.Uk)(" ("),ce={class:"selected-items-count-bold"},Ae=(0,o.Uk)(" of "),me={class:"selected-items-count-bold"},ue=(0,o.Uk)(" models selected) "),fe=(0,o.aZ)({__name:"assetSelectionTab",props:{deployScreenProps:null,reposServiceStatus:null},setup(e){const n=e,i=r.nC.resolve(H.u),l=(0,a.iH)(n.deployScreenProps.selectedAssets),p=l.value.map((e=>e.ID)),d=(0,a.iH)(n.deployScreenProps.assetSelectionState);function c(e,t){e.forEach((e=>{const o=function(e,t){return"entityDesigner"==(e.type||e.modelType||e.objectType)&&!n.reposServiceStatus.some((e=>e.repoId==t.deployParameters.gitServiceRepoId&&e.exist))}(e,t),a=d.value[e.ID]={ID:e.ID,text:e.name,name:e.name,type:e.type||e.modelType||e.objectType,usageType:e.usageType,state:{checked:!0,opened:!0,disabled:o},version:"folder"!=e.type&&"module"!=e.type&&"application"!=e.type?"latest":void 0,deployParameters:e.deployParameters};e.children&&(a.children=e.children.map((e=>e.ID)),c(e.children,e))}))}Object.keys(d.value).length&&!n.deployScreenProps.modulesChanged||(n.deployScreenProps.selectedAssets.forEach((e=>{Object.keys(d.value).includes(e.ID)||c(l.value)})),n.deployScreenProps.modulesChanged=!1),l.value.forEach((e=>{var n;e.children=null===(n=e.children)||void 0===n?void 0:n.map((e=>d.value[e.ID]))}));const A=(0,a.iH)({roots:p,checkboxes:!0,dragAndDrop:!1,editable:!1,checkMode:0});function m(){l.value.forEach((e=>{var n;e.state.checked=e.children.some((e=>e.state.checked));const t=null===(n=e.children)||void 0===n?void 0:n.find((e=>"entityDesigner"==e.type&&e.state.disabled));e.state.checked&&t&&(t.state.checked=!0)})),n.deployScreenProps.stepper.isTabValid=n.deployScreenProps.selectedAssets.some((e=>e.state.checked))}return m(),(e,n)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[X,(0,o._)("div",O,[(0,o.Wm)((0,a.SU)(U.Z),{nodes:d.value,config:A.value,onNodeChecked:m,onNodeUnchecked:m},{"before-input":(0,o.w5)((({node:e})=>["application"==e.type?((0,o.wg)(),(0,o.iD)("span",Q)):(0,o.kq)("v-if",!0),"module"==e.type?((0,o.wg)(),(0,o.iD)("span",K)):(0,o.kq)("v-if",!0),"qjson"==e.type?((0,o.wg)(),(0,o.iD)("span",G)):(0,o.kq)("v-if",!0),"yaml"==e.type?((0,o.wg)(),(0,o.iD)("span",L)):(0,o.kq)("v-if",!0),"js"==e.type?((0,o.wg)(),(0,o.iD)("span",$)):(0,o.kq)("v-if",!0),"process"==e.type?((0,o.wg)(),(0,o.iD)("span",ee)):(0,o.kq)("v-if",!0),"bpmn"==e.type?((0,o.wg)(),(0,o.iD)("span",ne)):(0,o.kq)("v-if",!0),"entityDesigner"==e.type?((0,o.wg)(),(0,o.iD)("span",{key:7,class:(0,s.normalizeClass)("mdi mdi-database entity-designer-color icon-position"+(e.state.disabled?" deploy-screen-disabled-icon":""))},null,2)):(0,o.kq)("v-if",!0)])),"after-input":(0,o.w5)((({node:e})=>[e.state.disabled?((0,o.wg)(),(0,o.iD)("span",te,"(Entity selection is required for this module!)")):(0,o.kq)("v-if",!0),null!=e.version?((0,o.wg)(),(0,o.iD)("div",oe,[(0,o._)("div",ae,[(0,o._)("h6",se,["System latest"==e.version?((0,o.wg)(),(0,o.iD)("span",re,"* ")):(0,o.kq)("v-if",!0),(0,o.Uk)(" "+(0,s.toDisplayString)(e.version+"   version")+" ",1),(0,o._)("i",{class:"mdi mdi-pencil-outline ms-1",onClick:n=>{return a=e,void i.showDialog((0,o.RC)((()=>t.e(411).then(t.bind(t,6411)))),{closable:!0,title:"Change Version",width:"900px",height:"auto",overflow:"auto"},{clickedNode:a});var a}},null,8,ie)])])])):(0,o.kq)("v-if",!0),"module"==e.type||"application"==e.type?((0,o.wg)(),(0,o.iD)("div",le,[(0,o._)("span",pe,[de,(0,o._)("span",ce,(0,s.toDisplayString)(e.children.filter((e=>d.value[e].state.checked)).length),1),Ae,(0,o._)("span",me,(0,s.toDisplayString)(e.children.length),1),ue])])):(0,o.kq)("v-if",!0)])),_:1},8,["nodes","config"])])],64))}});var be=t(8256),ve={};ve.styleTagTransform=B(),ve.setAttributes=C(),ve.insert=I().bind(null,"head"),ve.domAPI=v(),ve.insertStyleElement=h(),f()(be.Z,ve),be.Z&&be.Z.locals&&be.Z.locals;const ye=(0,D.Z)(fe,[["__scopeId","data-v-bf209a60"]]),Ie=(e=>((0,o.dD)("data-v-606822aa"),e=e(),(0,o.Cn)(),e))((()=>(0,o._)("div",{class:"top-text"},"These are the modules will be deployed.",-1))),xe={style:{display:"flex"}},Ce={class:"treeviewCard"},ge={key:0,class:"mdi mdi-application module-color icon-position"},he={key:1,class:"mdi mdi-puzzle module-color"},ke={key:2,class:"mdi mdi-palette qjson-color"},Be={key:3,class:"mdi mdi-palette yaml-color"},we={key:4,class:"mdi mdi-palette js-color"},Se={key:5,class:"mdi mdi-auto-fix process-color"},De={key:6,class:"mdi mdi-vector-polyline bpmn-color"},Pe={key:7,class:"mdi mdi-database entity-designer-color"},Ue=(0,o.aZ)({__name:"summaryTab",props:{deployScreenProps:null},setup(e){const n=e,t=(0,a.iH)(n.deployScreenProps.selectedAssets),s=t.value.filter((e=>e.state.checked)).map((e=>e.ID)),r=(0,a.iH)({});!function e(n){n.filter((e=>e.state.checked)).forEach((n=>{const t=r.value[n.ID]={ID:n.ID,text:n.name,name:n.name,type:n.type,state:{checked:n.state.checked,opened:!0,disabled:!1},deployParameters:n.deployParameters};n.children&&(t.children=n.children.map((e=>e.ID)),e(n.children))}))}(t.value);const i=(0,a.iH)({roots:s,checkboxes:!1,dragAndDrop:!1,editable:!1,checkMode:0});return(e,n)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[Ie,(0,o._)("div",xe,[(0,o._)("div",Ce,[(0,o.Wm)((0,a.SU)(U.Z),{nodes:r.value,config:i.value},{"before-input":(0,o.w5)((({node:e})=>["application"==e.type?((0,o.wg)(),(0,o.iD)("span",ge)):(0,o.kq)("v-if",!0),"module"==e.type?((0,o.wg)(),(0,o.iD)("span",he)):(0,o.kq)("v-if",!0),"qjson"==e.type?((0,o.wg)(),(0,o.iD)("span",ke)):(0,o.kq)("v-if",!0),"yaml"==e.type?((0,o.wg)(),(0,o.iD)("span",Be)):(0,o.kq)("v-if",!0),"js"==e.type?((0,o.wg)(),(0,o.iD)("span",we)):(0,o.kq)("v-if",!0),"process"==e.type?((0,o.wg)(),(0,o.iD)("span",Se)):(0,o.kq)("v-if",!0),"bpmn"==e.type?((0,o.wg)(),(0,o.iD)("span",De)):(0,o.kq)("v-if",!0),"entityDesigner"==e.type?((0,o.wg)(),(0,o.iD)("span",Pe)):(0,o.kq)("v-if",!0)])),_:1},8,["nodes","config"])])])],64))}});var Ee=t(156),Te={};Te.styleTagTransform=B(),Te.setAttributes=C(),Te.insert=I().bind(null,"head"),Te.domAPI=v(),Te.insertStyleElement=h(),f()(Ee.Z,Te),Ee.Z&&Ee.Z.locals&&Ee.Z.locals;const Ve=(0,D.Z)(Ue,[["__scopeId","data-v-606822aa"]]);var Re=t(664),je=t(870),Ye=t(2705);const Ze={class:"deploy-screen-container"},qe=(0,o.aZ)({__name:"deployScreen",props:{screenType:null},emits:["close"],setup(e,{emit:n}){const t=e,l=r.nC.resolve(i.J),p=r.nC.resolve(Re.y),d=r.nC.resolve(je.F),c=r.nC.resolve(Ye.y),A=l.studio.items.filter((e=>"module"==e.objectType)),m=l.apps.find((e=>e.ID==l.studio.appId));m.children=l.studio.items.filter((e=>"model"==e.objectType)),A.unshift(m);const u=(0,a.iH)([]);(0,o.wF)((async()=>{"Export"!=t.screenType?await p.execute((async()=>{const e=A.filter((e=>null!=e.deployParameters&&0!=e.deployParameters.gitServiceRepoId)).map((e=>e.deployParameters.gitServiceRepoId)).filter(((e,n,t)=>t.indexOf(e)==n));if(0==e.length)return;const n=await d.checkRepoHasService(e);u.value=n,f.value.stepper.step=1}),{loading:!0}):f.value.stepper.step=1}));const f=(0,a.iH)({selectedModules:[],moduleSelectionState:{},modulesChanged:!1,selectedAssets:[],assetSelectionState:{},stepper:{step:0,isTabValid:!1}});function b(){f.value.stepper.isTabValid&&f.value.stepper.step<3&&(f.value.stepper.step++,f.value.stepper.isTabValid=!1)}function v(){f.value.stepper.step>1&&(f.value.stepper.step--,f.value.stepper.isTabValid=!1)}function y(){"Deploy"==t.screenType?function(){const e=Array();f.value.selectedAssets.forEach((n=>{const t=Array();n.state.checked&&(n.children.forEach((e=>{"module"!=e.type&&"application"!=e.type&&"folder"!=e.type&&e.state.checked&&t.push({id:e.ID,name:c.getFileFullname(e),type:c.getItemType(e),path:"/",ver:e.version})})),e.push({deployType:"application"==n.type?"application":"module",deployObject:{ID:n.ID,name:n.name},deployItems:t,environment:{type:"gitlab",params:{repoId:n.deployParameters.gitServiceRepoId,productRepoId:m.deployParameters.gitProductRepoId,jobName:m.deployParameters.jobName,commitServiceId:m.deployParameters.commitServiceId}},dropServiceDb:!0}))})),p.execute((async()=>{await d.createDeployJobs(e),n("close")}),{loading:!0})}():"Export"==t.screenType&&console.error("Export Job!!!")}return(e,n)=>((0,o.wg)(),(0,o.iD)("div",Ze,[(0,o.Wm)(P,{step:f.value.stepper.step},null,8,["step"]),1==f.value.stepper.step?((0,o.wg)(),(0,o.j4)(J,{key:0,"deploy-screen-props":f.value,items:(0,a.SU)(A),reposServiceStatus:u.value},null,8,["deploy-screen-props","items","reposServiceStatus"])):(0,o.kq)("v-if",!0),2==f.value.stepper.step?((0,o.wg)(),(0,o.j4)(ye,{key:1,"deploy-screen-props":f.value,reposServiceStatus:u.value},null,8,["deploy-screen-props","reposServiceStatus"])):(0,o.kq)("v-if",!0),3==f.value.stepper.step?((0,o.wg)(),(0,o.j4)(Ve,{key:2,"deploy-screen-props":f.value},null,8,["deploy-screen-props"])):(0,o.kq)("v-if",!0),1!=f.value.stepper.step?((0,o.wg)(),(0,o.iD)("div",{key:3,class:"previous-button",onClick:v})):(0,o.kq)("v-if",!0),1!=f.value.stepper.step?((0,o.wg)(),(0,o.iD)("span",{key:4,class:"previous-button-text",onClick:v},"Previous")):(0,o.kq)("v-if",!0),3==f.value.stepper.step?((0,o.wg)(),(0,o.iD)("div",{key:5,class:"default-button","data-v-33a93b5b":"",onClick:y})):(0,o.kq)("v-if",!0),3==f.value.stepper.step?((0,o.wg)(),(0,o.iD)("span",{key:6,class:"finish-button-text",onClick:y}," FINISH ")):(0,o.kq)("v-if",!0),f.value.stepper.step<3?((0,o.wg)(),(0,o.iD)("div",{key:7,class:(0,s.normalizeClass)("default-button"+(f.value.stepper.isTabValid?"":" button-disabled")),"data-v-33a93b5b":"",onClick:b},null,2)):(0,o.kq)("v-if",!0),f.value.stepper.step<3?((0,o.wg)(),(0,o.iD)("span",{key:8,class:(0,s.normalizeClass)("next-button-text"+(f.value.stepper.isTabValid?"":" text-disabled")),onClick:b}," NEXT ",2)):(0,o.kq)("v-if",!0)]))}});var _e=t(3970),Me={};Me.styleTagTransform=B(),Me.setAttributes=C(),Me.insert=I().bind(null,"head"),Me.domAPI=v(),Me.insertStyleElement=h(),f()(_e.Z,Me),_e.Z&&_e.Z.locals&&_e.Z.locals;const Ne=(0,D.Z)(qe,[["__scopeId","data-v-15b91816"]])}}]);
//# sourceMappingURL=540.js.map