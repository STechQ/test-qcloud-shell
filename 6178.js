"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[6178],{76837:(e,n,o)=>{o.d(n,{Z:()=>s});var a=o(34663),i=o.n(a),t=o(7638),l=o.n(t)()(i());l.push([e.id,"\n.container[data-v-a883a476] {\n        padding: 32px 20px 20px;\n}\n.upload-logo-div[data-v-a883a476] {\n        padding-bottom: 32px;\n        border-bottom: 1px solid #D5D5D5;\n        margin: 0 -20px;\n        margin-bottom: 32px;\n        display: flex;\n        justify-content: center;\n        position: relative;\n}\n.hide-default-input[data-v-a883a476] {\n        width: 0.1px;\n        height: 0.1px;\n        opacity: 0;\n        overflow: hidden;\n        position: absolute;\n        z-index: -1;\n}\n.upload-logo[data-v-a883a476]{\n        /* width: 160px;\n        height: 160px; */\n        /* border: 1px solid #E3E3E3;\n        border-radius: 16px; */\n        font-size: 15px;\n        cursor: pointer;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n}\n.ide-logo[data-v-a883a476] {\n        width: 160px;\n        height: 160px;\n        opacity: 0.3;\n        border: 1px solid #E3E3E3;\n        border-radius: 16px;\n        padding: 10px;\n}\n.app-logo-preview[data-v-a883a476],\n    .sample-logo-preview[data-v-a883a476] {\n        width: 160px;\n        height: 160px;\n        border: 1px solid #BCBCBC;\n        border-radius: 16px;\n        object-fit: contain;\n}\n.remove-logo[data-v-a883a476] {\n        border-radius: 50%;\n        background: #EEEEEE;\n        color: #757575;\n        font-size: 20px;\n        position: absolute;\n        right: 165px;\n        top: -5px;\n        padding: 3px 10px;\n        cursor: pointer;\n        z-index: 2;\n}\n.hover-item[data-v-a883a476] {\n        position: absolute;\n        background: #E3E3E3 0% 0% no-repeat padding-box;\n        border-radius: 16px;\n        opacity: 0;\n        width: 160px;\n        height: 160px;\n        cursor: pointer;\n        visibility: hidden;\n        z-index: 1;\n}\n.upload-logo:hover .hover-item[data-v-a883a476] {\n        visibility: visible;\n        opacity: 0.4;\n        transition: visibility 0s, opacity 0.1s ease-in-out;\n}\n.hover-item-text[data-v-a883a476] {\n        position: absolute;\n        z-index: 2;\n        font: normal normal normal 18px/24px Roboto;\n        color: #212121;\n        visibility: hidden;\n        font-size: 14px;\n        font-weight: 500;\n}\n.upload-logo:hover .hover-item-text[data-v-a883a476] {\n        visibility: visible;\n}\n.sample-logo-preview[data-v-a883a476] {\n        padding: 20px;\n}\n.sample-logo[data-v-a883a476]:not(:nth-child(4n)) {\n        margin-right: 9px;\n}\n.sample-logo[data-v-a883a476] {\n        padding: 22px;\n}\n.sample-logo[data-v-a883a476]:hover {\n        background: #F5F5F5;\n        border-radius: 8px;\n}\n.buttons-div[data-v-a883a476] {\n        display: flex;\n        justify-content: end;\n        margin-top: 52px;\n}\n.cancel-button[data-v-a883a476] {\n        font-weight: 500;\n        font-size: 16px;\n        text-align: center;\n        color: #757575;\n        display: flex;\n        align-items: center;\n        padding: 8px 16px;\n        border-radius: 4px;\n        margin-right: 4px;\n        border: none;\n        background: transparent;\n}\n.save-button[data-v-a883a476] {\n        font-weight: 500;\n        font-size: 16px;\n        text-align: center;\n        color: #FFFFFF;\n        background: #151233;\n        display: flex;\n        align-items: center;\n        padding: 8px 16px;\n        border-radius: 4px;\n        border: none;\n}\n.save-button[data-v-a883a476]:disabled {\n        color: #757575;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/components/dialogs/appLogoDialog.vue"],names:[],mappings:";AA+HI;QACI,uBAAuB;AAC3B;AACA;QACI,oBAAoB;QACpB,gCAAgC;QAChC,eAAe;QACf,mBAAmB;QACnB,aAAa;QACb,uBAAuB;QACvB,kBAAkB;AAEtB;AACA;QACI,YAAY;QACZ,aAAa;QACb,UAAU;QACV,gBAAgB;QAChB,kBAAkB;QAClB,WAAW;AACf;AACA;QACI;wBACgB;QAChB;8BACsB;QACtB,eAAe;QACf,eAAe;QACf,aAAa;QACb,uBAAuB;QACvB,mBAAmB;AACvB;AACA;QACI,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,yBAAyB;QACzB,mBAAmB;QACnB,aAAa;AAEjB;AACA;;QAEI,YAAY;QACZ,aAAa;QACb,yBAAyB;QACzB,mBAAmB;QACnB,mBAAmB;AAEvB;AACA;QACI,kBAAkB;QAClB,mBAAmB;QACnB,cAAc;QACd,eAAe;QACf,kBAAkB;QAClB,YAAY;QACZ,SAAS;QACT,iBAAiB;QACjB,eAAe;QACf,UAAU;AACd;AACA;QACI,kBAAkB;QAClB,+CAA+C;QAC/C,mBAAmB;QACnB,UAAU;QACV,YAAY;QACZ,aAAa;QACb,eAAe;QACf,kBAAkB;QAClB,UAAU;AACd;AAEA;QACI,mBAAmB;QACnB,YAAY;QACZ,mDAAmD;AACvD;AAEA;QACI,kBAAkB;QAClB,UAAU;QACV,2CAA2C;QAC3C,cAAc;QACd,kBAAkB;QAClB,eAAe;QACf,gBAAgB;AACpB;AACA;QACI,mBAAmB;AACvB;AACA;QACI,aAAa;AACjB;AACA;QACI,iBAAiB;AACrB;AACA;QACI,aAAa;AACjB;AACA;QACI,mBAAmB;QACnB,kBAAkB;AACtB;AACA;QACI,aAAa;QACb,oBAAoB;QACpB,gBAAgB;AACpB;AACA;QACI,gBAAgB;QAChB,eAAe;QACf,kBAAkB;QAClB,cAAc;QACd,aAAa;QACb,mBAAmB;QACnB,iBAAiB;QACjB,kBAAkB;QAClB,iBAAiB;QACjB,YAAY;QACZ,uBAAuB;AAC3B;AACA;QACI,gBAAgB;QAChB,eAAe;QACf,kBAAkB;QAClB,cAAc;QACd,mBAAmB;QACnB,aAAa;QACb,mBAAmB;QACnB,iBAAiB;QACjB,kBAAkB;QAClB,YAAY;AAChB;AACA;QACI,cAAc;AAClB",sourcesContent:['<template>\n    <div class="container">\n        <div class="upload-logo-div">\n            <input type="file" name="appLogo" id="appLogo" class="hide-default-input" @change="getLogo($event)" accept=".jpg, .jpeg, .png, .svg"/>\n            <label for="appLogo" class="upload-logo">\n                <div class="hover-item"></div>\n                <span class="hover-item-text">Click to choose image</span>\n                <img v-if="!doesHaveLogo && !isLogoUploaded && !isSampleLogoSelected" src="../../../../images/ide5-logo.svg" class="ide-logo" alt="" />\n                <img v-if="doesHaveLogo && !isLogoUploaded && !isSampleLogoSelected" :style="{\'padding\' : props.app?.logoInfo?.path.split(\'/\')[2] == \'plateauSampleLogo.svg\' ? \'20px\' : \'\'}" \n                :src="`${props.app?.logoInfo?.hostUrl}${props.app?.logoInfo?.path}?c=${props.app?.logoInfo?.updateDate}`" class="app-logo-preview"/>\n                <img v-if="isLogoUploaded" :src="selectedLogo" class="app-logo-preview"/>\n                <img v-if="isSampleLogoSelected" :src="selectedLogo" class="sample-logo-preview"/>\n            </label>\n            <div v-if="!(!doesHaveLogo && !isLogoUploaded && !isSampleLogoSelected)" class="remove-logo" @click="removeLogo()">\n                <i class="mdi mdi-delete"></i>\n            </div>\n        </div>\n        <div>\n            <img class="sample-logo" @click="chooseSampleLogo($event)" src="../../../../images/sampleAppLogos/planet-ringed.svg"/>\n            <img class="sample-logo" @click="chooseSampleLogo($event)" src="../../../../images/sampleAppLogos/puzzle.svg"/>\n            <img class="sample-logo" @click="chooseSampleLogo($event)" src="../../../../images/sampleAppLogos/house-building.svg"/>\n            <img class="sample-logo" @click="chooseSampleLogo($event)" src="../../../../images/sampleAppLogos/car.svg"/>\n            <img class="sample-logo" @click="chooseSampleLogo($event)" src="../../../../images/sampleAppLogos/ice-cream.svg"/>\n            <img class="sample-logo" @click="chooseSampleLogo($event)" src="../../../../images/sampleAppLogos/gears.svg"/>\n            <img class="sample-logo" @click="chooseSampleLogo($event)" src="../../../../images/sampleAppLogos/sack-dollar.svg"/>\n            <img class="sample-logo" @click="chooseSampleLogo($event)" src="../../../../images/sampleAppLogos/robot.svg"/>\n        </div>\n        <StudioInfo style="margin:32px 0px 52px" :infoText="\'This app image will be displayed as an app logo on mobile and favicon on web browser.\'"></StudioInfo>\n        <div class="buttons-div">\n            <button class="cancel-button" @click="close()">Cancel</button>\n            <button :disabled="!isLogoUploaded && !isSampleLogoSelected" id="sendButton" class="save-button" @click="save()">SAVE</button>\n        </div>\n        \n    </div>\n</template>\n\n<script setup lang="ts">\n    import { computed, ref } from "vue";\n    import { container } from "../../../../domain/core/diContainer";\n    import { IViewModel } from "../../../../domain/viewModel/IViewModel";\n    import { INotification } from "../../../../domain/presentation/INotification";\n    import { IApplication } from "../../../../domain/model/models"\n    import { IUseCaseExecutor } from "../../../../domain/useCase/IUseCaseExecutor";\n    import { IApplicationUseCase } from "../../../../domain/useCase/IApplicationUseCase";\n    import { IUpdateApplicationRequest } from "../../../../../../common/qCloudTemp/symDtoObjects";\n    import StudioInfo from "../ui/studioInfoComp.vue"\n\n    interface IAppLogo {\n        app?: IApplication;\n    }\n    const executor = container.resolve<IUseCaseExecutor>(IUseCaseExecutor);\n    const applicationUseCase = container.resolve<IApplicationUseCase>(IApplicationUseCase);\n    const notification = container.resolve<INotification>(INotification);\n\n    const props = defineProps<IAppLogo>();\n    const emit = defineEmits(["close"]);\n    \n    const isLogoUploaded = ref(false);\n    const isSampleLogoSelected = ref(false);\n    const selectedLogo = ref("");\n    const selectedLogoRequest = ref<IUpdateApplicationRequest["logo"]>();\n    const doesHaveLogo = ref(props.app!.logoInfo ? true : false);\n\n    function close() {\n        emit("close");\n    }\n    function getLogo (event: Event) {\n        let file = (document.getElementById("appLogo")! as HTMLInputElement).files;\n        if(file![0].size > 1_000_000) { //1MB //OLD: 100000\n            event.preventDefault();\n            notification.showNotification({type: "warning", text: "File size cannnot be bigger than 1MB"});\n        }\n        else {\n            toBase64fromUpload(file![0]);\n            isLogoUploaded.value = true;\n            isSampleLogoSelected.value = false;\n            \n        }\n    }\n    function toBase64fromUpload(file: File) {\n        let reader = new FileReader();\n        let logo: string | undefined = undefined;\n        reader.readAsDataURL(file); //convert to base64\n        reader.onload = function() {\n            logo = reader.result!.toString();\n            selectedLogo.value = logo;\n            selectedLogoRequest.value = { dataBase64: logo.split(",")[1], contentType: file.type as any, fullName: file.name };\n        }\n    }\n    function chooseSampleLogo (event : Event) {\n        isLogoUploaded.value = false;\n        isSampleLogoSelected.value = true;\n        let sampleLogoSrc = (event.target as HTMLImageElement).src;\n        toBase64fromSample(sampleLogoSrc);\n    }\n    function toBase64fromSample(imgSrc: string) {\n        var xhr = new XMLHttpRequest();\n        xhr.onload = function() {\n            var reader = new FileReader();\n            reader.onloadend = function() {\n                const logo = reader.result!.toString();\n                selectedLogo.value = logo;\n                selectedLogoRequest.value = { dataBase64: logo.split(",")[1], contentType: "image/svg+xml", fullName: "plateauSampleLogo.svg" };\n            }\n            reader.readAsDataURL(xhr.response);\n        };\n        xhr.open(\'GET\', imgSrc);\n        xhr.responseType = \'blob\';\n        xhr.send();\n    }\n    function removeLogo() {\n        (document.getElementById("appLogo")! as HTMLInputElement).value = "";\n        isLogoUploaded.value = false;\n        isSampleLogoSelected.value = false;\n        selectedLogo.value = "";\n        doesHaveLogo.value = false;\n    }\n    async function save() {\n        await executor.execute(async () => {\n            emit("close");\n            await applicationUseCase.updateApplication({ ID: props.app!.ID, logo: selectedLogoRequest.value, updateReason: "userUpdate" });\n        }, { loading: false })\n        \n    }\n<\/script>\n\n<style scoped>\n    .container {\n        padding: 32px 20px 20px;\n    }\n    .upload-logo-div {\n        padding-bottom: 32px;\n        border-bottom: 1px solid #D5D5D5;\n        margin: 0 -20px;\n        margin-bottom: 32px;\n        display: flex;\n        justify-content: center;\n        position: relative;\n\n    }\n    .hide-default-input {\n        width: 0.1px;\n        height: 0.1px;\n        opacity: 0;\n        overflow: hidden;\n        position: absolute;\n        z-index: -1;\n    }\n    .upload-logo{\n        /* width: 160px;\n        height: 160px; */\n        /* border: 1px solid #E3E3E3;\n        border-radius: 16px; */\n        font-size: 15px;\n        cursor: pointer;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n    .ide-logo {\n        width: 160px;\n        height: 160px;\n        opacity: 0.3;\n        border: 1px solid #E3E3E3;\n        border-radius: 16px;\n        padding: 10px;\n\n    }\n    .app-logo-preview,\n    .sample-logo-preview {\n        width: 160px;\n        height: 160px;\n        border: 1px solid #BCBCBC;\n        border-radius: 16px;\n        object-fit: contain;\n\n    }\n    .remove-logo {\n        border-radius: 50%;\n        background: #EEEEEE;\n        color: #757575;\n        font-size: 20px;\n        position: absolute;\n        right: 165px;\n        top: -5px;\n        padding: 3px 10px;\n        cursor: pointer;\n        z-index: 2;\n    }\n    .hover-item {\n        position: absolute;\n        background: #E3E3E3 0% 0% no-repeat padding-box;\n        border-radius: 16px;\n        opacity: 0;\n        width: 160px;\n        height: 160px;\n        cursor: pointer;\n        visibility: hidden;\n        z-index: 1;\n    }\n\n    .upload-logo:hover .hover-item {\n        visibility: visible;\n        opacity: 0.4;\n        transition: visibility 0s, opacity 0.1s ease-in-out;\n    }\n\n    .hover-item-text {\n        position: absolute;\n        z-index: 2;\n        font: normal normal normal 18px/24px Roboto;\n        color: #212121;\n        visibility: hidden;\n        font-size: 14px;\n        font-weight: 500;\n    }\n    .upload-logo:hover .hover-item-text {\n        visibility: visible;\n    }\n    .sample-logo-preview {\n        padding: 20px;\n    }\n    .sample-logo:not(:nth-child(4n)) {\n        margin-right: 9px;\n    }\n    .sample-logo {\n        padding: 22px;\n    }\n    .sample-logo:hover {\n        background: #F5F5F5;\n        border-radius: 8px;\n    }\n    .buttons-div {\n        display: flex;\n        justify-content: end;\n        margin-top: 52px;\n    }\n    .cancel-button {\n        font-weight: 500;\n        font-size: 16px;\n        text-align: center;\n        color: #757575;\n        display: flex;\n        align-items: center;\n        padding: 8px 16px;\n        border-radius: 4px;\n        margin-right: 4px;\n        border: none;\n        background: transparent;\n    }\n    .save-button {\n        font-weight: 500;\n        font-size: 16px;\n        text-align: center;\n        color: #FFFFFF;\n        background: #151233;\n        display: flex;\n        align-items: center;\n        padding: 8px 16px;\n        border-radius: 4px;\n        border: none;\n    }\n    .save-button:disabled {\n        color: #757575;\n    }\n</style>'],sourceRoot:""}]);const s=l},46178:(e,n,o)=>{o.r(n),o.d(n,{default:()=>G});var a=o(71093),i=o(66190),t=o(54036);const l=o.p+"9b2134c04ac7d2b994e21b4b21531660.svg",s=o.p+"6ee90003728656acb95ae124ed83e022.svg",p=o.p+"95b5905c0a432203f8772dd8aac53073.svg",d=o.p+"b9f9515cb9290e0b83e3dc2cf783058e.svg",A=o.p+"4c001015d3d64f3989c05bee1bc9be48.svg",r=o.p+"60083f53a2d4459bdfb300be05fbaf95.svg",c=o.p+"121ccdbf5d6dd09d8284e11b6500f7da.svg",g=o.p+"fc650b396925e3a57a5bba583ed4fa23.svg";var m=o(73843),u=o(5627),v=o(50419),C=o(83487),f=o(19508),B=o(74720);const b=e=>((0,a.dD)("data-v-a883a476"),e=e(),(0,a.Cn)(),e),x={class:"container"},h={class:"upload-logo-div"},Q={for:"appLogo",class:"upload-logo"},L=b((()=>(0,a._)("div",{class:"hover-item"},null,-1))),y=b((()=>(0,a._)("span",{class:"hover-item-text"},"Click to choose image",-1))),k={key:0,src:t.Z,class:"ide-logo",alt:""},I=["src"],w=["src"],E=["src"],S=[b((()=>(0,a._)("i",{class:"mdi mdi-delete"},null,-1)))],U={class:"buttons-div"},D=["disabled"],z=(0,a.aZ)({__name:"appLogoDialog",props:{app:null},emits:["close"],setup(e,{emit:n}){const o=e,t=u.nC.resolve(C.y),b=u.nC.resolve(f.h),z=u.nC.resolve(v.L),_=(0,m.iH)(!1),F=(0,m.iH)(!1),R=(0,m.iH)(""),j=(0,m.iH)(),T=(0,m.iH)(!!o.app.logoInfo);function Y(e){var n,o;_.value=!1,F.value=!0,n=e.target.src,(o=new XMLHttpRequest).onload=function(){var e=new FileReader;e.onloadend=function(){const n=e.result.toString();R.value=n,j.value={dataBase64:n.split(",")[1],contentType:"image/svg+xml",fullName:"plateauSampleLogo.svg"}},e.readAsDataURL(o.response)},o.open("GET",n),o.responseType="blob",o.send()}return(e,m)=>{var u,v,C,f,Z,q,H,$;return(0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("div",h,[(0,a._)("input",{type:"file",name:"appLogo",id:"appLogo",class:"hide-default-input",onChange:m[0]||(m[0]=e=>function(e){let n=document.getElementById("appLogo").files;n[0].size>1e6?(e.preventDefault(),z.showNotification({type:"warning",text:"File size cannnot be bigger than 1MB"})):(function(e){let n,o=new FileReader;o.readAsDataURL(e),o.onload=function(){n=o.result.toString(),R.value=n,j.value={dataBase64:n.split(",")[1],contentType:e.type,fullName:e.name}}}(n[0]),_.value=!0,F.value=!1)}(e)),accept:".jpg, .jpeg, .png, .svg"},null,32),(0,a._)("label",Q,[L,y,T.value||_.value||F.value?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("img",k)),!T.value||_.value||F.value?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("img",{key:1,style:(0,i.normalizeStyle)({padding:"plateauSampleLogo.svg"==(null===(v=null===(u=o.app)||void 0===u?void 0:u.logoInfo)||void 0===v?void 0:v.path.split("/")[2])?"20px":""}),src:`${null===(f=null===(C=o.app)||void 0===C?void 0:C.logoInfo)||void 0===f?void 0:f.hostUrl}${null===(q=null===(Z=o.app)||void 0===Z?void 0:Z.logoInfo)||void 0===q?void 0:q.path}?c=${null===($=null===(H=o.app)||void 0===H?void 0:H.logoInfo)||void 0===$?void 0:$.updateDate}`,class:"app-logo-preview"},null,12,I)),_.value?((0,a.wg)(),(0,a.iD)("img",{key:2,src:R.value,class:"app-logo-preview"},null,8,w)):(0,a.kq)("v-if",!0),F.value?((0,a.wg)(),(0,a.iD)("img",{key:3,src:R.value,class:"sample-logo-preview"},null,8,E)):(0,a.kq)("v-if",!0)]),T.value||_.value||F.value?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"remove-logo",onClick:m[1]||(m[1]=e=>(document.getElementById("appLogo").value="",_.value=!1,F.value=!1,R.value="",void(T.value=!1)))},S)):(0,a.kq)("v-if",!0)]),(0,a._)("div",null,[(0,a._)("img",{class:"sample-logo",onClick:m[2]||(m[2]=e=>Y(e)),src:l}),(0,a._)("img",{class:"sample-logo",onClick:m[3]||(m[3]=e=>Y(e)),src:s}),(0,a._)("img",{class:"sample-logo",onClick:m[4]||(m[4]=e=>Y(e)),src:p}),(0,a._)("img",{class:"sample-logo",onClick:m[5]||(m[5]=e=>Y(e)),src:d}),(0,a._)("img",{class:"sample-logo",onClick:m[6]||(m[6]=e=>Y(e)),src:A}),(0,a._)("img",{class:"sample-logo",onClick:m[7]||(m[7]=e=>Y(e)),src:r}),(0,a._)("img",{class:"sample-logo",onClick:m[8]||(m[8]=e=>Y(e)),src:c}),(0,a._)("img",{class:"sample-logo",onClick:m[9]||(m[9]=e=>Y(e)),src:g})]),(0,a.Wm)(B.Z,{style:{margin:"32px 0px 52px"},infoText:"This app image will be displayed as an app logo on mobile and favicon on web browser."},null,8,["infoText"]),(0,a._)("div",U,[(0,a._)("button",{class:"cancel-button",onClick:m[10]||(m[10]=e=>{n("close")})},"Cancel"),(0,a._)("button",{disabled:!_.value&&!F.value,id:"sendButton",class:"save-button",onClick:m[11]||(m[11]=e=>async function(){await t.execute((async()=>{n("close"),await b.updateApplication({ID:o.app.ID,logo:j.value,updateReason:"userUpdate"})}),{loading:!1})}())},"SAVE",8,D)])])}}});var _=o(17450),F=o.n(_),R=o(29530),j=o.n(R),T=o(16199),Y=o.n(T),Z=o(40458),q=o.n(Z),H=o(62916),$=o.n(H),M=o(92165),N=o.n(M),V=o(76837),W={};W.styleTagTransform=N(),W.setAttributes=q(),W.insert=Y().bind(null,"head"),W.domAPI=j(),W.insertStyleElement=$(),F()(V.Z,W),V.Z&&V.Z.locals&&V.Z.locals;const G=(0,o(32525).Z)(z,[["__scopeId","data-v-a883a476"]])}}]);
//# sourceMappingURL=6178.js.map?ver=0.0.318_1716972287594