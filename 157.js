"use strict";(self.webpackChunkqcloud_shell=self.webpackChunkqcloud_shell||[]).push([[157],{9157:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var i=a(2068),o=a(9045),n=a(1407),l=a(3734),r=a(6595),c=a(7554),s=a(3900),d=a(664),p=a(7422);const u=["onClick"],m=["onClick"],v=(0,i.aZ)({__name:"attachModuleToApp",emits:["close"],setup(e,{emit:t}){const a=l.nC.resolve(p.J),v=l.nC.resolve(d.y),w=l.nC.resolve(r.w),D=l.nC.resolve(c._),g=l.nC.resolve(s.c),h=(0,n.iH)([]),I=(0,n.iH)(["name","description","relatedAppNames","createDate","createdBy","actions"]),f=(0,n.iH)({filterable:!0,perPage:5,perPageValues:[],headings:{name:w.get("moduleName"),description:w.get("description"),relatedAppNames:w.get("relatedApplications"),createDate:w.get("createDate"),createdBy:w.get("createdBy"),actions:""},sortIcon:{base:"mdi",is:"mdi mdi-unfold-less-horizontal",up:"mdi mdi-arrow-up",down:"mdi mdi-arrow-down"},texts:{count:""}}),A={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};function y(e){var t;const i=a.studio.appId;return!!(null===(t=e.relatedApplications)||void 0===t?void 0:t.some((e=>e.applicationID==i)))}return v.execute((async()=>{const e=await D.listModules(),t={};a.apps.forEach((e=>t[e.ID]=e.name)),e.forEach((e=>{const a=e.relatedApplications.map((e=>t[e.applicationID]));e.relatedAppNames=a.join(", ")})),h.value=e}),{loading:!0}),(e,t)=>{const n=(0,i.up)("v-client-table");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{ref:"table",data:h.value,columns:I.value,options:f.value},{createDate:(0,i.w5)((e=>[(0,i._)("span",null,(0,o.toDisplayString)(new Intl.DateTimeFormat("tr-TR",A).format(new Date(e.row.createDate))),1)])),actions:(0,i.w5)((e=>[y(e.row)?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t=>{return i=e.row,void v.execute((async()=>{const e=a.studio.appId;await g.detachModuleFromApplication(i,e);const t=h.value.find((e=>e.ID==i.ID));t.relatedApplications=t.relatedApplications.filter((t=>t.applicationID!=e))}),{loading:!0});var i}},"Remove",8,u)):((0,i.wg)(),(0,i.iD)("button",{key:1,onClick:t=>{return i=e.row,void v.execute((async()=>{const e=a.studio.appId;await g.attachModuletoApplication(i,e),h.value.find((e=>e.ID==i.ID)).relatedApplications.push({applicationID:e})}),{loading:!0});var i}},"Add",8,m))])),_:1},8,["data","columns","options"])])}}})}}]);
//# sourceMappingURL=157.js.map