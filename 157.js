"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[157],{49157:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var i=a(62068),o=a(49045),n=a(81407),l=a(3734),r=a(86595),c=a(57554),s=a(33900),p=a(80664),d=a(67422);const u=["onClick"],m=["onClick"],w=(0,i.aZ)({__name:"attachModuleToApp",emits:["close"],setup(e,{emit:t}){const a=l.nC.resolve(d.J),w=l.nC.resolve(p.y),v=l.nC.resolve(r.w),D=l.nC.resolve(c._),g=l.nC.resolve(s.c),h=(0,n.iH)([]),A=(0,n.iH)(["name","description","relatedAppNames","createDate","createdBy","actions"]),I=(0,n.iH)({filterable:!0,perPage:5,perPageValues:[],headings:{name:v.get("moduleName"),description:v.get("description"),relatedAppNames:v.get("relatedApplications"),createDate:v.get("createDate"),createdBy:v.get("createdBy"),actions:""},sortIcon:{base:"mdi",is:"mdi mdi-unfold-less-horizontal",up:"mdi mdi-arrow-up",down:"mdi mdi-arrow-down"},texts:{count:""}}),y={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};function f(){w.execute((async()=>{const e=await D.listModules(),t={};a.apps.forEach((e=>t[e.ID]=e.name)),e.forEach((e=>{const a=e.relatedApplications.map((e=>t[e.applicationID]));e.relatedAppNames=a.join(", ")})),h.value=e}),{loading:!0})}function C(e){var t;const i=a.studio.appId;return!!(null===(t=e.relatedApplications)||void 0===t?void 0:t.some((e=>e.applicationID==i)))}return f(),(e,t)=>{const n=(0,i.up)("v-client-table");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{ref:"table",data:h.value,columns:A.value,options:I.value},{createDate:(0,i.w5)((e=>[(0,i._)("span",null,(0,o.toDisplayString)(new Intl.DateTimeFormat("tr-TR",y).format(new Date(e.row.createDate))),1)])),relatedAppNames:(0,i.w5)((e=>[(0,i._)("span",null,(0,o.toDisplayString)(e.row.relatedAppNames),1)])),actions:(0,i.w5)((e=>[C(e.row)?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t=>{return i=e.row,void w.execute((async()=>{const e=a.studio.appId;await g.detachModuleFromApplication(i,e);const t=h.value.find((e=>e.ID==i.ID));t.relatedApplications=t.relatedApplications.filter((t=>t.applicationID!=e)),f()}),{loading:!0});var i}},"Remove",8,u)):((0,i.wg)(),(0,i.iD)("button",{key:1,onClick:t=>{return i=e.row,void w.execute((async()=>{const e=a.studio.appId;await g.attachModuletoApplication(i,e),h.value.find((e=>e.ID==i.ID)).relatedApplications.push({applicationID:e}),f()}),{loading:!0});var i}},"Add",8,m))])),_:1},8,["data","columns","options"])])}}})}}]);
//# sourceMappingURL=157.js.map