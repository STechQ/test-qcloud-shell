"use strict";(this.webpackChunkqcloud_shell=this.webpackChunkqcloud_shell||[]).push([[6516],{73733:(e,t,M)=>{M.d(t,{Z:()=>s});var o=M(34663),l=M.n(o),n=M(7638),i=M.n(n)()(l());i.push([e.id,"\n.disabled[data-v-767550ad] {\n  opacity: 0.6;\n}\n","",{version:3,sources:["webpack://./src/presentation/vue3/editors/fileEditor.vue"],names:[],mappings:";AAyEA;EACE,YAAY;AACd",sourcesContent:['<script setup lang="ts">\nimport { onBeforeUnmount, onMounted, ref } from "vue";\nimport { IFileEditorProps } from "../../../domain/objects/editors/IFileEditor";\nimport MonacoEditor from "./monacoEditor.vue";\n\ninterface IProps {\n  functions: IFileEditorProps["functions"];\n  callbacks: IFileEditorProps["callbacks"];\n}\nconst props = defineProps<IProps>();\nconst editor = ref();\nconst readOnly = ref(true);\n\n\nprops.functions.getModel = async () => {\n  const scrollTop = editor.value.getScrollTop();\n  const selections = editor.value.getSelections();\n  const width = editor.value.style.width;\n  const height = editor.value.style.height;\n  const modelvalue = editor.value.getCodeValue(); \n  return { model: modelvalue, state: { scrollTop, selections, width, height, checkout: readOnly.value } };\n};\nprops.functions.setModel = async (model, state, modelLang) => {\n  //model\n  editor.value.setMonacoLang(modelLang);\n  \n  //state\n  editor.value.style.width = state.width ? state.width : "98%";\n  editor.value.style.height = state.height ? state.height : "90%";\n  if(state.scrollTop) editor.value.setScrollTop?.(state.scrollTop);\n  if(state.selections) editor.value.setSelections?.(state.selections);\n  readOnly.value = state.checkout ? !state.checkout : true;\n  editor.value.style.resize = "none";\n  editor.value.style.outline = "none";\n  editor.value.setCodeValue(model);\n};\nprops.functions.insertText = async (text, position) => {\n  editor.value.insertText({ text: text });\n  props.callbacks.modified({ model: true });\n};\nconst modified: Record<string, EventListenerOrEventListenerObject> = {\n  select: () => { props.callbacks.modified({ state: true }) },\n  scroll: () => { props.callbacks.modified({ state: true }) },\n  change: () => { props.callbacks.modified({ model: true }) },\n  keydown: (e: Event) => {\n    const event = e as KeyboardEvent;\n    const code = event.code.toLowerCase();\n    if (event.shiftKey || event.ctrlKey || code.startsWith("arrow")) {\n      return;\n    }\n    props.callbacks.modified({ model: true });\n  },\n  resize: () => { props.callbacks.modified({ state: true }) },\n  input: () => { props.callbacks.modified({ model: true }) },\n};\n\nconst watchTextArea = (attach: boolean) => {\n  const target = attach ? editor.value.$el.addEventListener : editor.value.$el.removeEventListener;\n  Object.keys(modified).forEach(key => target.call(editor.value.$el, key, modified[key]));\n};\n\nonMounted(() => {\n  watchTextArea(true);\n});\nonBeforeUnmount(() => {\n  watchTextArea(false);\n});\n\n<\/script>\n<template>\n  <MonacoEditor ref="editor" :class="{ disabled: readOnly }" @onCodePasted="props.callbacks.modified({ model: true })"  :isReadOnly="readOnly"/>\n</template>\n<style scoped>\n.disabled {\n  opacity: 0.6;\n}\n</style>'],sourceRoot:""}]);const s=i},14951:(e,t,M)=>{M.r(t),M.d(t,{default:()=>C});var o=M(71093),l=M(66190),n=M(73843),i=M(69700),s=M(38221);const a=(0,o.aZ)({__name:"monacoEditor",props:{lang:String,width:{type:[String,Number],default:"98%"},height:{type:[String,Number],default:"90%"},isReadOnly:{type:Boolean,default:!1}},emits:["onCodePasted"],setup(e,{expose:t,emit:M}){const a=e;let c;(0,o.bv)((()=>{s.Z.init().then((e=>{const t={automaticLayout:!0,readOnly:a.isReadOnly},M=e.editor.create(document.getElementById("editor"),t);e.editor.EditorOptions,c=()=>M,e.languages.typescript.typescriptDefaults.setCompilerOptions({moduleResolution:e.languages.typescript.ModuleResolutionKind.NodeJs,module:e.languages.typescript.ModuleKind.CommonJS})}))}));const d=()=>{c().onDidPaste((function(e){M("onCodePasted")}))};(0,o.ic)((()=>{d()}));const A=(0,o.Fl)((()=>{let{width:e,height:t}=a;return{width:e,height:t}}));return t({setMonacoLang:e=>{c()._modelData.model.setLanguage(e)},getCodeValue:()=>c().getValue(),setCodeValue:e=>{c().setValue(e)},setSelections:e=>{c().setSelections(e)},getSelections:()=>c().getSelections(),setScrollTop:e=>{c().setScrollTop(e)},getScrollTop:()=>c().getScrollTop(),insertText:e=>{const t=c();if(!t)return;var M=t.getPosition();const o=M.column,l=M.lineNumber;var n={identifier:{major:1,minor:1},range:new i.e6(l,o,l,o),text:e.text,forceMoveMarkers:!0};t.executeEdits("my-source",[n])},onPasteCode:d,style:A}),(0,o.YP)((()=>a.isReadOnly),(e=>{console.log("Watch props.isReadOnly function called with args:",e),c().updateOptions({readOnly:a.isReadOnly})})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",{id:"editor",style:(0,l.normalizeStyle)((0,n.SU)(A))},null,4))}}),c=a,d=(0,o.aZ)({__name:"fileEditor",props:{functions:null,callbacks:null},setup(e){const t=e,M=(0,n.iH)(),i=(0,n.iH)(!0);t.functions.getModel=async()=>{const e=M.value.getScrollTop(),t=M.value.getSelections(),o=M.value.style.width,l=M.value.style.height;return{model:M.value.getCodeValue(),state:{scrollTop:e,selections:t,width:o,height:l,checkout:i.value}}},t.functions.setModel=async(e,t,o)=>{var l,n,s,a;M.value.setMonacoLang(o),M.value.style.width=t.width?t.width:"98%",M.value.style.height=t.height?t.height:"90%",t.scrollTop&&(null===(n=(l=M.value).setScrollTop)||void 0===n||n.call(l,t.scrollTop)),t.selections&&(null===(a=(s=M.value).setSelections)||void 0===a||a.call(s,t.selections)),i.value=!t.checkout||!t.checkout,M.value.style.resize="none",M.value.style.outline="none",M.value.setCodeValue(e)},t.functions.insertText=async(e,o)=>{M.value.insertText({text:e}),t.callbacks.modified({model:!0})};const s={select:()=>{t.callbacks.modified({state:!0})},scroll:()=>{t.callbacks.modified({state:!0})},change:()=>{t.callbacks.modified({model:!0})},keydown:e=>{const M=e,o=M.code.toLowerCase();M.shiftKey||M.ctrlKey||o.startsWith("arrow")||t.callbacks.modified({model:!0})},resize:()=>{t.callbacks.modified({state:!0})},input:()=>{t.callbacks.modified({model:!0})}},a=e=>{const t=e?M.value.$el.addEventListener:M.value.$el.removeEventListener;Object.keys(s).forEach((e=>t.call(M.value.$el,e,s[e])))};return(0,o.bv)((()=>{a(!0)})),(0,o.Jd)((()=>{a(!1)})),(e,n)=>((0,o.wg)(),(0,o.j4)(c,{ref_key:"editor",ref:M,class:(0,l.normalizeClass)({disabled:i.value}),onOnCodePasted:n[0]||(n[0]=e=>t.callbacks.modified({model:!0})),isReadOnly:i.value},null,8,["class","isReadOnly"]))}});var A=M(17450),u=M.n(A),r=M(29530),D=M.n(r),g=M(16199),j=M.n(g),I=M(40458),w=M.n(I),y=M(62916),T=M.n(y),N=M(92165),p=M.n(N),z=M(73733),m={};m.styleTagTransform=p(),m.setAttributes=w(),m.insert=j().bind(null,"head"),m.domAPI=D(),m.insertStyleElement=T(),u()(z.Z,m),z.Z&&z.Z.locals&&z.Z.locals;const C=(0,M(32525).Z)(d,[["__scopeId","data-v-767550ad"]])},94748:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII="},6161:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},51096:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="}}]);
//# sourceMappingURL=6516.js.map?ver=0.0.319_1715331001907